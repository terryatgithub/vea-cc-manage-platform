(function(e){function t(t){for(var a,o,r=t[0],s=t[1],c=t[2],d=0,p=[];d<r.length;d++)o=r[d],n[o]&&p.push(n[o][0]),n[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(p.length)p.shift()();return l.push.apply(l,c||[]),i()}function i(){for(var e,t=0;t<l.length;t++){for(var i=l[t],a=!0,r=1;r<i.length;r++){var s=i[r];0!==n[s]&&(a=!1)}a&&(l.splice(t--,1),e=o(o.s=i[0]))}return e}var a={},n={app:0},l=[];function o(t){if(a[t])return a[t].exports;var i=a[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=a,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=s;l.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"02a2":function(e,t,i){"use strict";var a=i("bf73"),n=i.n(a);n.a},"0338":function(e,t,i){},"03c7":function(e,t,i){},"06ac":function(e,t,i){"use strict";var a=i("32ac"),n=i.n(a);n.a},"0704":function(e,t,i){},"0bf0":function(e,t,i){},"0c07":function(e,t,i){},"0e5e":function(e,t,i){},"101e":function(e,t,i){},1321:function(e,t,i){},"16d9":function(e,t,i){},1715:function(e,t,i){},"179f":function(e,t,i){"use strict";var a=i("6dce"),n=i.n(a);n.a},"181e":function(e,t,i){},1929:function(e,t,i){},"1e7d":function(e,t,i){},"257e":function(e,t,i){"use strict";var a=i("8437"),n=i.n(a);n.a},"28ea":function(e,t,i){},"2ac6":function(e,t,i){"use strict";var a=i("1929"),n=i.n(a);n.a},"2de8":function(e,t,i){"use strict";var a=i("b170"),n=i.n(a);n.a},"2ee1":function(e,t,i){},"2f22":function(e,t,i){"use strict";var a=i("62e4"),n=i.n(a);n.a},"2fa7":function(e,t,i){},"300e":function(e,t,i){},3062:function(e,t,i){},"32a2":function(e,t,i){"use strict";var a=i("cc8c"),n=i.n(a);n.a},"32ac":function(e,t,i){},"38b6":function(e,t,i){"use strict";var a=i("efa1"),n=i.n(a);n.a},"3a0a":function(e,t,i){},"3a19":function(e,t,i){},"3e27":function(e,t,i){"use strict";var a=i("03c7"),n=i.n(a);n.a},"41fc":function(e,t,i){},"424c":function(e,t,i){},"43de":function(e,t,i){},"45bc":function(e,t,i){"use strict";var a=i("e2bc"),n=i.n(a);n.a},4673:function(e,t,i){"use strict";var a=i("7463"),n=i.n(a);n.a},"472b":function(e,t,i){},"4e07":function(e,t,i){},5045:function(e,t,i){"use strict";var a=i("424c"),n=i.n(a);n.a},"561d":function(e,t,i){"use strict";var a=i("41fc"),n=i.n(a);n.a},5667:function(e,t,i){"use strict";var a=i("7ad3"),n=i.n(a);n.a},"56d7":function(e,t,i){"use strict";i.r(t);var a={};i.r(a),i.d(a,"uploadImage",function(){return Jh}),i.d(a,"uploadLayoutFile",function(){return Hh}),i.d(a,"uploadApk",function(){return Gh}),i.d(a,"uploadZip",function(){return Kh});var n={};i.r(n),i.d(n,"getDepts",function(){return Yh}),i.d(n,"userConfigMenuInfo",function(){return Xh}),i.d(n,"userConfigPageList",function(){return Zh}),i.d(n,"getNotRolesByUserId",function(){return Qh}),i.d(n,"getRolesByUserId",function(){return em}),i.d(n,"saveUserRoles",function(){return tm}),i.d(n,"userConfigBusinessType",function(){return im}),i.d(n,"userConfigEdit",function(){return am}),i.d(n,"getDictCheckedByUserId",function(){return nm}),i.d(n,"userConfigSave",function(){return lm}),i.d(n,"saveProfession",function(){return om}),i.d(n,"userConfigDelete",function(){return rm}),i.d(n,"getDictList",function(){return sm}),i.d(n,"SaveDictionary",function(){return cm}),i.d(n,"DeleteDict",function(){return um}),i.d(n,"getDictCategoryList",function(){return dm}),i.d(n,"SaveDictCategory",function(){return pm}),i.d(n,"getLoginLogList",function(){return hm}),i.d(n,"getSysMenuList",function(){return mm}),i.d(n,"saveSysMenu",function(){return fm}),i.d(n,"editSysMenu",function(){return bm}),i.d(n,"getNotMenuByRunId",function(){return gm}),i.d(n,"getMenuByRunId",function(){return vm}),i.d(n,"saveMenuRun",function(){return ym}),i.d(n,"getMenuInfo",function(){return wm}),i.d(n,"deleteMenuById",function(){return Im}),i.d(n,"modifyPwd",function(){return Tm});var l={};i.r(l),i.d(l,"getRoleList",function(){return km}),i.d(l,"userRoleList",function(){return Sm}),i.d(l,"saveRoleData",function(){return Cm}),i.d(l,"deleteRole",function(){return _m}),i.d(l,"getPoliciesAndCrowds",function(){return Fm}),i.d(l,"getCrowdOfPolicy",function(){return xm}),i.d(l,"setCrowdAuthOfRole",function(){return Dm}),i.d(l,"getAuthList",function(){return Pm}),i.d(l,"saveAuthOfRole",function(){return $m}),i.d(l,"updateSeq",function(){return Rm}),i.d(l,"getRoleDetailById",function(){return Nm});var o={};i.r(o),i.d(o,"sysDeptPageList",function(){return Lm}),i.d(o,"sysDeptRemove",function(){return Am}),i.d(o,"sysDeptSave",function(){return Vm}),i.d(o,"sysDeptDetailInfo",function(){return Om}),i.d(o,"sysDeptUpdateSeq",function(){return Em});var r={};i.r(r),i.d(r,"sysLogOpPageList",function(){return Mm});var s={};i.r(s),i.d(s,"broadcastBlockPageList",function(){return Um}),i.d(s,"getCornerTypes",function(){return Bm}),i.d(s,"getMaterialTypes",function(){return jm}),i.d(s,"saveBlockInfo",function(){return qm}),i.d(s,"getSysPlugin",function(){return Wm}),i.d(s,"editSysPlugin",function(){return zm}),i.d(s,"getPluginParentTypes",function(){return Jm}),i.d(s,"getPluginTypes",function(){return Hm}),i.d(s,"getMediaVideoInfos",function(){return Gm}),i.d(s,"getPartnerSource",function(){return Km}),i.d(s,"getCondition",function(){return Ym}),i.d(s,"queryLiveVideoResult",function(){return Xm}),i.d(s,"getPluginVersions",function(){return Zm}),i.d(s,"getResourceList",function(){return Qm}),i.d(s,"getCornerList",function(){return ef}),i.d(s,"SavePlugin",function(){return tf}),i.d(s,"getMultiBlockList",function(){return af}),i.d(s,"getData",function(){return nf}),i.d(s,"SaveAudit",function(){return lf}),i.d(s,"removeMulti",function(){return of}),i.d(s,"getClickData",function(){return rf});var c={};i.r(c),i.d(c,"getAdminMasterControllInfo",function(){return sf}),i.d(c,"saveAdminMasterControll",function(){return cf});var u={};i.r(u),i.d(u,"getMaterialTypes",function(){return uf}),i.d(u,"getMaterialPageList",function(){return df}),i.d(u,"materialBatchAudit",function(){return pf}),i.d(u,"materialBatchDelete",function(){return hf}),i.d(u,"getCommonOnclickInfoMenu",function(){return mf}),i.d(u,"getCommonOnclickInfoList",function(){return ff}),i.d(u,"commonOnclickInfoSave",function(){return bf}),i.d(u,"commonOnclickInfoDelete",function(){return gf}),i.d(u,"getCommonOnclickInfoEdit",function(){return vf});var d={};i.r(d),i.d(d,"tabInfoList",function(){return yf}),i.d(d,"getAppIdType",function(){return wf}),i.d(d,"getBusinessType",function(){return If}),i.d(d,"getTabType",function(){return Tf}),i.d(d,"getMediaResourceInfo",function(){return kf}),i.d(d,"filmDetailPageList",function(){return Sf});var p={};i.r(p),i.d(p,"panelPageList",function(){return Cf}),i.d(p,"panelDataList",function(){return _f});var h={};i.r(h),i.d(h,"getHomePageInfoMenu",function(){return Ff}),i.d(h,"getHomePageInfoList",function(){return xf}),i.d(h,"homePageInfoSave",function(){return Df}),i.d(h,"homePageInfoDelete",function(){return Pf}),i.d(h,"getHomePageInfoEdit",function(){return $f});var m={};i.r(m),i.d(m,"getMediaVideoInfos",function(){return Rf}),i.d(m,"getPartnerSource",function(){return Nf}),i.d(m,"getCondition",function(){return Lf}),i.d(m,"getSegmentList",function(){return Af}),i.d(m,"getAppManagementList",function(){return Vf});var f={};i.r(f),i.d(f,"getMarkPanelList",function(){return Of}),i.d(f,"getBusinessType",function(){return Ef}),i.d(f,"getEditData",function(){return Mf}),i.d(f,"MarkPanelSave",function(){return Uf}),i.d(f,"deleteMarkPanel",function(){return Bf}),i.d(f,"getViewData",function(){return jf}),i.d(f,"getHistoryList",function(){return qf}),i.d(f,"getTimedInfo",function(){return Wf}),i.d(f,"getHandlePerson",function(){return zf});var b={};i.r(b),i.d(b,"getGlobalCornerIconTypePageList",function(){return Jf}),i.d(b,"globalCornerIconTypeBatchDel",function(){return Hf}),i.d(b,"globalCornerIconTypeSave",function(){return Gf}),i.d(b,"globalCornerIconTypeDetail",function(){return Kf});var g={};i.r(g),i.d(g,"getLayoutInforPageList",function(){return Yf}),i.d(g,"getLayoutInforBatchDel",function(){return Xf}),i.d(g,"getLayoutInforSave",function(){return Zf}),i.d(g,"getLayoutInforById",function(){return Qf}),i.d(g,"getAuditDetailButton",function(){return eb}),i.d(g,"auditTask",function(){return tb}),i.d(g,"revokedAudit",function(){return ib});var v={};i.r(v),i.d(v,"themeInfoPageList",function(){return ab}),i.d(v,"themeInfoRemove",function(){return nb}),i.d(v,"themeInfoDetail",function(){return lb});var y={};i.r(y),i.d(y,"globalPictureUpsert",function(){return ob}),i.d(y,"globalPictureGet",function(){return rb});var w={};i.r(w),i.d(w,"getGlobalMgrList",function(){return sb}),i.d(w,"getIconAttributes",function(){return cb}),i.d(w,"globalCornerIconEdit",function(){return ub}),i.d(w,"globalCornerIconSave",function(){return db}),i.d(w,"globalCornerIconRemove",function(){return pb}),i.d(w,"batchAudit",function(){return hb}),i.d(w,"executionTask",function(){return mb}),i.d(w,"revokedAudit",function(){return fb}),i.d(w,"getDetailInfo",function(){return bb}),i.d(w,"changePriority",function(){return gb});var I={};i.r(I),i.d(I,"advertisementList",function(){return vb}),i.d(I,"advertisementUpsert",function(){return yb});var T={};i.r(T),i.d(T,"privatePannelInfo",function(){return wb});i("551c");var k=i("2b0e"),S=i("5c96"),C=i.n(S),_=i("2819"),F=i.n(_),x=(i("0fae"),new k["default"]);Object.defineProperties(k["default"].prototype,{$bus:{get:function(){return x}}}),Object.defineProperties(k["default"].prototype,{$getMenu:{get:function(){}}});var D,P,$=i("0754"),R=i.n($),N=(i("616e"),i("59c7")),L=(i("ed2c"),i("96cf"),i("3040")),A=(i("ac6a"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("router-view")],1)}),V=[],O=i("2877"),E={},M=Object(O["a"])(E,A,V,!1,null,null,null),U=M.exports,B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("BroadcastBlockList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],ref:"list",on:{"open-add-page":e.openAddPage}}),"add"===e.mode?i("BroadcastBlockAdd",{attrs:{editId:e.editId,currentVersion:e.currentVersion},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},j=[],q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[i("span",{staticClass:"pics"}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.picDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.picDialogVisible=!1}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"预览图片",visible:e.auditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.auditDialogVisible=t}}},[i("span",[i("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.auditFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[i("el-radio",{attrs:{label:"4"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("通过")]),i("el-radio",{attrs:{label:"5"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("打回")])],1),i("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.auditDesc,callback:function(t){e.$set(e.addForm,"auditDesc",t)},expression:"addForm.auditDesc"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.auditDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAudit}},[e._v("确 定")])],1)])],1)},W=[],z=i("f6e7"),J=i.n(z),H={"待审核":3,"审核通过":4,"审核不通过":5},G={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{materialTypes:{},typePosition:{"左上":0,"右上":1,"右下":2,"左下":3},picDialogVisible:!1,auditDialogVisible:!1,addForm:{idStr:null,auditFlag:"4",auditDesc:""},auditFormRules:{auditDesc:[{required:!0,message:"请输入意见说明",trigger:"blur"}],auditFlag:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",width:70,prop:"id",sortable:!0},{label:"轮播名称",prop:"containerName",sortable:!0},{label:"状态",prop:"status",sortable:!0},{label:"更新时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{submitAudit:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&(e.auditForm.idStr=e.selected.join(","),e.$service.materialBatchAudit(e.auditForm,"审批成功").then(function(t){e.fetchData(),e.auditDialogVisible=!1}))})},addItem:function(){this.$emit("open-add-page",null)},handleChange:function(e,t,i){for(var a=[],n=0;n<e.length;n++)a.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(a)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},handleRowSelectionAdd:function(e){this.selected.push(e.id),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.id}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.id)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.broadcastBlockPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,e.table.data.map(function(t,i){e.table.data[i].status=3===t.status?"待审核":4===t.status?"审核通过":"审核不通过"})})}},created:function(){var e=J.a.map({id:J.a.o.number.other("form",{component:"Input",placeholder:"推荐位ID"}),containerName:J.a.o.string.other("form",{component:"Input",placeholder:"推荐位名称"}),status:J.a.o.enum(H).other("form",{component:"Select",placeholder:"请选择"})}).other("form",{layout:"inline",cols:{label:0,item:3,wrapper:24},footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},K=G,Y=(i("8203"),Object(O["a"])(K,q,W,!1,null,"628c2e5f",null)),X=Y.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.submitCheck}},[e._v("提交审核")]),i("el-button",{attrs:{type:"warning",size:"medium"},on:{click:function(t){return e.$emit("go-back")}}},[e._v("关闭")])],1),i("div",{staticClass:"split-bar"},[e._v("\n    基本信息\n  ")]),i("el-form",{ref:"basicForm",staticClass:"demo-ruleForm",attrs:{model:e.basicForm,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"推荐位名称",prop:"containerName",rules:[{required:!0,message:"请输入控件名称",trigger:"blur"}]}},[i("el-input",{model:{value:e.basicForm.containerName,callback:function(t){e.$set(e.basicForm,"containerName",t)},expression:"basicForm.containerName"}})],1),i("el-form-item",{attrs:{label:"推荐位类型"}},[i("el-select",{model:{value:e.basicForm.containerType,callback:function(t){e.$set(e.basicForm,"containerType",t)},expression:"basicForm.containerType"}},[i("el-option",{attrs:{label:"视频列表",value:"REFERENCE_BROADCASTING"}})],1)],1),i("el-form-item",{attrs:{label:"配置模式"}},[i("el-radio-group",{nativeOn:{change:function(t){return t.preventDefault(),e.modelChange(t)}},model:{value:e.basicForm.configModel,callback:function(t){e.$set(e.basicForm,"configModel",t)},expression:"basicForm.configModel"}},[i("el-radio",{attrs:{label:"broadcast"}},[e._v("轮播模式")]),i("el-radio",{attrs:{label:"group"}},[e._v("组合模式")])],1)],1)],1),i("div",{staticClass:"split-bar"},[i("i",{staticClass:"el-icon-edit"}),e._v("内容配置\n  ")]),i("div",{staticClass:"version-title"},[i("h2",{staticClass:"version-title__h"},[e._v("正常版本")]),"group"===e.basicForm.configModel?i("el-tag",{staticClass:"version-title__tag",attrs:{type:"warning"}},[e._v("短标题模式需至少运营四个资源，长标题模式至少6个，才能填满布局哦~")]):e._e(),"group"===e.basicForm.configModel?i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"medium"},nativeOn:{click:function(t){return e.selectResource("normal","normalForm","multiSelect")}}},[e._v("批量选择资源")]):e._e()],1),i("div",{staticClass:"form-wrap"},["group"===e.basicForm.configModel?i("el-row",{staticClass:"normal-left-list",style:e.classObject,attrs:{gutter:4}},[i("draggable",{attrs:{options:{group:"normalVersion"}},on:{start:function(t){return e.onDragStart(t)},end:function(t){return e.onDragtEnd(t)}},model:{value:e.normalVersionContent,callback:function(t){e.normalVersionContent=t},expression:"normalVersionContent"}},e._l(e.normalVersionContent,function(t,a){return i("el-card",{key:a,staticClass:"normal-version-wrap",class:{active:a===e.currentIndex},nativeOn:{click:function(t){return e.switchNormal(a)}}},[e.normalVersionContent.length>1?i("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.deleteNormal(a)}}}):e._e(),t.poster.pictureUrl?i("img",{attrs:{src:t.poster.pictureUrl,referrerpolicy:"no-referrer"}}):e._e(),i("span",[e._v(e._s(t.title))])])}),1),i("el-card",{staticStyle:{cursor:"pointer"}},[i("span",{staticClass:"add-version",on:{click:e.addNormal}},[e._v("+添加资源")])])],1):e._e(),i("el-form",{ref:"normalForm",staticClass:"demo-ruleForm",class:{cutLine:"group"===e.basicForm.configModel},staticStyle:{float:"left",width:"75%"},attrs:{model:e.normalForm,rules:e.normalRules,"label-width":"100px"}},[i("el-form-item",{staticStyle:{width:"400px"},attrs:{label:e.normalResourceBtn,size:"medium",prop:"thirdIdOrPackageName"}},[e.autoWrite?i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.selectResource("normal","normalForm")}},model:{value:e.normalForm.thirdIdOrPackageName,callback:function(t){e.$set(e.normalForm,"thirdIdOrPackageName",t)},expression:"normalForm.thirdIdOrPackageName"}},[e._v("选择资源")]):e._e(),e.autoWrite?e._e():i("el-input",{staticStyle:{float:"left"},on:{blur:e.getUrlBlur},model:{value:e.normalForm.thirdIdOrPackageName,callback:function(t){e.$set(e.normalForm,"thirdIdOrPackageName",t)},expression:"normalForm.thirdIdOrPackageName"}}),e.normalForm.thirdIdOrPackageName&&e.autoWrite?i("el-tag",{attrs:{type:"success"}},[e._v("已选择："+e._s(e.normalForm.thirdIdOrPackageName))]):e._e(),e.autoWrite&&"group"===e.basicForm.configModel?i("a",{staticClass:"write-play",attrs:{href:"#"},on:{click:e.autoWriteFun}},[e._v("手动填写播放串")]):e._e(),e.autoWrite||"group"!==e.basicForm.configModel?e._e():i("a",{staticClass:"write-play",staticStyle:{float:"left"},attrs:{href:"#"},on:{click:e.autoWriteFun}},[e._v("自动配置播放资源")])],1),"group"===e.basicForm.configModel?i("div",[e.normalForm.subchannelIs?i("el-form-item",{attrs:{label:"指定子频道",prop:"subchannelId"}},[i("el-input",{on:{blur:function(t){return e.getSubchannel(e.normalForm)}},model:{value:e.normalForm.subchannelId,callback:function(t){e.$set(e.normalForm,"subchannelId",t)},expression:"normalForm.subchannelId"}})],1):e._e(),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{on:{blur:e.getTitleNormal},model:{value:e.normalForm.title,callback:function(t){e.$set(e.normalForm,"title",t)},expression:"normalForm.title"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"subTitle"}},[i("el-input",{model:{value:e.normalForm.subTitle,callback:function(t){e.$set(e.normalForm,"subTitle",t)},expression:"normalForm.subTitle"}})],1)],1):e._e(),i("el-form-item",{attrs:{label:"海报",prop:"poster.pictureUrl"}},[i("el-card",{staticClass:"post-box",staticStyle:{width:"320px",height:"180px"},nativeOn:{click:function(t){return e.openPicture("poster","normalForm")}}},[e.normalForm.poster.pictureUrl?i("img",{staticStyle:{height:"180px"},attrs:{src:e.normalForm.poster.pictureUrl,referrerpolicy:"no-referrer"}}):e._e()])],1),i("el-form-item",{attrs:{label:"角标"}},[i("el-card",{staticClass:"corner-box"},e._l(e.normalForm.cornerIconList,function(t,a){return i("span",{key:a,staticClass:"corner",class:"corner-"+a},[t.imgUrl?i("span",{staticClass:"corner-img-wrapper",on:{click:function(t){return e.openPicture("corner","normalForm",a)}}},[i("img",{attrs:{src:t.imgUrl,referrerpolicy:"no-referrer"}}),i("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.deleteCorner(e.normalForm,a)}}})]):i("el-tag",{attrs:{type:"success"},on:{click:function(t){return e.openPicture("corner","normalForm",a)}}},[i("i",{staticClass:"el-icon-plus"})])],1)}),0)],1),"group"===e.basicForm.configModel?i("el-form-item",{attrs:{label:"点击事件",prop:"sign"}},[i("el-radio-group",{attrs:{disabled:e.signDisabled,size:"mini"},model:{value:e.normalForm.sign,callback:function(t){e.$set(e.normalForm,"sign",t)},expression:"normalForm.sign"}},[i("el-radio",{attrs:{label:"autoSet"}},[e._v("自动生成")]),i("el-radio",{attrs:{label:"manualSet"}},[e._v("手动设置")])],1)],1):e._e(),"manualSet"===e.normalForm.sign?i("div",[i("el-form-item",{attrs:{label:"打开方式"}},[i("el-select",{staticStyle:{"max-width":"280px"},attrs:{value:"第三方应用"}},[i("el-option",{attrs:{value:"app"}},[e._v("第三方应用")])],1),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onclickEventVisible=!0,e.onclickEventVisibleFlag="normal"}}},[e._v("快速填充")])],1),i("ccAppParamsForm",{ref:"openWayNormal",attrs:{"prop-prefix":"onclick."},model:{value:e.normalForm.onclick,callback:function(t){e.$set(e.normalForm,"onclick",t)},expression:"normalForm.onclick"}})],1):e._e()],1)],1),i("div",{staticClass:"version-title",staticStyle:{"margin-top":"25px"}},[i("h2",{staticStyle:{float:"left","margin-top":"7px"}},[e._v("兼容低版本")]),"group"===e.basicForm.configModel?i("div",{staticStyle:{display:"inline-block","margin-left":"14px"}},[i("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.lowerFill}},[e._v("快速填充")]),i("span",[e._v("使用正常版本的第一个资源，快速配置")])],1):e._e()]),i("div",{staticClass:"form-wrap"},[i("el-form",{ref:"lowerForm",staticClass:"demo-ruleForm",attrs:{model:e.lowerForm,rules:e.lowerRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"资源类别",prop:"coverType"}},[i("el-radio-group",{on:{change:e.cleanLowerForm},model:{value:e.lowerForm.coverType,callback:function(t){e.$set(e.lowerForm,"coverType",t)},expression:"lowerForm.coverType"}},[i("el-radio",{attrs:{label:"media"}},[e._v("媒体资源")]),i("el-radio",{attrs:{label:"app"}},[e._v("应用")]),i("el-radio",{attrs:{label:"custom"}},[e._v("自定义")])],1)],1),"media"===e.lowerForm.coverType||"app"===e.lowerForm.coverType?i("el-form-item",{attrs:{label:"内容资源",prop:"thirdIdOrPackageName"}},[i("el-button",{attrs:{type:"primary",size:"medium"},nativeOn:{click:function(t){return e.selectResource("lower","lowerForm")}},model:{value:e.lowerForm.thirdIdOrPackageName,callback:function(t){e.$set(e.lowerForm,"thirdIdOrPackageName",t)},expression:"lowerForm.thirdIdOrPackageName"}},[e._v("选择资源")]),e.lowerForm.thirdIdOrPackageName?i("el-tag",{attrs:{type:"success"}},[e._v("已选择："+e._s(e.lowerForm.thirdIdOrPackageName))]):e._e()],1):e._e(),e.lowerForm.subchannelIs?i("el-form-item",{attrs:{label:"指定子频道",prop:"subchannelId"}},[i("el-input",{on:{blur:function(t){return e.getSubchannel(e.lowerForm)}},model:{value:e.lowerForm.subchannelId,callback:function(t){e.$set(e.lowerForm,"subchannelId",t)},expression:"lowerForm.subchannelId"}})],1):e._e(),e.lowerForm.smallTopicsIs?i("el-form-item",{attrs:{label:"指定小专题",prop:"smallTopicsId"}},[i("el-input",{on:{blur:e.smallTopicsLower},model:{value:e.lowerForm.smallTopicsId,callback:function(t){e.$set(e.lowerForm,"smallTopicsId",t)},expression:"lowerForm.smallTopicsId"}})],1):e._e(),i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{model:{value:e.lowerForm.title,callback:function(t){e.$set(e.lowerForm,"title",t)},expression:"lowerForm.title"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"subTitle"}},[i("el-input",{model:{value:e.lowerForm.subTitle,callback:function(t){e.$set(e.lowerForm,"subTitle",t)},expression:"lowerForm.subTitle"}})],1),i("el-form-item",{attrs:{label:"海报",prop:"poster.pictureUrl"},nativeOn:{click:function(t){return e.openPicture("poster","lowerForm")}}},[i("el-card",{staticClass:"post-box",staticStyle:{width:"486px",height:"180px"}},[e.lowerForm.poster.pictureUrl?i("img",{staticStyle:{height:"180px"},attrs:{src:e.lowerForm.poster.pictureUrl,referrerpolicy:"no-referrer"}}):e._e()])],1),i("el-form-item",{attrs:{label:"角标"}},[i("el-card",{staticClass:"corner-box"},e._l(e.lowerForm.cornerIconList,function(t,a){return i("span",{key:a,staticClass:"corner",class:"corner-"+a},[t.imgUrl?i("span",{staticClass:"corner-img-wrapper",on:{click:function(t){return e.openPicture("corner","lowerForm",a)}}},[i("img",{attrs:{src:t.imgUrl,referrerpolicy:"no-referrer"}}),i("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.deleteCorner(e.lowerForm,a)}}})]):i("el-tag",{attrs:{type:"success"},on:{click:function(t){return e.openPicture("corner","lowerForm",a)}}},[i("i",{staticClass:"el-icon-plus"})])],1)}),0)],1),"media"===e.lowerForm.coverType||"app"===e.lowerForm.coverType?i("div",[i("el-form-item",{attrs:{label:"应用版本号",prop:"versionCode"}},[i("el-input",{model:{value:e.lowerForm.versionCode,callback:function(t){e.$set(e.lowerForm,"versionCode",t)},expression:"lowerForm.versionCode"}})],1)],1):e._e(),"custom"===e.lowerForm.coverType?i("div",[i("el-form-item",{attrs:{label:"打开方式"}},[i("el-select",{staticStyle:{"max-width":"280px"},attrs:{value:"第三方应用"}},[i("el-option",{attrs:{value:"app"}},[e._v("第三方应用")])],1),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onclickEventVisible=!0,e.onclickEventVisibleFlag="lower"}}},[e._v("快速填充")])],1),i("ccAppParamsForm",{ref:"openWayLower",attrs:{"prop-prefix":"onclick."},model:{value:e.lowerForm.onclick,callback:function(t){e.$set(e.lowerForm,"onclick",t)},expression:"lowerForm.onclick"}})],1):e._e()],1)],1),i("el-dialog",{attrs:{visible:e.customDialogPicture.visible,width:"1200px"},on:{"update:visible":function(t){return e.$set(e.customDialogPicture,"visible",t)}}},[i("DialogPicture",{attrs:{title:e.customDialogPicture.title,form:e.customDialogPicture.form},on:{"close-dialog":e.selectCancel},model:{value:e.selectPicture,callback:function(t){e.selectPicture=t},expression:"selectPicture"}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.customDialogPicture.visible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.savePicture}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{visible:e.customDialogCorner.visible,width:"1200px"},on:{"update:visible":function(t){return e.$set(e.customDialogCorner,"visible",t)}}},[i("DialogCorner",{attrs:{typePosition:e.customDialogCorner.index,cornerIconTypeOptions:e.cornerIconTypeOptions,visible:e.customDialogCorner.visible},model:{value:e.selectPicture,callback:function(t){e.selectPicture=t},expression:"selectPicture"}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.customDialogCorner.visible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.savePicture}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{visible:e.onclickEventVisible,width:"1200px"},on:{"update:visible":function(t){e.onclickEventVisible=t}}},[i("selectClick",{on:{"row-click":e.getClickData}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.onclickEventVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onclickEventVisible=!1,e.clickThirdpartSubmit()}}},[e._v("确 定")])],1)],1),e.resourceVisible?i("ResourceSelector",{attrs:{title:"选择资源","pannel-resource":e.pannelResource,"resource-options":e.resourceOptions},on:{"confirm-click":function(t){return e.resourceConfirm(t,e.currentForm)},"select-cancel":e.selectCancel}}):e._e()],1)},Q=[],ee=(i("f751"),i("cadf"),i("456d"),i("a322")),te=(i("c5f6"),i("1980")),ie=i.n(te),ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("RemoteSelect",{ref:"selector",attrs:{title:e.title,customClass:"container",showSelection:!1,showClearSelectionBtn:!1},on:{"select-end":e.confirmClick}},[i("el-tabs",{attrs:{value:"first"}},[i("el-tab-pane",{attrs:{label:"轮播频道",name:"first"}},[i("BroadcastFilter",{model:{value:e.filterValue,callback:function(t){e.filterValue=t},expression:"filterValue"}})],1)],1)],1)},ne=[],le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},oe=[],re={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:["multi"],data:function(){return{filter:{resType:"operation",dataType:"rotate",levelType:"rotateSta",callback:"result",page:1,rows:10},filterSchema:null,pagination:{},selected:[],selectedRows:{},table:{props:{},header:[{label:"轮播入口ID",prop:"id",sortable:!0},{label:"轮播入口名称",prop:"title"}],data:[],selected:[],selectionType:"single"}}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return e.code=e.id,t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterReset:function(){this.filter={resType:"operation",dataType:"rotate",levelType:"rotateSta",callback:"result",page:1,rows:10},this.fetchData()},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.id});e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.id)>-1&&e.push(a),e},[])}},created:function(){this.table.selectionType=this.multi;var e=J.a.map({id:J.a.o.number.other("form",{component:"Input",placeholder:"轮播入口ID",label:"轮播入口ID",cols:{item:3,label:0}}),title:J.a.o.string.other("form",{component:"Input",placeholder:"轮播入口名称",label:"轮播入口名称",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},se=re,ce=Object(O["a"])(se,le,oe,!1,null,"3f9f1a2b",null),ue=ce.exports,de=(i("d8b2"),{components:{RemoteSelect:N["RemoteSelect"],ContentWrapper:N["ContentWrapper"],Table:N["Table"],BroadcastFilter:ue},props:["title"],data:function(){return{filterValue:null}},methods:{confirmClick:function(){this.filterValue||(this.$refs.selector.showDialog=!0,this.$message("请选择一条记录")),this.$emit("input",this.filterValue)}}}),pe=de,he=(i("f4b2"),Object(O["a"])(pe,ae,ne,!1,null,"18e338a6",null)),me=he.exports,fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("RemoteSelect",{ref:"selector",attrs:{title:e.title,customClass:"container",showSelection:!1,showClearSelectionBtn:!1},on:{"select-end":e.multipleSelect,"select-cancel":e.selectCancel}},[i("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[e.resourceOptions.tabShow["video"]?i("el-tab-pane",{attrs:{label:"影视中心",name:"video"}},[i("MovieFilter",{attrs:{multi:e.multi,partner:e.pannelResourceNew,"disable-partner":e.disablePartner,"movie-select":e.movieSelect},on:{partnerChange:function(t){e.pannelResourceNew=t},"row-click":function(t){return e.rowClick(t,"video")},"select-single":e.selectSingle},model:{value:e.selectAll.video,callback:function(t){e.$set(e.selectAll,"video",t)},expression:"selectAll.video"}})],1):e._e(),e.resourceOptions.tabShow["edu"]?i("el-tab-pane",{attrs:{label:"教育中心",name:"edu"}},[i("EduFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"edu")}},model:{value:e.selectAll.edu,callback:function(t){e.$set(e.selectAll,"edu",t)},expression:"selectAll.edu"}})],1):e._e(),e.resourceOptions.tabShow["live"]?i("el-tab-pane",{attrs:{label:"直播资源",name:"live"}},[i("LiveFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"live")}},model:{value:e.selectAll.live,callback:function(t){e.$set(e.selectAll,"live",t)},expression:"selectAll.live"}})],1):e._e(),e.resourceOptions.tabShow["topics"]?i("el-tab-pane",{attrs:{label:"专题资源",name:"topics"}},[i("TopicsFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"topics")}},model:{value:e.selectAll.topics,callback:function(t){e.$set(e.selectAll,"topics",t)},expression:"selectAll.topics"}})],1):e._e(),e.resourceOptions.tabShow["broadcast"]?i("el-tab-pane",{attrs:{label:"轮播频道",name:"broadcast"}},[i("BroadcastFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"broadcast")}},model:{value:e.selectAll.broadcast,callback:function(t){e.$set(e.selectAll,"broadcast",t)},expression:"selectAll.broadcast"}})],1):e._e(),e.resourceOptions.tabShow["app"]?i("el-tab-pane",{attrs:{label:"应用圈",name:"app"}},[i("AppFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"app")}},model:{value:e.selectAll.app,callback:function(t){e.$set(e.selectAll,"app",t)},expression:"selectAll.app"}})],1):e._e()],1),"movieSingleFilter"===e.mode?i("MovieSingleFilter",{attrs:{multi:"single",params:e.movieParams},on:{"single-select":e.movieSelectComfirm}}):e._e()],1)},be=[],ge=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[i("el-collapse",{attrs:{value:"1"}},[i("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[i("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"渠道"}},[i("el-select",{attrs:{value:e.partner,disabled:e.disablePartner,size:"small"},on:{input:e.partnerChange}},e._l(e.partnerList,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"内容源"}},[i("el-select",{attrs:{size:"small"},on:{change:e.sourceSelectChange},model:{value:e.searchForm.sources,callback:function(t){e.$set(e.searchForm,"sources",t)},expression:"searchForm.sources"}},e._l(e.sources,function(e){return i("el-option",{key:e.source_code,attrs:{label:e.source_title,value:e.source_code}})}),1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tencent"===e.searchForm.sources,expression:"searchForm.sources==='tencent'"}],attrs:{label:"牌照"}},[i("el-select",{attrs:{size:"small",clearable:""},model:{value:e.searchForm.licensee,callback:function(t){e.$set(e.searchForm,"licensee",t)},expression:"searchForm.licensee"}},e._l(e.conditionList.licensee,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})}),1)],1),i("el-form-item",{attrs:{label:"频道类型"}},[i("el-select",{attrs:{filterable:"",size:"small"},on:{change:e.categorySelectChange},model:{value:e.searchForm.category,callback:function(t){e.$set(e.searchForm,"category",t)},expression:"searchForm.category"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.categories,function(e){return i("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.categoryId}})})],2)],1),i("el-form-item",{attrs:{label:"影片类型"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.videoTypes,callback:function(t){e.$set(e.searchForm,"videoTypes",t)},expression:"searchForm.videoTypes"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.videoTypes,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagName,value:e.tagName}})})],2)],1),i("el-form-item",{attrs:{label:"付费类型"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.payTypes,callback:function(t){e.$set(e.searchForm,"payTypes",t)},expression:"searchForm.payTypes"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.payTypes,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{attrs:{size:"small"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),i("el-form-item",{attrs:{label:"素材类型"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTypes,callback:function(t){e.$set(e.searchForm,"contentTypes",t)},expression:"searchForm.contentTypes"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTypes,function(e){return i("el-option",{key:e.contentTypeId,attrs:{label:e.contentType,value:e.contentTypeId}})})],2)],1),i("el-form-item",{attrs:{label:"年代"}},[i("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearStartListen},model:{value:e.searchForm.yearStart,callback:function(t){e.$set(e.searchForm,"yearStart",t)},expression:"searchForm.yearStart"}}),e._v("-\n            "),i("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearEndListen},model:{value:e.searchForm.yearEnd,callback:function(t){e.$set(e.searchForm,"yearEnd",t)},expression:"searchForm.yearEnd"}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}]},[i("el-form-item",{attrs:{label:"影片格式"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.videoFormat,callback:function(t){e.$set(e.searchForm,"videoFormat",t)},expression:"searchForm.videoFormat"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.videoFormat,function(e){return i("el-option",{key:e.tagEnName,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),i("el-form-item",{attrs:{label:"内容标签"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTag,callback:function(t){e.$set(e.searchForm,"contentTag",t)},expression:"searchForm.contentTag"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTag,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"排序方式"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.searchForm.orderBy,callback:function(t){e.$set(e.searchForm,"orderBy",t)},expression:"searchForm.orderBy"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.orderBy,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2),i("el-tooltip",{attrs:{content:e.orderTip}},[i("el-button",{attrs:{icon:"asc"===e.searchForm.order?"arrow-up":"arrow-down",size:"mini"},on:{click:function(t){return e.changeSort()}}})],1)],1),i("el-form-item",{attrs:{label:"导演"}},[i("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.directors,callback:function(t){e.$set(e.searchForm,"directors",t)},expression:"searchForm.directors"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.directors,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"主演"}},[i("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.actors,callback:function(t){e.$set(e.searchForm,"actors",t)},expression:"searchForm.actors"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.actors,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"地区"}},[i("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.areas,callback:function(t){e.$set(e.searchForm,"areas",t)},expression:"searchForm.areas"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.areas,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1)],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{icon:e.isMore?"arrow-up":"arrow-down",size:"small"},on:{click:function(t){return e.showMore()}}},[e._v(e._s(e.isMore?"收起":"展开"))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),i("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},ve=[],ye=(i("20d6"),{components:{RemoteSelect:N["RemoteSelect"],ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:["partner","disablePartner","singleObj","multi","movieSelect"],data:function(){var e=this;return{sources:[],mode:"list",selectIndex:null,searchForm:{resType:"vod",callbackparam:"result",sources:"",category:"",videoTypes:"",licensee:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},partnerList:[{label:"腾讯",value:"tencent"},{label:"爱奇艺",value:"yinhe"}],originPartner:void 0,conditionList:{},categories:[],videoTypes:[],isMore:!1,orderTip:"降序排列",pagination:{currentPage:1,pageSize:10},selected:[],table:{props:{},header:[{prop:"coocaaVId",label:"ID",width:"130",sortable:!0},{prop:"title",label:"标题",width:"100"},{prop:"subTitle",label:"副标题",width:"100"},{prop:"ccVideoSourceEntities",label:"内容源",width:"60",render:function(t,i){var a=i.row;return t("div",e.getSourceLabel(a))}},{prop:"videoStatus",label:"状态",width:"50",formatter:function(e){return["失效","有效","待审核","审核不通过","草稿"][e.videoStatus]}},{prop:"thumb",label:"图片",width:"60",render:function(e,t){var i=t.row;return e("img",{attrs:{src:i.thumb,width:"50px",height:"50px",class:"imgs"}})}},{prop:"videoType",label:"影片类型",width:"80"},{prop:"contentType",label:"内容类型",width:"80"},{prop:"season",label:"期数"},{prop:"directors",label:"导演"},{prop:"actors",label:"演员",showOverflowTooltip:!0},{prop:"publishArea",label:"地区"},{prop:"year",label:"年代"},{prop:"segment",label:"已选集数",type:"specialBut",width:"100",mouseStyle:"hover",fixed:"right",render:function(e,t){var i=t.row,a="undefined"!==typeof i.singleMovie?i.singleMovie.urlTitle:"";return"undefined"!==typeof i.singleMovie?e("el-button",{attrs:{type:"primary",text:"已选集数",value:"已选集数",title:a}},"已选集数"):""}},{prop:"but",label:"操作",width:"100",fixed:"right",render:function(t,i){return t("el-button",{on:{click:function(t){t.stopPropagation(),e.selectSingle(i)}}},"选择单集")}}],data:[],selected:[],selectionType:"single"}}},watch:{partner:function(e){this.searchForm.sources=this.partner,this.getSource(e)},selected:function(e){this.$emit("input",this.selected)},movieSelect:function(e){this.table.data[this.selectIndex].singleMovie=e,this.table.data[this.selectIndex].singleId=e.coocaaMId}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},deepClone:function(e){return JSON.parse(JSON.stringify(e))},sourceSelectChange:function(e){"tencent"!==e&&(this.searchForm.licensee="")},partnerChange:function(e){this.$emit("partnerChange",e)},selectSingle:function(e){var t=e.$index,i=e.row;this.selectIndex=t,this.$emit("select-single",{id:i.coocaaVId,source:this.searchForm.sources})},getSource:function(e){var t=this;this.$service.getPartnerSource({partnerName:e}).then(function(e){t.sources=e.rows.reduce(function(e,t){return t.source_List&&(e=e.concat(t.source_List)),e},[])})},getSourceLabel:function(e){for(var t=!1,i=0;i<e.ccVideoSourceEntities.length;i++)if("4KGarden"===e.ccVideoSourceEntities[i].thirdSource){t=!0;break}return!0===t?"4k花园":e.ccVideoSourceEntities[0]&&"tencent"===e.ccVideoSourceEntities[0].thirdSource?"腾讯":e.ccVideoSourceEntities[0]&&"yinhe"===e.ccVideoSourceEntities[0].thirdSource?"爱奇艺":void 0},statusLabel:function(e){return["失效","有效","待审核","审核不通过","草稿"][e.videoStatus]},categorySelectChange:function(e){this.searchForm.videoTypes="";var t=this.categories,i=t.findIndex(function(t){return t.categoryId===e});this.videoTypes=t[i]?t[i].child[0].tagEntities:[]},yearStartListen:function(){if(this.searchForm.yearStart&&!+this.searchForm.yearStart)return this.$message("年代必须为数字"),void(this.searchForm.yearStart=null)},yearEndListen:function(){if(this.searchForm.yearEnd&&!+this.searchForm.yearEnd)return this.$message("年代必须为数字"),void(this.searchForm.yearEnd=null)},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows});var i=Object.assign({},this.singleObj);i.data=[],i.selectId="",i.index=void 0,i.singleIdArr=[],i.singleIndexArr=[],i.titleArr=[],i.titleArrData=[]},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var i={};return Object.keys(e).map(function(t){e[t]&&(i[t]=e[t])}),i},reset:function(){this.searchForm={resType:"vod",callbackparam:"result",sources:this.partner,category:"",videoTypes:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},this.table.data=[],this.searchParams=this.deepClone(this.searchForm),this.partner!==this.originPartner&&this.$emit("partnerChange",this.originPartner),this.getSource(this.partner)},showMore:function(){this.isMore=!this.isMore},changeSort:function(){"asc"===this.searchForm.order?(this.searchForm.order="desc",this.orderTip="降序排列"):(this.searchForm.order="asc",this.orderTip="升序排列")},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.coocaaVId});e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.coocaaVId)>-1&&e.push(a),e},[])}},created:function(){this.originPartner=this.partner,this.searchForm.sources=this.partner,this.table.selectionType=this.multi},mounted:function(){var e=this;this.getSource(this.partner),this.$service.getCondition().then(function(t){e.categories=t.vod.sources[0].child,e.conditionList=t.vod})}}),we=ye,Ie=Object(O["a"])(we,ge,ve,!1,null,"39cdf0f1",null),Te=Ie.exports,ke=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[i("el-collapse",{attrs:{value:"1"}},[i("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[i("el-form",{attrs:{inline:!0,"label-width":"72px"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[i("el-form-item",{attrs:{label:"内容商"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.contentProviders,callback:function(t){e.$set(e.searchForm,"contentProviders",t)},expression:"searchForm.contentProviders"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.contentProviders,function(e){return i("el-option",{key:e.tagCnName,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"教育分类"}},[i("el-select",{attrs:{size:"small"},on:{change:e.teachTypesSelectChange},model:{value:e.searchForm.teachTypes,callback:function(t){e.$set(e.searchForm,"teachTypes",t)},expression:"searchForm.teachTypes"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.teachTypes,function(e){return i("el-option",{key:e.categoryName,attrs:{label:e.categoryName,value:e.categoryName}})})],2)],1),i("el-form-item",{attrs:{label:"年级年龄"}},[i("el-select",{attrs:{size:"small",placeholder:"请选择教育分类"},model:{value:e.searchForm.gradeList,callback:function(t){e.$set(e.searchForm,"gradeList",t)},expression:"searchForm.gradeList"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.gradeList,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"内容分类"}},[i("el-select",{attrs:{filterable:"",size:"small",placeholder:"请选择教育分类"},model:{value:e.searchForm.videoTypes,callback:function(t){e.$set(e.searchForm,"videoTypes",t)},expression:"searchForm.videoTypes"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.eduTypes,function(e){return i("el-option",{key:e.tagName,attrs:{label:e.tagName,value:e.tagName}})})],2)],1),i("el-form-item",{attrs:{label:"付费类型"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.payTypes,callback:function(t){e.$set(e.searchForm,"payTypes",t)},expression:"searchForm.payTypes"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.payTypes,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),i("el-form-item",{attrs:{label:"内容标签"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.contentTag,callback:function(t){e.$set(e.searchForm,"contentTag",t)},expression:"searchForm.contentTag"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.contentTag,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"课程名称"}},[i("el-input",{attrs:{size:"small"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}]},[i("el-form-item",{attrs:{label:"课程版本"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.courseVersion,callback:function(t){e.$set(e.searchForm,"courseVersion",t)},expression:"searchForm.courseVersion"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.courseVersion,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"集数"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.segmentTag,callback:function(t){e.$set(e.searchForm,"segmentTag",t)},expression:"searchForm.segmentTag"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.segmentTag,function(e){return i("el-option",{key:e.tagEnName,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),i("el-form-item",{attrs:{label:"是否全集"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.updateStatus,callback:function(t){e.$set(e.searchForm,"updateStatus",t)},expression:"searchForm.updateStatus"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),i("el-option",{attrs:{label:"不限",value:0}}),i("el-option",{attrs:{label:"是",value:1}})],1)],1),i("el-form-item",{attrs:{label:"同步时间"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.synDate,callback:function(t){e.$set(e.searchForm,"synDate",t)},expression:"searchForm.synDate"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),i("el-option",{attrs:{label:"7天",value:7,size:"small"}}),i("el-option",{attrs:{label:"15天",value:15,size:"small"}}),i("el-option",{attrs:{label:"1个月",value:30,size:"small"}}),i("el-option",{attrs:{label:"3个月",value:90,size:"small"}}),i("el-option",{attrs:{label:"1年",value:365,size:"small"}})],1)],1),i("el-form-item",{attrs:{label:"动漫明星"}},[i("el-input",{attrs:{size:"small"},model:{value:e.searchForm.cartoonStar,callback:function(t){e.$set(e.searchForm,"cartoonStar",t)},expression:"searchForm.cartoonStar"}})],1),i("el-form-item",{attrs:{label:"地区"}},[i("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.areas,callback:function(t){e.$set(e.searchForm,"areas",t)},expression:"searchForm.areas"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.areas,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"年代"}},[i("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearStartListen},model:{value:e.searchForm.yearStart,callback:function(t){e.$set(e.searchForm,"yearStart",t)},expression:"searchForm.yearStart"}}),e._v("-\n            "),i("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearEndListen},model:{value:e.searchForm.yearEnd,callback:function(t){e.$set(e.searchForm,"yearEnd",t)},expression:"searchForm.yearEnd"}})],1),i("el-form-item",{attrs:{label:"排序方式"}},[i("el-select",{staticStyle:{width:"85px"},attrs:{size:"small"},model:{value:e.searchForm.orderBy,callback:function(t){e.$set(e.searchForm,"orderBy",t)},expression:"searchForm.orderBy"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.orderBy,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2),i("el-tooltip",{attrs:{content:e.orderTip}},[i("el-button",{attrs:{icon:"asc"===e.searchForm.order?"arrow-up":"arrow-down",size:"mini"},on:{click:function(t){return e.changeSort()}}})],1)],1)],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{icon:e.isMore?"arrow-up":"arrow-down",size:"small"},on:{click:function(t){return e.showMore()}}},[e._v(e._s(e.isMore?"收起":"展开"))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),i("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},Se=[],Ce={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:["pannelResource","multi"],data:function(){return{pagination:{currentPage:1,pageSize:10},searchForm:{resType:"vod",callbackparam:"result",contentProviders:"",teachTypes:"",gradeList:"",videoTypes:"",payTypes:"",contentTag:"",orderBy:"",order:"desc",title:"",courseVersion:"",segmentTag:"",updateStatus:"",synDate:"",cartoonStar:"",areas:"",yearStart:null,yearEnd:null,businessType:1},selected:[],table:{props:{},data:[],header:[{prop:"coocaaVId",label:"ID",fixed:!0,width:"220"},{prop:"title",label:"课程名称",fixed:!0,width:"220"},{prop:"description",label:"课程简介",width:"250",showOverflowTooltip:!0},{prop:"sourceName",label:"内容提供商",width:"150"},{prop:"videoKey",label:"自定义标签",width:"150"},{prop:"classfication",label:"第三方标签",width:"150"},{prop:"thumb",label:"图片",width:"120",render:function(e,t){var i=t.row;return e("img",{attrs:{src:i.thumb,width:"50px",height:"50px",class:"imgs"}})}},{prop:"publistSegment",label:"课程集数",width:"120"}],selected:[],selectionType:"single"},conditionList:{},teachTypes:[],eduTypes:[],gradeList:[],isMore:!1,orderTip:"降序排列"}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},teachTypesSelectChange:function(e){this.searchForm.gradeList="",this.searchForm.videoTypes="";var t=this.teachTypes,i=t.findIndex(function(t){return t.categoryName===e});this.eduTypes=t[i]?t[i].child[0].tagEntities:[];var a=this.conditionList.gradeList,n=[];switch(e){case"幼儿":n=a.slice(0,2);break;case"小学":n=a.slice(2,8);break;case"初中":n=a.slice(8,11);break;case"高中":n=a.slice(11,14);break;default:break}this.gradeList=n},handleRowChange:function(e,t){this.table.selected=t,this.selected=e},yearStartListen:function(){if(this.searchForm.yearStart&&!+this.searchForm.yearStart)return this.$message("年代必须为数字"),void(this.searchForm.yearStart=null)},yearEndListen:function(){if(this.searchForm.yearEnd&&!+this.searchForm.yearEnd)return this.$message("年代必须为数字"),void(this.searchForm.yearEnd=null)},showMore:function(){this.isMore=!this.isMore},changeSort:function(){"asc"===this.searchForm.order?(this.searchForm.order="desc",this.orderTip="降序排列"):(this.searchForm.order="asc",this.orderTip="升序排列")},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var i={};return Object.keys(e).map(function(t){e[t]&&(i[t]=e[t])}),i},reset:function(){this.searchForm={resType:"vod",callbackparam:"result",contentProviders:"",teachTypes:"",gradeList:"",videoTypes:"",payTypes:"",contentTag:"",orderBy:"",order:"desc",title:"",courseVersion:"",segmentTag:"",updateStatus:"",synDate:"",cartoonStar:"",areas:"",yearStart:null,yearEnd:null,businessType:1},this.table.data=[]},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.coocaaVId});e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.coocaaVId)>-1&&e.push(a),e},[])}},mounted:function(){var e=this,t={type:"vod",businessType:1};this.$service.getCondition(t).then(function(t){e.conditionList=t.vod})},created:function(){this.table.selectionType=this.multi}},_e=Ce,Fe=Object(O["a"])(_e,ke,Se,!1,null,"4a059dc4",null),xe=Fe.exports,De=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[i("el-collapse",{attrs:{value:"1"}},[i("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[i("el-form",{attrs:{inline:!0,"label-width":"72px"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[i("el-form-item",{attrs:{label:"内容源"}},[i("el-select",{model:{value:e.searchForm.source,callback:function(t){e.$set(e.searchForm,"source",t)},expression:"searchForm.source"}},e._l(e.options.source,function(e){return i("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"资源类型"}},[i("el-select",{model:{value:e.searchForm.nodeType,callback:function(t){e.$set(e.searchForm,"nodeType",t)},expression:"searchForm.nodeType"}},e._l(e.options.nodeType,function(e){return i("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"内容类型"}},[i("el-select",{model:{value:e.searchForm.cateid,callback:function(t){e.$set(e.searchForm,"cateid",t)},expression:"searchForm.cateid"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.options.cateid,function(e){return i("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})],2)],1),i("el-form-item",{attrs:{label:"内容搜索"}},[i("el-input",{model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),i("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},Pe=[],$e=(i("a481"),{components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:["multi"],data:function(){var e;return{pagination:{currentPage:1,pageSize:10},selected:[],searchForm:{callbackparam:"result",source:"tencent",nodeType:"live",cateid:"",title:""},options:{source:[{label:"腾讯",value:"tencent"},{label:"爱奇艺",value:"yinhe"}],nodeType:[{label:"直播",value:"live"},{label:"录播",value:"res"}],cateid:[{label:"足球",value:"1"},{label:"篮球",value:"2"},{label:"综合类型",value:"3"},{label:"非对阵类",value:"4"}]},table:(e={props:{},data:[],selected:[],header:[{prop:"vId",label:"ID",fixed:!0,width:"100"},{prop:"thirdId",label:"第三方ID",fixed:!0,width:"100"},{prop:"title",label:"标题",fixed:!0,width:"220"},{prop:"subTitle",label:"副标题",width:"120"},{prop:"cateid",label:"内容类别",width:"120"},{prop:"thumb",label:"海报",render:function(e,t){var i=t.row;return e("img",{attrs:{src:i.thumb,width:"50px",height:"50px",class:"imgs"}})},width:"120"},{prop:"startTime",label:"开始时间",width:"200"},{prop:"endTime",label:"结束时间",width:"200"},{prop:"createdDate",label:"创建时间",width:"200"},{prop:"lastUpdateDate",label:"更新时间",width:"200"}]},Object(ee["a"])(e,"selected",[]),Object(ee["a"])(e,"selectionType","single"),e)}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.queryLiveVideoResult(t).then(function(t){t=JSON.parse(t.replace("result(","").replace(/\)*$/,"")),e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var i={};return Object.keys(e).map(function(t){e[t]&&(i[t]=e[t])}),i},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.vId});e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.vId)>-1&&e.push(a),e},[])},reset:function(){this.searchForm={callbackparam:"result",source:"tencent",nodeType:"live",cateid:"",title:""},this.table.data=[]}},created:function(){this.table.selectionType=this.multi}}),Re=$e,Ne=Object(O["a"])(Re,De,Pe,!1,null,"114ed9c9",null),Le=Ne.exports,Ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[i("el-collapse",{attrs:{value:"1"}},[i("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[i("el-form",{attrs:{inline:!0,"label-width":"72px"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[i("el-form-item",{attrs:{label:"专题类别"}},[i("el-select",{model:{value:e.searchForm.levelType,callback:function(t){e.$set(e.searchForm,"levelType",t)},expression:"searchForm.levelType"}},e._l(e.options,function(e){return i("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"专题名称"}},[i("el-input",{model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),i("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},Ve=[],Oe={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:["multi"],data:function(){return{pagination:{currentPage:1,pageSize:10},searchForm:{resType:"operation",dataType:"topic",callback:"result",levelType:"",title:""},options:[{label:"大专题",value:"parentTopic"},{label:"小专题",value:"childTopic"}],table:{props:{},data:[],header:[{prop:"id",label:"ID",fixed:!0,width:"100"},{prop:"title",label:"专题名称",fixed:!0,width:"220"},{prop:"picture",label:"专题背景",render:function(e,t){var i=t.row;if(i.picture)return e("img",{attrs:{src:i.picture,width:"110px",height:"50px",class:"imgs"}})},width:"120"},{prop:"dataSign",label:"专题类别",width:"200",formatter:function(e){return"parentTopic"===e.dataSign?"大专题":"childTopic"===e.dataSign?"小专题":void 0}},{prop:"lastUpdateDate",label:"更新时间",width:"200"}],selected:[],selectionType:"single"},selected:[]}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("single-select",e)},reset:function(){this.searchForm={resType:"operation",dataType:"topic",callback:"result",levelType:"",title:""},this.table.data=[]},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var i={};return Object.keys(e).map(function(t){e[t]&&(i[t]=e[t])}),i},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.id});e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.id)>-1&&e.push(a),e},[])},created:function(){this.table.selectionType=this.multi}}},Ee=Oe,Me=Object(O["a"])(Ee,Ae,Ve,!1,null,"1159c298",null),Ue=Me.exports,Be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},je=[],qe={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"],RemoteSelect:N["RemoteSelect"]},props:{multi:{type:String,default:"single"},params:Object},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"appId",width:"70"},{label:"应用名称",prop:"appName",width:"100"},{label:"应用包名",prop:"appPackageName"},{label:"图片",prop:"appImageUrl",render:function(e,t){var i=t.row;return e("img",{attrs:{src:i.appImageUrl,width:"50px",height:"50px",class:"imgs"}})}}],data:[],selected:[],selectionType:"multiple"}}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},selectCancel:function(){this.$emit("select-cancel")},handleChange:function(e,t,i){for(var a=[],n=0;n<e.length;n++)a.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(a)},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.appId});e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.appId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();Object.assign(t,this.params),this.$service.getAppManagementList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){this.table.selectionType=this.multi;var e=J.a.map({appId:J.a.o.string.other("form",{component:"Input",placeholder:"应用ID",cols:{item:3,label:0}}),appName:J.a.o.string.other("form",{component:"Input",placeholder:"应用名称",cols:{item:3,label:0}}),appPackageName:J.a.o.string.other("form",{component:"Input",placeholder:"应用包名",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},We=qe,ze=(i("cc9a"),Object(O["a"])(We,Be,je,!1,null,"37619120",null)),Je=ze.exports,He=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},Ge=[],Ke={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"],RemoteSelect:N["RemoteSelect"]},props:{multi:{type:String,default:"single"},params:Object},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"集数名",prop:"urlCollection",width:"70"},{label:"单集ID",prop:"coocaaMId",width:"100"},{label:"单集名称",prop:"urlTitle"},{label:"图片",prop:"thumb",render:function(e,t){var i=t.row;return e("img",{attrs:{src:i.thumb,width:"50px",height:"50px",class:"imgs"}})}},{label:"素材类型",width:"120",prop:"urlIsTrailer",render:function(e,t){var i=t.row;return"1"===i.urlIsTrailer?"非正片":"正片"}}],data:[],selected:[],selectionType:"multiple"}}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("single-select",e)},selectCancel:function(){this.$emit("select-cancel")},handleChange:function(e,t,i){for(var a=[],n=0;n<e.length;n++)a.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(a)},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.coocaaMId});e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.coocaaMId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();Object.assign(t,this.params),this.$service.getSegmentList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){this.table.selectionType=this.multi;var e=J.a.map({urlIsTrailer:J.a.o.enum({"非正片":"1","正片":"0"}).other("form",{component:"Select",placeholder:"素材类型",cols:{item:3,label:0}}),urlTitle:J.a.o.string.other("form",{component:"Input",placeholder:"单集名称",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Ye=Ke,Xe=(i("5045"),Object(O["a"])(Ye,He,Ge,!1,null,"4cd8ab39",null)),Ze=Xe.exports,Qe={components:{RemoteSelect:N["RemoteSelect"],ContentWrapper:N["ContentWrapper"],Table:N["Table"],BroadcastFilter:ue,MovieFilter:Te,EduFilter:xe,LiveFilter:Le,TopicsFilter:Ue,MovieSingleFilter:Ze,AppFilter:Je},props:{resourceOptions:{type:Object,default:{multi:"single",tabShow:{broadcast:!0}}},title:String},data:function(){return{mode:"list",currentTab:"broadcast",movieSelect:null,disablePartner:!0,selectAll:{},selected:null,pannelResourceNew:"",pannelResource:"",multi:null,movieParams:null}},methods:{movieSelectComfirm:function(e){this.mode="list",this.movieSelect=e,this.$refs.selector.showDialog=!0},multipleSelect:function(){var e=this;this.selectAll||(this.$refs.selector.showDialog=!0,this.$message("请选择一条记录"));var t=[],i=Object.keys(this.selectAll),a=function(a){var n=i[a];e.selectAll[n].forEach(function(i){t.push(e.callbackParam(n,i))})};for(var n in i)a(n);this.$emit("confirm-click",t)},selectCancel:function(){"list"!==this.mode?this.mode="list":this.$emit("select-cancel")},selectSingle:function(e){this.mode="movieSingleFilter",this.movieParams=e,this.$refs.selector.showDialog=!0},rowClick:function(e,t){var i=this.callbackParam(t,e);this.$emit("confirm-click",i)},callbackParam:function(e,t){var i={type:"",contentType:"",thirdIdOrPackageName:""};switch(e){case"video":i.contentType="movie","o_tencent"===this.pannelResourceNew||"tencent"===this.pannelResourceNew?i.thirdIdOrPackageName="_otx_"+t.coocaaVId:"o_iqiyi"===this.pannelResourceNew||"yinhe"===this.pannelResourceNew?i.thirdIdOrPackageName="_oqy_"+t.coocaaVId:i.thirdIdOrPackageName=t.coocaaVId,i.pictureUrl=t.thumb,i.title=t.title,i.subTitle=t.subTitle,i.type="res";break;case"app":i.contentType="app",i.coverType="app",i.thirdIdOrPackageName=t.appPackageName,i.pictureUrl=t.appImageUrl,i.title=t.appName,i.type="app";break;case"edu":i.contentType="edu",i.thirdIdOrPackageName="_otx_"+t.coocaaVId,i.platformId=t.source,i.pictureUrl=t.thumb,i.title=t.title,i.subTitle=t.subTitle,i.type="res";break;case"pptv":i.contentType="pptv",i.thirdIdOrPackageName="pptv_tvsports://tvsports_detail?section_id="+t.pid+"&from_internal=1",i.title=t.pTitle,i.type="";break;case"live":i.contentType="txLive",i.thirdIdOrPackageName="_otx_"+t.vId,i.platformId=t.source,i.pictureUrl=t.thumb,i.title=t.title,i.subTitle=t.subTitle,i.type="live";break;case"topics":"parentTopic"===t.dataSign?i.contentType="bigTopic":i.contentType="topic",i.thirdIdOrPackageName=t.id+"",i.pictureUrl=t.picture,i.title=t.title,i.subTitle=t.subTitle,i.type="topic";break;case"broadcast":i.contentType="rotate",i.thirdIdOrPackageName=t.id+"",i.pictureUrl=t.picture,i.title=t.title,i.subTitle=t.subTitle,i.type="rotate";break;default:break}return i}},created:function(){this.multi=this.resourceOptions.multi?"multiple":"single";var e=Object.keys(this.resourceOptions.tabShow);this.currentTab=e[0]},mounted:function(){switch(this.$refs.selector.showDialog=!0,this.pannelResource){case"o_tencent":this.pannelResourceNew="tencent",this.disablePartner=!0;break;case"o_iqiyi":this.pannelResourceNew="yinhe",this.disablePartner=!0;break;case"o_voole":this.pannelResourceNew="voole",this.disablePartner=!0;break;default:this.pannelResourceNew="tencent",this.disablePartner=!1}}},et=Qe,tt=(i("d73f"),Object(O["a"])(et,fe,be,!1,null,"11b0adac",null)),it=tt.exports,at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return i("div",{staticClass:"box-list"},[i("p",{staticClass:"list-p"},[i("img",{staticClass:"list-img",attrs:{src:a.pictureUrl,alt:""}})]),i("p",{staticClass:"list-title"},[e._v(e._s(a.pictureName))]),i("p",{staticStyle:{margin:"0"}},[1==a.pictureStatus?i("span",[e._v("审核通过")]):i("span",[e._v("待审核")]),i("span",[e._v(e._s(a.pictureResolution))])])])}}])})],1)],1)},nt=[],lt={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"],CardList:N["CardList"]},props:{title:String},data:function(){var e=this;return{materialTypes:{},pictureStatus:{"审核通过":1,"待审核":2},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pictureId",width:"70"},{label:"pictureUrl",prop:"pictureUrl",width:"70",render:function(t,i){var a=i.row;return t("img",{attrs:{src:a.pictureUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(a)}}})}},{label:"素材名称",width:"120",prop:"pictureName",sortable:!0},{label:"分辨率",prop:"pictureResolution",width:"110",sortable:!0},{label:"状态",prop:"pictureStatus",width:"90",render:function(e,t){var i=t.row;switch(i.pictureStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"素材类型",prop:"materialTypes",width:"70",render:function(e,t){var i=t.row;return i.materialTypes.length>0?i.materialTypes[0].dictCnName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0},{label:"操作",width:"200",fixed:"right",render:N["utils"].component.createOperationRender(this,{editData:"编辑"})}],data:[],selected:void 0,selectionType:"single"}}},methods:{handleRowSelectionChange:function(e,t){this.$emit("input",e),"single"===this.table.selectionType&&this.$emit("close-dialog","savePicture");this.table.selected=t},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getResourceList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=J.a.map({pictureId:J.a.o.string.other("form",{component:"Input",placeholder:"素材ID",cols:{item:3,label:0}}),pictureName:J.a.o.string.other("form",{component:"Input",placeholder:"素材名称",cols:{item:3,label:0}}),pictureCategory:J.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别",cols:{item:3,label:0}}),pictureStatus:J.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},ot=lt,rt=(i("8d7d"),Object(O["a"])(ot,at,nt,!1,null,"92808da6",null)),st=rt.exports,ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return i("div",{staticClass:"box-list"},[i("p",{staticClass:"list-p"},[i("img",{staticClass:"list-img",attrs:{src:a.imgUrl,alt:""}})]),i("p",{staticClass:"list-title"},[e._v(e._s(a.cornerIconName))]),i("p",{staticStyle:{margin:"0"}},[1==a.cornerStatus?i("span",[e._v("审核通过")]):i("span",[e._v("待审核")])])])}}])})],1)],1)},ut=[],dt={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"],CardList:N["CardList"]},props:{title:String,typePosition:Number,cornerIconTypeOptions:Object,visible:!1},watch:{visible:function(e){e&&this.fetchData()}},data:function(){var e=this;return{pictureStatus:{"审核通过":1,"待审核":2},cornerIconType:{typePosition:this.typePosition,typeId:""},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{currentPage:1,pageSize:10},selected:[],table:{props:{},header:[{label:"ID",prop:"cornerIconId",width:"70"},{label:"imgUrl",prop:"imgUrl",width:"70",render:function(t,i){var a=i.row;return t("img",{attrs:{src:a.imgUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(a)}}})}},{label:"角标名称",width:"120",prop:"cornerIconName",sortable:!0},{label:"状态",prop:"cornerStatus",width:"90",render:function(e,t){var i=t.row;switch(i.cornerStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"角标类型",prop:"cornerIconType",width:"70",render:function(e,t){var i=t.row;return i.cornerIconType.length>0?i.cornerIconType[0].typeName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0},{label:"操作",width:"200",fixed:"right",render:N["utils"].component.createOperationRender(this,{editData:"编辑"})}],data:[],selected:void 0,selectionType:"single"}}},methods:{handleRowSelectionChange:function(e,t){console.log(e),this.$emit("input",e);this.table.selected=t},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={page:1,rows:10},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),this.cornerIconType.typeId=e.cornerIconType,this.cornerIconType.typePosition=this.typePosition,e.cornerIconType=void 0,e["cornerIconType.typeId"]=this.cornerIconType.typeId,e["cornerIconType.typePosition"]=this.cornerIconType.typePosition,e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getCornerList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})}},created:function(){var e=J.a.map({cornerIconId:J.a.o.string.other("form",{component:"Input",placeholder:"角标ID",cols:{item:3,label:0}}),cornerIconName:J.a.o.string.other("form",{component:"Input",placeholder:"角标名称",cols:{item:3,label:0}}),cornerIconType:J.a.o.enum(this.cornerIconTypeOptions).other("form",{component:"Select",placeholder:"角标类别",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.filterSchema=e}},pt=dt,ht=(i("257e"),Object(O["a"])(pt,ct,ut,!1,null,"6797c012",null)),mt=ht.exports,ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-form-item",{attrs:{label:"应用包名",prop:e.formProp("packagename"),rules:e.rules.packagename}},[i("el-input",{model:{value:e.inputValue.packagename,callback:function(t){e.$set(e.inputValue,"packagename","string"===typeof t?t.trim():t)},expression:"inputValue.packagename"}})],1),i("el-form-item",{attrs:{label:"应用版本号",prop:e.formProp("versioncode"),rules:e.rules.versioncode}},[i("el-input",{model:{value:e.inputValue.versioncode,callback:function(t){e.$set(e.inputValue,"versioncode","string"===typeof t?t.trim():t)},expression:"inputValue.versioncode"}})],1),i("el-form-item",{attrs:{label:"启动动作",prop:e.formProp("dowhat"),rules:e.rules.dowhat}},[i("el-select",{model:{value:e.inputValue.dowhat,callback:function(t){e.$set(e.inputValue,"dowhat",t)},expression:"inputValue.dowhat"}},[i("el-option",{attrs:{label:"startActivity",value:"startActivity"}}),i("el-option",{attrs:{label:"startService",value:"startService"}}),i("el-option",{attrs:{label:"sendBroadcast",value:"sendBroadcast"}})],1)],1),i("el-form-item",{attrs:{label:"启动方式",prop:e.formProp("bywhat"),rules:e.rules.bywhat}},[i("el-select",{model:{value:e.inputValue.bywhat,callback:function(t){e.$set(e.inputValue,"bywhat",t)},expression:"inputValue.bywhat"}},[i("el-option",{attrs:{label:"action",value:"action"}}),i("el-option",{attrs:{label:"class",value:"class"}}),i("el-option",{attrs:{label:"uri",value:"uri"}}),i("el-option",{attrs:{label:"activity",value:"activity"}})],1)],1),i("el-form-item",{attrs:{label:"启动参数",prop:e.formProp("byvalue"),rules:e.rules.byvalue}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.inputValue.byvalue,callback:function(t){e.$set(e.inputValue,"byvalue","string"===typeof t?t.trim():t)},expression:"inputValue.byvalue"}})],1),i("el-form-item",{attrs:{label:"扩展参数"}},[e._l(e.inputValue.params,function(t,a){return i("div",{key:a,staticClass:"app-extend-params"},[i("el-form-item",{attrs:{label:"key:","label-width":"60px",prop:e.formProp("params."+a+".key"),rules:e.rules.params.key}},[i("el-input",{model:{value:t.key,callback:function(i){e.$set(t,"key","string"===typeof i?i.trim():i)},expression:"param.key"}})],1),i("el-form-item",{attrs:{label:"value:","label-width":"60px",prop:e.formProp("params."+a+".value"),rules:e.rules.params.value}},[i("el-input",{model:{value:t.value,callback:function(i){e.$set(t,"value","string"===typeof i?i.trim():i)},expression:"param.value"}})],1),i("a",{staticClass:"app-params__remove-param",on:{click:function(t){return e.handleRemoveParam(a)}}},[i("i",{staticClass:"el-icon-minus"})])],1)}),i("el-button",{attrs:{type:"primary"},on:{click:e.handleAddParam}},[i("i",{staticClass:"el-icon-plus"}),e._v(" 添加\n        ")])],2)],1)},bt=[],gt={data:function(){function e(e,t,i){/[！￥……（）——【】：；“”‘’、《》，。？\s+]/.test(t)?i(new Error("请勿输入特殊或空白字符")):i()}return{inputValue:{packagename:void 0,versioncode:void 0,dowhat:void 0,bywhat:void 0,byvalue:void 0,params:[],exception:{}},rules:{packagename:[{required:!0,message:"请输入应用包名",trigger:"blur"}],versioncode:[{required:!0,message:"请输入应用版本号",trigger:"blur"}],dowhat:[{required:!0,message:"请选择启动动作",trigger:"blur"}],bywhat:[{required:!0,message:"请选择启动方式",trigger:"blur"}],byvalue:[{required:!0,message:"请输入启动参数",trigger:"blur"}],params:{key:[{required:!0,message:"不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],value:[{required:!0,message:"不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}}},props:["value","label-width","propPrefix"],watch:{value:"setInputValue"},methods:{formProp:function(e){return(this.propPrefix||"")+e},genDefaultValue:function(){return{packagename:void 0,versioncode:void 0,dowhat:void 0,bywhat:void 0,byvalue:void 0,params:[]}},setInputValue:function(e){e!==this.inputValue&&(this.inputValue=Object.assign(this.genDefaultValue(),e))},emitInputValue:function(e){this.$emit("input",this.inputValue)},handleAddParam:function(){this.inputValue.params.push({key:void 0,value:void 0})},handleRemoveParam:function(e){this.inputValue.params.splice(e,1)}},created:function(){this.value&&this.setInputValue(this.value),this.$watch("inputValue",this.emitInputValue,{deep:!0})}},vt=gt,yt=(i("a092"),Object(O["a"])(vt,ft,bt,!1,null,null,null)),wt=yt.exports,It=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.handleRowSelectionChange}})],1)],1)},Tt=[],kt={},St=Object(O["a"])(kt,D,P,!1,null,null,null),Ct=(St.exports,{components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:void 0,table:{props:{},header:[{label:"ID",prop:"commonOnclickId",width:"70"},{label:"点击事件名称",prop:"onlickName"},{label:"备注",prop:"remark"},{label:"修改人",prop:"modifierName"},{label:"修改时间",prop:"lastUpdateDate",width:"170"}],data:[],selected:[],selectionType:"single"}}},methods:{rowClick:function(e){this.$emit("row-click",e)},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getClickData(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},handleRowSelectionAdd:function(e){this.selected.push(e.commonOnclickId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.commonOnclickId}),this.updateTableSelected()},handleRowSelectionChange:function(e,t){this.table.selected=t,this.$emit("clcik",e)},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.commonOnclickId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e}},created:function(){var e=J.a.map({commonOnclickId:J.a.o.string.other("form",{component:"Input",placeholder:"ID  ",cols:{item:3,label:0}}),onlickName:J.a.o.string.other("form",{component:"Input",placeholder:"点击事件名称",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}}),_t=Ct,Ft=(i("d09a"),Object(O["a"])(_t,It,Tt,!1,null,"1b15319b",null)),xt=Ft.exports,Dt={components:{draggable:ie.a,BroadcastSource:me,ResourceSelector:it,DialogPicture:st,DialogCorner:mt,ccAppParamsForm:wt,selectClick:xt},props:{editId:Number,default:null},data:function(){var e;return e={onclickEventVisibleFlag:"",clickData:void 0,onclickEventVisible:!1,cornerIconTypeOptions:{},cornerTypes:[],materialTypes:null,resourceVisible:!1,resourceOptions:{multi:!1,activeTabName:"video",tabShow:{video:!0,app:!0,edu:!0,live:!0,broadcast:!0}},basicForm:{containerName:"",containerType:"REFERENCE_BROADCASTING",configModel:"broadcast"},normalForm:{},lowerForm:{coverType:"media"},auditDisabled:!1,normalRules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],"poster.pictureUrl":[{required:!0,message:"请上传海报",trigger:"blur"}],thirdIdOrPackageName:[{required:!0,message:"请填选择资源",trigger:"blur"}]},lowerRules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],"poster.pictureUrl":[{required:!0,message:"请上传海报",trigger:"blur"}],thirdIdOrPackageName:[{required:!0,message:"请填选择资源",trigger:"blur"}]},normalResourceBtn:"轮播资源",currentIndex:0,pictureListOptions:{poster:{idField:"pictureId",searchParams:{pictureId:{label:"素材ID"},pictureName:{label:"素材名称"},pictureCategory:{label:"素材类别",options:[]},pictureStatus:{label:"素材状态",options:[{label:"审核通过",value:"1"},{label:"待审核",value:"2"}]}},picField:"pictureUrl",textItems:[{field:"pictureName"},{field:"pictureStatus",customFormatter:function(e,t){return["","审核通过","待审核"][t]}}]},corner:{idField:"cornerIconId",searchParams:{cornerIconId:{label:"角标ID"},cornerIconName:{label:"角标名称"},"cornerIconType.typeId":{label:"角标类别",options:[]}},picField:"imgUrl",textItems:[{field:"cornerIconName"},{field:"cornerStatus",customFormatter:function(e,t){return["","审核通过","待审核"][t]}}]}},signDisabled:!1,modelType:"broadcast",versionForm:{title:"",subTitle:"",type:"",coverType:"media",thirdIdOrPackageName:"",subchannelId:"",subchannelIs:"",params:{},onclick:"",sign:"autoSet",contentType:"",clickParams:"",poster:{},cornerIconList:[{},{},{},{}]},pictureType:"",currentForm:"",pannelResource:"",autoWrite:!0,normalVersionContent:[],openModeArray:[{name:"第三方应用",value:"app"}],referenceDataNormal:[],referenceData:[],noPreview:"noPreview",referenceOptions:{picture:!1}},Object(ee["a"])(e,"resourceVisible",!1),Object(ee["a"])(e,"layoutOptions",{contentDataNew:[]}),Object(ee["a"])(e,"selectPicture",""),Object(ee["a"])(e,"resourceSeq",""),Object(ee["a"])(e,"layoutparam",{}),Object(ee["a"])(e,"layouttypenew",""),Object(ee["a"])(e,"checkresourceis",!0),Object(ee["a"])(e,"customDialogPicture",{}),Object(ee["a"])(e,"customDialogCorner",{}),Object(ee["a"])(e,"pictureOptions",{}),e},computed:{classObject:function(){return"autoSet"===this.normalForm.sign?{height:"600px"}:{height:"1000px"}}},watch:{"basicForm.configModel":{deep:!0,handler:function(e,t){"group"===e?this.normalResourceBtn="播放资源":"broadcast"===e&&(this.normalResourceBtn="轮播资源")}},"normalForm.sign":{deep:!0,handler:function(e,t){"manualSet"===e&&(this.normalForm.coverType="custom",this.normalForm.contentType="custom",!1===this.autoWrite&&(this.normalForm.type="url"))}}},methods:{clickThirdpartSubmit:function(){var e=this.onclickEventVisibleFlag;if("lower"===e){var t=this.$refs.openWayLower.inputValue;this.parseOnclick(t)}else{var i=this.$refs.openWayNormal.inputValue;this.parseOnclick(i)}},selectCancel:function(e){this.resourceVisible=!1,"savePicture"===e&&this.savePicture()},parseOnclick:function(e){var t=this.clickData;Object.keys(e).map(function(i){if("params"===i){var a=JSON.parse(t[i]);e[i]=Object.keys(a).map(function(e){return{key:e,value:a[e]}})}else e[i]=t[i]})},getClickData:function(e){this.clickData=e,console.log(this.clickData)},autoWriteFun:function(){if(this.autoWrite=!this.autoWrite,!1===this.autoWrite){this.normalForm=Object.assign({},this.versionForm),this.normalVersionContent.splice(this.currentIndex,1,this.normalForm),this.normalForm.sign="manualSet",this.signDisabled=!0,this.normalForm.type="url",this.normalForm.contentType="custom",this.normalForm.coverType="custom";var e=Object.assign({},this.normalForm),t={url:this.normalForm.thirdIdOrPackageName,source:"",name:this.normalForm.title,needParse:"false",url_type:"web"};e.params=JSON.stringify(t),this.normalForm=e}else this.normalForm=Object.assign({},this.versionForm),this.normalForm.sign="autoSet",this.signDisabled=!1,this.normalVersionContent[this.currentIndex]=this.normalForm},deleteCorner:function(e,t){var i=e.cornerIconList.slice(0);i[t]={cornerIconId:"",imgUrl:"",position:t},e.cornerIconList=i,console.log(e)},modelChange:function(e){var t=this;this.$confirm("切换后配置数据将被清空, 是否确认切换?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"模式切换成功!"}),t.modelType=t.basicForm.configModel,t.clearFormAll()}).catch(function(){t.$message({type:"info",message:"已取消切换"});var e=Object.assign({},t.basicForm);e.configModel=t.modelType,t.basicForm=e})},clearFormAll:function(){this.normalForm=Object.assign({},this.versionForm),this.lowerForm=Object.assign({},this.versionForm);var e=[];e.push(this.normalForm),this.normalVersionContent=e},selectResource:function(e,t,i){this.resourceVisible=!0,this.resourceOptions.activeTabName="video",this.currentForm=t;var a=Object.assign({},this.resourceOptions);a.multi=!1,"multiSelect"===i&&(a.multi=!0),a.activeTabName="video","normal"===e?"broadcast"===this.basicForm.configModel?(a.tabShow={broadcast:!0},a.activeTabName="broadcast"):"group"===this.basicForm.configModel&&(a.tabShow={video:!0,edu:!0,live:!0,topics:!1,broadcast:!0}):"lower"===e&&("media"===this.lowerForm.coverType?a.tabShow={video:!0,edu:!0,live:!0,topics:!0,broadcast:!0}:"app"===this.lowerForm.coverType&&(a.tabShow={app:!0},a.activeTabName="app")),this.resourceOptions=a},paramIdFun:function(e,t){if("movie"===t.contentType)if(t.singleId)var i={id:t.thirdIdOrPackageName,vid:t.singleId};else i={id:t.thirdIdOrPackageName};else if("app"===t.contentType||"edu"===t.contentType||"txLive"===t.contentType)i={id:t.thirdIdOrPackageName};else if("bigTopic"===t.contentType)i={pTopicCode:t.thirdIdOrPackageName};else if("topic"===t.contentType)i={topicCode:t.thirdIdOrPackageName};else if("rotate"===t.contentType)i={rotateId:t.thirdIdOrPackageName};return i},packageFormParam:function(e,t){var i=JSON.parse(JSON.stringify(this.versionForm));i=Object.assign({},i,e),"rotate"===e.contentType?i.subchannelIs=!0:i.subchannelIs=!1,"bigTopic"===e.contentType?i.smallTopicsIs=!0:i.smallTopicsIs=!1,e.pictureUrl&&(i.poster.pictureUrl=e.pictureUrl,i.poster.pictureId=e.pictureId);var a=this.paramIdFun(i,e);return i.clickParams=JSON.stringify(a),i.params=JSON.stringify(a),i},smallTopicsLower:function(){if(this.lowerForm.smallTopicsId){var e=JSON.parse(this.lowerForm.params);e.topicCode=this.lowerForm.smallTopicsId,this.lowerForm.params=JSON.stringify(e)}},getUrlBlur:function(){if(!1===this.autoWrite){var e=Object.assign({},this.normalForm),t={url:this.normalForm.thirdIdOrPackageName,source:"",name:this.normalForm.title,needParse:"false",url_type:"web"};e.params=JSON.stringify(t),this.normalForm=e}},getTitleNormal:function(){if(!1===this.autoWrite){var e=Object.assign({},this.normalForm),t={url:this.normalForm.thirdIdOrPackageName,source:"",name:this.normalForm.title,needParse:"false",url_type:"web"};e.params=JSON.stringify(t),this.normalForm=e,this.normalVersionContent.splice(this.currentIndex,1,this.normalForm)}},getSubchannel:function(e){if(e.subchannelId){var t=JSON.parse(e.params);t.stationId=e.subchannelId,e.params=JSON.stringify(t)}},resourceConfirm:function(e,t){var i=this;this.resourceVisible=!1,this.normalVersionContent=this.normalVersionContent.filter(function(e){return""!==e.type}),e instanceof Array?(this.normalVersionContent=e.reduce(function(e,t){return e.push(i.packageFormParam(t)),e},this.normalVersionContent),this[t]=this.normalVersionContent[0]):(this[t]=this.packageFormParam(e),this.normalVersionContent.push(this.packageFormParam(e,t)))},checkNormalForm:function(e){var t=this;this.$refs.normalForm.validate(function(i){if(!i)return t.$message("请将表单填写完整"),!1;"manualSet"===t.normalForm.sign?(t.normalVersionContent.splice(t.currentIndex,1,t.normalForm),e()):e()})},checkLowerForm:function(e){var t=this;this.$refs.lowerForm.validate(function(i){if(!i)return t.$message("请将表单填写完整"),!1;t.lowerForm.coverType,e()})},deepClone:function(e){return JSON.parse(JSON.stringify(e))},addNormal:function(e){var t=this;this.checkNormalForm(function(){t.normalForm=t.deepClone(t.versionForm),t.normalVersionContent.push(t.normalForm),t.currentIndex=t.normalVersionContent.length-1,t.referenceDataNormal=[],t.autoWrite=!0,t.signDisabled=!1})},deleteNormal:function(e){var t=this;this.$confirm("是否删除当前选中项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"}),t.normalVersionContent.splice(e,1),t.currentIndex=0,t.normalForm=t.normalVersionContent[0],"url"===t.normalForm.type?t.autoWrite=!1:t.autoWrite=!0,"manualSet"===t.normalForm.sign?(t.referenceDataNormal={onclick:t.normalForm.onclick,params:"openMode==app"},"url"!==t.normalForm.type?t.signDisabled=!1:t.signDisabled=!0):t.signDisabled=!0}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},switchNormal:function(e){var t=this;this.checkNormalForm(function(){t.$message("请填充或修改当前表单的内容！"),t.currentIndex=e,t.normalForm=t.normalVersionContent[e],"url"===t.normalForm.type?t.autoWrite=!1:t.autoWrite=!0,"manualSet"===t.normalForm.sign?(t.referenceDataNormal={onclick:t.normalForm.onclick,params:"openMode==app"},"url"===t.normalForm.type?t.signDisabled=!0:t.signDisabled=!1):t.signDisabled=!1,t.normalVersionContent.splice(e,1,t.normalForm)})},openPicture:function(e,t,i){this.pictureType=e,this.currentForm=t,"poster"===e?this.customDialogPicture={visible:!0,form:t}:this.customDialogCorner={visible:!0,form:t,index:i},this.pictureOptions=this.pictureListOptions[e]},savePicture:function(){var e=this.selectPicture;if("{}"===JSON.stringify(e))this.$message("请至少选择一项");else{if(this.customDialogPicture.visible=!1,"poster"===this.pictureType)this[this.currentForm].poster={pictureUrl:e.pictureUrl,pictureId:e.pictureId};else if("corner"===this.pictureType){var t=e.cornerIconType.typePosition,i={cornerIconId:e.cornerIconId,position:t,imgUrl:e.imgUrl},a=this[this.currentForm].cornerIconList.slice(0);a[t]=i,this[this.currentForm].cornerIconList=a,this.customDialogCorner.visible=!1}this.selectPicture={}}this.normalVersionContent[this.currentIndex]=this.normalForm},onDragStart:function(e){console.log(e)},onDragtEnd:function(e){console.log(e),this.currentIndex=e.newIndex,this.normalForm=this.normalVersionContent[e.newIndex]},lowerFill:function(){var e=Object.assign({},this.normalVersionContent[0]);this.lowerForm=e},cleanLowerForm:function(e){var t=Object.assign({},this.versionForm);t.type=e,t.coverType=e,"custom"===e&&(t.sign="openMode==app",t.contentType="custom",t.params="{}"),this.lowerForm=t},saveNormal:function(e){var t=this;this.checkNormalForm(function(){if("group"===t.basicForm.configModel){if(t.normalVersionContent.length<4)return t.$message("组合模式下，正常版本的配置资源至少4个，才可以进行保存！"),!1;e()}else e()})},submitCheck:function(){var e=this;this.$refs.basicForm.validate(function(t){if(!t)return e.$message("请将表单填写完整"),!1;e.saveNormal(function(){e.checkLowerForm(function(){var t={normalVersionContent:[],lowerVersionContent:{}};"group"===e.basicForm.configModel?(e.normalVersionContent.map(function(e){e.onclick&&(e.onclick=JSON.stringify(e.onclick)),delete e.thirdIdOrPackageName}),t.normalVersionContent=e.normalVersionContent):(e.normalForm.onclick&&(e.normalForm.onclick=JSON.stringify(e.normalForm.onclick)),t.normalVersionContent.push(e.normalForm)),delete e.lowerForm.smallTopicsId,t.lowerVersionContent=e.lowerForm;var i=Object.assign(t,e.basicForm);i.status=3,i.parentType="Block",console.log("resultObj",i),e.$service.saveBlockInfo(i),e.$emit("open-list-page")})})})},close:function(){window.parent.$("#add-view").dialog("_close")}},created:function(){var e=this,t=this;this.normalForm=Object.assign({},this.versionForm),this.lowerForm=Object.assign({},this.versionForm),this.lowerForm.smallTopicsId="",this.lowerForm.smallTopicsIs=!1,this.title=this.editId?"编辑页面":"新增页面",this.$service.getMaterialTypes().then(function(e){for(var i=[],a=0;a<e.length;a++){var n={label:e[a].dictCnName,value:e[a].dictId};i.push(n),t.pictureListOptions.poster.searchParams.pictureCategory.options=i}}),this.$service.getCornerTypes().then(function(t){for(var i={},a=0;a<t.length;a++){var n=t[a].typeName,l=t[a].typeId;i[n]=l}e.cornerIconTypeOptions=i})}},Pt=Dt,$t=(i("7290"),Object(O["a"])(Pt,Z,Q,!1,null,"5b913f9c",null)),Rt=$t.exports,Nt={components:{BroadcastBlockList:X,BroadcastBlockAdd:Rt},data:function(){return{mode:"list",editId:null,currentVersion:null}},methods:{openAddPage:function(e,t){this.editId=e,this.mode="add"},openListPage:function(){this.mode="list",this.$refs.list.fetchData()},goBack:function(){this.list="list"}}},Lt=Nt,At=Object(O["a"])(Lt,B,j,!1,null,"c5597e16",null),Vt=At.exports,Ot=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("MultiFunctionBlockList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?i("MultiFunctionBlockAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?i("MultiFunctionBlockView",{attrs:{viewId:e.viewId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},Et=[],Mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Ut=[],Bt={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{parentTypes:{"多版本推荐位":"multi","标记推荐位":"sign","秒杀推荐位":"secKill"},childTypes:{},pictureStatus:{"下架":0,"上架":1,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},source:{"无":0,"腾讯":1,"爱奇艺":2},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pluginId",width:"70"},{label:"功能名称",prop:"pluginName"},{label:"内容源",prop:"source",render:function(e,t){var i=t.row;switch(i.source){case 0:return"无";case 1:return"腾讯";case 2:return"爱奇艺"}}},{label:"状态",prop:"pluginStatus",render:function(e,t){var i=t.row;switch(i.pluginStatus){case 0:return"下架";case 1:return"上架";case 2:return"草稿";case 3:return"待审核";case 4:return"审核通过";case 5:return"审核不通过"}}},{label:"更新时间",prop:"lastUpdateDate"},{label:"操作",fixed:"right",render:N["utils"].component.createOperationRender(this,{previewData:"预览"})}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMultiBlockList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getPluginParentTypes:function(){this.$service.getPluginParentTypes().then(function(e){console.log(e)})},getPluginTypes:function(){var e=this;this.$service.getPluginTypes().then(function(t){console.log(t),0==t.code&&t.forEach(function(t){e.childTypes[t.label]=t.id})})},addData:function(){this.$emit("open-add-page",null)},editData:function(e){e.row;0==this.selected.length?this.$message("请选择一条数据"):this.selected.length>1?this.$message("只能选择一条"):this.$emit("open-add-page",this.selected[0])},previewData:function(e){var t=e.row;this.$emit("open-view-page",t.pluginId)},batchDel:function(){var e=this;0!==this.selected.length?this.selected.length>1?this.$message("只能选择一条数据"):window.confirm("确定要删除吗")&&this.$service.removeMulti({id:this.selected[0]},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.pluginId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pluginId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.pluginId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e}},created:function(){var e=J.a.map({pluginId:J.a.o.string.other("form",{component:"Input",placeholder:"ID",cols:{item:3,label:0}}),pluginName:J.a.o.string.other("form",{component:"Input",placeholder:"功能名称",cols:{item:3,label:0}}),pluginParentType:J.a.o.enum(this.parentTypes).other("form",{component:"Select",placeholder:"父功能名称",cols:{item:3,label:0}}),pluginStatus:J.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"状态",cols:{item:3,label:0}}),source:J.a.o.enum(this.source).other("form",{component:"Select",placeholder:"内容源",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getPluginParentTypes(),this.getPluginTypes(),this.filterSchema=e,this.fetchData()}},jt=Bt,qt=(i("179f"),Object(O["a"])(jt,Mt,Ut,!1,null,"49aba9e0",null)),Wt=qt.exports,zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{staticClass:"multi-func-block-upsert"},[i("div",{staticClass:"base-tit"},[i("span",[e._v("基本信息")])]),i("el-form",{ref:"blockForm",attrs:{rules:e.rules,model:e.block,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName",rules:e.rules.pluginInfo.pluginName}},[i("el-input",{model:{value:e.block.pluginInfo.pluginName,callback:function(t){e.$set(e.block.pluginInfo,"pluginName","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginName"}})],1),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[i("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[i("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime},model:{value:e.block.pluginInfo.refreshTime,callback:function(t){e.$set(e.block.pluginInfo,"refreshTime",t)},expression:"block.pluginInfo.refreshTime"}})],1)]),i("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[i("el-radio-group",{on:{change:e.handleChangeActivityFlag},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[i("el-radio",{attrs:{label:0}},[e._v("非活动")]),i("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType",rules:e.rules.pluginInfo.pluginParentType}},[i("el-select",{staticClass:"plugin-parent-type-selector",attrs:{value:e.block.pluginInfo.pluginParentType,disabled:"edit"===e.mode,placeholder:"请选择"},on:{input:e.handleChangePluginParentType}},e._l(e.pluginParentTypes,function(e){return i("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),"secKill"!==e.pluginParentType?i("el-form-item",{attrs:{label:"内容源",prop:"pluginInfo.source",rules:e.rules.pluginInfo.source}},[i("el-radio-group",{attrs:{value:e.block.pluginInfo.source,disabled:e.isDisabledSource},on:{input:e.handleChangeSource}},e._l(e.SOURCE,function(t,a){return i("el-radio",{key:a,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),"sign"===e.pluginParentType?[i("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[i("el-input",{model:{value:e.block.pluginInfo.pluginType,callback:function(t){e.$set(e.block.pluginInfo,"pluginType","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginType"}})],1)]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0?i("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[i("el-select",{staticClass:"plugin-type-selector",staticStyle:{width:"300px","max-width":"300px"},attrs:{value:e.block.pluginInfo.pluginType,placeholder:"请选择"},on:{input:e.handleChangePluginType}},e._l(e.pluginTypes,function(e){return i("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e.baseHasTitle?[i("el-form-item",{attrs:{label:"标题",prop:"helper.title",rules:e.rules.title}},[i("el-input",{model:{value:e.block.helper.title,callback:function(t){e.$set(e.block.helper,"title","string"===typeof t?t.trim():t)},expression:"block.helper.title"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle",rules:e.rules.subTitle}},[i("el-input",{model:{value:e.block.helper.subTitle,callback:function(t){e.$set(e.block.helper,"subTitle","string"===typeof t?t.trim():t)},expression:"block.helper.subTitle"}})],1)]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,a){return i("div",{key:a},[i("div",{staticClass:"base-tit"},[i("span",[e._v(e._s(t.label))])]),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"状态栏文字",prop:"rlsInfo."+a+".title",rules:e.rules.barText}},[i("el-input",{model:{value:t.title,callback:function(i){e.$set(t,"title","string"===typeof i?i.trim():i)},expression:"item.title"}}),e._v("|\n              "),i("el-input",{model:{value:t.subTitle,callback:function(i){e.$set(t,"subTitle","string"===typeof i?i.trim():i)},expression:"item.subTitle"}})],1)]:e._e(),e.versionHasTitle?[i("el-form-item",{attrs:{label:"标题",prop:"rlsInfo."+a+".title",rules:e.rules.title}},[i("el-input",{model:{value:t.title,callback:function(i){e.$set(t,"title","string"===typeof i?i.trim():i)},expression:"item.title"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"rlsInfo."+a+".subTitle",rules:e.rules.subTitle}},[i("el-input",{model:{value:t.subTitle,callback:function(i){e.$set(t,"subTitle","string"===typeof i?i.trim():i)},expression:"item.subTitle"}})],1)]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"商品ID",prop:"rlsInfo."+a+".goodsId",rules:e.rules.goodsId}},[i("el-input",{model:{value:t.goodsId,callback:function(i){e.$set(t,"goodsId","string"===typeof i?i.trim():i)},expression:"item.goodsId"}})],1),i("el-form-item",{attrs:{label:"商品名称",prop:"rlsInfo."+a+".title",rules:e.rules.goodsId}},[i("el-input",{model:{value:t.title,callback:function(i){e.$set(t,"title","string"===typeof i?i.trim():i)},expression:"item.title"}})],1)]:e._e(),i("el-form-item",{attrs:{label:"海报",prop:"rlsInfo."+a+".poster.pictureUrl",rules:e.rules.poster.pictureUrl}},[i("div",{staticClass:"poster",on:{click:function(t){return e.handleSelectPosterStart(a)}}},[t.poster.pictureUrl?i("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[i("el-form-item",{attrs:{label:"异形焦点",prop:"rlsInfo."+a+".extendInfo.focusImgUrl",rules:e.rules.focusImgUrl}},[i("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSelectFocusImgStart(a)}}},[e._v("选择异形焦点")]),t.extendInfo.focusImgUrl?i("div",{staticClass:"focus-transition"},[i("i",{staticClass:"focus-transition__remove el-icon-circle-close",attrs:{title:"移除异形焦点"},on:{click:function(t){return e.handleRemoveFocusImg(a)}}}),i("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):e._e()],1),i("el-form-item",{attrs:{label:"存活时间",prop:"rlsInfo."+a+".extendInfo.aliveTime",rules:e.rules.aliveTime}},[i("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[i("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime1},model:{value:t.extendInfo.aliveTime,callback:function(i){e.$set(t.extendInfo,"aliveTime",i)},expression:"item.extendInfo.aliveTime"}})],1)]),i("el-form-item",{attrs:{label:"点击次数",prop:"rlsInfo."+a+".extendInfo.clickCount",rules:e.rules.clickCount}},[i("el-input",{model:{value:t.extendInfo.clickCount,callback:function(i){e.$set(t.extendInfo,"clickCount",e._n(i))},expression:"item.extendInfo.clickCount"}})],1)]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType||"builtIn"===e.pluginParentType?i("el-form-item",{attrs:{label:"打开方式",rules:e.rules.openMode}},[i("el-select",{attrs:{value:t.openMode},on:{input:function(i){return e.handleChangeOpenMode(t,i)}}},["builtIn"===e.pluginParentType||"REFERENCE_MOVIE_VIP"===e.pluginType||"REFERENCE_ACTIVITY"===e.pluginType?i("el-option",{attrs:{label:"网页",value:"webpage"}}):e._e(),"REFERENCE_ACTIVITY"===e.pluginType?[i("el-option",{attrs:{label:"视频",value:"video"}}),i("el-option",{attrs:{label:"图片",value:"picture"}}),i("el-option",{attrs:{label:"版面",value:"tab"}})]:e._e(),i("el-option",{attrs:{label:"第三方应用",value:"app"}})],2),"app"===t.openMode?i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSelectClickStart(a)}}},[e._v("快速填充")]):e._e()],1):e._e(),"webpage"===t.openMode?[i("el-form-item",{attrs:{label:"网页地址",prop:"rlsInfo."+a+".onclick.webpageUrl",rules:e.rules.webpageUrl}},[i("el-input",{model:{value:t.onclick.webpageUrl,callback:function(i){e.$set(t.onclick,"webpageUrl","string"===typeof i?i.trim():i)},expression:"item.onclick.webpageUrl"}})],1),i("el-form-item",{attrs:{label:"网页类型",prop:"rlsInfo."+a+".onclick.webpageType"}},[i("el-radio-group",{model:{value:t.onclick.webpageType,callback:function(i){e.$set(t.onclick,"webpageType",i)},expression:"item.onclick.webpageType"}},[i("el-radio",{attrs:{label:"1"}},[e._v("浮窗网页")]),i("el-radio",{attrs:{label:"2"}},[e._v("全屏网页")])],1)],1),i("el-form-item",{attrs:{label:"应用版本号",prop:"rlsInfo."+a+".onclick.webpageAppVersion",rules:e.rules.webpageAppVersion}},[i("el-input",{model:{value:t.onclick.webpageAppVersion,callback:function(i){e.$set(t.onclick,"webpageAppVersion","string"===typeof i?i.trim():i)},expression:"item.onclick.webpageAppVersion"}})],1)]:e._e(),"video"===t.openMode?[i("el-form-item",{attrs:{label:"视频名称",prop:"rlsInfo."+a+".onclick.videoName",rules:e.rules.videoName}},[i("el-input",{model:{value:t.onclick.videoName,callback:function(i){e.$set(t.onclick,"videoName","string"===typeof i?i.trim():i)},expression:"item.onclick.videoName"}})],1),i("el-form-item",{attrs:{label:"视频地址",prop:"rlsInfo."+a+".onclick.videoUrl",rules:e.rules.videoUrl}},[i("el-input",{model:{value:t.onclick.videoUrl,callback:function(i){e.$set(t.onclick,"videoUrl","string"===typeof i?i.trim():i)},expression:"item.onclick.videoUrl"}})],1)]:e._e(),"tab"===t.openMode?[i("el-form-item",{attrs:{label:"版面",prop:"rlsInfo."+a+".onclick.tab",rules:e.rules.tab}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSelectTabStart(a)}}},[e._v("选择版面")]),t.onclick.tab?i("el-tag",{attrs:{type:"primary"}},[e._v("已选择: "+e._s(t.onclick.tab.tabId))]):e._e()],1)]:e._e(),"picture"===t.openMode?[i("el-form-item",{attrs:{label:"选择图片",prop:"rlsInfo."+a+".onclick.picture",rules:e.rules.picture}},[i("el-upload",{attrs:{action:e.urls.uploadImg,"on-success":e.createUploadSuccessHandler(a),"on-remove":e.createUploadRemoveHandler(a),multiple:!1,"file-list":t.onclick.picture,accept:"image/png, image/gif, image/jpeg, image/bmp","list-type":"picture"}},[i("el-button",{attrs:{type:"primary"}},[e._v("点击上传")]),i("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("提示:只能上传png/gif/jpg/bmp文件")])],1)],1)]:e._e(),"app"===t.openMode?i("ccAppParamsForm",{attrs:{"label-width":"140px","prop-prefix":"rlsInfo."+a+".onclick."},model:{value:t.onclick,callback:function(i){e.$set(t,"onclick",i)},expression:"item.onclick"}}):e._e()],2)}):e._e()],2),i("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("selectResource",{on:{selected:e.getSelectResource}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogClickTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogClickTableVisible=t}}},[i("selectClick",{on:{clcik:e.getClickData}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogClickTableVisible=!1}}},[e._v("取 消")])],1)],1),i("el-dialog",{attrs:{visible:e.showFocusImgSelectorVisible,width:"1200px"},on:{"update:visible":function(t){e.showFocusImgSelectorVisible=t}}},[i("selectImg",{on:{selectImg:e.getSelectImg}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showFocusImgSelectorVisible=!1}}},[e._v("取 消")])],1)],1),i("div",{staticStyle:{padding:"10px","text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitAudit}},[e._v("提交审核")])],1)],1)])},Jt=[],Ht=(i("7f7f"),i("28a5"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handle},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})}),Gt=[],Kt={data:function(){return{value1:"",time:""}},methods:{parseStrToMin:function(e){var t=e.split(":"),i=parseInt(t[0]),a=parseInt(t[1]);return 60*i+a},handle:function(){void 0!=this.value1&&(this.time=this.parseStrToMin(this.value1),this.$emit("input",this.time))}}},Yt=Kt,Xt=Object(O["a"])(Yt,Ht,Gt,!1,null,null,null),Zt=Xt.exports,Qt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return i("div",{staticClass:"box-list"},[i("p",{staticClass:"list-p"},[i("img",{staticClass:"list-img",attrs:{src:a.pictureUrl,alt:""},on:{click:function(t){return e.reviewPic(a.pictureUrl)}}})]),i("p",{staticClass:"list-title"},[e._v(" "+e._s(a.pictureName))]),i("p",{staticStyle:{margin:"0"}},[1==a.pictureStatus?i("span",[e._v("审核通过")]):i("span",[e._v("待审核")]),i("span",[e._v(" "+e._s(a.pictureResolution))])])])}}])}),i("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.picDialogVisible=t}}},[i("span",{staticClass:"pics"},[i("img",{staticStyle:{width:"50%"},attrs:{src:e.reviewPicUrl,alt:"图片"}})])])],1)],1)},ei=[],ti={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"],CardList:N["CardList"]},data:function(){var e=this;return{materialTypes:{},pictureStatus:{"审核通过":1,"待审核":2},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pictureId",width:"70"},{label:"ID",prop:"pictureUrl",width:"70",render:function(t,i){var a=i.row;return t("img",{attrs:{src:a.pictureUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(a)}}})}},{label:"素材名称",width:"120",prop:"pictureName",sortable:!0},{label:"分辨率",prop:"pictureResolution",width:"110",sortable:!0},{label:"状态",prop:"pictureStatus",width:"90",render:function(e,t){var i=t.row;switch(i.pictureStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"素材类型",prop:"materialTypes",width:"70",render:function(e,t){var i=t.row;return i.materialTypes.length>0?i.materialTypes[0].dictCnName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0},{label:"操作",width:"200",fixed:"right",render:N["utils"].component.createOperationRender(this,{editData:"编辑"})}],data:[],selected:void 0,selectionType:"single"}}},methods:{reviewPic:function(e){this.reviewPicUrl=e,this.picDialogVisible=!0},handleRowSelectionChange:function(e,t){console.log(e),this.$emit("selected",e);this.table.selected=t},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getResourceList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=J.a.map({pictureId:J.a.o.string.other("form",{component:"Input",placeholder:"素材ID",cols:{item:3,label:0}}),pictureName:J.a.o.string.other("form",{component:"Input",placeholder:"素材名称",cols:{item:3,label:0}}),pictureCategory:J.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别",cols:{item:3,label:0}}),pictureStatus:J.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},ii=ti,ai=(i("e5f0"),Object(O["a"])(ii,Qt,ei,!1,null,"f3a6d82c",null)),ni=ai.exports,li=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return i("div",{staticClass:"box-list"},[i("p",{staticClass:"list-p"},[i("img",{staticClass:"list-img",attrs:{src:a.pictureUrl,alt:""},on:{click:function(t){return e.reviewPic(a.pictureUrl)}}})]),i("p",{staticClass:"list-title"},[e._v(" "+e._s(a.pictureName))]),i("p",{staticStyle:{margin:"0"}},[1==a.pictureStatus?i("span",[e._v("审核通过")]):i("span",[e._v("待审核")]),i("span",[e._v(" "+e._s(a.pictureResolution))])])])}}])}),i("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.picDialogVisible=t}}},[i("span",{staticClass:"pics"},[i("img",{staticStyle:{width:"50%"},attrs:{src:e.reviewPicUrl,alt:"图片"}})])])],1)],1)},oi=[],ri={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"],CardList:N["CardList"]},data:function(){var e=this;return{materialTypes:{},pictureStatus:{"审核通过":1,"待审核":2},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pictureId",width:"70"},{label:"ID",prop:"pictureUrl",width:"70",render:function(t,i){var a=i.row;return t("img",{attrs:{src:a.pictureUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(a)}}})}},{label:"素材名称",width:"120",prop:"pictureName",sortable:!0},{label:"分辨率",prop:"pictureResolution",width:"110",sortable:!0},{label:"状态",prop:"pictureStatus",width:"90",render:function(e,t){var i=t.row;switch(i.pictureStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"素材类型",prop:"materialTypes",width:"70",render:function(e,t){var i=t.row;return i.materialTypes.length>0?i.materialTypes[0].dictCnName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0},{label:"操作",width:"200",fixed:"right",render:N["utils"].component.createOperationRender(this,{editData:"编辑"})}],data:[],selected:void 0,selectionType:"single"}}},methods:{reviewPic:function(e){this.reviewPicUrl=e,this.picDialogVisible=!0},handleRowSelectionChange:function(e,t){console.log(e),this.$emit("selectImg",e);this.table.selected=t},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getResourceList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=J.a.map({pictureId:J.a.o.string.other("form",{component:"Input",placeholder:"素材ID",cols:{item:3,label:0}}),pictureName:J.a.o.string.other("form",{component:"Input",placeholder:"素材名称",cols:{item:3,label:0}}),pictureCategory:J.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别",cols:{item:3,label:0}}),pictureStatus:J.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},si=ri,ci=(i("2ac6"),Object(O["a"])(si,li,oi,!1,null,"b0ab0348",null)),ui=ci.exports,di={sign:"sign",multi:"multi",builtIn:"builtIn",secKill:"secKill"},pi={none:{label:"无",value:0},tencent:{label:"腾讯",value:1},iqiyi:{label:"爱奇艺",value:2}},hi={draft:2,waiting:3,accepted:4,reject:5,processing:7};window.basicFn={};var mi={components:{ccAppParamsForm:wt,ccTimeSpinner:Zt,selectResource:ni,selectClick:xt,selectImg:ui},props:{editId:Number,default:null},data:function(){return{title:null,dialogTableVisible:!1,dialogClickTableVisible:!1,showFocusImgSelectorVisible:!1,clickData:{},selectResource:{},selectImgData:{},urls:{uploadImg:"/api/uploadHomeImg.html"},STATUS:hi,PARENT_TYPES:di,SOURCE:pi,mode:"create",pluginParentTypes:[],pluginTypes:[],pluginVersions:{},selectingPostForIndex:void 0,selectingClickForIndex:void 0,showTabSelector:!1,selectingTabForIndex:void 0,selectingFocusImgForIndex:void 0,block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:""},rlsInfo:[],hasActivity:0},rules:{pluginInfo:{pluginName:[{required:!0,message:"请输入系统功能名称",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],pluginParentType:[{required:!0,message:"请选择类型",trigger:"blur"}],pluginType:[{required:!0,message:"不能为空",trigger:"blur"}]},barText:[{max:50,message:"不超过 50 个字符",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],subTitle:[{max:100,message:"不超过 100 个字符",trigger:"blur"}],openMode:[{required:!0,message:"请选择打开方式",trigger:"blur"}],goodsId:[{required:!0,message:"请填写商品ID",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],webpageUrl:[{required:!0,message:"请填写网页地址",trigger:"blur"}],webpageAppVersion:[{required:!0,message:"请填写应用版本号",trigger:"blur"}],videoName:[{required:!0,message:"请填写视频名称",trigger:"blur"}],videoUrl:[{required:!0,message:"请填写视频地址",trigger:"blur"}],picture:[{trigger:"change",validator:function(e,t,i){i(t&&t.length>0?void 0:new Error("请上传图片"))}},{required:!0,message:"请上传图片"}],tab:[{trigger:"change",validator:function(e,t,i){i(t?void 0:new Error("请选择版面"))}},{required:!0,message:"请选择版面"}],clickCount:[{required:!0,message:"请填入点击次数"},{type:"number",message:"请填入数字"},{validator:function(e,t,i){/^[1-9][0-9]*$/.test(t)?i():i(new Error("请输入正整数"))}}],aliveTime:[{required:!0,message:"请填入存活时间"}],focusImgUrl:[{required:!0,message:"请选择异形焦点"}],poster:{pictureUrl:[{required:!0,message:"请选择海报",trigger:"blur"}]}}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},isDisabledSource:function(){return"edit"===this.mode},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},watch:{},methods:{parseMinToStr:function(e){var t=e.split(":"),i=parseInt(t[0]),a=parseInt(t[1]);return 60*i+a},parseStrToMin:function(e){var t=Math.floor(e/60),i=e%60,a=t>9?""+t:"0"+t,n=i>9?""+i:"0"+i;return a+":"+n},getEditData:function(){var e=this;this.$service.editSysPlugin({id:this.editId}).then(function(t){t&&(e.setData(t),e.pluginType&&e.getPluginVersions(e.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,i=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var a=i[t.value];return a&&(this.$set(a,"label",t.label),e.push(a)),e}.bind(this),[])}}.bind(e)))})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value}))})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){e&&(t.pluginTypes=e)})},handleTime:function(){},handleTime1:function(){},getPluginVersions:function(e){var t=this,i=this.pluginVersions;return new Promise(function(a,n){i[e]?a(i[e]):t.$service.getPluginVersions(e).then(function(t){console.log(t),t&&(i[e]=t,a(i[e]))})})},handleChangeSource:function(e){this.$confirm("确定切换内容源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){this.block.pluginInfo.source=e}.bind(this)).catch(function(e){throw e})},handleChangePluginParentType:function(e){var t=this.block.pluginInfo.pluginParentType,i=function(){this.pluginTypes=[],this.setPluginParentType(e),this.getPluginTypes(e),"secKill"===e&&this.setPluginType("REFERENCE_MALL_SECKILL")}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i).catch(function(e){throw e}):t||i()},setPluginParentType:function(e){this.PARENT_TYPES;var t=this.SOURCE,i=this.block,a=i.pluginInfo,n=i.helper;i.rlsInfo=[],a.source=t.none.value,a.pluginType=void 0,a.pluginParentType=e,n.title="",n.subTitle=""},handleChangePluginType:function(e){var t=this.block.pluginInfo.pluginType,i=function(){this.setPluginType(e)}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i).catch(function(){}):t||i()},setPluginType:function(e){var t=this.block,i=t.helper;this.getPluginVersions(e).then(function(a){t.pluginInfo.pluginType=e,i.title="",i.subTitle="",t.rlsInfo=a.map(function(t){return this.genRlsInfo({label:t.label,dataType:+t.value},e)}.bind(this))}.bind(this)).then(function(){})},genRlsInfo:function(e,t){var i={};return"REFERENCE_ACTIVITY"===t&&(i={focusImgUrl:void 0,aliveTime:"",clickCount:5}),Object.assign({openMode:"app",pluginDataId:void 0,dataType:5,onclick:{},params:0,title:"",subTitle:"",goodsId:void 0,webpageUrl:void 0,poster:{pictureId:void 0,pictureUrl:void 0}},{extendInfo:i},e)},handleSelectPosterStart:function(e){this.selectingPostForIndex=e,this.dialogTableVisible=!0},handleSelectClickStart:function(e){this.selectingClickForIndex=e,this.dialogClickTableVisible=!0},handleSelectTabStart:function(e){this.showTabSelector=!0,this.selectingTabForIndex=e},handleSelectFocusImgStart:function(e){this.showFocusImgSelectorVisible=!0,this.selectingFocusImgForIndex=e},handleRemoveFocusImg:function(e){this.block.rlsInfo[e].extendInfo.focusImgUrl=void 0},createUploadSuccessHandler:function(e){return function(t){if(t.success){var i=this.block.rlsInfo[e];this.$set(i.onclick,"picture",[{name:"已上传",url:t.url}])}else this.$message(t.msg)}.bind(this)},createUploadRemoveHandler:function(e){return function(){var t=this.block.rlsInfo[e];t.onclick.picture=[]}.bind(this)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleChangeOpenMode:function(e,t){e.openMode=t,e.onclick="webpage"===t?{webpageType:"1",webpageUrl:void 0,webpageAppVersion:""}:{}},getData:function(){var e=this.STATUS,t=JSON.parse(JSON.stringify(this.block));return t.pluginInfo.pluginStatus=e.waiting,t},validateData:function(e,t){this.$refs.blockForm.validate(function(i){i?t(e):this.$message({type:"error",message:"请把表单填写完整"})}.bind(this))},setData:function(e){var t=this.block.helper,i=JSON.parse(JSON.stringify(e)),a=i.pluginInfo.pluginParentType,n=i.pluginInfo.pluginType;if(i.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,i=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:i.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:i.name,videoUrl:i.url};break;case"picture":e.onclick={picture:[{name:"已上传",url:i.url}]};break;case"tab":e.onclick={tab:{tabId:i.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),a&&this.getPluginTypes(a),"secKill"!==a&&n&&"REFERENCE_MOVIE_VIP"!==n){var l=i.rlsInfo[0];l&&(t.title=l.title,t.subTitle=l.subTitle)}this.block=Object.assign(this.block,i),this.block.pluginInfo.refreshTime=this.parseStrToMin(this.block.pluginInfo.refreshTime);for(var o=0;o<this.block.rlsInfo.length;o++)this.block.rlsInfo[o].extendInfo.aliveTime=this.parseStrToMin(this.block.rlsInfo[o].extendInfo.aliveTime)},parseData:function(e){var t=e.helper,i=this.baseHasTitle,a=this.pluginParentType;return"sign"===a&&(e.rlsInfo=e.rlsInfo||[],e.rlsInfo[0]=e.rlsInfo[0]||{dataType:5,title:void 0,subTitle:void 0}),e.rlsInfo.forEach(function(e){var a=e.onclick;switch(e.openMode&&(e.params="openMode=="+e.openMode),e.openMode){case"webpage":"1"===a.webpageType?e.onclick={packagename:"com.coocaa.app_browser",versioncode:a.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser",params:[{key:"url",value:a.webpageUrl}],exception:{}}:"2"===a.webpageType&&(e.onclick={packagename:"com.coocaa.app_browser",versioncode:a.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser.no_trans",params:[{key:"url",value:a.webpageUrl}],exception:{}});break;case"video":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"-1",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.video",params:[{key:"name",value:a.videoName},{key:"url",value:a.videoUrl},{key:"needParse",value:"false"},{key:"url_type",value:"web"}],exception:{}};break;case"picture":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.image",params:[{key:"name",value:""},{key:"url",value:a.picture[0].url}],exception:{}};break;case"tab":e.params+=",tabType=="+a.tab.tabType,e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startActivity",bywhat:"action",byvalue:1==a.tab.tabType?"coocaa.intent.action.HOME_COMMON_LIST":"coocaa.intent.action.HOME_SPECIAL_TOPIC",params:[{key:"id",value:a.tab.tabId}],exception:{}};break;case"app":e.onclick.exception={name:"onclick_exception",value:{packagename:"com.tianci.appstore",dowhat:"startActivity",versioncode:"-1",params:[{key:"id",value:a.packagename}],byvalue:"coocaa.intent.action.APP_STORE_DETAIL",bywhat:"action"}};break}i&&(e.title=t.title,e.subTitle=t.subTitle),e.onclick&&e.onclick.params&&(e.onclick.params=e.onclick.params.reduce(function(e,t){return e[t.key]=t.value,e},{}),e.onclick=JSON.stringify(e.onclick)),delete e.openMode}),delete e.helper,e},handleSubmitAudit:function(){var e=this.getData();this.validateData(e,function(){this.submit(e)}.bind(this))},getSelectResource:function(e){this.selectResource=e,this.dialogTableVisible=!1;var t={pictureId:this.selectResource.pictureId,pictureStatus:this.selectResource.pictureStatus,pictureUrl:this.selectResource.pictureUrl};this.block.rlsInfo[this.selectingPostForIndex].poster=t},getClickData:function(e){this.clickData=e,this.dialogClickTableVisible=!1;var t=this.clickData;t=JSON.parse(t.onlickJson);var i=this.selectingClickForIndex,a=this.block.rlsInfo[i];a.onclick=this.parseOnclick(t),this.showselectClickor=!1,this.selectingClickForIndex=void 0},clickSubmit:function(){},getSelectImg:function(e){this.selectImgData=e,this.showFocusImgSelectorVisible=!1;var t=this.selectingFocusImgForIndex,i=this.block.rlsInfo[t];this.$set(i.extendInfo,"focusImgUrl",this.selectImgData.pictureUrl),this.selectingFocusImgForIndex=void 0},selectImgSubmit:function(){},submit:function(e){this.validateData(e,function(){var t=this;e.pluginInfo.refreshTime=this.parseMinToStr(e.pluginInfo.refreshTime);for(var i=0;i<e.rlsInfo.length;i++)e.rlsInfo[i].extendInfo.aliveTime=this.parseMinToStr(e.rlsInfo[i].extendInfo.aliveTime);e=this.parseData(e),this.$service.SavePlugin(e,"保存成功").then(function(e){t.$emit("open-list-page")})}.bind(this))},handleChangeActivityFlag:function(e){e?this.block.rlsInfo.unshift(this.genRlsInfo({label:"活动形式",dataType:4})):this.block.rlsInfo=this.block.rlsInfo.filter(function(e){return 4!==e.dataType})}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.mode="edit",this.getEditData()):(this.title="新增",this.mode="create")}},fi=mi,bi=(i("06ac"),Object(O["a"])(fi,zt,Jt,!1,null,"7e698e51",null)),gi=bi.exports,vi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{staticClass:"multi-func-block-read"},[i("div",{staticClass:"base-tit"},[i("span",[e._v("基本信息")])]),i("el-form",{ref:"blockForm",attrs:{"label-width":"140px"}},[i("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName"}},[e._v("\n               "+e._s(e.block.pluginInfo.pluginName)+"\n           ")]),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[e._v("\n                   "+e._s(e.parseMinToStr(e.block.pluginInfo.refreshTime))+"\n               ")]),i("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[i("el-radio-group",{attrs:{disabled:""},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[i("el-radio",{attrs:{label:0}},[e._v("非活动")]),i("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType"}},[e._v("\n               "+e._s(e.pluginParentTypeText)+"\n           ")]),"secKill"!==e.pluginParentType?i("el-form-item",{attrs:{label:"内容源"}},[e._v("\n               "+e._s(e.SOURCE_TEXT[e.block.pluginInfo.source])+"\n           ")]):e._e(),"sign"===e.pluginParentType?[i("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType"}},[e._v("\n                   "+e._s(e.block.pluginInfo.pluginType)+"\n               ")])]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0&&e.pluginTypeText?i("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType"}},[e._v("\n               "+e._s(e.pluginTypeText)+"\n           ")]):e._e(),e.baseHasTitle?[i("el-form-item",{attrs:{label:"标题",prop:"helper.title"}},[e._v("\n                   "+e._s(e.block.helper.title)+"\n               ")]),i("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle"}},[e._v("\n                   "+e._s(e.block.helper.subTitle)+"\n               ")])]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,a){return i("div",{key:a},[i("div",{staticClass:"base-tit"},[i("span",[e._v(e._s(t.label))])]),e.versionHasTitle?[i("el-form-item",{attrs:{label:"标题"}},[e._v("\n                       "+e._s(t.title)+"\n                   ")]),i("el-form-item",{attrs:{label:"副标题"}},[e._v("\n                       "+e._s(t.subTitle)+"\n                   ")])]:e._e(),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"状态栏文字"}},[e._v("\n                       "+e._s(t.title)+" "+e._s(t.subTitle?" | "+t.subTitle:"")+"\n                   ")])]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"商品ID"}},[e._v("\n                       "+e._s(t.goodsId)+"\n                   ")]),i("el-form-item",{attrs:{label:"商品名称"}},[e._v("\n                       "+e._s(t.title)+"\n                   ")])]:e._e(),i("el-form-item",{attrs:{label:"海报"}},[i("div",{staticClass:"poster"},[t.poster.pictureUrl?i("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[i("el-form-item",{attrs:{label:"异形焦点"}},[t.extendInfo.focusImgUrl?i("div",{staticClass:"focus-transition"},[i("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):i("span",[e._v("\n                           无\n                       ")])]),i("el-form-item",{attrs:{label:"存活时间"}},[e._v("\n                       "+e._s(e.parseMinToStr(t.extendInfo.aliveTime))+"\n                   ")]),i("el-form-item",{attrs:{label:"点击次数"}},[e._v("\n                       "+e._s(t.extendInfo.clickCount)+"\n                   ")])]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType?i("el-form-item",{attrs:{label:"打开方式"}},[e._v("\n                   "+e._s(e.OPEN_MODE_TEXT[t.openMode])+"\n               ")]):e._e(),"webpage"===t.openMode?[i("el-form-item",{attrs:{label:"网页地址"}},[e._v(" "+e._s(t.onclick.webpageUrl)+"\n                   ")]),i("el-form-item",{attrs:{label:"网页类型"}},[e._v("\n                       "+e._s(["","浮窗网页","全屏网页"][+t.onclick.webpageType])+"\n                   ")]),i("el-form-item",{attrs:{label:"应用版本号"}},[e._v("\n                       "+e._s(t.onclick.webpageAppVersion)+"\n                   ")])]:e._e(),"video"===t.openMode?[i("el-form-item",{attrs:{label:"视频名称"}},[e._v("\n                       "+e._s(t.onclick.videoName)+"\n                   ")]),i("el-form-item",{attrs:{label:"视频地址"}},[e._v("\n                       "+e._s(t.onclick.videoUrl)+"\n                   ")])]:e._e(),"picture"===t.openMode?[i("el-form-item",{attrs:{label:"图片"}},[i("div",{staticClass:"open-picture"},[i("img",{staticClass:"open-picture__img",attrs:{src:t.onclick.picture[0].url}})])])]:e._e(),"tab"===t.openMode?[i("el-form-item",{attrs:{label:"版面"}},[e._v("\n                       "+e._s(t.onclick.tab.tabId)+"\n                   ")])]:e._e(),"app"===t.openMode?i("AppParamsRead",{attrs:{"label-width":"140px"},model:{value:t.onclick,callback:function(i){e.$set(t,"onclick",i)},expression:"item.onclick"}}):e._e()],2)}):e._e()],2),i("el-dialog",{attrs:{title:"审核",visible:e.showAuditDialog},on:{"update:visible":function(t){e.showAuditDialog=t}}},[i("el-form",[i("el-form-item",{attrs:{label:"审核意见"}},[i("el-radio",{staticClass:"radio",attrs:{label:4},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),i("el-radio",{staticClass:"radio",attrs:{label:5},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),i("el-form-item",{attrs:{label:"意见说明"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showAuditDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleAudit}},[e._v("确 定")])],1)],1),i("div",{staticClass:"toolbar-container",staticStyle:{padding:"16px","text-align":"right"}},[e.block.pluginInfo.pluginStatus===e.STATUS.waiting?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAuditDialog=!0}}},[e._v("审核")]):e._e()],1)],1)])},yi=[],wi=(i("7514"),{0:"无",1:"腾讯",2:"爱奇艺"}),Ii={webpage:"网页",app:"第三方应用",video:"视频",tab:"版面",picture:"图片"},Ti={draft:2,waiting:3,accepted:4,reject:5,processing:7},ki={components:{AppParamsRead:N["AppParamsRead"]},props:{viewId:Number,default:null},data:function(){return{showAuditDialog:!1,title:void 0,STATUS:Ti,SOURCE_TEXT:wi,OPEN_MODE_TEXT:Ii,pluginParentTypes:[],pluginTypes:[],pluginVersions:{},auditForm:{auditFlag:4,auditDesc:""},block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:240},rlsInfo:[],hasActivity:0}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},pluginParentTypeText:function(){var e=this.pluginParentType,t=this.pluginParentTypes;if(t.length>0){var i=t.find(function(t){return t.value===e});if(i)return i.label}},pluginTypeText:function(){var e=this.pluginType,t=this.pluginTypes;if(console.log(e),console.log(t),t.length>0){var i=t.find(function(t){return t.value===e});if(i)return i.label}},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},methods:{parseMinToStr:function(e){var t=Math.floor(e/60),i=e%60,a=t>9?""+t:"0"+t,n=i>9?""+i:"0"+i;return a+":"+n},getData:function(){var e=this;this.$service.getData({id:this.viewId}).then(function(t){e.setData(t)})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){console.log(t),t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value})),t&&(e.pluginParentTypes=t)})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){console.log(e),e&&(t.pluginTypes=e)})},getPluginVersions:function(e){this.urls,this.FastDevTool;var t=this.pluginVersions;return new Promise(function(i,a){t[e]?i(t[e]):that.$service.getPluginVersions(e).then(function(a){console.log(a),a&&(t[e]=a,i(t[e]))})})},setData:function(e){var t=this.block.helper,i=JSON.parse(JSON.stringify(e)),a=i.pluginInfo.pluginParentType,n=i.pluginInfo.pluginType;if(i.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,i=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:i.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:i.name,videoUrl:i.url};break;case"picture":e.onclick={picture:[{url:i.url}]};break;case"tab":e.onclick={tab:{tabId:i.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),a&&this.getPluginTypes(a),"secKill"!==a&&n&&"REFERENCE_MOVIE_VIP"!==n){var l=i.rlsInfo[0];l&&(t.title=l.title,t.subTitle=l.subTitle)}this.block=Object.assign(this.block,i)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleAudit:function(){var e=this,t=this.block,i=this.auditForm;""===i.auditDesc.trim()?this.$message("请填写意见说明"):this.$service.SaveAudit({id:t.pluginInfo.pluginId,type:"systemPlugin",auditFlag:i.auditFlag,auditDesc:i.auditDesc},"审核成功").then(function(t){t&&(e.showAuditDialog=!1,e.$emit("open-list-page"))})},handleClose:function(){window.parent.$("#edit-view").dialog("close")}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),window.mode="read",window.mode&&(this.mode=window.mode,this.title="预览"),this.getData(),this.pluginType&&this.getPluginVersions(this.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,i=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var a=i[t.value];return a&&(this.$set(a,"label",t.label),e.push(a)),e}.bind(this),[])}}.bind(this))}},Si=ki,Ci=(i("eb95"),Object(O["a"])(Si,vi,yi,!1,null,null,null)),_i=Ci.exports,Fi={components:{MultiFunctionBlockList:Wt,MultiFunctionBlockAdd:gi,MultiFunctionBlockView:_i},data:function(){return{model:"list",editId:null,viewId:null}},methods:{openAddPage:function(e){this.editId=e,this.model="add"},openViewPage:function(e){this.viewId=e,this.model="view"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},goBack:function(){this.model="list"}}},xi=Fi,Di=Object(O["a"])(xi,Ot,Et,!1,null,"edaa0b36",null),Pi=Di.exports,$i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("SysPluginList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?i("SysPluginAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?i("SysPluginView",{attrs:{viewId:e.viewId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},Ri=[],Ni=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Li=[],Ai={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{pluginStatus:{"下架":0,"上架":1,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},source:{"无":0,"腾讯":1,"爱奇艺":2},channel:{"影视":"movie","体育":"sport","教育":"edu","少儿":"child"},filterSchema:null,pagination:{},selected:[],filter:{sort:void 0,order:void 0},table:{props:{},header:[{label:"ID",prop:"pluginId",width:"70"},{label:"功能名称",prop:"pluginName"},{label:"内容源",prop:"source",render:function(e,t){var i=t.row;switch(i.source){case 0:return"无";case 1:return"腾讯";case 2:return"爱奇艺"}}},{label:"状态",prop:"pluginStatus",render:function(e,t){var i=t.row;switch(i.pluginStatus){case 0:return"下架";case 1:return"上架";case 2:return"草稿";case 3:return"待审核";case 4:return"审核通过";case 5:return"审核不通过"}}},{label:"频道",prop:"channel",render:function(e,t){var i=t.row;switch(i.channel){case"movie":return"影视";case"child":return"少儿";case"sport":return"体育";case"edu":return"教育"}}},{label:"更新时间",prop:"lastUpdateDate"},{label:"操作",width:"200",fixed:"right",render:N["utils"].component.createOperationRender(this,{priviewData:"预览"})}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getSysPlugin(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},editData:function(e){e.row;0==this.selected.length?this.$message("请选择一条数据"):this.selected.length>1?this.$message("只能选择一条"):this.$emit("open-add-page",this.selected[0])},priviewData:function(e){var t=e.row;this.$emit("open-view-page",t.pluginId)},handleRowSelectionAdd:function(e){this.selected.push(e.pluginId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pluginId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.pluginId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e}},created:function(){var e=J.a.map({pluginId:J.a.o.string.other("form",{component:"Input",placeholder:"ID",cols:{item:3,label:0}}),pluginName:J.a.o.string.other("form",{component:"Input",placeholder:"功能名称",cols:{item:3,label:0}}),source:J.a.o.enum(this.source).other("form",{component:"Select",placeholder:"内容源",cols:{item:3,label:0}}),channel:J.a.o.enum(this.channel).other("form",{component:"Select",placeholder:"频道",cols:{item:3,label:0}}),pluginStatus:J.a.o.enum(this.pluginStatus).other("form",{component:"Select",placeholder:"状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Vi=Ai,Oi=(i("da0c"),Object(O["a"])(Vi,Ni,Li,!1,null,"23d18f92",null)),Ei=Oi.exports,Mi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{staticClass:"multi-func-block-upsert"},[i("div",{staticClass:"base-tit"},[i("span",[e._v("基本信息")])]),i("el-form",{ref:"blockForm",attrs:{rules:e.rules,model:e.block,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName",rules:e.rules.pluginInfo.pluginName}},[i("el-input",{model:{value:e.block.pluginInfo.pluginName,callback:function(t){e.$set(e.block.pluginInfo,"pluginName","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginName"}})],1),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[i("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[i("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime},model:{value:e.block.pluginInfo.refreshTime,callback:function(t){e.$set(e.block.pluginInfo,"refreshTime",t)},expression:"block.pluginInfo.refreshTime"}})],1)]),i("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[i("el-radio-group",{on:{change:e.handleChangeActivityFlag},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[i("el-radio",{attrs:{label:0}},[e._v("非活动")]),i("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType",rules:e.rules.pluginInfo.pluginParentType}},[i("el-select",{staticClass:"plugin-parent-type-selector",attrs:{value:e.block.pluginInfo.pluginParentType,disabled:"edit"===e.mode,placeholder:"请选择"},on:{input:e.handleChangePluginParentType}},e._l(e.pluginParentTypes,function(e){return i("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),"secKill"!==e.pluginParentType?i("el-form-item",{attrs:{label:"内容源",prop:"pluginInfo.source",rules:e.rules.pluginInfo.source}},[i("el-radio-group",{attrs:{value:e.block.pluginInfo.source,disabled:e.isDisabledSource},on:{input:e.handleChangeSource}},e._l(e.SOURCE,function(t,a){return i("el-radio",{key:a,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),"sign"===e.pluginParentType?[i("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[i("el-input",{model:{value:e.block.pluginInfo.pluginType,callback:function(t){e.$set(e.block.pluginInfo,"pluginType","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginType"}})],1)]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0?i("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[i("el-select",{staticClass:"plugin-type-selector",staticStyle:{width:"300px","max-width":"300px"},attrs:{value:e.block.pluginInfo.pluginType,placeholder:"请选择"},on:{input:e.handleChangePluginType}},e._l(e.pluginTypes,function(e){return i("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e.baseHasTitle?[i("el-form-item",{attrs:{label:"标题",prop:"helper.title",rules:e.rules.title}},[i("el-input",{model:{value:e.block.helper.title,callback:function(t){e.$set(e.block.helper,"title","string"===typeof t?t.trim():t)},expression:"block.helper.title"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle",rules:e.rules.subTitle}},[i("el-input",{model:{value:e.block.helper.subTitle,callback:function(t){e.$set(e.block.helper,"subTitle","string"===typeof t?t.trim():t)},expression:"block.helper.subTitle"}})],1)]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,a){return i("div",{key:a},[i("div",{staticClass:"base-tit"},[i("span",[e._v(e._s(t.label))])]),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"状态栏文字",prop:"rlsInfo."+a+".title",rules:e.rules.barText}},[i("el-input",{model:{value:t.title,callback:function(i){e.$set(t,"title","string"===typeof i?i.trim():i)},expression:"item.title"}}),e._v("|\n              "),i("el-input",{model:{value:t.subTitle,callback:function(i){e.$set(t,"subTitle","string"===typeof i?i.trim():i)},expression:"item.subTitle"}})],1)]:e._e(),e.versionHasTitle?[i("el-form-item",{attrs:{label:"标题",prop:"rlsInfo."+a+".title",rules:e.rules.title}},[i("el-input",{model:{value:t.title,callback:function(i){e.$set(t,"title","string"===typeof i?i.trim():i)},expression:"item.title"}})],1),i("el-form-item",{attrs:{label:"副标题",prop:"rlsInfo."+a+".subTitle",rules:e.rules.subTitle}},[i("el-input",{model:{value:t.subTitle,callback:function(i){e.$set(t,"subTitle","string"===typeof i?i.trim():i)},expression:"item.subTitle"}})],1)]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"商品ID",prop:"rlsInfo."+a+".goodsId",rules:e.rules.goodsId}},[i("el-input",{model:{value:t.goodsId,callback:function(i){e.$set(t,"goodsId","string"===typeof i?i.trim():i)},expression:"item.goodsId"}})],1),i("el-form-item",{attrs:{label:"商品名称",prop:"rlsInfo."+a+".title",rules:e.rules.goodsId}},[i("el-input",{model:{value:t.title,callback:function(i){e.$set(t,"title","string"===typeof i?i.trim():i)},expression:"item.title"}})],1)]:e._e(),i("el-form-item",{attrs:{label:"海报",prop:"rlsInfo."+a+".poster.pictureUrl",rules:e.rules.poster.pictureUrl}},[i("div",{staticClass:"poster",on:{click:function(t){return e.handleSelectPosterStart(a)}}},[t.poster.pictureUrl?i("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[i("el-form-item",{attrs:{label:"异形焦点",prop:"rlsInfo."+a+".extendInfo.focusImgUrl",rules:e.rules.focusImgUrl}},[i("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSelectFocusImgStart(a)}}},[e._v("选择异形焦点")]),t.extendInfo.focusImgUrl?i("div",{staticClass:"focus-transition"},[i("i",{staticClass:"focus-transition__remove el-icon-circle-close",attrs:{title:"移除异形焦点"},on:{click:function(t){return e.handleRemoveFocusImg(a)}}}),i("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):e._e()],1),i("el-form-item",{attrs:{label:"存活时间",prop:"rlsInfo."+a+".extendInfo.aliveTime",rules:e.rules.aliveTime}},[i("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[i("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime},model:{value:t.extendInfo.aliveTime,callback:function(i){e.$set(t.extendInfo,"aliveTime",e._n(i))},expression:"item.extendInfo.aliveTime"}})],1)]),i("el-form-item",{attrs:{label:"点击次数",prop:"rlsInfo."+a+".extendInfo.clickCount",rules:e.rules.clickCount}},[i("el-input",{model:{value:t.extendInfo.clickCount,callback:function(i){e.$set(t.extendInfo,"clickCount",e._n(i))},expression:"item.extendInfo.clickCount"}})],1)]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType||"builtIn"===e.pluginParentType?i("el-form-item",{attrs:{label:"打开方式",rules:e.rules.openMode}},[i("el-select",{attrs:{value:t.openMode},on:{input:function(i){return e.handleChangeOpenMode(t,i)}}},["builtIn"===e.pluginParentType||"REFERENCE_MOVIE_VIP"===e.pluginType||"REFERENCE_ACTIVITY"===e.pluginType?i("el-option",{attrs:{label:"网页",value:"webpage"}}):e._e(),"REFERENCE_ACTIVITY"===e.pluginType?[i("el-option",{attrs:{label:"视频",value:"video"}}),i("el-option",{attrs:{label:"图片",value:"picture"}}),i("el-option",{attrs:{label:"版面",value:"tab"}})]:e._e(),i("el-option",{attrs:{label:"第三方应用",value:"app"}})],2),"app"===t.openMode?i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSelectClickStart(a)}}},[e._v("快速填充")]):e._e()],1):e._e(),"webpage"===t.openMode?[i("el-form-item",{attrs:{label:"网页地址",prop:"rlsInfo."+a+".onclick.webpageUrl",rules:e.rules.webpageUrl}},[i("el-input",{model:{value:t.onclick.webpageUrl,callback:function(i){e.$set(t.onclick,"webpageUrl","string"===typeof i?i.trim():i)},expression:"item.onclick.webpageUrl"}})],1),i("el-form-item",{attrs:{label:"网页类型",prop:"rlsInfo."+a+".onclick.webpageType"}},[i("el-radio-group",{model:{value:t.onclick.webpageType,callback:function(i){e.$set(t.onclick,"webpageType",i)},expression:"item.onclick.webpageType"}},[i("el-radio",{attrs:{label:"1"}},[e._v("浮窗网页")]),i("el-radio",{attrs:{label:"2"}},[e._v("全屏网页")])],1)],1),i("el-form-item",{attrs:{label:"应用版本号",prop:"rlsInfo."+a+".onclick.webpageAppVersion",rules:e.rules.webpageAppVersion}},[i("el-input",{model:{value:t.onclick.webpageAppVersion,callback:function(i){e.$set(t.onclick,"webpageAppVersion","string"===typeof i?i.trim():i)},expression:"item.onclick.webpageAppVersion"}})],1)]:e._e(),"video"===t.openMode?[i("el-form-item",{attrs:{label:"视频名称",prop:"rlsInfo."+a+".onclick.videoName",rules:e.rules.videoName}},[i("el-input",{model:{value:t.onclick.videoName,callback:function(i){e.$set(t.onclick,"videoName","string"===typeof i?i.trim():i)},expression:"item.onclick.videoName"}})],1),i("el-form-item",{attrs:{label:"视频地址",prop:"rlsInfo."+a+".onclick.videoUrl",rules:e.rules.videoUrl}},[i("el-input",{model:{value:t.onclick.videoUrl,callback:function(i){e.$set(t.onclick,"videoUrl","string"===typeof i?i.trim():i)},expression:"item.onclick.videoUrl"}})],1)]:e._e(),"tab"===t.openMode?[i("el-form-item",{attrs:{label:"版面",prop:"rlsInfo."+a+".onclick.tab",rules:e.rules.tab}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSelectTabStart(a)}}},[e._v("选择版面")]),t.onclick.tab?i("el-tag",{attrs:{type:"primary"}},[e._v("已选择: "+e._s(t.onclick.tab.tabId))]):e._e()],1)]:e._e(),"picture"===t.openMode?[i("el-form-item",{attrs:{label:"选择图片",prop:"rlsInfo."+a+".onclick.picture",rules:e.rules.picture}},[i("el-upload",{attrs:{action:e.urls.uploadImg,"on-success":e.createUploadSuccessHandler(a),"on-remove":e.createUploadRemoveHandler(a),multiple:!1,"file-list":t.onclick.picture,accept:"image/png, image/gif, image/jpeg, image/bmp","list-type":"picture"}},[i("el-button",{attrs:{type:"primary"}},[e._v("点击上传")]),i("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("提示:只能上传png/gif/jpg/bmp文件")])],1)],1)]:e._e(),"app"===t.openMode?i("ccAppParamsForm",{attrs:{"label-width":"140px","prop-prefix":"rlsInfo."+a+".onclick."},model:{value:t.onclick,callback:function(i){e.$set(t,"onclick",i)},expression:"item.onclick"}}):e._e()],2)}):e._e()],2),i("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("selectResource",{on:{selected:e.getSelectResource}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogClickTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogClickTableVisible=t}}},[i("selectClick",{on:{clcik:e.getClickData}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogClickTableVisible=!1}}},[e._v("取 消")])],1)],1),i("el-dialog",{attrs:{visible:e.showFocusImgSelectorVisible,width:"1200px"},on:{"update:visible":function(t){e.showFocusImgSelectorVisible=t}}},[i("selectImg",{on:{selectImg:e.getSelectImg}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showFocusImgSelectorVisible=!1}}},[e._v("取 消")])],1)],1),i("div",{staticStyle:{padding:"10px","text-align":"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitAudit}},[e._v("提交审核")])],1)],1)])},Ui=[],Bi={sign:"sign",multi:"multi",builtIn:"builtIn",secKill:"secKill"},ji={none:{label:"无",value:0},tencent:{label:"腾讯",value:1},iqiyi:{label:"爱奇艺",value:2}},qi={draft:2,waiting:3,accepted:4,reject:5,processing:7};window.basicFn={};var Wi,zi,Ji,Hi,Gi,Ki,Yi={components:{ccAppParamsForm:wt,ccTimeSpinner:Zt,selectResource:ni,selectClick:xt,selectImg:ui},props:{editId:Number,default:null},data:function(){return{title:null,dialogTableVisible:!1,dialogClickTableVisible:!1,showFocusImgSelectorVisible:!1,clickData:{},selectResource:{},selectImgData:{},urls:{uploadImg:"/api/uploadHomeImg.html"},STATUS:qi,PARENT_TYPES:Bi,SOURCE:ji,mode:"create",pluginParentTypes:[],pluginTypes:[],pluginVersions:{},selectingPostForIndex:void 0,showClickSelector:!1,selectingClickForIndex:void 0,showTabSelector:!1,selectingTabForIndex:void 0,showFocusImgSelector:!1,selectingFocusImgForIndex:void 0,block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:240},rlsInfo:[],hasActivity:0},rules:{pluginInfo:{pluginName:[{required:!0,message:"请输入系统功能名称",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],pluginParentType:[{required:!0,message:"请选择类型",trigger:"blur"}],pluginType:[{required:!0,message:"不能为空",trigger:"blur"}]},barText:[{max:50,message:"不超过 50 个字符",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],subTitle:[{max:100,message:"不超过 100 个字符",trigger:"blur"}],openMode:[{required:!0,message:"请选择打开方式",trigger:"blur"}],goodsId:[{required:!0,message:"请填写商品ID",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],webpageUrl:[{required:!0,message:"请填写网页地址",trigger:"blur"}],webpageAppVersion:[{required:!0,message:"请填写应用版本号",trigger:"blur"}],videoName:[{required:!0,message:"请填写视频名称",trigger:"blur"}],videoUrl:[{required:!0,message:"请填写视频地址",trigger:"blur"}],picture:[{trigger:"change",validator:function(e,t,i){i(t&&t.length>0?void 0:new Error("请上传图片"))}},{required:!0,message:"请上传图片"}],tab:[{trigger:"change",validator:function(e,t,i){i(t?void 0:new Error("请选择版面"))}},{required:!0,message:"请选择版面"}],clickCount:[{required:!0,message:"请填入点击次数"},{type:"number",message:"请填入数字"},{validator:function(e,t,i){/^[1-9][0-9]*$/.test(t)?i():i(new Error("请输入正整数"))}}],aliveTime:[{required:!0,message:"请填入存活时间"},{type:"number",message:"请填入数字"}],focusImgUrl:[{required:!0,message:"请选择异形焦点"}],poster:{pictureUrl:[{required:!0,message:"请选择海报",trigger:"blur"}]}}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},isDisabledSource:function(){return"edit"===this.mode},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},watch:{},methods:{parseMinToStr:function(e){var t=e.split(":"),i=parseInt(t[0]),a=parseInt(t[1]);return 60*i+a},parseStrToMin:function(e){var t=Math.floor(e/60),i=e%60,a=t>9?""+t:"0"+t,n=i>9?""+i:"0"+i;return a+":"+n},getEditData:function(){var e=this;this.$service.editSysPlugin({id:this.editId}).then(function(t){t&&(e.setData(t),e.pluginType&&e.getPluginVersions(e.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,i=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var a=i[t.value];return a&&(this.$set(a,"label",t.label),e.push(a)),e}.bind(this),[])}}.bind(e)))})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){console.log(t),t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value}))})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){console.log(e),e&&(t.pluginTypes=e)})},handleTime:function(){},getPluginVersions:function(e){var t=this,i=this.pluginVersions;return new Promise(function(a,n){i[e]?a(i[e]):t.$service.getPluginVersions(e).then(function(t){console.log(t),t&&(i[e]=t,a(i[e]))})})},handleChangeSource:function(e){this.$confirm("确定切换内容源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){this.block.pluginInfo.source=e}.bind(this)).catch(function(e){throw e})},handleChangePluginParentType:function(e){var t=this.block.pluginInfo.pluginParentType,i=function(){this.pluginTypes=[],this.setPluginParentType(e),this.getPluginTypes(e),"secKill"===e&&this.setPluginType("REFERENCE_MALL_SECKILL")}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i).catch(function(e){throw e}):t||i()},setPluginParentType:function(e){this.PARENT_TYPES;var t=this.SOURCE,i=this.block,a=i.pluginInfo,n=i.helper;i.rlsInfo=[],a.source=t.none.value,a.pluginType=void 0,a.pluginParentType=e,n.title="",n.subTitle=""},handleChangePluginType:function(e){var t=this.block.pluginInfo.pluginType,i=function(){this.setPluginType(e)}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(i).catch(function(){}):t||i()},setPluginType:function(e){var t=this.block,i=t.helper;this.getPluginVersions(e).then(function(a){t.pluginInfo.pluginType=e,i.title="",i.subTitle="",t.rlsInfo=a.map(function(t){return this.genRlsInfo({label:t.label,dataType:+t.value},e)}.bind(this))}.bind(this)).then(function(){})},genRlsInfo:function(e,t){var i={};return"REFERENCE_ACTIVITY"===t&&(i={focusImgUrl:void 0,aliveTime:60,clickCount:5}),Object.assign({openMode:"app",pluginDataId:void 0,dataType:5,onclick:{},params:0,title:"",subTitle:"",goodsId:void 0,webpageUrl:void 0,poster:{pictureId:void 0,pictureUrl:void 0}},{extendInfo:i},e)},handleSelectPosterStart:function(e){this.selectingPostForIndex=e,this.dialogTableVisible=!0},getSelectResource:function(e){this.selectResource=e,this.dialogTableVisible=!1;var t={pictureId:this.selectResource.pictureId,pictureStatus:this.selectResource.pictureStatus,pictureUrl:this.selectResource.pictureUrl};this.block.rlsInfo[this.selectingPostForIndex].poster=t},selectSubmit:function(){},handleSelectClickStart:function(e){this.selectingClickForIndex=e,this.dialogClickTableVisible=!0},getClickData:function(e){this.clickData=e,this.dialogClickTableVisible=!1;var t=this.clickData;t=JSON.parse(t.onlickJson);var i=this.selectingClickForIndex,a=this.block.rlsInfo[i];a.onclick=this.parseOnclick(t),this.showselectClickor=!1,this.selectingClickForIndex=void 0},clickSubmit:function(){},handleSelectFocusImgStart:function(e){this.showFocusImgSelectorVisible=!0,this.selectingFocusImgForIndex=e},getSelectImg:function(e){this.selectImgData=e,this.showFocusImgSelectorVisible=!1;var t=this.selectingFocusImgForIndex,i=this.block.rlsInfo[t];this.$set(i.extendInfo,"focusImgUrl",this.selectImgData.pictureUrl),this.selectingFocusImgForIndex=void 0},selectImgSubmit:function(){},handleSelectTabStart:function(e){this.showTabSelector=!0,this.selectingTabForIndex=e},handleRemoveFocusImg:function(e){this.block.rlsInfo[e].extendInfo.focusImgUrl=void 0},createUploadSuccessHandler:function(e){return function(t){if(t.success){var i=this.block.rlsInfo[e];this.$set(i.onclick,"picture",[{name:"已上传",url:t.url}])}else this.$message(t.msg)}.bind(this)},createUploadRemoveHandler:function(e){return function(){var t=this.block.rlsInfo[e];t.onclick.picture=[]}.bind(this)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleChangeOpenMode:function(e,t){e.openMode=t,e.onclick="webpage"===t?{webpageType:"1",webpageUrl:void 0,webpageAppVersion:""}:{}},getData:function(){var e=this.STATUS,t=JSON.parse(JSON.stringify(this.block));return t.pluginInfo.pluginStatus=e.waiting,t},validateData:function(e,t){this.$refs.blockForm.validate(function(i){i?t(e):this.$message({type:"error",message:"请把表单填写完整"})}.bind(this))},setData:function(e){var t=this.block.helper,i=JSON.parse(JSON.stringify(e)),a=i.pluginInfo.pluginParentType,n=i.pluginInfo.pluginType;if(i.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,i=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:i.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:i.name,videoUrl:i.url};break;case"picture":e.onclick={picture:[{name:"已上传",url:i.url}]};break;case"tab":e.onclick={tab:{tabId:i.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),a&&this.getPluginTypes(a),"secKill"!==a&&n&&"REFERENCE_MOVIE_VIP"!==n){var l=i.rlsInfo[0];l&&(t.title=l.title,t.subTitle=l.subTitle)}this.block=Object.assign(this.block,i),this.block.pluginInfo.refreshTime=this.parseStrToMin(this.block.pluginInfo.refreshTime);for(var o=0;o<this.block.rlsInfo.length;o++)this.block.rlsInfo[o].extendInfo.aliveTime=this.parseStrToMin(this.block.rlsInfo[o].extendInfo.aliveTime)},parseData:function(e){var t=e.helper,i=this.baseHasTitle,a=this.pluginParentType;return"sign"===a&&(e.rlsInfo=e.rlsInfo||[],e.rlsInfo[0]=e.rlsInfo[0]||{dataType:5,title:void 0,subTitle:void 0}),e.rlsInfo.forEach(function(e){var a=e.onclick;switch(e.openMode&&(e.params="openMode=="+e.openMode),e.openMode){case"webpage":"1"===a.webpageType?e.onclick={packagename:"com.coocaa.app_browser",versioncode:a.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser",params:[{key:"url",value:a.webpageUrl}],exception:{}}:"2"===a.webpageType&&(e.onclick={packagename:"com.coocaa.app_browser",versioncode:a.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser.no_trans",params:[{key:"url",value:a.webpageUrl}],exception:{}});break;case"video":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"-1",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.video",params:[{key:"name",value:a.videoName},{key:"url",value:a.videoUrl},{key:"needParse",value:"false"},{key:"url_type",value:"web"}],exception:{}};break;case"picture":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.image",params:[{key:"name",value:""},{key:"url",value:a.picture[0].url}],exception:{}};break;case"tab":e.params+=",tabType=="+a.tab.tabType,e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startActivity",bywhat:"action",byvalue:1==a.tab.tabType?"coocaa.intent.action.HOME_COMMON_LIST":"coocaa.intent.action.HOME_SPECIAL_TOPIC",params:[{key:"id",value:a.tab.tabId}],exception:{}};break;case"app":e.onclick.exception={name:"onclick_exception",value:{packagename:"com.tianci.appstore",dowhat:"startActivity",versioncode:"-1",params:[{key:"id",value:a.packagename}],byvalue:"coocaa.intent.action.APP_STORE_DETAIL",bywhat:"action"}};break}i&&(e.title=t.title,e.subTitle=t.subTitle),e.onclick&&e.onclick.params&&(e.onclick.params=e.onclick.params.reduce(function(e,t){return e[t.key]=t.value,e},{}),e.onclick=JSON.stringify(e.onclick)),delete e.openMode}),delete e.helper,e},handleSubmitAudit:function(){var e=this.getData();this.validateData(e,function(){this.submit(e)}.bind(this))},submit:function(e){this.validateData(e,function(){var t=this;e.pluginInfo.refreshTime=this.parseMinToStr(e.pluginInfo.refreshTime);for(var i=0;i<e.rlsInfo.length;i++)e.rlsInfo[i].extendInfo.aliveTime=this.parseMinToStr(e.rlsInfo[i].extendInfo.aliveTime);e=this.parseData(e),console.log(e),this.$service.SavePlugin(e,"保存成功").then(function(e){t.$emit("open-list-page")})}.bind(this))},handleChangeActivityFlag:function(e){e?this.block.rlsInfo.unshift(this.genRlsInfo({label:"活动形式",dataType:4})):this.block.rlsInfo=this.block.rlsInfo.filter(function(e){return 4!==e.dataType})}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.mode="edit",this.getEditData()):(this.title="新增",this.mode="create")}},Xi=Yi,Zi=(i("71d9"),Object(O["a"])(Xi,Mi,Ui,!1,null,"1fe3b039",null)),Qi=Zi.exports,ea=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{staticClass:"multi-func-block-read"},[i("div",{staticClass:"base-tit"},[i("span",[e._v("基本信息")])]),i("el-form",{ref:"blockForm",attrs:{"label-width":"140px"}},[i("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName"}},[e._v(e._s(e.block.pluginInfo.pluginName))]),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[e._v(e._s(e.parseMinToStr(e.block.pluginInfo.refreshTime)))]),i("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[i("el-radio-group",{attrs:{disabled:""},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[i("el-radio",{attrs:{label:0}},[e._v("非活动")]),i("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType"}},[e._v(e._s(e.pluginParentTypeText))]),"secKill"!==e.pluginParentType?i("el-form-item",{attrs:{label:"内容源"}},[e._v(e._s(e.SOURCE_TEXT[e.block.pluginInfo.source]))]):e._e(),"sign"===e.pluginParentType?[i("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType"}},[e._v(e._s(e.block.pluginInfo.pluginType))])]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0&&e.pluginTypeText?i("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType"}},[e._v(e._s(e.pluginTypeText))]):e._e(),e.baseHasTitle?[i("el-form-item",{attrs:{label:"标题",prop:"helper.title"}},[e._v(e._s(e.block.helper.title))]),i("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle"}},[e._v(e._s(e.block.helper.subTitle))])]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,a){return i("div",{key:a},[i("div",{staticClass:"base-tit"},[i("span",[e._v(e._s(t.label))])]),e.versionHasTitle?[i("el-form-item",{attrs:{label:"标题"}},[e._v(e._s(t.title))]),i("el-form-item",{attrs:{label:"副标题"}},[e._v(e._s(t.subTitle))])]:e._e(),"builtIn"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"状态栏文字"}},[e._v(e._s(t.title)+" "+e._s(t.subTitle?" | "+t.subTitle:""))])]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[i("el-form-item",{attrs:{label:"商品ID"}},[e._v(e._s(t.goodsId))]),i("el-form-item",{attrs:{label:"商品名称"}},[e._v(e._s(t.title))])]:e._e(),i("el-form-item",{attrs:{label:"海报"}},[i("div",{staticClass:"poster"},[t.poster.pictureUrl?i("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[i("el-form-item",{attrs:{label:"异形焦点"}},[t.extendInfo.focusImgUrl?i("div",{staticClass:"focus-transition"},[i("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):i("span",[e._v("无")])]),i("el-form-item",{attrs:{label:"存活时间"}},[e._v(e._s(e.parseMinToStr(t.extendInfo.aliveTime)))]),i("el-form-item",{attrs:{label:"点击次数"}},[e._v(e._s(t.extendInfo.clickCount))])]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType?i("el-form-item",{attrs:{label:"打开方式"}},[e._v(e._s(e.OPEN_MODE_TEXT[t.openMode]))]):e._e(),"webpage"===t.openMode?[i("el-form-item",{attrs:{label:"网页地址"}},[e._v(e._s(t.onclick.webpageUrl))]),i("el-form-item",{attrs:{label:"网页类型"}},[e._v(e._s(["","浮窗网页","全屏网页"][+t.onclick.webpageType]))]),i("el-form-item",{attrs:{label:"应用版本号"}},[e._v(e._s(t.onclick.webpageAppVersion))])]:e._e(),"video"===t.openMode?[i("el-form-item",{attrs:{label:"视频名称"}},[e._v(e._s(t.onclick.videoName))]),i("el-form-item",{attrs:{label:"视频地址"}},[e._v(e._s(t.onclick.videoUrl))])]:e._e(),"picture"===t.openMode?[i("el-form-item",{attrs:{label:"图片"}},[i("div",{staticClass:"open-picture"},[i("img",{staticClass:"open-picture__img",attrs:{src:t.onclick.picture[0].url}})])])]:e._e(),"tab"===t.openMode?[i("el-form-item",{attrs:{label:"版面"}},[e._v(e._s(t.onclick.tab.tabId))])]:e._e(),"app"===t.openMode?i("AppParamsRead",{attrs:{"label-width":"140px"},model:{value:t.onclick,callback:function(i){e.$set(t,"onclick",i)},expression:"item.onclick"}}):e._e()],2)}):e._e()],2),i("el-dialog",{attrs:{title:"审核",visible:e.showAuditDialog},on:{"update:visible":function(t){e.showAuditDialog=t}}},[i("el-form",[i("el-form-item",{attrs:{label:"审核意见"}},[i("el-radio",{staticClass:"radio",attrs:{label:4},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),i("el-radio",{staticClass:"radio",attrs:{label:5},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),i("el-form-item",{attrs:{label:"意见说明"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showAuditDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleAudit}},[e._v("确 定")])],1)],1),i("div",{staticClass:"toolbar-container",staticStyle:{padding:"16px","text-align":"right"}},[e.block.pluginInfo.pluginStatus===e.STATUS.waiting?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAuditDialog=!0}}},[e._v("审核")]):e._e()],1)],1)])},ta=[],ia={0:"无",1:"腾讯",2:"爱奇艺"},aa={webpage:"网页",app:"第三方应用",video:"视频",tab:"版面",picture:"图片"},na={draft:2,waiting:3,accepted:4,reject:5,processing:7},la={components:{AppParamsRead:N["AppParamsRead"]},props:{viewId:Number,default:null},data:function(){return{showAuditDialog:!1,title:void 0,STATUS:na,SOURCE_TEXT:ia,OPEN_MODE_TEXT:aa,pluginParentTypes:[],pluginTypes:[],pluginVersions:{},auditForm:{auditFlag:4,auditDesc:""},block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:240},rlsInfo:[],hasActivity:0}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},pluginParentTypeText:function(){var e=this.pluginParentType,t=this.pluginParentTypes;if(t.length>0){var i=t.find(function(t){return t.value===e});if(i)return i.label}},pluginTypeText:function(){var e=this.pluginType,t=this.pluginTypes;if(console.log(e),console.log(t),t.length>0){var i=t.find(function(t){return t.value===e});if(i)return i.label}},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},methods:{parseMinToStr:function(e){var t=Math.floor(e/60),i=e%60,a=t>9?""+t:"0"+t,n=i>9?""+i:"0"+i;return a+":"+n},getData:function(){var e=this;this.$service.getData({id:this.viewId}).then(function(t){e.setData(t),e.pluginType&&e.getPluginVersions(e.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,i=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var a=i[t.value];return a&&(this.$set(a,"label",t.label),e.push(a)),e}.bind(this),[])}}.bind(e))})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){console.log(t),t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value}))})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){console.log(e),e&&(t.pluginTypes=e)})},getPluginVersions:function(e){this.urls;var t=this,i=(this.FastDevTool,this.pluginVersions);return new Promise(function(a,n){i[e]?a(i[e]):t.$service.getPluginVersions(e).then(function(t){t&&(i[e]=t,a(i[e]))})})},setData:function(e){var t=this.block.helper,i=JSON.parse(JSON.stringify(e)),a=i.pluginInfo.pluginParentType,n=i.pluginInfo.pluginType;if(i.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,i=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:i.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:i.name,videoUrl:i.url};break;case"picture":e.onclick={picture:[{url:i.url}]};break;case"tab":e.onclick={tab:{tabId:i.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),a&&this.getPluginTypes(a),"secKill"!==a&&n&&"REFERENCE_MOVIE_VIP"!==n){var l=i.rlsInfo[0];l&&(t.title=l.title,t.subTitle=l.subTitle)}this.block=Object.assign(this.block,i)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleAudit:function(){var e=this,t=this.block,i=this.auditForm;""===i.auditDesc.trim()?this.$message("请填写意见说明"):this.$service.SaveAudit({id:t.pluginInfo.pluginId,type:"systemPlugin",auditFlag:i.auditFlag,auditDesc:i.auditDesc},"审核成功").then(function(t){e.showAuditDialog=!1,e.$emit("open-list-page")})},handleClose:function(){window.parent.$("#edit-view").dialog("close")}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),window.mode="read",window.mode&&(this.mode=window.mode,this.title="预览"),this.getData()}},oa=la,ra=(i("fd49"),Object(O["a"])(oa,ea,ta,!1,null,null,null)),sa=ra.exports,ca={components:{SysPluginList:Ei,SysPluginAdd:Qi,SysPluginView:sa},data:function(){return{editId:null,viewId:null,model:"list"}},methods:{openAddPage:function(e){this.editId=e,this.model="add",console.log(this.mode)},openListPage:function(){this.model="list",this.$refs.list.fetchData()},openViewPage:function(e){console.log(this.mode),this.viewId=e,this.model="view"},goBack:function(){this.model="list"}}},ua=ca,da=Object(O["a"])(ua,$i,Ri,!1,null,null,null),pa=da.exports,ha=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("AlbumPannelInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("AlbumPannelInfoAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},ma=[],fa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[void 0===e.dataList?i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addTabInfo}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1):e._e(),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},ba=[],ga=(i("6b54"),{components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:{dataList:{type:Object}},data:function(){var e=this;return{pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],pannelStatus:{},filter:{idPrefix:10,pannelType:3},filterSchema:null,pagination:{currentPage:1},businessType:{},table:{props:{},data:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark"},{label:"布局",prop:"fullLayoutName"},{label:"业务分类",prop:"categoryName"},{label:"内容源",prop:"pannelResource",formatter:function(e){return{o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_voole:"优朋"}[e.pannelList[0].pannelResource]}},{label:"专辑数据",prop:"albumName"},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var i=t.pannelStatus,a=t.currentVersion;return a+"/"+e.pannelStatusOption.map(function(e){if(i.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate","show-overflow-tooltip":!0},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"userName"},{label:"操作"}],selected:[],selectionType:"multiple"},selected:[]}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.dataList?this.$service.panelDataList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows}):this.$service.panelPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){console.log(this.dataList),this.dataList?(this.filter=Object.assign({},this.dataList.filter),console.log(this.filter)):this.filter={idPrefix:10},this.fetchData()},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.businessType[t.dictCnName]=t.dictId})})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.pannelGroupId)>-1&&e.push(a),e},[])},addTabInfo:function(){},editData:function(){},batchDel:function(){}},created:function(){var e=this;this.pannelStatus=this.pannelStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=J.a.map({pannelCategory:J.a.o.enum(this.businessType).other("form",{placeholder:"业务分类",component:"Select"}),pannelId:J.a.o.string.other("form",{placeholder:"板块ID",component:"Input"}),pannelName:J.a.o.string.other("form",{placeholder:"板块名称",component:"Input"}),pannelTitle:J.a.o.string.other("form",{placeholder:"板块标题",component:"Input"}),vDataListName:J.a.o.string.other("form",{placeholder:"关联专辑名",component:"Input"}),tabName:J.a.o.string.other("form",{placeholder:"引用状态",component:"Input"}),pannelResource:J.a.o.enum({"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"}).other("form",{placeholder:"内容源",component:"Select"}),pannelStatus:J.a.o.enum(this.pannelStatus).other("form",{placeholder:"状态",component:"Select"}),type:J.a.o.enum({"默认":-1,"置顶":1,"下沉":0}).other("form",{placeholder:"板块类别",component:"Select"})}).other("form",{cols:{item:6,label:0,wrapper:18},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getBusinessType().then(function(){e.dataList?e.filterSchema=i.filterSchema:e.filterSchema=t});var i=this.dataList;i&&(this.filter=Object.assign({},i.filter),this.table=i.table),this.fetchData()}}),va=ga,ya=(i("fc9f"),Object(O["a"])(va,fa,ba,!1,null,"e3b4bc6a",null)),wa=ya.exports,Ia={},Ta=Object(O["a"])(Ia,Wi,zi,!1,null,null,null),ka=Ta.exports,Sa={components:{AlbumPannelInfoList:wa,AlbumPannelInfoAdd:ka},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Ca=Sa,_a=Object(O["a"])(Ca,ha,ma,!1,null,"240eaf46",null),Fa=_a.exports,xa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("MarkPanelList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?i("MarkPanelAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?i("MarkPanelView",{attrs:{viewId:e.viewId},on:{"pen-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},Da=[],Pa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.deleteData}},[e._v("批量删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},$a=[],Ra={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{businessTypes:{},pannelResources:{"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"},pannelStatuses:{"下架":0,"上架":1,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pannelGroupId",width:"90"},{label:"名称",prop:"pannelGroupRemark",width:"100"},{label:"业务分类",prop:"categoryName",width:"90"},{label:"内容源",prop:"pannelList",width:"90",render:function(e,t){var i=t.row;if(i.pannelList.length<0)return"";switch(i.pannelList[0].pannelResource){case"o_tencent":return"腾讯";case"o_iqiyi":return"爱奇艺";case"o_voole":return"优朋"}}},{label:"引用状态",prop:"fullTabName","min-width":"90"},{label:"版本/状态",prop:"pannelStatus",width:"90",render:function(e,t){var i=t.row;switch(i.pannelStatus){case 0:return"下架";case 1:return"上架";case 2:return"草稿";case 3:return"待审核";case 4:return"审核通过";case 5:return"审核不通过"}}},{label:"当前版本",prop:"currentVersion",width:"70"},{label:"待审核副本",prop:"duplicateVersion",width:"90"},{label:"更新时间",prop:"lastUpdateDate"},{label:"操作",fixed:"right",render:N["utils"].component.createOperationRender(this,{preview:"预览"})}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMarkPanelList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize,e.idPrefix="10",e.pannelType="8"),e},addData:function(){this.$emit("open-add-page",null)},editData:function(){0==this.selected.length?this.$message("请选择一条数据"):this.selected.length>1?this.$message("只能选择一条数据"):(console.log(this.selected),this.$emit("open-add-page",this.selected[0]))},deleteData:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.deleteMarkPanel({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},preview:function(e){var t=e.row;this.$emit("open-view-page",t.pannelGroupId)},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.businessTypes[t.dictCnName]=t.dictId}),console.log(e.businessTypes)})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.pannelGroupId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()}},created:function(){var e=this,t=J.a.map({pannelGroupId:J.a.o.string.other("form",{component:"Input",placeholder:"ID",cols:{item:3,label:0}}),pannelGroupRemark:J.a.o.string.other("form",{component:"Input",placeholder:"名称",cols:{item:3,label:0}}),categoryName:J.a.o.enum(this.businessTypes).other("form",{component:"Select",placeholder:"业务分类",cols:{item:3,label:0}}),pannelResource:J.a.o.enum(this.pannelResources).other("form",{component:"Select",placeholder:"内容源",cols:{item:3,label:0}}),fullTabName:J.a.o.string.other("form",{component:"Input",placeholder:"引用状态",cols:{item:3,label:0}}),pannelStatus:J.a.o.enum(this.pannelStatuses).other("form",{component:"Select",placeholder:"状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.getBusinessType().then(function(){e.filterSchema=t})}},Na=Ra,La=(i("8186"),Object(O["a"])(Na,Pa,$a,!1,null,"6b179e3a",null)),Aa=La.exports,Va=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"版块名称",prop:"pannelList[0].pannelName"}},[i("el-input",{attrs:{placeholder:"版块名称"},model:{value:e.form.pannelList[0].pannelName,callback:function(t){e.$set(e.form.pannelList[0],"pannelName",t)},expression:"form.pannelList[0].pannelName"}})],1),i("el-form-item",{attrs:{label:"版块标题",prop:"pannelList[0].pannelTitle"}},[i("el-input",{attrs:{placeholder:"版块标题"},model:{value:e.form.pannelList[0].pannelTitle,callback:function(t){e.$set(e.form.pannelList[0],"pannelTitle",t)},expression:"form.pannelList[0].pannelTitle"}}),i("el-checkbox",{attrs:{value:!e.form.pannelList[0].showTitle},on:{input:function(t){e.form.pannelList[0].showTitle=!t}}},[e._v("前端不显示标题")])],1),i("el-form-item",{attrs:{label:"功能类型",prop:"clientType"}},[i("el-input",{attrs:{placeholder:"功能类型"},model:{value:e.form.clientType,callback:function(t){e.$set(e.form,"clientType",t)},expression:"form.clientType"}})],1),i("el-form-item",{attrs:{label:"内容源",prop:"pannelList[0].pannelResource"}},[i("el-radio",{attrs:{label:""},model:{value:e.form.pannelList[0].pannelResource,callback:function(t){e.$set(e.form.pannelList[0],"pannelResource",t)},expression:"form.pannelList[0].pannelResource"}},[e._v("不限")]),i("el-radio",{attrs:{label:"o_tencent"},model:{value:e.form.pannelList[0].pannelResource,callback:function(t){e.$set(e.form.pannelList[0],"pannelResource",t)},expression:"form.pannelList[0].pannelResource"}},[e._v("腾讯")]),i("el-radio",{attrs:{label:"o_iqiyi"},model:{value:e.form.pannelList[0].pannelResource,callback:function(t){e.$set(e.form.pannelList[0],"pannelResource",t)},expression:"form.pannelList[0].pannelResource"}},[e._v("爱奇艺")])],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"warning"},on:{click:e.submitStart}},[e._v("提交审核")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitEnd}},[e._v("保存草稿")])],1)],1),i("el-dialog",{attrs:{visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("el-form",{ref:"submitForm",attrs:{model:e.submitForm,rules:e.submitRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"是否定时",prop:"isTiming"}},[i("el-radio-group",{model:{value:e.submitForm.isTiming,callback:function(t){e.$set(e.submitForm,"isTiming",t)},expression:"submitForm.isTiming"}},[i("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("是")]),i("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("否")])],1)],1),1==e.submitForm.isTiming?i("el-form-item",{attrs:{label:"设定时间",prop:"releaseTime"}},[i("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择时间"},model:{value:e.submitForm.releaseTime,callback:function(t){e.$set(e.submitForm,"releaseTime",t)},expression:"submitForm.releaseTime"}})],1):e._e(),i("el-form-item",[i("el-button",{on:{click:function(t){e.dialogTableVisible=!1,e.resetFields("submitForm")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitTime("submitForm")}}},[e._v("确 定")])],1)],1)],1)],1)],1)],1)},Oa=[],Ea={props:{editId:Number,default:null},data:function(){return{title:"",form:{parentType:"function",pannelGroupId:void 0,currentVersion:void 0,panelGroupType:8,clientType:"",pannelList:[{pannelName:"",pannelType:8,pannelResource:"",pannelTitle:"",showTitle:!1,pannelCategory:67}]},rules:{"pannelList[0].pannelName":[{required:!0,message:"请输入板块名称",trigger:"blur"}],"pannelList[0].pannelTitle":[{required:!0,message:"请输入板块标题",trigger:"blur"}],clientType:[{required:!0,message:"请输入功能类型",trigger:"blur"}]},dialogTableVisible:!1,submitForm:{isTiming:0,releaseTime:""},submitRules:{releaseTime:[{required:!0,message:"请选择时间"}]}}},methods:{submitEnd:function(e,t){var i=this,a=this.getFormData(e,t);this.$refs.form.validate(function(e){e&&i.$service.MarkPanelSave({jsonStr:JSON.stringify(a)},"保存成功").then(function(e){i.$emit("open-list-page")})})},getFormData:function(e,t){var i=this.form;i.pannelList[0]["showTitle"]?i.pannelList[0]["showTitle"]=1:i.pannelList[0]["showTitle"]=0,i.pannelList[0]["pannelStatus"]=t?3:2;var a=Object.assign({},i,e);return a},submitTime:function(e){var t=this;this.$refs.submitForm.validate(function(e){if(e){t.form.isTiming=t.$refs.submitForm.model.isTiming,t.form.releaseTime=t.$refs.submitForm.model.releaseTime,t.dialogTableVisible=!1;JSON.stringify(t.form);t.$service.MarkPanelSave({jsonStr:JSON.stringify(t.form)},"成功").then(function(e){t.$emit("open-list-page")})}})},resetFields:function(e){var t=this;this.$nextTick(function(){t.$refs.submitForm.resetFields()}),console.log(this.$refs.submitForm.model)},submitStart:function(){this.dialogTableVisible=!0},getEditData:function(){var e=this;this.$service.getEditData({id:this.editId}).then(function(t){console.log(t),e.form=t})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},Ma=Ea,Ua=Object(O["a"])(Ma,Va,Oa,!1,null,"3d62afbe",null),Ba=Ua.exports,ja=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{attrs:{id:"preview"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.releaseTime,expression:"releaseTime"}],staticClass:"audit-tip"},[e._v("该版块为定时任务，审核通过后将于"+e._s(e.releaseTime)+"上线")]),i("div",{attrs:{id:"pannelStatus"}},[i("el-form",{attrs:{inline:!0}},[e.isShowVersion?i("el-form-item",{attrs:{label:"版本"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleSelectVersion},model:{value:e.versions,callback:function(t){e.versions=t},expression:"versions"}},e._l(e.versionList,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),i("el-form-item",[i("div",{staticClass:"form-status"},[e._v(e._s(e.pannelStatus))])])],1)],1),i("div",{staticClass:"base-tit"},[i("span",[e._v("基本信息")])]),i("el-form",{attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:"版块名称:"}},[i("div",[e._v(e._s(e.pannelName))])]),i("el-form-item",{attrs:{label:"版块标题:"}},[i("div",[e._v(e._s(e.pannelTitle)+" "+e._s(0===e.showTitle?"(前端不显示)":""))])]),i("el-form-item",{attrs:{label:"功能类型:"}},[i("div",[e._v(e._s(e.clientType))])]),i("el-form-item",{attrs:{label:"内容源:"}},[i("div",[e._v(e._s(e.pannelResourceText[e.pannelResource]||"不限"))])])],1),i("div",{staticClass:"base-tit auditor-title"},[i("span",[e._v("审核者备注")])]),i("div",{staticClass:"up-addlist"},[i("table",[i("tbody",{staticClass:"auditor-wrapper"})])])],1)])},qa=[],Wa={},za={props:{viewId:Number,default:null},data:function(){return{title:"预览",pannelType:"pannel",auditHistories:[],blockContentProps:{},releaseTime:void 0,activePannelIndex:0,buttonGroup:{params:{},options:{isAllowCopy:!0}},pannelResourceText:{o_iqiyi:"爱奇艺",o_tencent:"腾讯",o_voole:"优朋"},clientType:"",showTitle:1,pannelResource:"",pannelName:"",pannelTitle:"",versions:"",versionList:[],isShowVersion:!1,pannelStatus:""}},computed:{},methods:{getViewData:function(){var e=this;return this.$service.getViewData({id:this.viewId}).then(function(t){console.log(t),e.buttonGroup.params=t,e.pannelName=t.pannelList[0].pannelName,e.pannelTitle=t.pannelList[0].pannelTitle,e.pannelResource=t.pannelList[0].pannelResource,e.pannelStatus=e.parasNumToStr(t.pannelList[0].pannelStatus),e.versions=t.currentVersion,e.clientType=t.clientType})},parasNumToStr:function(e){var t=["下架","上架","草稿","待审核","审核通过","审核不通过"],i=t[e];return i},getTimedInfo:function(){var e=this,t={id:this.viewId,version:this.buttonGroup.params.currentVersion,type:this.pannelType};this.$service.getTimedInfo(t).then(function(t){e.releaseTime=t.releaseTime})},getHistoryList:function(){var e=this,t={id:e.viewId,type:e.pannelType};e.$service.getHistoryList(t).then(function(t){var i="";if(null==t.rows||0==t.rows.length)return e.isShowVersion=!1,!1;e.isShowVersion=!0,t.rows.forEach(function(t,a){e.versionList.push({value:t.version,label:t.version+"/"+t.lastUpdateDate+"/"+t.modifierName+"/"+e.parasNumToStr(t.status)}),console.log(e.versionList),t.version==Wa.currentVersion&&(e.versions=t.version),9===t.status&&(i=t.version)}),""==e.versions&&(e.versions=i)})},handleSelectVersion:function(e){var t=this,i={id:this.viewId,version:e,type:this.pannelType};this.$service.getTimedInfo(i).then(function(e){t.releaseTime=e.releaseTime}),this.getViewData()}},created:function(){var e=this;this.getViewData().then(function(){e.getTimedInfo()}),this.getHistoryList()}},Ja=za,Ha=(i("9b2d"),Object(O["a"])(Ja,ja,qa,!1,null,"23437f60",null)),Ga=Ha.exports,Ka={components:{MarkPanelList:Aa,MarkPanelAdd:Ba,MarkPanelView:Ga},data:function(){return{model:"list",editId:null,viewId:null}},methods:{openAddPage:function(e){this.editId=e,this.model="add"},openViewPage:function(e){this.viewId=e,this.model="view"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},goBack:function(){this.model="list"}}},Ya=Ka,Xa=Object(O["a"])(Ya,xa,Da,!1,null,"3081d1f8",null),Za=Xa.exports,Qa=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("PannelInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("PannelInfoAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},en=[],tn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[void 0===e.dataList?i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addTabInfo}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1):e._e(),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},an=[],nn={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:{dataList:{type:Object}},data:function(){var e=this;return{pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],pannelStatus:{},filter:{idPrefix:10},filterSchema:null,pagination:{currentPage:1},businessType:{},table:{props:{},data:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark"},{label:"布局",prop:"fullLayoutName"},{label:"业务分类",prop:"categoryName"},{label:"内容源",prop:"pannelResource",formatter:function(e){return{o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_voole:"优朋"}[e.pannelList[0].pannelResource]}},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var i=t.pannelStatus,a=t.currentVersion;return a+"/"+e.pannelStatusOption.map(function(e){if(i.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate","show-overflow-tooltip":!0},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"userName"},{label:"操作"}],selected:[],selectionType:"multiple"},selected:[]}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.dataList?this.$service.panelDataList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows}):this.$service.panelPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){console.log(this.dataList),this.dataList?(this.filter=Object.assign({},this.dataList.filter),console.log(this.filter)):this.filter={idPrefix:10},this.fetchData()},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.businessType[t.dictCnName]=t.dictId})})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.pannelGroupId)>-1&&e.push(a),e},[])},addTabInfo:function(){},editData:function(){},batchDel:function(){}},created:function(){var e=this;this.pannelStatus=this.pannelStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=J.a.map({pannelCategory:J.a.o.enum(this.businessType).other("form",{placeholder:"业务分类",component:"Select"}),pannelId:J.a.o.string.other("form",{placeholder:"板块ID",component:"Input"}),pannelName:J.a.o.string.other("form",{placeholder:"板块名称",component:"Input"}),pannelTitle:J.a.o.string.other("form",{placeholder:"板块标题",component:"Input"}),tabName:J.a.o.string.other("form",{placeholder:"引用状态",component:"Input"}),pannelResource:J.a.o.enum({"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"}).other("form",{placeholder:"内容源",component:"Select"}),pannelStatus:J.a.o.enum(this.pannelStatus).other("form",{placeholder:"状态",component:"Select"}),pannelType:J.a.o.enum({"影视推荐板块":6,"定向板块":7,"常规板块":1}).other("form",{placeholder:"板块类别",component:"Select"}),contentTitle:J.a.o.string.other("form",{placeholder:"推荐位标题",component:"Input"}),contentPackageName:J.a.o.string.other("form",{placeholder:"推荐位包名",component:"Input"})}).other("form",{cols:{item:6,label:0,wrapper:18},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getBusinessType().then(function(){e.dataList?e.filterSchema=i.filterSchema:e.filterSchema=t});var i=this.dataList;i&&(this.filter=Object.assign({},i.filter),this.table=i.table),this.fetchData()}},ln=nn,on=(i("02a2"),Object(O["a"])(ln,tn,an,!1,null,"e3a2487c",null)),rn=on.exports,sn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},cn=[],un={components:{},data:function(){return{}},methods:{},created:function(){}},dn=un,pn=Object(O["a"])(dn,sn,cn,!1,null,"46aa801e",null),hn=pn.exports,mn={components:{PannelInfoList:rn,PannelInfoAdd:hn},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}},created:function(){}},fn=mn,bn=Object(O["a"])(fn,Qa,en,!1,null,"1ae2e89e",null),gn=bn.exports,vn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("PrivatePannelInfoList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage}}),"add"===e.model?i("PrivatePannelInfoAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},yn=[],wn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[void 0===e.dataList?i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addTabInfo}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1):e._e(),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},In=[],Tn={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},props:{dataList:{type:Object}},data:function(){var e=this;return{pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],pannelCategories:{},pannelStatus:{},pannelResources:{"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pannelGroupId",width:"90"},{label:"名称",prop:"pannelGroupRemark",width:"100"},{label:"业务分类",prop:"categoryName",width:"90"},{label:"引用状态",prop:"fullTabName"},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var i=t.pannelStatus,a=t.currentVersion;return a+"/"+e.pannelStatusOption.map(function(e){if(i.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion",width:"90"},{label:"更新时间",prop:"lastUpdateDate"},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"userName"}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.dataList,this.$service.privatePannelInfo(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},addTabInfo:function(){},editData:function(){},batchDel:function(){},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.dataList?(this.filter=Object.assign({},this.dataList.filter),console.log(this.filter)):this.filter={sort:void 0,order:void 0},this.fetchData()},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.pannelCategories[t.dictCnName]=t.dictId})})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.pannelGroupId)>-1&&e.push(a),e},[])}},created:function(){var e=this;this.pannelStatus=this.pannelStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=J.a.map({pannelId:J.a.o.string.other("form",{component:"Input",placeholder:"ID",cols:{item:3,label:0}}),pannelName:J.a.o.string.other("form",{component:"Input",placeholder:"名称",cols:{item:3,label:0}}),pannelTitle:J.a.o.string.other("form",{component:"Input",placeholder:"标题",cols:{item:3,label:0}}),pannelResource:J.a.o.enum(this.pannelResources).other("form",{component:"Select",placeholder:"内容源",cols:{item:3,label:0}}),pannelCategory:J.a.o.enum(this.pannelCategories).other("form",{component:"Select",placeholder:"业务分类",cols:{item:3,label:0}}),tabName:J.a.o.string.other("form",{component:"Input",placeholder:"引用状态",cols:{item:3,label:0}}),pannelStatus:J.a.o.enum(this.pannelStatus).other("form",{component:"Select",placeholder:"状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}}),i=this.dataList;i&&(this.filter=Object.assign({},i.filter),this.table=i.table),this.fetchData(),this.getBusinessType().then(function(){e.filterSchema=t})}},kn=Tn,Sn=(i("7b8f"),Object(O["a"])(kn,wn,In,!1,null,"35893f99",null)),Cn=Sn.exports,_n={},Fn=Object(O["a"])(_n,Ji,Hi,!1,null,null,null),xn=Fn.exports,Dn={components:{PrivatePannelInfoList:Cn,PrivatePannelInfoAdd:xn},data:function(){return{model:"list",editId:null}},methods:{openAddPage:function(e){this.editId=e,this.model="add"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},goBack:function(){this.model="list"}}},Pn=Dn,$n=Object(O["a"])(Pn,vn,yn,!1,null,"08c8b6d4",null),Rn=$n.exports,Nn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("CommonOnclickInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("CommonOnclickInfoAdd",{attrs:{editId:e.editId},on:{openListPage:e.openListPage,"go-back":e.goBack}})],1)},Ln=[],An=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[i("el-form-item",{attrs:{label:"点击事件名称",prop:"onlickName"}},[i("el-input",{attrs:{placeholder:"点击事件名称"},model:{value:e.form.onlickName,callback:function(t){e.$set(e.form,"onlickName",t)},expression:"form.onlickName"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{placeholder:"备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),i("el-form-item",{attrs:{label:"点击事件json串",prop:"onlickJson"}},[i("el-input",{attrs:{type:"textarea",placeholder:"异常处理(exception)"},model:{value:e.form.onlickJson,callback:function(t){e.$set(e.form,"onlickJson",t)},expression:"form.onlickJson"}})],1),i("el-form-item",{attrs:{label:"应用包名",prop:"packagename"}},[i("el-input",{attrs:{placeholder:"应用包名"},model:{value:e.form.packagename,callback:function(t){e.$set(e.form,"packagename",t)},expression:"form.packagename"}})],1),i("el-form-item",{attrs:{label:"应用版本号",prop:"versioncode"}},[i("el-input",{attrs:{placeholder:"应用版本号"},model:{value:e.form.versioncode,callback:function(t){e.$set(e.form,"versioncode",t)},expression:"form.versioncode"}})],1),i("el-form-item",{attrs:{label:"启动动作",prop:"dowhat"}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.dowhat,callback:function(t){e.$set(e.form,"dowhat",t)},expression:"form.dowhat"}},[i("el-option",{attrs:{label:"startActivity",value:"startActivity"}}),i("el-option",{attrs:{label:"startService",value:"startService"}}),i("el-option",{attrs:{label:"sendBroadcast",value:"sendBroadcast"}})],1)],1),i("el-form-item",{attrs:{label:"启动方式",prop:"bywhat"}},[i("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.form.bywhat,callback:function(t){e.$set(e.form,"bywhat",t)},expression:"form.bywhat"}},[i("el-option",{attrs:{label:"action",value:"action"}}),i("el-option",{attrs:{label:"class",value:"class"}}),i("el-option",{attrs:{label:"uri",value:"uri"}})],1)],1),i("el-form-item",{attrs:{label:"启动参数",prop:"byvalue"}},[i("el-input",{attrs:{placeholder:"启动参数"},model:{value:e.form.byvalue,callback:function(t){e.$set(e.form,"byvalue",t)},expression:"form.byvalue"}})],1),i("el-form-item",{attrs:{label:"扩展参数",prop:"params"}},[i("ul",{staticClass:"cc-params-ul"},e._l(e.paramsList,function(t,a){return i("li",[i("el-input",{attrs:{value:t.key,placeholder:"key"},model:{value:t.key,callback:function(i){e.$set(t,"key",i)},expression:"item.key"}}),i("el-input",{attrs:{value:t.value,placeholder:"value"},model:{value:t.value,callback:function(i){e.$set(t,"value",i)},expression:"item.value"}}),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.paramsList.length>1,expression:"paramsList.length > 1"}],attrs:{type:"danger",size:"mini",title:"删除"},on:{click:function(t){return e.paramsRedBtn(a)}}},[e._v("-")])],1)}),0),i("div",{staticClass:"cc-params-btn"},[i("el-button",{attrs:{type:"primary",size:"mini",title:"增加"},on:{click:e.paramsAddBtn}},[e._v("+")])],1)]),i("el-form-item",{attrs:{label:"异常处理(exception)",prop:"exception"}},[i("el-input",{attrs:{type:"textarea",placeholder:"异常处理(exception)"},model:{value:e.form.exception,callback:function(t){e.$set(e.form,"exception",t)},expression:"form.exception"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},Vn=[],On={props:{editId:Number,default:null},data:function(){return{title:null,form:{onlickName:null,remark:null,onlickJson:null,packagename:null,versioncode:"-1",dowhat:"startActivity",bywhat:"action",byvalue:null,params:null,exception:null},formRules:{onlickName:[{required:!0,message:"请输入点击事件名称",trigger:"blur"}],packagename:[{required:!0,message:"请输入应用包名",trigger:"blur"}],byvalue:[{required:!0,message:"请输入启动参数",trigger:"blur"}]},paramsList:[{key:"",value:""}]}},methods:{paramsAddBtn:function(){this.paramsList.push({key:"",value:""})},paramsRedBtn:function(e){this.paramsList.splice(e,1)},submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i={},a={};e.paramsList.forEach(function(e){""!=e.key.trim()&&(i[e.key]=e.value)}),e.form.params=JSON.stringify(i),a.jsonStr=JSON.stringify(e.form),console.log(e.form),e.$service.commonOnclickInfoSave(a,"保存成功").then(function(t){e.$emit("openListPage")})}})},getEditData:function(){var e=this,t=this;this.$service.getCommonOnclickInfoEdit({id:this.editId}).then(function(i){Object.keys(e.form).forEach(function(e){if(t.form[e]=i[e],"params"===e){var a=[],n=JSON.parse(i[e]);console.log(n),Object.keys(n).forEach(function(e){var t={};t.key=e,t.value=n[e],a.push(t)}),"{}"!==i[e]&&(t.paramsList=a)}})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},En=On,Mn=(i("854a"),Object(O["a"])(En,An,Vn,!1,null,"005d4eb3",null)),Un=Mn.exports,Bn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.deleteData}},[e._v("删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},jn=[],qn={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},setDialogVisible:!1,selected:[],buttonList:[],table:{props:{},header:[{label:"ID",prop:"commonOnclickId"},{label:"点击事件名称",prop:"onlickName"},{label:"备注",prop:"remark"},{label:"应用包名",prop:"packagename"},{label:"应用版本号",prop:"versioncode"},{label:"启动动作",prop:"dowhat"},{label:"启动方式",prop:"bywhat"},{label:"启动参数",prop:"byvalue"},{label:"扩展参数",prop:"params"},{label:"异常处理",prop:"exception"},{label:"创建人",prop:"createrName"},{label:"创建时间",prop:"createdDate"},{label:"修改人",fixed:"modifierName"},{label:"修改时间",fixed:"lastUpdateDate"}],data:[],selected:[],selectionType:"multiple"}}},methods:{addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},deleteData:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.commonOnclickInfoDelete({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.commonOnclickId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.commonOnclickId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.commonOnclickId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getCommonOnclickInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getSysMenuInfo:function(){var e=this;return this.$service.getCommonOnclickInfoMenu().then(function(t){e.buttonList=t})}},created:function(){var e=J.a.map({commonOnclickId:J.a.o.string.other("form",{component:"Input",placeholder:"ID",cols:{item:3,label:0}}),onlickName:J.a.o.string.other("form",{component:"Input",placeholder:"点击事件名",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData(),this.getSysMenuInfo()}},Wn=qn,zn=(i("603c"),Object(O["a"])(Wn,Bn,jn,!1,null,"24869e6a",null)),Jn=zn.exports,Hn={components:{CommonOnclickInfoAdd:Un,CommonOnclickInfoList:Jn},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Gn=Hn,Kn=Object(O["a"])(Gn,Nn,Ln,!1,null,null,null),Yn=Kn.exports,Xn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("GlobalCornerIconList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?i("GlobalCornerIconAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?i("GlobalCornerIconView",{attrs:{viewId:e.viewId},on:{"open-list-page":e.openListPage,"open-add-page":e.openAddPage,"go-back":e.goBack}}):e._e()],1)},Zn=[],Qn=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.deleteData}},[e._v("删除")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:e.batchHandle}},[e._v("批量审核")]),i("el-button",{attrs:{type:"primary"},on:{click:e.changePriority}},[e._v("调整优先级")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[i("span",{staticClass:"pics"},[i("img",{staticStyle:{width:"200px"},attrs:{src:e.reviewPicUrl,alt:"图片"}})])]),i("el-dialog",{attrs:{title:"审核",visible:e.dialogPLVisible,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.dialogPLVisible=t}}},[i("GlobalIconAudit",{ref:"auditForm",on:{auditForm:e.submitForm,cancle:e.cancle}})],1),i("el-dialog",{attrs:{title:"调整优先级",visible:e.dialogLevelVisible},on:{"update:visible":function(t){e.dialogLevelVisible=t}}},[i("GlobelIconLevel"),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogLevelVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogLevelVisible=!1}}},[e._v("确 定")])],1)],1)],1)},el=[],tl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"auditForm",staticClass:"demo-ruleForm",attrs:{model:e.auditForm,"status-icon":"",rules:e.auditFormRule,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[i("el-radio",{attrs:{label:"4"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),i("el-radio",{attrs:{label:"5"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),i("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入意见说明"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1),i("el-form-item",[i("el-button",{on:{click:function(t){return e.cancle("auditForm")}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("auditForm")}}},[e._v("确定")])],1)],1)],1)},il=[],al={data:function(){return{auditForm:{auditFlag:"4",auditDesc:""},auditFormRule:{auditDesc:[{required:!0,message:"请输入审核意见",trigger:"blur"}]}}},methods:{onSubmit:function(e){var t=this;this.$refs.auditForm.validate(function(e){if(e){var i=t.auditForm;t.$emit("auditForm",i)}})},cancle:function(e){this.$refs.auditForm.resetFields();var t=!1;this.$emit("cancle",t)}},created:function(){}},nl=al,ll=Object(O["a"])(nl,tl,il,!1,null,null,null),ol=ll.exports,rl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("el-table",{staticStyle:{"margin-top":"20px","max-width":"80%"},attrs:{data:e.tab.pannelList,border:""}},[i("el-table-column",{attrs:{prop:"cornerIconId",label:"板块ID"}}),i("el-table-column",{attrs:{prop:"cornerIconName",label:"板块名称"}}),i("el-table-column",{attrs:{label:"图片",prop:""},scopedSlots:e._u([{key:"default",fn:function(e){return[i("img",{attrs:{src:e.row.imgUrl,width:"70px"}})]}}])}),i("el-table-column",{attrs:{prop:"",label:"优先级",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("OrderInput",{key:Math.random().toString(),attrs:{value:t.$index+1},on:{input:function(i){return e.handleChangePannelOrderStart(t.$index,i)},blur:function(i){return e.handleChangePannelOrderEnd(t.$index)}}})]}}])})],1)],1)],1)},sl=[],cl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-input",{on:{blur:function(t){return e.$emit("blur")}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})},ul=[],dl=void 0,pl={data:function(){return{inputValue:void 0}},props:["value"],watch:{inputValue:"handleInputValue",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){dl.inputValue=value})},methods:{handleInputValue:function(e){this.$emit("input",e)}},created:function(){this.inputValue=this.value}},hl=pl,ml=Object(O["a"])(hl,cl,ul,!1,null,null,null),fl=ml.exports,bl={components:{ActionList:N["ActionList"],Table:N["Table"],OrderInput:fl,ContentWrapper:N["ContentWrapper"]},data:function(){return{tab:{cornerIconId:void 0,cornerIconName:void 0,imgUrl:void 0,pannelList:[]},globalTypes:{test1:"1010",test2:"1011","付费属性":"101","排行榜":"103","教育角标":"105","策划类":"104","素材播出属性":"102"},attributeTypes:{},dialogPLVisible:!1,dialogLevelVisible:!1,typePositions:{"左上":0,"右上":1,"左下":3,"右下":2},reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[]}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getGlobalMgrList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.tab.pannelList=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.idPrefix="10",e.page=t.currentPage,e.rows=t.pageSize),e},handleChangePannelOrderStart:function(e,t){if(""!==t){t=parseInt(t);var i=this.tab.pannelList;isNaN(t)||t>i.length||t<=0?(this.currentPannelIndex=void 0,this.$message({type:"error",message:"序号必须大于0且不能大于总数量"}),this.tab.pannelList=i.slice()):(this.currentPannelIndex=e,this.currentPannelOrder=t)}},handleChangePannelOrderEnd:function(e){if(this.currentPannelIndex===e){var t=this.currentPannelOrder-1,i=e,a=this.tab.pannelList,n=a[i];a.splice(i,1),this.tab.pannelList=[].concat(a.slice(0,t),n,a.slice(t)),this.currentPannelIndex=void 0,this.currentPannelOrder=void 0}},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e.cornerIconId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.cornerIconId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.cornerIconId)>-1&&e.push(a),e},[])},getCornerTypes:function(){var e=this;return this.$service.getCornerTypes().then(function(t){t.forEach(function(t){e.globalTypes[t.typeName]=t.typeId}),console.log(e.globalTypes)})},getIconAttributes:function(){var e=this;return this.$service.getIconAttributes().then(function(t){t.attributes.forEach(function(t){e.attributeTypes[t.attributeName]=t.attributeCode}),console.log(e.attributeTypes)})}},created:function(){var e=this,t=J.a.map({typeId:J.a.o.enum(this.globalTypes).other("form",{component:"Select",placeholder:"角标分类",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.getCornerTypes().then(function(){e.getIconAttributes().then(function(){e.filterSchema=t})})}},gl=bl,vl=(i("f34c"),Object(O["a"])(gl,rl,sl,!1,null,"ce468642",null)),yl=vl.exports,wl={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"],GlobalIconAudit:ol,GlobelIconLevel:yl},data:function(){var e=this;return{checkAll:!1,globalTypes:{test1:"1010",test2:"1011","付费属性":"101","排行榜":"103","教育角标":"105","策划类":"104","素材播出属性":"102"},attributeTypes:{},dialogPLVisible:!1,dialogLevelVisible:!1,cornerStatuses:{"审核通过":1,"待审核":2,"审核不通过":3},typePositions:{"左上":0,"右上":1,"左下":3,"右下":2},picDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"cornerIconId"},{label:"角标名称",prop:"cornerIconName",render:function(t,i){var a=i.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(a)}}},a.cornerIconName)}},{label:"图片",prop:"imgUrl",render:function(t,i){var a=i.row;return t("img",{attrs:{src:a.imgUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(a)}}})}},{label:"审核状态",prop:"cornerStatus",render:function(e,t){var i=t.row;switch(i.cornerStatus){case 0:return"无效";case 1:return"审核通过";case 2:return"待审核";case 3:return"审核不通过"}}}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getGlobalMgrList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.idPrefix="10",e.page=t.currentPage,e.rows=t.pageSize),e},addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},deleteData:function(){var e=this;if(0==this.selected.length)this.$message("请至少选择一条数据");else if(window.confirm("确定要删除吗"))this.$service.globalCornerIconRemove({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()})},batchHandle:function(){var e=this;if(0==e.selected.length)e.$message("最少选择一条数据");else{console.log(e.table.data);for(var t=e.selected,i=0;i<t.length;i++)for(var a=0;a<e.table.data.length;a++)t[i]==e.table.data[a].cornerIconId&&(2==e.table.data[a].cornerStatus?this.dialogPLVisible=!0:e.$message("["+t[i]+"]不是审核状态，不允许审核"))}},submitForm:function(e){var t=this,i=e;this.$service.batchAudit({idStr:this.selected.join(","),auditFlag:i.auditFlag,auditDesc:i.auditDesc},"审核成功").then(function(e){t.fetchData(),t.$refs.auditForm.cancle(),t.dialogPLVisible=!1})},cancle:function(e){this.dialogPLVisible=e},handleDialogClose:function(){this.$refs.auditForm.cancle()},selectAllOne:function(){0==this.checkAll?this.checkAll=!0:this.checkAll=!1,this.handleAllRowSelectionChange(this.checkAll)},changePriority:function(){this.dialogLevelVisible=!0},openReview:function(e){console.log(e),this.$emit("open-view-page",e.cornerIconId)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e.cornerIconId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.cornerIconId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.cornerIconId)>-1&&e.push(a),e},[])},getCornerTypes:function(){var e=this;return this.$service.getCornerTypes().then(function(t){t.forEach(function(t){e.globalTypes[t.typeName]=t.typeId}),console.log(e.globalTypes)})},getIconAttributes:function(){var e=this;return this.$service.getIconAttributes().then(function(t){t.attributes.forEach(function(t){e.attributeTypes[t.attributeName]=t.attributeCode}),console.log(e.attributeTypes)})},reviewPic:function(e){this.reviewPicUrl=e.imgUrl,this.picDialogVisible=!0}},created:function(){var e=this,t=J.a.map({cornerIconName:J.a.o.string.other("form",{component:"Input",placeholder:"角标名称  ",cols:{item:3,label:0}}),cornerIconId:J.a.o.string.other("form",{component:"Input",placeholder:"角标ID",cols:{item:3,label:0}}),typeId:J.a.o.enum(this.globalTypes).other("form",{component:"Select",placeholder:"角标分类",cols:{item:3,label:0}}),typePosition:J.a.o.enum(this.typePositions).other("form",{component:"Select",placeholder:"角标位置",cols:{item:3,label:0}}),attributeCode:J.a.o.enum(this.attributeTypes).other("form",{component:"Select",placeholder:"角标类别",cols:{item:3,label:0}}),cornerStatus:J.a.o.enum(this.cornerStatuses).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.getCornerTypes().then(function(){e.getIconAttributes().then(function(){e.filterSchema=t})})}},Il=wl,Tl=(i("f7d8"),Object(O["a"])(Il,Qn,el,!1,null,"0b9ed72e",null)),kl=Tl.exports,Sl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{staticClass:"global-picture"},[i("el-form",{ref:"form",attrs:{"label-width":"120px",model:this}},[i("div",{staticClass:"global-picture__label"},[e._v("角标图片")]),i("Upload",{ref:"upload",staticClass:"global-picture__uploader",attrs:{multiple:!0},on:{upload:e.handleUpload}},[i("template",{slot:"preview"},[e._l(e.fileInfo,function(t,a){return i("div",{key:a,staticClass:"upload-pic-list__item-wrapper"},[i("div",{staticClass:"upload-pic-list__item"},["error"===t.upload.status?i("div",{staticClass:"upload-pic-list__error"},[e._v("上传失败: "+e._s(t.upload.message))]):e._e(),"uploading"===t.upload.status?i("div",{staticClass:"upload-pic-list__progress"},[i("el-progress",{attrs:{width:180,type:"circle",percentage:t.upload.percentage}})],1):i("img",{attrs:{src:t.upload.dataUrl}})]),i("div",{staticClass:"pic-info"},[i("el-form-item",{attrs:{prop:"fileInfo."+a+".cornerIconName",rules:e.rules.title,label:"角标标题"}},[i("el-input",{model:{value:t.cornerIconName,callback:function(i){e.$set(t,"cornerIconName",i)},expression:"file.cornerIconName"}})],1),i("el-form-item",{attrs:{prop:"fileInfo."+a+".globalIconTypeId",rules:e.rules.type,label:"角标分类"}},[i("el-select",{model:{value:e.fileInfo[a].globalIconTypeId,callback:function(t){e.$set(e.fileInfo[a],"globalIconTypeId",t)},expression:"fileInfo[index].globalIconTypeId"}},e._l(e.attributes,function(e,t){return i("el-option",{key:t,attrs:{value:e.typeId,label:e.typeName}})}),1)],1),i("el-form-item",{attrs:{prop:"fileInfo."+a+".attributeCode",rules:e.rules.code,label:"角标类别"}},[i("el-radio-group",{model:{value:t.attributeCode,callback:function(i){e.$set(t,"attributeCode",i)},expression:"file.attributeCode"}},[i("el-radio",{attrs:{label:"0"}},[e._v("其他")]),i("el-radio",{attrs:{label:"1"}},[e._v("VIP")])],1)],1)],1),"uploading"!==t.status?i("i",{staticClass:"upload-pic-list__remove el-icon el-icon-close",attrs:{title:"移除"},on:{click:function(i){return e.handleRemoveFile(t,a)}}}):e._e()])}),i("el-button",{staticClass:"upload-pic-list__add",attrs:{disabled:"edit"===e.mode&&e.fileInfo.length>=1,type:"primary"},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("点击选择图片")])],2)],2)],1),i("div",{staticClass:"global_icon_actions"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交审核")])],1)],1)])},Cl=[],_l={components:{Upload:N["Upload"]},data:function(){return{mode:"create",fileInfo:[],attributes:[],attributesIndexed:[],rules:{title:[{required:!0,message:"请填写素材标题"}],type:[{required:!0,message:"请选择角标类别"}],code:[{required:!0,message:"请选择角标分类"}]}}},props:["editId"],methods:{handleUpload:function(e,t){this.$refs.upload.getImageInfo(t.dataUrl).then(function(i){var a={upload:t,globalIconTypeId:void 0,cornerIconName:void 0,attributeCode:void 0,imgUrl:void 0,pictureType:void 0};this.fileInfo.push(a),t.status="uploading",this.$service.uploadImage({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){if(0==e.code){var i=e.data[0];a.cornerIconName=i.originFileName,a.pictureType=i.fileType,a.imgUrl=i.url,t.status="success"}else t.status="error",t.message=e.msg}).catch(function(){t.status="error",t.message="网络错误"})}.bind(this))},handleRemoveFile:function(e,t){this.$refs.upload.handleRemove(e.upload),this.fileInfo=this.fileInfo.filter(function(e,i){return i!==t})},handleSubmit:function(){var e=this;this.validateFormData(function(t){if(!t){var i=e.getFormData();console.log(i),e.$service.globalCornerIconSave(i,"保存成功").then(function(){e.$emit("open-list-page")})}})},getFormData:function(){var e=this,t=(this.attributesIndexed,this.getUploadedFiles().map(function(t){return{cornerIconId:e.editId,cornerIconName:t.cornerIconName,imgUrl:t.imgUrl,attributeCode:t.attributeCode,typeRls:{typeId:String(t.globalIconTypeId)}}})),i={jsonStr:JSON.stringify(t)};return i},globalCornerIconEdit:function(){this.$service.globalCornerIconEdit({id:this.editId}).then(this.setFormData)},setFormData:function(e){e=JSON.parse(JSON.stringify(e)),e.globalIconTypeId=e.cornerIconType.typeId,e.upload={status:"success",dataUrl:e.imgUrl},console.log(e.attributeCode),this.fileInfo.push(e)},validateFormData:function(e){this.$refs.form.validate(function(t){if(t){var i=this.getUploadedFiles();0===i.length?(this.$message({type:"error",message:"最少要上传一个角标素材，才能保存"}),e(!0)):e()}else this.$message({type:"error",message:"请把表单填写完整"}),e(!0)}.bind(this))},getUploadedFiles:function(){return this.fileInfo.filter(function(e){return void 0!==e.imgUrl})},getCornerTypes:function(){var e=this;this.$service.getCornerTypes().then(function(t){e.attributes=t||[],e.attributesIndexed=e.attributes.reduce(function(e,t){return e[t.typeName]=t,e},{})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.globalCornerIconEdit(),this.title="编辑"):this.title="新增",this.getCornerTypes()}},Fl=_l,xl=(i("a272"),Object(O["a"])(Fl,Sl,Cl,!1,null,null,null)),Dl=xl.exports,Pl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{staticClass:"global-picture"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("div",{staticClass:"global-picture__label"},[e._v("角标图片")]),i("el-form-item",{attrs:{label:"角标标题",prop:"cornerIconName"}},[i("div",[e._v(e._s(e.form.cornerIconName))])]),i("el-form-item",{attrs:{label:"角标图片",prop:"imgUrl"}},[i("div",[i("img",{staticStyle:{width:"200px"},attrs:{src:e.form.imgUrl}})])]),i("el-form-item",{attrs:{label:"角标类别",prop:"attributeName"}},[i("div",[e._v(e._s(e.form.attributeName))])]),i("el-form-item",{attrs:{label:"审核状态",prop:"cornerStatus"}},[i("div",[e._v(e._s(e.form.cornerStatus))])])],1),i("div",{staticClass:"global_icon_actions"},["审核不通过"==e.form.cornerStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.toEdit}},[e._v("编辑")]):e._e(),"审核不通过"==e.form.cornerStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.toDelete}},[e._v("删除")]):e._e(),"待审核"==e.form.cornerStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("审核")]):e._e(),"待审核"==e.form.cornerStatus?i("el-button",{attrs:{type:"primary"},on:{click:e.cancelSubmit}},[e._v("撤销审核")]):e._e()],1),i("el-dialog",{attrs:{title:"审核",visible:e.dialogPLVisible,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.dialogPLVisible=t}}},[i("GlobalIconAudit",{ref:"auditForm",on:{auditForm:e.submitForm,cancle:e.cancle}})],1)],1)])},$l=[],Rl={components:{Upload:N["Upload"],GlobalIconAudit:ol},data:function(){return{form:{},dialogPLVisible:!1}},props:{viewId:Number},methods:{getDetailInfo:function(){var e=this;this.$service.getDetailInfo({id:this.viewId}).then(function(t){console.log(t),e.form=t,e.form.cornerStatus=e.paraNumToNam(e.form.cornerStatus)})},paraNumToNam:function(e){var t=["无效","审核通过","待审核","审核不通过"],i=t[e];return i},toEdit:function(){this.$emit("open-add-page",this.viewId)},toDelete:function(){var e=this;window.confirm("确定要删除吗")&&this.$service.globalCornerIconRemove({id:this.viewId},"删除成功").then(function(t){e.$emit("open-list-page")})},handleSubmit:function(){this.dialogPLVisible=!0},cancelSubmit:function(){var e=this;window.confirm("确定撤销审核吗")&&this.$service.revokedAudit({resourceId:this.viewId,resourceType:"icon"},"撤销审核成功").then(function(t){e.$emit("open-list-page")})},submitForm:function(e){var t=this,i=e.auditFlag,a=e.auditDesc;this.$service.executionTask({resourceId:this.viewId,resourceType:"icon",auditFlag:i,auditDesc:a}).then(function(e){t.$emit("open-list-page"),t.$refs.auditForm.cancle(),t.dialogPLVisible=!1})},cancle:function(e){this.dialogPLVisible=e},handleDialogClose:function(){this.$refs.auditForm.cancle()}},created:function(){this.title="预览",this.getDetailInfo()}},Nl=Rl,Ll=(i("f44a"),Object(O["a"])(Nl,Pl,$l,!1,null,"8b5137f6",null)),Al=Ll.exports,Vl={components:{GlobalCornerIconList:kl,GlobalCornerIconAdd:Dl,GlobalCornerIconView:Al},data:function(){return{model:"list",editId:null,viewId:null}},methods:{openAddPage:function(e){this.editId=e,this.model="add"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},openViewPage:function(e){this.model="view",this.viewId=e},goBack:function(){this.model="list"}}},Ol=Vl,El=Object(O["a"])(Ol,Xn,Zn,!1,null,null,null),Ml=El.exports,Ul=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("GlobalCornerIconTypeList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("GlobalCornerIconTypeAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Bl=[],jl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[i("span",{staticClass:"pics"}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.picDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.picDialogVisible=!1}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"预览图片",visible:e.auditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.auditDialogVisible=t}}},[i("span",[i("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.auditFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[i("el-radio",{attrs:{label:"4"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("通过")]),i("el-radio",{attrs:{label:"5"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("打回")])],1),i("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.auditDesc,callback:function(t){e.$set(e.addForm,"auditDesc",t)},expression:"addForm.auditDesc"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.auditDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAudit}},[e._v("确 定")])],1)])],1)},ql=[],Wl={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{materialTypes:{},typePosition:{"左上":0,"右上":1,"右下":2,"左下":3},picDialogVisible:!1,auditDialogVisible:!1,addForm:{idStr:null,auditFlag:"4",auditDesc:""},auditFormRules:{auditDesc:[{required:!0,message:"请输入意见说明",trigger:"blur"}],auditFlag:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"typeId",width:"70"},{label:"分类名称",width:"120",prop:"typeName",sortable:!0},{label:"角标位置",prop:"typePosition",width:"110",sortable:!0},{label:"优先级(越小越靠前)",prop:"typePriority",width:"110",sortable:!0},{label:"修改人",prop:"modifierUser",width:"90",render:function(e,t){var i=t.row;return i.userName}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{submitAudit:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&(e.auditForm.idStr=e.selected.join(","),e.$service.materialBatchAudit(e.auditForm,"审批成功").then(function(t){e.fetchData(),e.auditDialogVisible=!1}))})},addItem:function(){this.$emit("open-add-page",null)},handleChange:function(e,t,i){for(var a=[],n=0;n<e.length;n++)a.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(a)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.globalCornerIconTypeBatchDel({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.typeId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.typeId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.typeId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getGlobalCornerIconTypePageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=J.a.map({typeId:J.a.o.string.other("form",{component:"Input",placeholder:"角标分类ID",cols:{item:3,label:0}}),typeName:J.a.o.string.other("form",{component:"Input",placeholder:"角标名称",cols:{item:3,label:0}}),pictureCategory:J.a.o.enum(this.typePosition).other("form",{component:"Select",placeholder:"角标位置",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},zl=Wl,Jl=(i("985a"),Object(O["a"])(zl,jl,ql,!1,null,"0bd4d140",null)),Hl=Jl.exports,Gl=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"角标名称",prop:"typeName"}},[i("el-input",{attrs:{placeholder:"角标名称"},model:{value:e.form.typeName,callback:function(t){e.$set(e.form,"typeName",t)},expression:"form.typeName"}})],1),i("el-form-item",{attrs:{label:"角标位置",prop:"typePosition"}},[i("el-select",{attrs:{placeholder:"角标位置"},model:{value:e.form.typePosition,callback:function(t){e.$set(e.form,"typePosition",t)},expression:"form.typePosition"}},e._l(e.typePosition,function(e){return i("el-option",{key:e.name+"",attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"优先级",prop:"typePriority"}},[i("el-input-number",{attrs:{min:1,label:"优先级"},model:{value:e.form.typePriority,callback:function(t){e.$set(e.form,"typePriority",t)},expression:"form.typePriority"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},Kl=[],Yl={props:{editId:Number,default:null},data:function(){return{title:null,typePosition:[{name:"左上",id:0},{name:"右上",id:1},{name:"右下",id:2},{name:"左下",id:3}],form:{typeName:null,typePosition:null,typePriority:null},formRules:{typeName:[{required:!0,message:"请输入角标名称",trigger:"blur"}],typePosition:[{required:!0,message:"请输入角标位置",trigger:"blur"}],typePriority:[{required:!0,message:"请输入角标优先级",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.globalCornerIconTypeSave({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.globalCornerIconTypeDetail({id:this.editId}).then(function(t){Object.keys(e.form).forEach(function(i){e.form[i]=t[i]})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.typeId=this.editId,this.getEditData()):this.title="新增"}},Xl=Yl,Zl=Object(O["a"])(Xl,Gl,Kl,!1,null,null,null),Ql=Zl.exports,eo={components:{GlobalCornerIconTypeAdd:Ql,GlobalCornerIconTypeList:Hl},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},to=eo,io=Object(O["a"])(to,Ul,Bl,!1,null,null,null),ao=io.exports,no=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("GlobalPictureList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("GlobalPictureUpsert",{attrs:{"edit-id":e.editId},on:{"show-list":e.openListPage,"go-back":e.goBack}})],1)},lo=[],oo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",[i("div",{staticClass:"global-picture"},[i("div",{staticClass:"global-picture__actions"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n                保存\n            ")]),i("el-button",{on:{click:e.handleCancel}},[e._v("\n                关闭\n            ")])],1),i("el-form",{ref:"form",attrs:{"label-width":"120px",model:this}},[i("div",{staticClass:"global-picture__label"},[e._v("\n                素材图片\n            ")]),i("Upload",{ref:"upload",staticClass:"global-picture__uploader",attrs:{multiple:!0},on:{upload:e.handleUpload}},[i("template",{slot:"preview"},[e._l(e.fileInfo,function(t,a){return i("div",{key:a,staticClass:"upload-pic-list__item-wrapper"},[i("div",{staticClass:"upload-pic-list__item"},["error"===t.upload.status?i("div",{staticClass:"upload-pic-list__error"},[e._v("\n                                上传失败: "+e._s(t.upload.message)+"\n                            ")]):e._e(),"uploading"===t.upload.status?i("div",{staticClass:"upload-pic-list__progress"},[i("el-progress",{attrs:{width:180,type:"circle",percentage:t.upload.percentage}})],1):i("img",{attrs:{src:t.upload.dataUrl}})]),i("div",{staticClass:"pic-info"},[i("el-form-item",{attrs:{prop:"fileInfo."+a+".pictureName",rules:e.rules.title,label:"素材标题"}},[i("el-input",{model:{value:t.pictureName,callback:function(i){e.$set(t,"pictureName",i)},expression:"file.pictureName"}})],1),i("el-form-item",{attrs:{label:"素材分辨率"}},[e._v("\n                                "+e._s(t.pictureResolution)+"\n                            ")]),i("el-form-item",{attrs:{prop:"fileInfo."+a+".materialTypeDictEnName",rules:e.rules.type,label:"素材类型"}},[i("el-select",{model:{value:e.fileInfo[a].materialTypeDictEnName,callback:function(t){e.$set(e.fileInfo[a],"materialTypeDictEnName",t)},expression:"fileInfo[index].materialTypeDictEnName"}},e._l(e.picTypeOptions,function(e,t){return i("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1)],1),"uploading"!==t.status?i("i",{staticClass:"upload-pic-list__remove el-icon el-icon-close",attrs:{title:"移除"},on:{click:function(i){return e.handleRemoveFile(t,a)}}}):e._e()])}),i("el-button",{staticClass:"upload-pic-list__add",attrs:{disabled:"edit"===e.mode&&e.fileInfo.length>=1,type:"primary"},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("\n                        点击选择图片\n                    ")]),i("el-button",{on:{click:function(t){e.showPicTypeSelector=!0}}},[e._v("\n                        批量设置类型\n                    ")])],2)],2)],1),i("el-dialog",{staticClass:"global-pic-type-selector",attrs:{title:"选择素材类型",size:"tiny",visible:e.showPicTypeSelector},on:{"update:visible":function(t){e.showPicTypeSelector=t}}},e._l(e.picTypeOptions,function(t,a){return i("el-tag",{key:a,nativeOn:{click:function(i){return e.handleBatchSetPicType(t)}}},[e._v("\n                "+e._s(t.label)+"\n            ")])}),1)],1)])},ro=[],so={components:{Upload:N["Upload"]},data:function(){return{mode:"create",showPicTypeSelector:!1,pictureId:void 0,fileInfo:[],picTypeOptions:[],picTypeOptionsIndexed:[],rules:{title:[{required:!0,message:"请填写素材标题"}],type:[{required:!0,message:"请选择素材类型"}]}}},props:["editId"],methods:{handleUpload:function(e,t){this.$refs.upload.getImageInfo(t.dataUrl).then(function(i){var a={upload:t,materialTypeDictEnName:void 0,pictureId:void 0,pictureName:void 0,pictureResolution:i.width+"*"+i.height,pictureStatus:void 0,pictureType:void 0,pictureUrl:void 0};this.fileInfo.push(a),t.status="uploading",this.$service.uploadImage({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){if(0==e.code){var i=e.data[0];a.pictureName=i.originFileName,a.pictureType=i.fileType,a.pictureUrl=i.url,t.status="success"}else t.status="error",t.message=e.msg}).catch(function(){t.status="error",t.message="网络错误"})}.bind(this))},handleRemoveFile:function(e,t){this.$refs.upload.handleRemove(e.upload),this.fileInfo=this.fileInfo.filter(function(e,i){return i!==t})},handleSelectPicTypeStart:function(){this.showPicTypeSelector=!0},handleBatchSetPicType:function(e){this.fileInfo.forEach(function(t){t.materialTypeDictEnName=e.value}),this.showPicTypeSelector=!1},getFormData:function(){var e=this,t=this.pictureId,i=this.picTypeOptionsIndexed,a=this.getUploadedFiles().map(function(a){return{pictureId:t,pictureType:a.pictureType,pictureResolution:a.pictureResolution,pictureUrl:a.pictureUrl,pictureStatus:a.pictureStatus,pictureName:a.pictureName,materialTypes:e.parseMaterialType(i[a.materialTypeDictEnName])}}),n={jsonStr:JSON.stringify(a)};return n},setFormData:function(e){e=JSON.parse(JSON.stringify(e));var t=e.materialTypes;e.materialTypeDictEnName=t[0].dictEnName,e.upload={status:"success",dataUrl:e.pictureUrl},this.pictureId=e.pictureId,this.fileInfo.push(e)},parseMaterialType:function(e){return{dictId:e.id,dictEnName:e.value,dictCnName:e.label}},validateFormData:function(e){this.$refs.form.validate(function(t){if(t){var i=this.getUploadedFiles();0===i.length?(this.$message({type:"error",message:"最少要上传一个素材，才能保存"}),e(!0)):e()}else this.$message({type:"error",message:"请把表单填写完整"}),e(!0)}.bind(this))},getUploadedFiles:function(){return this.fileInfo.filter(function(e){return void 0!==e.pictureUrl})},handleSubmit:function(){var e=this;this.validateFormData(function(t){if(!t){var i=e.getFormData();e.$service.globalPictureUpsert(i,"保存成功").then(function(){e.$emit("show-list")})}})},handleCancel:function(){this.$emit("go-back")},getMaterialTypes:function(){var e=this;this.$service.getMaterialTypes().then(function(t){e.picTypeOptions=t||[],e.picTypeOptionsIndexed=e.picTypeOptions.reduce(function(e,t){return e[t.value]=t,e},{})})}},created:function(){this.editId&&this.$service.globalPictureGet({id:this.editId}).then(this.setFormData),this.getMaterialTypes()}},co=so,uo=(i("6b22"),Object(O["a"])(co,oo,ro,!1,null,null,null)),po=uo.exports,ho=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchAudit}},[e._v("批量审核")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[i("span",{staticClass:"pics"},[i("img",{attrs:{src:e.reviewPicUrl,alt:"图片","max-width":"500"}})]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.picDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.picDialogVisible=!1}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"预览图片",visible:e.auditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.auditDialogVisible=t}}},[i("span",[i("el-form",{ref:"auditForm",attrs:{model:e.auditForm,rules:e.auditFormRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[i("el-radio",{attrs:{label:"4"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),i("el-radio",{attrs:{label:"5"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),i("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.auditDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAudit}},[e._v("确 定")])],1)])],1)},mo=[],fo={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){var e=this;return{materialTypes:{},pictureStatus:{"可用":1,"待审核":2,"审核不通过":3,"不可用":0},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,auditForm:{idStr:null,auditFlag:"4",auditDesc:""},auditFormRules:{auditDesc:[{required:!0,message:"请输入意见说明",trigger:"blur"}],auditFlag:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pictureId",width:"70"},{label:"ID",prop:"pictureUrl",width:"70",render:function(t,i){var a=i.row;return t("img",{attrs:{src:a.pictureUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(a)}}})}},{label:"素材名称",width:"120",prop:"pictureName",sortable:!0},{label:"分辨率",prop:"pictureResolution",width:"110",sortable:!0},{label:"状态",prop:"pictureStatus",width:"90",render:function(e,t){var i=t.row;switch(i.pictureStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"素材类型",prop:"materialTypes",width:"70",render:function(e,t){var i=t.row;return i.materialTypes.length>0?i.materialTypes[0].dictCnName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{submitAudit:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&(e.auditForm.idStr=e.selected.join(","),e.$service.materialBatchAudit(e.auditForm,"审批成功").then(function(t){e.fetchData(),e.auditDialogVisible=!1}))})},addItem:function(){this.$emit("open-add-page")},handleRead:function(e){e.row},handleChange:function(e,t,i){for(var a=[],n=0;n<e.length;n++)a.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(a)},batchAudit:function(){0!==this.selected.length?this.auditDialogVisible=!0:this.$message("请选择再审批")},reviewPic:function(e){this.reviewPicUrl=e.pictureUrl,this.picDialogVisible=!0},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.materialBatchDelete({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.pictureId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pictureId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.pictureId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMaterialPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=J.a.map({pictureId:J.a.o.string.other("form",{component:"Input",placeholder:"素材ID",cols:{item:3,label:0}}),pictureName:J.a.o.string.other("form",{component:"Input",placeholder:"素材名称",cols:{item:3,label:0}}),pictureCategory:J.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别",cols:{item:3,label:0}}),pictureStatus:J.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},bo=fo,go=(i("989c"),Object(O["a"])(bo,ho,mo,!1,null,"de5924ec",null)),vo=go.exports,yo={components:{GlobalPictureUpsert:po,GlobalPictureList:vo},data:function(){return{isShowList:!0,editId:null}},methods:{goBack:function(){this.isShowList=!0},openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()}}},wo=yo,Io=Object(O["a"])(wo,no,lo,!1,null,null,null),To=Io.exports,ko=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("LayoutInfoList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-review-page":e.openReviewPage}}),"add"===e.mode?i("LayoutInfoAdd",{attrs:{editData:e.editData,generatorLayoutData:e.generatorLayoutData},on:{"open-list-page":e.openListPage,"go-back":e.goBack,"open-generator-page":e.openGeneratorPage}}):e._e(),"generator"===e.mode?i("LayoutInfoGenerator",{on:{"go-back":e.goBack,"generator-layout":e.generatorLayout}}):e._e(),"review"===e.mode?i("LayoutInfoReview",{attrs:{reviewData:e.reviewData},on:{"open-list-page":e.openListPage,"go-edit-Page":e.goEditPage,"go-back":e.goBack}}):e._e()],1)},So=[],Co=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back","list")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"布局名称(中文)",prop:"layoutName"}},[i("el-input",{attrs:{placeholder:"布局名称"},model:{value:e.form.layoutName,callback:function(t){e.$set(e.form,"layoutName",t)},expression:"form.layoutName"}})],1),i("el-form-item",{attrs:{label:"布局类别",prop:"layoutType"}},[i("el-select",{attrs:{placeholder:"布局类别"},model:{value:e.form.layoutType,callback:function(t){e.$set(e.form,"layoutType",t)},expression:"form.layoutType"}},e._l(e.layoutType,function(e){return i("el-option",{key:e.name+"",attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"上传文件"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("上传布局文件")]),i("Upload",{ref:"upload",staticClass:"global-picture__uploader",attrs:{multiple:!0},on:{upload:e.handleUpload}},[i("template",{slot:"preview"},e._l(e.fileInfo,function(t,a){return i("div",{key:a,staticClass:"upload-pic-list__item-wrapper"},[i("div",{staticClass:"upload-pic-list__item"},["error"===t.upload.status?i("div",{staticClass:"upload-pic-list__error"},[e._v("上传失败: "+e._s(t.upload.message))]):e._e(),"uploading"===t.upload.status?i("div",{staticClass:"upload-pic-list__progress"},[i("el-progress",{attrs:{width:180,type:"circle",percentage:t.upload.percentage}})],1):i("img",{attrs:{src:t.upload.dataUrl}})])])}),0)],2)],1),i("el-form-item",{attrs:{label:"布局"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.productLayout}},[e._v("生存布局")])],1),i("el-form-item",[i("LayoutBloack",{staticClass:"layoutBloack",attrs:{content:e.content}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("提交审核")])],1)],1)],1)],1)],1)},_o=[],Fo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pannel-wrap",style:{height:e.maxY*e.ratio+"px",width:e.contentWidth+"px"},attrs:{id:"layout"}},e._l(e.content,function(t,a){return i("div",{key:a},[t.resize?i("div",{style:{top:t.resize.y*e.ratio+"px",left:t.resize.x*e.ratio+"px",width:t.resize.width*e.ratio+"px",height:t.resize.height*e.ratio+"px",position:"absolute"},attrs:{draggable:"true"}},[i("div",{staticClass:"single-blcok pannel-content",style:{top:t.y*e.ratio+"px",left:t.x*e.ratio+"px",width:t.width*e.ratio+"px",height:t.height*e.ratio+"px"}},[i("span",{staticClass:"seq-num"},[e._v(e._s(a+1))]),i("span",{staticClass:"size-mark"},[e._v(e._s(t.width)+"*"+e._s(t.height))]),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",left:"0"},attrs:{name:"topLeft"}}),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",right:"0"},attrs:{name:"topRight"}}),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"30px",left:"0"},attrs:{name:"bottomLeft"}}),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"30px",right:"0"},attrs:{name:"bottomRight"}}),"Mall"===t.type?i("div",{staticClass:"specialSamll",attrs:{name:"smallPrice"}},[t.resize.width*e.ratio<150?i("div",[i("span",{staticClass:"secKillPrice",style:{"font-size":"10px","margin-right":"5px"},attrs:{name:"secKillPrice"}}),i("s",{staticClass:"price",style:{"font-size":"10px"},attrs:{name:"price"}})]):i("div",[i("span",{staticClass:"secKillPrice",attrs:{name:"secKillPrice"}}),i("s",{staticClass:"price",attrs:{name:"price"}})])]):e._e()]),t.title_info?i("div",{style:{width:t.title_info.width*e.ratio+"px",height:t.title_info.height*e.ratio+"px","font-size":t.title_info.size*e.ratio+"px","text-align":"center"}},[i("span",{attrs:{name:"titleName"}},[e._v("title")])]):e._e()]):i("div",[i("div",{staticClass:"single-blcok pannel-content",style:{top:t.y*e.ratio+"px",left:t.x*e.ratio+"px",width:t.width*e.ratio+"px",height:t.height*e.ratio+"px",position:"absolute"},attrs:{draggable:"true"}},[i("span",{staticClass:"seq-num"},[e._v(e._s(a+1))]),i("span",{staticClass:"size-mark"},[e._v(e._s(t.width)+"*"+e._s(t.height))]),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",left:"0"},attrs:{name:"topLeft"}}),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",right:"0"},attrs:{name:"topRight"}}),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"0px",left:"0"},attrs:{name:"bottomLeft"}}),i("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"0px",right:"0"},attrs:{name:"bottomRight"}}),t.width*e.ratio>=150?i("div",["Mall"===t.type?i("div",{staticClass:"specialSamll",staticStyle:{bottom:"5px"},attrs:{name:"smallPrice"}},[i("span",{staticClass:"secKillPrice",attrs:{name:"secKillPrice"}}),i("s",{staticClass:"price",attrs:{name:"price"}})]):e._e()]):i("div",["Mall"===t.type?i("div",{staticClass:"specialSamll",staticStyle:{bottom:"5px"},style:{"font-size":"10px !important"},attrs:{name:"smallPrice"}},[i("span",{staticClass:"secKillPrice",attrs:{name:"secKillPrice"}}),i("s",{staticClass:"price",attrs:{name:"price"}})]):e._e()])])])])}),0)},xo=[],Do={props:{content:{type:Array},contentWidth:{type:Number,default:811}},data:function(){return{maxX:0,maxY:0,ratio:0}},methods:{init:function(){var e=this;this.content.forEach(function(t){t=t.resize?t.resize:t,e.maxX=Math.max(e.maxX,t.x+t.width),e.maxY=Math.max(e.maxY,t.y+t.height)})}},mounted:function(){this.ratio=document.querySelector("#layout").clientWidth/this.maxX},watch:{content:function(e,t){this.init(),this.ratio=document.querySelector("#layout").clientWidth/this.maxX}},created:function(){this.init()}},Po=Do,$o=(i("f333"),Object(O["a"])(Po,Fo,xo,!1,null,"13449cc9",null)),Ro=$o.exports,No={components:{Upload:N["Upload"],LayoutBloack:Ro},props:{editData:Object,generatorLayoutData:Object},data:function(){return{title:null,fileInfo:[],content:[],layoutType:[{name:"主页6.0",id:1},{name:"影视V2",id:2}],form:{layoutName:null,layoutType:null,layoutJson:{},layoutModel:null,layoutStatus:2},formRules:{layoutName:[{required:!0,message:"请输入布局名称",trigger:"blur"}],layoutType:[{required:!0,message:"请输入布局类别",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(0===e.content.length)return void e.$message({type:"error",message:"请上传布局文件或者生成布局"});e.$service.getLayoutInforSave({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("open-list-page")})}})},getEditData:function(){var e=this;Object.keys(this.form).forEach(function(t){e.form[t]=e.editData[t]}),this.getLayoutJson({fileName:this.form.layoutName,content:this.form.layoutJson})},handleUpload:function(e,t){var i=this;this.$service.uploadLayoutFile({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){var t=JSON.parse(e.data.content);"undefined"===typeof t.type||"Panel"!==t.type&&"Lengthwise"!==t.type&&"Expander"!==t.type?i.$message({type:"error",message:"选择的文件不对，应该选择布局格式的文件"}):i.getLayoutJson(e.data)})},getLayoutJson:function(e){var t=JSON.parse(e.content);this.form.layoutModel=t.type,this.form.layoutName=e.fileName.substr(0,45);var i={};this.content=t.contents,"Expander"===t.type?(i={type:t.type,extra:t.extra,contents:t.contents},0==t.extra.orientation&&(this.form.layoutRemark="支持横向扩展"),1==t.extra.orientation&&(this.form.layoutRemark="支持纵向扩展"),this.form.space=t.extra.space,this.form.layoutFlag=t.extra.orientation,this.form.width=t.extra.width,this.form.height=t.extra.height):i={type:t.type,contents:t.contents},this.form.layoutJson=JSON.stringify(i)},productLayout:function(){this.$emit("open-generator-page")}},created:function(){"{}"!==JSON.stringify(this.editData)?(this.title="编辑",this.getEditData()):this.title="新增","{}"!==JSON.stringify(this.generatorLayoutData)&&this.getLayoutJson(this.generatorLayoutData)}},Lo=No,Ao=(i("f9a5"),Object(O["a"])(Lo,Co,_o,!1,null,"3cb133f8",null)),Vo=Ao.exports,Oo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Eo=[],Mo={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){var e=this;return{layoutType:{"主页6.0":1,"影视V2":2},layoutIsTitle:{"带标题":1,"不带标题":0},layoutStatus:{"上架":1,"下架":0,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],selectedRows:{},table:{props:{},header:[{label:"ID",prop:"layoutId",width:"70"},{label:"名称",width:"170",prop:"layoutName",sortable:!0,render:function(t,i){var a=i.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(a)}}},a.layoutName)}},{label:"分类",prop:"layoutType",width:"80",render:function(e,t){var i=t.row;return 1===i.layoutType?"主页6.0":"影视V2"}},{label:"布局标题",prop:"layoutIsTitle",width:"80",render:function(e,t){var i=t.row;return 1===i.layoutIsTitle?"带标题":"不带标题"}},{label:"扩展方式",prop:"layoutFlag",width:"80",render:function(e,t){var i=t.row;if("undefined"===typeof i.layoutFlag)return"无";switch(i.layoutFlag){case 0:return"横向扩展";case 1:return"纵向扩展"}}},{label:"间距",prop:"space",width:70,sortable:!0},{label:"高度",prop:"height",width:70,sortable:!0},{label:"宽度",prop:"width",width:70,sortable:!0},{label:"状态",prop:"layoutStatus",width:70,render:function(e,t){var i=t.row,a="";switch(i.layoutStatus){case 0:a="下架";break;case 1:a="上架";break;case 2:a="草稿";break;case 3:a="待审核";break;case 4:a="已审核";break;case 5:a="审核不通过";break}return a}},{label:"更新时间",prop:"lastUpdateDate",sortable:!0},{label:"更新人",prop:"modifierName",render:function(e,t){var i=t.row;return i.modifierName}}],data:[],selected:[],selectionType:"multiple"}}},methods:{addItem:function(){this.$emit("open-add-page",{})},openReview:function(e){this.$emit("open-review-page",e)},editData:function(){if(this.$isAllowEdit(this.selected)){var e=this.selectedRows[this.selected[0]];4!==e.layoutStatus?this.$emit("open-add-page",this.selectedRows[this.selected[0]]):this.$message("该状态不能审核")}},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.getLayoutInforBatchDel({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.layoutId);var t=e.layoutId;this.selectedRows[t]=e,this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.layoutId}),delete this.selectedRows[e.layoutId],this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.layoutId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getLayoutInforPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=J.a.map({layoutName:J.a.o.string.other("form",{component:"Input",placeholder:"布局名称",cols:{item:3,label:0}}),layoutType:J.a.o.enum(this.layoutType).other("form",{component:"Select",placeholder:"布局分类",cols:{item:3,label:0}}),layoutIsTitle:J.a.o.enum(this.layoutIsTitle).other("form",{component:"Select",placeholder:"布局标题",cols:{item:3,label:0}}),layoutStatus:J.a.o.enum(this.layoutStatus).other("form",{component:"Select",placeholder:"状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Uo=Mo,Bo=(i("a5e2"),Object(O["a"])(Uo,Oo,Eo,!1,null,"18ab9cbc",null)),jo=Bo.exports,qo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:"生成布局"},on:{"go-back":function(t){return e.$emit("go-back","add")}}},[i("el-form",{ref:"dynamicValidateForm",staticClass:"layout-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[i("el-form-item",{staticClass:"spacing",attrs:{prop:"spacing",label:"间距",rules:[{required:!0,message:"间距不能为空",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}]}},[i("el-input-number",{attrs:{min:10,max:e.totalWidth,placeholder:"间距"},on:{change:e.setAllBlockWidth},model:{value:e.dynamicValidateForm.spacing,callback:function(t){e.$set(e.dynamicValidateForm,"spacing",t)},expression:"dynamicValidateForm.spacing"}})],1),i("el-form-item",{attrs:{label:"附加条件"}},[i("el-checkbox",{model:{value:e.dynamicValidateForm.hasPrice,callback:function(t){e.$set(e.dynamicValidateForm,"hasPrice",t)},expression:"dynamicValidateForm.hasPrice"}},[e._v("价格")]),i("el-checkbox",{on:{change:e.changeLayout},model:{value:e.dynamicValidateForm.lengthwiseIs,callback:function(t){e.$set(e.dynamicValidateForm,"lengthwiseIs",t)},expression:"dynamicValidateForm.lengthwiseIs"}},[e._v("纵向扩展布局")])],1),e._l(e.dynamicValidateForm.rows,function(t,a){return i("el-form-item",{key:t.key,staticClass:"blockList",attrs:{label:"第"+(a+1)+"行有几块"}},[i("el-form-item",{staticClass:"el-form-item__select",attrs:{prop:"rows."+a+".blockNum",rules:[{required:!0,message:"请选择行数",trigger:"blur"}]}},[i("el-col",{attrs:{span:9}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(i){return e.setBlockWidth(t)}},model:{value:t.blockNum,callback:function(i){e.$set(t,"blockNum",i)},expression:"row.blockNum"}},e._l(e.blockCount,function(t,a){return i("el-option",{key:a,attrs:{label:a+1+"块",value:a+1}},[e._v(e._s(a+1)+"块")])}),1)],1)],1),i("el-form-item",{staticClass:"el-form-item__select el-form-item__height",attrs:{prop:"rows."+a+".height",rules:[{required:!0,message:"请输入高度",trigger:"blur"}]}},[i("span",{staticClass:"title"},[e._v("高度:")]),i("el-col",{attrs:{span:9}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.height,callback:function(i){e.$set(t,"height",i)},expression:"row.height"}},e._l(e.heightInit,function(t,a){return i("el-option",{key:a,attrs:{label:t,value:t}},[e._v(e._s(t))])}),1)],1)],1),i("el-form-item",[i("span",{staticClass:"title",staticStyle:{"margin-left":"10px"}},[e._v("标题:")]),i("el-col",{attrs:{span:1}},[i("el-checkbox",{model:{value:t.hasTitle,callback:function(i){e.$set(t,"hasTitle",i)},expression:"row.hasTitle"}})],1)],1),t.blockWidth.length>0?i("el-form-item",{staticClass:"el-form-item__block-width"},[i("span",[e._v("宽度:")]),e._l(t.blockWidth,function(a,n){return i("div",{key:n},[i("el-input",{on:{change:function(i){return e.surplusWidth(t)}},model:{value:t.blockWidth[n],callback:function(i){e.$set(t.blockWidth,n,i)},expression:"row.blockWidth[i]"}})],1)}),i("span",[e._v("剩余的宽度="+e._s(t.surplusWidth)+"px")])],2):e._e(),i("el-form-item",{staticClass:"el-form-item__delete"},[i("el-col",{attrs:{span:2}},[a>0?i("el-button",{on:{click:function(i){return i.preventDefault(),e.removeDomain(t)}}},[e._v("删除")]):e._e()],1)],1)],1)}),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reviewLayout("dynamicValidateForm")}}},[e._v("预览布局")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("生存布局")]),i("el-button",{attrs:{type:"primary"},on:{click:e.export_raw}},[e._v("导出布局文件")]),e.dynamicValidateForm.lengthwiseIs?e._e():i("el-button",{attrs:{type:"primary"},on:{click:e.addDomain}},[e._v("添加行数")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v("重置")])],1)],2),i("section",[i("LayoutBloack",{staticClass:"layoutBloack",attrs:{content:e.data.contents},on:{"change-width":e.changeWidth}})],1)],1)},Wo=[],zo={components:{LayoutBloack:Ro},data:function(){return{dynamicValidateForm:{rows:[{value:"",key:Date.now(),blockNum:null,height:null,hasTitle:!1,blockWidth:[],surplusWidth:0}],spacing:0,hasPrice:!1,lengthwiseIs:!1},blockCount:6,totalWidth:1622,titleHeight:58,priceHeight:52,titleSize:32,x:0,y:0,heightInit:[130,150,200,247,300,346,360,365,398,423,448],data:{contents:[],parents:"",type:"Panel"},fileName:""}},methods:{submitForm:function(e){var t=this;this.$refs.dynamicValidateForm.validate(function(i){if(!i)return console.log("error submit!!"),!1;t.genLayout(e)})},genLayout:function(e){for(var t="",i=new Array("A","B","C","D"),a=this.dynamicValidateForm.rows,n=0;n<a.length;n++)t+=i[n]+a[n].blockNum+"-"+a[n].height,a[n].hasTitle&&(t+="-title"),this.dynamicValidateForm.hasPrice&&(t+="-price"),n<a.length-1&&(t+="_");t+=".txt",this.fileName=t,0===this.data.contents.length&&this.getLayoutData(),void 0===e&&this.$emit("generator-layout",{fileName:t,content:JSON.stringify(this.data)})},resetForm:function(e){this.$refs[e].resetFields()},surplusWidth:function(e){var t=this;e.surplusWidth=0,e.surplusWidth=this.totalWidth-e.blockWidth.reduce(function(e,i,a){return a>0?e+parseInt(i)+t.dynamicValidateForm.spacing:e+parseInt(i)},0)},setBlockWidth:function(e){e.blockWidth=[],e.surplusWidth=0;for(var t=this.getBlockWidth(e.blockNum),i=0;i<e.blockNum;i++)e.blockWidth.push(t)},setAllBlockWidth:function(){var e=this;this.dynamicValidateForm.rows.forEach(function(t){e.setBlockWidth(t)})},changeLayout:function(){if(this.dynamicValidateForm.rows.length>1){var e=[];e.push(this.dynamicValidateForm.rows.shift()),this.dynamicValidateForm.rows=e,this.getLayoutData()}},getLayoutData:function(){var e=this;this.data.contents=[],this.dynamicValidateForm.rows.reduce(function(t,i,a){for(var n=0,l=0;l<i.blockNum;l++){var o=parseInt(i.blockWidth[l]),r={};r["height"]=i.height,r["title_align"]=0,e.dynamicValidateForm.hasPrice?(r["parents"]="Block",r["type"]="Mall",r["mall_resize"]={x:n,y:parseInt(t.height),width:o,height:i.height+e.priceHeight}):(r["parents"]="",r["type"]="Block"),i.hasTitle&&(r["resize"]={x:n,y:parseInt(t.height),width:o,height:i.height+e.titleHeight},r["title_info"]={width:o,height:e.titleHeight,size:e.titleSize}),r["width"]=o,r["x"]=n,r["y"]=parseInt(t.height),r["whichRow"]=a,r["whichBlock"]=l,e.data.contents.push(r),n=n+o+e.dynamicValidateForm.spacing}var s=i.hasTitle?i.height+e.titleHeight:i.height;return t.height=parseInt(t.height)+s+e.dynamicValidateForm.spacing,t},{height:0}),this.lengthwiseIs?this.data.type="Lengthwise":this.data.type="Panel"},changeWidth:function(e,t,i,a){this.dynamicValidateForm.rows[t]},reviewLayout:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.getLayoutData()})},getBlockWidth:function(e){return Math.floor((this.totalWidth-this.dynamicValidateForm.spacing*(e-1))/e)},removeDomain:function(e){var t=this.dynamicValidateForm.rows.indexOf(e);-1!==t&&this.dynamicValidateForm.rows.splice(t,1)},addDomain:function(){4!==this.dynamicValidateForm.rows.length?this.dynamicValidateForm.rows.push({value:"",key:Date.now(),blockNum:null,height:null,hasTitle:!1,blockWidth:[],surplusWidth:0}):this.$message("最多添加4行")},fake_click:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},export_raw:function(){if(""!==this.fileName){var e=window.URL||window.webkitURL||window,t=new Blob([JSON.stringify(this.data)]),i=document.createElementNS("http://www.w3.org/1999/xhtml","a");i.href=e.createObjectURL(t),i.download=this.fileName,this.fake_click(i)}else this.submitForm("download")}}},Jo=zo,Ho=(i("dd7d"),Object(O["a"])(Jo,qo,Wo,!1,null,"3757c48c",null)),Go=Ho.exports,Ko=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back","list")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"布局名称(中文)",prop:"layoutName"}},[i("div",[e._v(e._s(e.form.layoutName))])]),i("el-form-item",{attrs:{label:"布局类别",prop:"layoutType"}},[i("div",[e._v(e._s(e.form.layoutType))])]),i("el-form-item",{attrs:{label:"状态"}},[i("div",{staticClass:"status"},[e._v(e._s(e.form.layoutStatus))])]),i("el-form-item",{attrs:{label:"布局"}},[i("LayoutBloack",{staticClass:"layoutBloack",attrs:{content:e.content}})],1),i("el-form-item",[i("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:e.type,"not-contain-btn":e.notContainBtn,status:e.status,menuElId:e.menuElId},on:{"go-edit-Page":e.goEditPage,"delete-item":e.deleteItem}})],1)],1)],1)],1)],1)},Yo=[],Xo=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ActionList",{attrs:{actions:e.actions,target:this}}),i("el-dialog",{attrs:{title:"审核",visible:e.auditDialog,width:"30%"},on:{"update:visible":function(t){e.auditDialog=t}}},[i("span",[i("el-form",{ref:"auditForm",staticClass:"demo-ruleForm",attrs:{model:e.auditForm,"status-icon":"",rules:e.auditFormRule,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[i("el-radio",{attrs:{label:"4"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),i("el-radio",{attrs:{label:"5"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),i("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[i("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入意见说明"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.auditDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitAuditMessage}},[e._v("确 定")])],1)])],1)},Zo=[],Qo={components:{ActionList:N["ActionList"]},props:{id:Number,version:String,type:String,status:Number,menuElId:String,notContainBtn:Array},data:function(){return{actions:{},auditDialog:!1,auditForm:{auditFlag:"4",auditDesc:""},auditFormRule:{auditDesc:[{required:!0,message:"请输入审核意见",trigger:"blur"}]}}},methods:{submitAuditMessage:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&e.$service.auditTask({id:e.id,version:e.version,type:e.type,auditFlag:e.auditForm.auditFlag,auditDesc:e.auditForm.auditDesc},"保存成功").then(function(e){})})},getAuditDetailButton:function(){var e=this,t={resourceId:this.id,version:this.version,type:this.type,status:this.status,menuElId:this.menuElId};this.$service.getAuditDetailButton(t).then(function(t){var i={};t.forEach(function(t){e.notContainBtn.indexOf(t.runComm)<0&&(i[t.runComm]={text:t.runName,type:"primary"})}),e.actions=i})},edit:function(){this.$emit("go-edit-Page")},delete:function(){this.$emit("delete-item")},audit:function(){this.auditDialog=!0},unaudit:function(){window.confirm("真的要撤销审核吗？")&&this.$service.revokedAudit({id:this.id,version:this.version,type:this.type}).then(function(e){alert(e)})}},created:function(){this.getAuditDetailButton()}},er=Qo,tr=Object(O["a"])(er,Xo,Zo,!1,null,null,null),ir=tr.exports,ar={components:{Upload:N["Upload"],LayoutBloack:Ro,AuditDetailButton:ir},props:{reviewData:Object},data:function(){return{title:null,fileInfo:[],content:[],id:null,version:"",type:"layout",status:null,menuElId:"layoutInfo",notContainBtn:["claim","unclaim","copy"],layoutType:[{name:"主页6.0",id:1},{name:"影视V2",id:2}],form:Object(ee["a"])({layoutName:null,layoutType:null,layoutJson:{},layoutStatus:null,layoutModel:null},"layoutStatus",2),actions:{}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(0===e.content.length)return void e.$message({type:"error",message:"请上传布局文件或者生成布局"});e.$service.getLayoutInforSave({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("open-list-page")})}})},getlLayoutTypeName:function(e){var t=this.layoutType.filter(function(t){if(parseInt(t.id)===parseInt(e))return t});return t.length>0?t[0].name:""},getEditData:function(){var e=this;Object.keys(this.form).forEach(function(t){e.form[t]="layoutType"===t?e.getlLayoutTypeName(e.reviewData[t]):"layoutStatus"===t?e.$numToAuditStatus(e.reviewData[t]):e.reviewData[t]}),this.getLayoutJson({fileName:this.form.layoutName,content:this.form.layoutJson})},goEditPage:function(){this.$emit("go-edit-Page")},deleteItem:function(){this.$service.getLayoutInforBatchDel({id:this.id},"删除成功"),this.$emit("open-list-page")},getLayoutJson:function(e){var t=JSON.parse(e.content);this.form.layoutModel=t.type,this.form.layoutName=e.fileName.substr(0,45);var i={};this.content=t.contents,"Expander"===t.type?(i={type:t.type,extra:t.extra,contents:t.contents},0==t.extra.orientation&&(this.form.layoutRemark="支持横向扩展"),1==t.extra.orientation&&(this.form.layoutRemark="支持纵向扩展"),this.form.space=t.extra.space,this.form.layoutFlag=t.extra.orientation,this.form.width=t.extra.width,this.form.height=t.extra.height):i={type:t.type,contents:t.contents},this.form.layoutJson=JSON.stringify(i)}},created:function(){"{}"!==JSON.stringify(this.reviewData)&&(this.title="预览",this.getEditData(),this.id=this.reviewData.layoutId,this.status=this.reviewData.layoutStatus)}},nr=ar,lr=(i("9159"),Object(O["a"])(nr,Ko,Yo,!1,null,"d8201c54",null)),or=lr.exports,rr={components:{LayoutInfoAdd:Vo,LayoutInfoList:jo,LayoutInfoGenerator:Go,LayoutInfoReview:or},data:function(){return{mode:"list",editData:{},reviewData:{},generatorLayoutData:{}}},methods:{openAddPage:function(e){this.editData=e,this.mode="add"},goEditPage:function(){this.editData=this.reviewData,this.mode="add"},openReviewPage:function(e){this.reviewData=e,this.mode="review"},openListPage:function(){this.mode="list",this.generatorLayoutData={},this.$refs.list.fetchData()},goBack:function(e){this.mode=e},openGeneratorPage:function(){this.mode="generator"},generatorLayout:function(e){this.generatorLayoutData=e,this.mode="add"}}},sr=rr,cr=Object(O["a"])(sr,ko,So,!1,null,null,null),ur=cr.exports,dr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},pr=[],hr={},mr=hr,fr=Object(O["a"])(mr,dr,pr,!1,null,"61fb8944",null),br=fr.exports,gr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},vr=[],yr={},wr=yr,Ir=Object(O["a"])(wr,gr,vr,!1,null,"02eff98a",null),Tr=Ir.exports,kr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},Sr=[],Cr={},_r=Cr,Fr=Object(O["a"])(_r,kr,Sr,!1,null,"3cba89ea",null),xr=Fr.exports,Dr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")])],1)},Pr=[],$r={methods:{editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])}}},Rr=$r,Nr=Object(O["a"])(Rr,Dr,Pr,!1,null,"1c6e9860",null),Lr=Nr.exports,Ar=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},Vr=[],Or={},Er=Or,Mr=Object(O["a"])(Er,Ar,Vr,!1,null,"01b347d3",null),Ur=Mr.exports,Br=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},jr=[],qr={},Wr=qr,zr=Object(O["a"])(Wr,Br,jr,!1,null,"46c3117e",null),Jr=zr.exports,Hr={},Gr=Object(O["a"])(Hr,Gi,Ki,!1,null,null,null),Kr=Gr.exports,Yr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("HomePageInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("HomePageInfoAdd",{attrs:{editId:e.editId},on:{openListPage:e.openListPage,"go-back":e.goBack}})],1)},Xr=[],Zr=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[i("el-form-item",{attrs:{label:"首页名称",prop:"vDataListName"}},[i("el-input",{attrs:{placeholder:"首页名称"},model:{value:e.form.vDataListName,callback:function(t){e.$set(e.form,"vDataListName",t)},expression:"form.vDataListName"}})],1),i("el-form-item",{attrs:{label:"首页模式",prop:"vDataSequenceType"}},[i("el-radio-group",{model:{value:e.form.vDataSequenceType,callback:function(t){e.$set(e.form,"vDataSequenceType",t)},expression:"form.vDataSequenceType"}},[i("el-radio",{attrs:{label:"标准模式",value:"normal"}}),i("el-radio",{attrs:{label:"儿童模式",value:"child"}}),i("el-radio",{attrs:{label:"老人模式",value:"old"}})],1)],1),i("el-form-item",{attrs:{label:"首页版本号",prop:"homepageVersion"}},[i("el-input",{attrs:{type:"textarea",placeholder:"首页版本号"},model:{value:e.form.homepageVersion,callback:function(t){e.$set(e.form,"homepageVersion",t)},expression:"form.homepageVersion"}})],1),i("el-form-item",{attrs:{label:"首页模式",prop:"homepageList"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addTabDialog}},[e._v("添加版面")]),i("span",{staticClass:"cc-form-annotation"},[e._v("至少选择1个版面")])],1),i("el-form-item",{attrs:{label:""}},[i("div",[i("Table",{attrs:{props:e.tableAdd.props,header:e.tableAdd.header,data:e.tableAdd.data,selected:e.tableAdd.selected,"selection-type":e.tableAdd.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)]),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1),i("el-dialog",{attrs:{title:"添加版面",visible:e.addTabDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addTabDialogVisible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.addTabLoading,expression:"addTabLoading"}]},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addTabDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.confirmBtn}},[e._v("确 定")])],1)],1)])],1)},Qr=[],es={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},props:{editId:Number,default:null},data:function(){var e=this;return{title:null,form:{vDataListName:null,vDataSequenceType:null,homepageVersion:null,homepageList:null},formRules:{vDataListName:[{required:!0,message:"请输入首页名称",trigger:"blur"}]},paramsList:[{key:"",value:""}],filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},addTabDialogVisible:!1,addTabLoading:!1,selected:[],table:{props:{},header:[{label:"版面ID",prop:"tabId"},{label:"版面名称",prop:"tabName"},{label:"TAB标题（中文）",prop:"tabCnTitle"},{label:"TAB标题（英文）",prop:"tabEnTitle"},{label:"内容源",prop:"tabResource",align:"center",render:function(t,i){var a=i.row;return""===a.duplicateVersion?"":t(S["Button"],{ref:"button",props:{},domProps:{innerHTML:a.duplicateVersion},on:{click:function(t){e.showData(a.tabId,a.duplicateVersion)}}})}},{label:"审核状态",prop:"tabStatus",render:function(e,t){var i=t.row;return e("span",{style:{whiteSpace:"nowrap"},domProps:{innerHTML:i.chipModel}})}}],data:[],selected:[],selectionType:"multiple"},tableAdd:{props:{},header:[{label:"版面ID",prop:"tabId"},{label:"版面名称",prop:"tabName"},{label:"TAB标题（中文）",prop:"tabCnTitle"},{label:"TAB标题（英文）",prop:"tabEnTitle"},{label:"内容源",prop:"tabResource",align:"center",render:function(t,i){var a=i.row;return""===a.duplicateVersion?"":t(S["Button"],{ref:"button",props:{},domProps:{innerHTML:a.duplicateVersion},on:{click:function(t){e.showData(a.tabId,a.duplicateVersion)}}})}},{label:"审核状态",prop:"tabStatus",render:function(e,t){var i=t.row;return e("span",{style:{whiteSpace:"nowrap"},domProps:{innerHTML:i.chipModel}})}}],data:[],selected:[],selectionType:"multiple"}}},methods:{paramsAddBtn:function(){this.paramsList.push({key:"",value:""})},paramsRedBtn:function(e){this.paramsList.splice(e,1)},submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i={},a={};e.paramsList.forEach(function(e){""!=e.key.trim()&&(i[e.key]=e.value)}),e.form.params=JSON.stringify(i),a.jsonStr=JSON.stringify(e.form),console.log(e.form),e.$service.homePageInfoSave(a,"保存成功").then(function(t){e.$emit("openListPage")})}})},getEditData:function(){var e=this,t=this;this.$service.getHomePageInfoEdit({id:this.editId}).then(function(i){Object.keys(e.form).forEach(function(e){if(t.form[e]=i[e],"params"===e){var a=[],n=JSON.parse(i[e]);console.log(n),Object.keys(n).forEach(function(e){var t={};t.key=e,t.value=n[e],a.push(t)}),"{}"!==i[e]&&(t.paramsList=a)}})})},addTabDialog:function(){this.addTabDialogVisible=!0},confirmBtn:function(){console.log(this.selected)},fetchTabData:function(){var e=this,t=this.parseFilter();this.$service.tabInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},handleRowSelectionAdd:function(e){this.selected.push(e.tabId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.tabId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.tabId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchTabData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchTabData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},getSysMenuInfo:function(){var e=this;return this.$service.getHomePageInfoMenu().then(function(t){e.buttonList=t})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.getEditData()):this.title="新增";J.a.map({tabId:J.a.o.string.other("form",{component:"Input",placeholder:"版面ID",cols:{item:3,label:0}}),tabName:J.a.o.string.other("form",{component:"Input",placeholder:"版面名称",cols:{item:3,label:0}}),tabStatusArray:J.a.o.enum({"请选择":"3,4","待审核":"3","审核通过":"4","审核通过未上线":"7"}).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}}),tabResource:J.a.o.enum({"请选择":"","爱奇艺":"o_iqiyi","腾讯":"o_tencent","优朋":"o_voole"}).other("form",{component:"Select",placeholder:"内容源",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchTabData()}},ts=es,is=(i("8757"),Object(O["a"])(ts,Zr,Qr,!1,null,"61640353",null)),as=is.exports,ns=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),i("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.deleteData}},[e._v("删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},ls=[],os={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){var e=this,t=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},setDialogVisible:!1,selected:[],buttonList:[],table:{props:{},header:[{label:"ID",prop:"homepageId"},{label:"首页名称",prop:"homepageName",align:"center",render:function(t,i){var a=i.row;return t(S["Button"],{ref:"button",props:{},domProps:{innerHTML:a.homepageName},on:{click:function(t){e.showData(a.homepageId,a.currentVersion)}}})}},{label:"关联策略",prop:"relationPolicyName",width:300,render:function(e,i){var a=i.row,n=a.relationPolicyName;if(!n||"--"==n)return"--";var l=n.split(",");return e("div",{style:{whiteSpace:"nowrap"}},l.map(function(i){return e(S["Button"],{ref:"button",props:{},attrs:{title:"点击查看"},domProps:{innerHTML:i},on:{click:function(){t.openPolicyDialog(t.$regParenthesesContent(i))}}})}))}},{label:"版本/状态",prop:"homepageStatus",align:"center",render:function(e,i){var a=i.row;return e("span",{domProps:{innerHTML:a.currentVersion+"/"+t.$numToAuditStatus(a.homepageStatus)}})}},{label:"待审核副本",prop:"duplicateVersion",align:"center",render:function(t,i){var a=i.row;return""===a.duplicateVersion?"":t(S["Button"],{ref:"button",props:{},domProps:{innerHTML:a.duplicateVersion},on:{click:function(t){e.showData(a.homepageId,a.duplicateVersion)}}})}},{label:"机型机芯",prop:"chipModel",render:function(e,t){var i=t.row;return e("span",{style:{whiteSpace:"nowrap"},domProps:{innerHTML:i.chipModel}})}},{label:"更新时间",prop:"lastUpdateDate"},{label:"更新人",prop:"modiferName"},{label:"操作",width:"100",fixed:"right",render:N["utils"].component.createOperationRender(this,{editData:"复制"})}],data:[],selected:[],selectionType:"multiple"}}},methods:{addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},showData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},deleteData:function(){var e=this;this.$isAllowDelete(this.selected)&&window.confirm("确定要删除吗")&&this.$service.homePageInfoDelete({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()})},openPolicyDialog:function(e){console.log(e[0])},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.homepageId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.homepageId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.homepageId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getHomePageInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getSysMenuInfo:function(){var e=this;return this.$service.getHomePageInfoMenu().then(function(t){e.buttonList=t})}},created:function(){var e=J.a.map({homepageId:J.a.o.string.other("form",{component:"Input",placeholder:"ID",cols:{item:3,label:0}}),homepageName:J.a.o.string.other("form",{component:"Input",placeholder:"名称",cols:{item:3,label:0}}),homepageStatus:J.a.o.enum({"请选择":"","下架":"0","上架":"1","草稿":"2","待审核":"3","审核通过":"4","审核不通过":"5"}).other("form",{component:"Select",placeholder:"状态",cols:{item:3,label:0}}),chipModel:J.a.o.string.other("form",{component:"Input",placeholder:"机型/机芯",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData(),this.getSysMenuInfo()}},rs=os,ss=(i("5667"),Object(O["a"])(rs,ns,ls,!1,null,"7b09462f",null)),cs=ss.exports,us={components:{HomePageInfoAdd:as,HomePageInfoList:cs},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},ds=us,ps=Object(O["a"])(ds,Yr,Xr,!1,null,null,null),hs=ps.exports,ms=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},fs=[],bs={},gs=bs,vs=Object(O["a"])(gs,ms,fs,!1,null,"48e9fd0a",null),ys=vs.exports,ws=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},Is=[],Ts={},ks=Ts,Ss=Object(O["a"])(ks,ws,Is,!1,null,"584ff009",null),Cs=Ss.exports,_s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("BusinessTabList",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShow?e._e():i("BusinessTabAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Fs=[],xs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addTabInfo}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Ds=[],Ps={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},data:function(){var e=this;return{tabTypeOption:[{label:"第三方版面",value:"4"},{label:"专题版面",value:"2"},{label:"普通版面",value:"1"}],tabStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],tabStatus:{},filter:{tabParentType:"biz",idPrefix:10},filterSchema:null,pagination:{currentPage:1},appIdType:[],businessType:[],tabType:{},selected:[],table:{props:{},data:[],header:[{label:"ID",prop:"tabId"},{label:"名称",prop:"tabName"},{label:"版面属性",prop:"tabType",formatter:function(e){var t=e.tabType;return{1:"普通版面",2:"专题版面",4:"第三方版面"}[t+""]||"未知版面"}},{label:"业务分类",prop:"businessCategoryName"},{label:"内容源",prop:"tabResource",formatter:function(e){var t=e.tabResource;return{o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_voole:"优朋"}[t+""]||""}},{label:"AppId",prop:"tabAppid",formatter:function(t){return e.appIdType.map(function(e){if(t.tabAppid.toString()===e.dictEnName)return e.dictCnName})}},{label:"版本/状态",prop:"tabStatus",formatter:function(t){var i=t.tabStatus,a=t.currentVersion;return a+"/"+e.tabStatusOption.map(function(e){if(i.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate"},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"modifierName"},{label:"操作",prop:"oper"}],selected:[],selectionType:"multiple"}}},methods:{addTabInfo:function(){},editData:function(){},batchDel:function(){},fetchData:function(){var e=this,t=this.parseFilter();this.$service.tabInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={tabParentType:"biz",idPrefix:10},this.fetchData()},getTabType:function(){var e=this;return this.$service.getTabType().then(function(t){t.forEach(function(t){e.tabType[t.label]=t.value})})},handleRowSelectionAdd:function(e){this.selected.push(e.tabId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.tabId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.tabId)>-1&&e.push(a),e},[])},getBusinessType:function(){var e=this;this.$service.getBusinessType().then(function(t){e.businessType=t})}},created:function(){var e=this;this.tabStatus=this.tabStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=J.a.map({tabId:J.a.o.string.other("form",{placeholder:"版面Id",cols:{item:3,label:0}}),tabName:J.a.o.string.other("form",{placeholder:"版面标题",cols:{item:3,label:0}}),tabType:J.a.o.enum(this.tabType).other("form",{component:"Select",placeholder:"版面属性",cols:{item:3,label:0}}),tabStatus:J.a.o.enum(this.tabStatus).other("form",{component:"Select",placeholder:"状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getTabType().then(function(){e.filterSchema=t}),this.$service.getAppIdType().then(function(t){e.appIdType=t,e.fetchData()}),this.getBusinessType()}},$s=Ps,Rs=(i("907b"),Object(O["a"])($s,xs,Ds,!1,null,"eb167620",null)),Ns=Rs.exports,Ls=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},As=[],Vs={components:{},data:function(){return{}},methods:{},created:function(){}},Os=Vs,Es=Object(O["a"])(Os,Ls,As,!1,null,"a32b4ece",null),Ms=Es.exports,Us={components:{BusinessTabList:Ns,BusinessTabAdd:Ms},data:function(){return{isShow:!0,editId:""}},methods:{openAddPage:function(e){this.editId=e,this.isShow=!1},goBack:function(){this.isShow=!0},openListPage:function(){this.isShow=!0,this.$refs.list.fetchData()}},created:function(){}},Bs=Us,js=Object(O["a"])(Bs,_s,Fs,!1,null,"58ac62aa",null),qs=js.exports,Ws=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("FilmDetailPageList",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShow?e._e():i("FilmDetailPageAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},zs=[],Js=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.handleFilterChange}},[i("el-form",{attrs:{model:e.filter,inline:"","label-width":"90px"}},[i("el-form-item",{attrs:{label:"板面ID"}},[i("el-input",{model:{value:e.filter.tabId,callback:function(t){e.$set(e.filter,"tabId",t)},expression:"filter.tabId"}})],1),i("el-form-item",{attrs:{label:"版面标题"}},[i("el-input",{model:{value:e.filter.tabName,callback:function(t){e.$set(e.filter,"tabName",t)},expression:"filter.tabName"}})],1),i("el-form-item",{attrs:{label:"内容源"}},[i("el-select",{attrs:{clearable:""},on:{change:function(t){e.pannelValue=[],e.filter.channel=""}},model:{value:e.filter.source,callback:function(t){e.$set(e.filter,"source",t)},expression:"filter.source"}},[i("el-option",{attrs:{value:"qq",label:"腾讯"}}),i("el-option",{attrs:{value:"iqiyi",label:"爱奇艺"}}),i("el-option",{attrs:{value:"voole",label:"优朋"}})],1)],1),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{attrs:{clearable:""},model:{value:e.filter.tabStatus,callback:function(t){e.$set(e.filter,"tabStatus",t)},expression:"filter.tabStatus"}},e._l(e.tabStatusOption,function(e){return i("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"业务分类"}},[i("el-select",{attrs:{clearable:""},model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}},[i("el-option",{attrs:{value:"0",label:"影视"}}),i("el-option",{attrs:{value:"1",label:"教育"}})],1)],1),i("el-form-item",{attrs:{label:"频道"}},[i("el-cascader",{attrs:{value:e.pannelValue,options:e.channelOptions,"expand-trigger":"hover",clearable:""},on:{change:e.handleChannelChange}})],1),i("el-form-item",{attrs:{label:"产品包"}},[i("el-select",{attrs:{clearable:""},model:{value:e.filter.product,callback:function(t){e.$set(e.filter,"product",t)},expression:"filter.product"}},e._l(e.productOptions,function(e,t){return i("el-option",{key:t,attrs:{label:e.source_name,value:e.source_sign}})}),1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilterChange}},[e._v("查询")]),i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.handleFilterReset}},[e._v("重置")])],1)],1),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addFilmDetail}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Hs=[],Gs={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},data:function(){return{pannelValue:[],filter:{},filterSchema:null,pagination:{currentPage:1},tabStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],productOptions:[],channelOptions:[],table:{props:{},data:[],header:[{prop:"tabId",label:"ID",sortable:!0},{prop:"tabName",label:"版面名称",sortable:!0},{prop:"priority",label:"优先级",sortable:!0},{prop:"category",label:"业务分类",sortable:!0,formatter:function(e){return"0"===e.category?"影视":"1"===e.category?"教育":""}},{prop:"source",label:"内容源",sortable:!0,formatter:function(e){if(0!=e.category)return"";switch(e.source){case"qq":return"腾讯";case"iqiyi":return"爱奇艺";case"voole":return"优朋"}}},{prop:"tabStatus",label:"版本/状态",sortable:!0,formatter:function(e){return e.currentVersion+"/"+["下架","上架","草稿","待审核","审核通过","审核不通过"][e.currentStatus]}},{prop:"duplicateVersion",label:"待审核副本",sortable:!0},{prop:"lastUpdateDate",label:"更新时间",sortable:!0},{prop:"currentOperator",label:"更新人",sortable:!0},{prop:"auditor",label:"审核人",sortable:!0}],selected:[],selectionType:"multiple"},selected:[]}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.filmDetailPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={},this.pannelValue=[],this.fetchData()},addFilmDetail:function(){this.$emit("open-add-page")},editData:function(){},batchDel:function(){},handleRowSelectionAdd:function(e){this.selected.push(e.tabId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.tabId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.tabId)>-1&&e.push(a),e},[])},getMediaResourceInfo:function(){var e=this;return this.$service.getMediaResourceInfo().then(function(t){var i=JSON.parse(decodeURI(t.slice(5,-1))),a=i.videoItemModels,n=a.reduce(function(e,t){return e.push(t.productList),e},[]),l=[].concat.apply([],n);e.productOptions=l;var o={label:"爱奇艺",value:"iqiyi",children:[]};o.children=a[0].categoryList.reduce(function(e,t){return e.concat({label:t.category_name,value:t.category_id})},[]);var r={label:"腾讯",value:"qq",children:[]};r.children=a[1].categoryList.reduce(function(e,t){return e.concat({label:t.category_name,value:t.category_id})},[]),e.channelOptions.push(o),e.channelOptions.push(r)})},handleChannelChange:function(e){this.filter.source="",this.filter.source=e[0],this.filter.channel=e[1]}},created:function(){this.getMediaResourceInfo().then(function(){}),this.fetchData()}},Ks=Gs,Ys=(i("fc21"),Object(O["a"])(Ks,Js,Hs,!1,null,"e55bf8fe",null)),Xs=Ys.exports,Zs=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShowPannelInfoList,expression:"!isShowPannelInfoList"}]},[i("div",[i("el-button",{attrs:{type:"primary"},on:{click:e.btnAudit}},[e._v("提交审核")]),i("el-button",{attrs:{type:"primary"},on:{click:e.btnSave}},[e._v("保存草稿")])],1),i("div",{staticClass:"split-bar"},[i("i",{staticClass:"el-icon-edit"},[e._v("基本信息")])]),i("el-form",{ref:"form",attrs:{rules:e.rules,"label-width":"90px"},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[i("el-form-item",{attrs:{label:"版面名称",prop:"tabName"}},[i("el-input",{staticStyle:{width:"240px"},model:{value:e.form.tabName,callback:function(t){e.$set(e.form,"tabName",t)},expression:"form.tabName"}})],1),i("el-form-item",{attrs:{label:"业务分类"}},[i("el-select",{model:{value:e.form.tabCategory,callback:function(t){e.$set(e.form,"tabCategory",t)},expression:"form.tabCategory"}},[i("el-option",{attrs:{label:"影视",value:"0"}}),i("el-option",{attrs:{label:"教育",value:"1"}})],1)],1),"0"===e.form.tabCategory?i("el-form-item",{attrs:{label:"内容源"}},[i("el-radio-group",{nativeOn:{change:function(t){return t.preventDefault(),e.changeResource(t)}},model:{value:e.tabResource,callback:function(t){e.tabResource=t},expression:"tabResource"}},[i("el-radio",{attrs:{label:"qq"}},[e._v("腾讯")]),i("el-radio",{attrs:{label:"iqiyi"}},[e._v("爱奇艺")]),i("el-radio",{attrs:{label:"voole"}},[e._v("优朋")])],1)],1):e._e(),i("el-form-item",{attrs:{label:"频道"}},[i("el-select",{model:{value:e.pannel,callback:function(t){e.pannel=t},expression:"pannel"}},[i("el-option",{attrs:{value:"",label:"不限"}}),e._l(e.pannelItems,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),i("el-form-item",{attrs:{label:"产品包"}},[i("el-select",{model:{value:e.product,callback:function(t){e.product=t},expression:"product"}},[i("el-option",{attrs:{value:"",label:"不限"}}),e._l(e.productItems,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),i("el-form-item",{attrs:{label:"选择板块"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isShowPannelInfoList=!0}}},[e._v("添加板块")])],1)],1)],1),i("AddBlockFilter",{directives:[{name:"show",rawName:"v-show",value:e.isShowPannelInfoList,expression:"isShowPannelInfoList"}],on:{"go-back":function(t){e.isShowPannelInfoList=!1}}})],1)},Qs=[],ec=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:"选择板块"},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-tabs",{attrs:{type:"card"}},[i("el-tab-pane",{attrs:{label:"内容板块"}},[i("PannelInfoList",{attrs:{dataList:e.contentBlock}})],1),i("el-tab-pane",{attrs:{label:"专属板块"}},[i("AlbumPannelInfoList",{attrs:{dataList:e.albumBlock}})],1),i("el-tab-pane",{attrs:{label:"专属影院板块"}})],1)],1)},tc=[],ic={components:{PannelInfoList:rn,AlbumPannelInfoList:wa},data:function(){var e=this;return{contentBlock:{filter:{pannelType:1,resourceIsNull:!0,pannelResource:"qq",multiStatus:"3,4"},filterSchema:{},table:{}},albumBlock:{filter:{pannelType:3,resourceIsNull:!0,pannelResource:"qq",multiStatus:"3,4"},filterSchema:{},table:{}},table:{props:{},data:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark"},{label:"业务分类",prop:"categoryName"},{label:"布局",prop:"fullLayoutName"},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var i=t.pannelStatus,a=t.currentVersion;return a+"/"+e.pannelStatusOption.map(function(e){if(i.toString()===e.value)return e.label}).join("")}},{label:"更新时间",prop:"lastUpdateDate","show-overflow-tooltip":!0},{label:"更新人",prop:"userName"}],selected:[],selectionType:"multiple"},pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}]}},methods:{},created:function(){var e=J.a.map({pannelId:J.a.o.string.other("form",{placeholder:"板块ID",component:"Input"}),pannelName:J.a.o.string.other("form",{placeholder:"板块名称",component:"Input"}),tabName:J.a.o.string.other("form",{placeholder:"引用状态",component:"Input"}),pannelStatus:J.a.o.enum({"待审核":"3","审核通过":"4"}).other("form",{placeholder:"审核状态",component:"Select"})}).other("form",{cols:{item:3,label:0,wrapper:23},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.contentBlock.filterSchema=e,this.contentBlock.table=Object.assign({},this.table),this.albumBlock.filterSchema=e,this.albumBlock.table=Object.assign({},this.table)}},ac=ic,nc=Object(O["a"])(ac,ec,tc,!1,null,"ff252234",null),lc=nc.exports,oc={components:{AddBlockFilter:lc},watch:{"form.tabCategory":{deep:!0,handler:function(e,t){"1"===e?(this.pannelItems=[],this.productItems=this.eduProductItems,this.pannel="",this.product=""):"0"===e&&this.handleTabResourceChange(this.tabResource)}},tabResource:function(e){this.handleTabResourceChange(e)}},data:function(){return{title:"新增页面",rules:{tabName:[{required:!0,message:"请输入主题名称",trigger:"blur"}]},form:{tabResource:"qq",tabCategory:"0"},tabResource:"qq",iqiyiSource:[],qqSource:[],pannel:"",pannelItems:[],product:"",productItems:[],eduProductItems:[],isShowPannelInfoList:!1}},methods:{btnAudit:function(){console.log("form",this.form)},btnSave:function(){},changeResource:function(e){var t=this;this.$confirm("是否要切换内容源，切换内容源之后所选择的版块数据将会清除掉！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"内容源切换成功!"}),t.form.tabResource=t.tabResource,t.clearResource()}).catch(function(){t.$message({type:"info",message:"已取消切换"}),t.tabResource=t.form.tabResource})},clearResource:function(){},getMediaResourceInfo:function(){var e=this;return this.$service.getMediaResourceInfo().then(function(t){var i=JSON.parse(decodeURI(t.slice(5,-1))),a=i.videoItemModels,n={categoryList:[],productList:[]};n.categoryList=e._arrayingOption(a[0].categoryList,"category_name","category_id"),n.productList=e._arrayingOption(a[0].productList,"source_name","source_sign"),e.iqiyiSource=n;var l={categoryList:[],productList:[]};l.categoryList=e._arrayingOption(a[1].categoryList,"category_name","category_id"),l.productList=e._arrayingOption(a[1].productList,"source_name","source_sign"),e.qqSource=l,e.pannelItems=l.categoryList,e.productItems=l.productList,e.eduProductItems=e._arrayingOption(a[2].productList,"source_name","source_sign")})},_arrayingOption:function(e,t,i){return e.reduce(function(e,a){return e.concat({label:a[t],value:a[i]})},[])},handleTabResourceChange:function(e){var t=this.qqSource,i=this.iqiyiSource;this.tabResource;switch(this.pannel="",this.product="",e){case"qq":this.pannelItems=t.categoryList,this.productItems=t.productList;break;case"iqiyi":this.pannelItems=i.categoryList,this.productItems=i.productList;break;default:this.pannelItems=[],this.productItems=[]}},openBlockPage:function(){}},created:function(){this.getMediaResourceInfo()}},rc=oc,sc=(i("3e27"),Object(O["a"])(rc,Zs,Qs,!1,null,"d4d9e376",null)),cc=sc.exports,uc={components:{FilmDetailPageList:Xs,FilmDetailPageAdd:cc},data:function(){return{isShow:!0,editId:""}},methods:{openAddPage:function(e){this.editId=e,this.isShow=!1},goBack:function(){this.isShow=!0},openListPage:function(){this.isShow=!0,this.$refs.list.fetchData()}},created:function(){}},dc=uc,pc=Object(O["a"])(dc,Ws,zs,!1,null,"28c4ec48",null),hc=pc.exports,mc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("TabInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShow?e._e():i("TabInfoAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},fc=[],bc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.handleFilterChange}},[i("el-form",{ref:"form",attrs:{inline:"","label-width":"90px",size:"mini"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[i("el-form-item",{attrs:{label:"版面ID"}},[i("el-input",{model:{value:e.filter.tabId,callback:function(t){e.$set(e.filter,"tabId",t)},expression:"filter.tabId"}})],1),i("el-form-item",{attrs:{label:"版面标题"}},[i("el-input",{model:{value:e.filter.tabName,callback:function(t){e.$set(e.filter,"tabName",t)},expression:"filter.tabName"}})],1),i("el-form-item",{attrs:{label:"版面属性"}},[i("el-select",{model:{value:e.filter.tabType,callback:function(t){e.$set(e.filter,"tabType",t)},expression:"filter.tabType"}},[i("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.tabTypeOption,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),i("el-form-item",{attrs:{label:"是否二级tab"}},[i("el-select",{model:{value:e.filter.hasSubTab,callback:function(t){e.$set(e.filter,"hasSubTab",t)},expression:"filter.hasSubTab"}},[i("el-option",{attrs:{value:""}},[e._v("请选择")]),i("el-option",{attrs:{value:"1"}},[e._v("是")]),i("el-option",{attrs:{value:"0"}},[e._v("否")])],1)],1),i("el-form-item",{attrs:{label:"业务分类"}},[i("el-select",{model:{value:e.filter.tabCategory,callback:function(t){e.$set(e.filter,"tabCategory",t)},expression:"filter.tabCategory"}},[i("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.businessType,function(e,t){return i("el-option",{key:t,attrs:{label:e.dictCnName,value:e.dictId}})})],2)],1),i("el-form-item",{attrs:{label:"AppId"}},[i("el-select",{model:{value:e.filter.tabAppid,callback:function(t){e.$set(e.filter,"tabAppid",t)},expression:"filter.tabAppid"}},[i("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.appIdType,function(e){return i("el-option",{key:e.dictEnName,attrs:{label:e.dictCnName,value:e.dictEnName}})})],2)],1),i("el-form-item",{attrs:{label:"状态"}},[i("el-select",{model:{value:e.filter.tabStatus,callback:function(t){e.$set(e.filter,"tabStatus",t)},expression:"filter.tabStatus"}},[i("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.tabStatusOption,function(e){return i("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})],2)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilterChange}},[e._v("查询")]),i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.handleFilterReset}},[e._v("重置")])],1)],1),i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addTabInfo}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},gc=[],vc={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},data:function(){var e=this;return{selected:[],tabTypeOption:[{label:"信号源版面",value:"5"},{label:"第三方版面",value:"4"},{label:"专题版面",value:"2"},{label:"普通版面",value:"1"}],tabStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],businessType:[],filter:{idPrefix:10},appIdType:[],filterSchema:null,pagination:{currentPage:1},table:{props:{},data:[],header:[{label:"ID",prop:"tabId"},{label:"名称",prop:"tabName"},{label:"版面属性",prop:"tabType",formatter:function(e){var t=e.tabType;return{1:"普通版面",2:"专题版面",4:"第三方版面",5:"信号源版面"}[t+""]||"未知版面"}},{label:"业务分类",prop:"businessCategoryName"},{label:"内容源",prop:"tabResource",formatter:function(e){var t=e.tabResource;return{o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_voole:"优朋"}[t+""]||""}},{label:"AppId",prop:"tabAppid",formatter:function(t){return e.appIdType.map(function(e){if(t.tabAppid.toString()===e.dictEnName)return e.dictCnName})}},{label:"版本/状态",prop:"tabStatus",formatter:function(t){var i=t.tabStatus,a=t.currentVersion;return a+"/"+e.tabStatusOption.map(function(e){if(i.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate"},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"modifierName"},{label:"操作",prop:"oper"}],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.tabInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={idPrefix:10},this.fetchData()},addTabInfo:function(){},editData:function(){},batchDel:function(){},handleRowSelectionAdd:function(e){this.selected.push(e.tabId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.tabId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.tabId)>-1&&e.push(a),e},[])},getBusinessType:function(){var e=this;this.$service.getBusinessType().then(function(t){e.businessType=t})}},created:function(){var e=this;this.$service.getAppIdType().then(function(t){e.appIdType=t,e.fetchData()}),this.getBusinessType()}},yc=vc,wc=(i("6e9b"),Object(O["a"])(yc,bc,gc,!1,null,"ef68a2e8",null)),Ic=wc.exports,Tc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},kc=[],Sc={components:{},data:function(){return{}},methods:{},created:function(){}},Cc=Sc,_c=Object(O["a"])(Cc,Tc,kc,!1,null,"76467b47",null),Fc=_c.exports,xc={components:{TabInfoList:Ic,TabInfoAdd:Fc},data:function(){return{isShow:!0,editId:""}},methods:{openAddPage:function(e){this.editId=e,this.isShow=!1},goBack:function(){this.isShow=!0},openListPage:function(){this.isShow=!0,this.$refs.list.fetchData()}},created:function(){}},Dc=xc,Pc=Object(O["a"])(Dc,mc,fc,!1,null,"1d607bee",null),$c=Pc.exports,Rc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"cc-movie-filter"},[i("div",{staticClass:"cc-search"},[i("el-collapse",{attrs:{value:"1"}},[i("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[i("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"72px"}},[i("el-form-item",{attrs:{label:"渠道"}},[i("el-select",{attrs:{size:"small"},model:{value:e.partner,callback:function(t){e.partner=t},expression:"partner"}},e._l(e.partnerList,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"内容源"}},[i("el-select",{attrs:{size:"small"},on:{change:e.sourceSelectChange},model:{value:e.searchForm.sources,callback:function(t){e.$set(e.searchForm,"sources",t)},expression:"searchForm.sources"}},e._l(e.source,function(e){return i("el-option",{key:e.source_code,attrs:{label:e.source_title,value:e.source_code}})}),1)],1),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tencent"===e.searchForm.sources,expression:"searchForm.sources === 'tencent'"}],attrs:{label:"牌照"}},[i("el-select",{attrs:{size:"small",clearable:""},model:{value:e.searchForm.licensee,callback:function(t){e.$set(e.searchForm,"licensee",t)},expression:"searchForm.licensee"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.licensee,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),i("el-form-item",{attrs:{label:"频道类型"}},[i("el-select",{attrs:{filterable:"",size:"small"},on:{change:e.categorySelectChange},model:{value:e.searchForm.category,callback:function(t){e.$set(e.searchForm,"category",t)},expression:"searchForm.category"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.categories,function(e){return i("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.categoryId}})})],2)],1),i("el-form-item",{attrs:{label:"影片类型"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.videoTypes,callback:function(t){e.$set(e.searchForm,"videoTypes",t)},expression:"searchForm.videoTypes"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.videoTypes,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagName,value:e.tagName}})})],2)],1),i("el-form-item",{attrs:{label:"付费类型"}},[i("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.payTypes,callback:function(t){e.$set(e.searchForm,"payTypes",t)},expression:"searchForm.payTypes"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.payTypes,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{attrs:{size:"small"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),i("el-form-item",{attrs:{label:"素材类型"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTypes,callback:function(t){e.$set(e.searchForm,"contentTypes",t)},expression:"searchForm.contentTypes"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTypes,function(e){return i("el-option",{key:e.contentTypeId,attrs:{label:e.contentType,value:e.contentTypeId}})})],2)],1),i("el-form-item",{attrs:{label:"年代"}},[i("el-input",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{blur:e.yearStartListen},model:{value:e.searchForm.yearStart,callback:function(t){e.$set(e.searchForm,"yearStart",t)},expression:"searchForm.yearStart"}}),e._v("-\n                "),i("el-input",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{blur:e.yearEndListen},model:{value:e.searchForm.yearEnd,callback:function(t){e.$set(e.searchForm,"yearEnd",t)},expression:"searchForm.yearEnd"}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}]},[i("el-form-item",{attrs:{label:"影片格式"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.videoFormat,callback:function(t){e.$set(e.searchForm,"videoFormat",t)},expression:"searchForm.videoFormat"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.videoFormat,function(e){return i("el-option",{key:e.tagEnName,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),i("el-form-item",{attrs:{label:"内容标签"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTag,callback:function(t){e.$set(e.searchForm,"contentTag",t)},expression:"searchForm.contentTag"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTag,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"排序方式"}},[i("el-select",{attrs:{size:"small"},model:{value:e.searchForm.orderBy,callback:function(t){e.$set(e.searchForm,"orderBy",t)},expression:"searchForm.orderBy"}},[i("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.orderBy,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2),i("el-tooltip",{attrs:{content:e.orderTip}},[i("el-button",{attrs:{icon:"asc"===e.searchForm.order?"el-icon-arrow-up":"el-icon-arrow-down",size:"mini"},on:{click:function(t){return e.changeSort()}}})],1)],1),i("el-form-item",{attrs:{label:"导演"}},[i("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.directors,callback:function(t){e.$set(e.searchForm,"directors",t)},expression:"searchForm.directors"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.directors,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"主演"}},[i("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.actors,callback:function(t){e.$set(e.searchForm,"actors",t)},expression:"searchForm.actors"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._v("'\n                    "),e._l(e.conditionList.actors,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),i("el-form-item",{attrs:{label:"地区"}},[i("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.areas,callback:function(t){e.$set(e.searchForm,"areas",t)},expression:"searchForm.areas"}},[i("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.areas,function(e){return i("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1)],1),i("div",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{icon:e.isMore?"arrow-up":"arrow-down",size:"small"},on:{click:function(t){return e.showMore()}}},[e._v(e._s(e.isMore?"收起":"展开"))]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),i("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)],1)]),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeDialog}},[i("selectSingle",{attrs:{singleId:e.singleId},on:{single:e.singleSearch}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")])],1)],1)],1)},Nc=[],Lc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange}})],1)],1)},Ac=[],Vc={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},props:{singleId:null},data:function(){return{urlIsTrailers:{"腾讯":1,"正片":0},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:void 0,table:{props:{},header:[{label:"集数名",prop:"urlCollection"},{label:"单集ID",prop:"coocaaMId"},{label:"单集名称",prop:"urlTitle"},{label:"图片",prop:"thumb",width:"130",render:function(e,t){var i=t.row;return e("img",{attrs:{src:i.thumb,width:"50px",height:"50px",class:"imgs"}})}},{label:"素材类型",prop:"urlType",formatter:function(e,t){return 1===e?"预告":"正片"}}],data:[],selected:[],selectionType:"single"}}},watch:{singleId:function(e,t){this.singleId=e,this.fetchData()}},methods:{fetchData:function(){var e=this,t=this.parseFilter();t.id=this.singleId,this.$service.getSegmentList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},handleRowSelectionAdd:function(e){this.selected.push(e.commonOnclickId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.commonOnclickId}),this.updateTableSelected()},handleRowSelectionChange:function(e,t){this.table.selected=t,this.$emit("single",e)},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.commonOnclickId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize,e.callbackparam="result",e.source="tencent"),e}},created:function(){var e=J.a.map({urlIsTrailer:J.a.o.enum(this.urlIsTrailers).other("form",{component:"Select",placeholder:"素材类型",cols:{item:3,label:0}}),urlTitle:J.a.o.string.other("form",{component:"Input",placeholder:"单集名称",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Oc=Vc,Ec=(i("6182"),Object(O["a"])(Oc,Lc,Ac,!1,null,"a15e5722",null)),Mc=Ec.exports,Uc={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"],selectSingle:Mc},data:function(){return{dialogTableVisible:!1,singleId:null,searchForm:{sources:"tencent",category:"",videoTypes:"",licensee:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStsearchFormart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},partner:"tencent",conditionList:{},searchParams:{},partnerList:[{label:"腾讯",value:"tencent"},{label:"爱奇艺",value:"yinhe"}],source:[],categories:[],videoTypes:[],isMore:!1,orderTip:"降序排列",filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"coocaaVId"},{label:"标题",prop:"title",sortable:!0},{label:"副标题",prop:"subTitle",width:"110",sortable:!0},{label:"内容源",prop:"ccVideoSourceEntities","min-width":"90",render:function(e,t){for(var i=t.row,a=0;a<i.ccVideoSourceEntities.length;a++){if("tencent"===i.ccVideoSourceEntities[a].thirdSource)return"腾讯";if("4KGarden"===i.ccVideoSourceEntities[a].thirdSource)return"4k花园";if("yinhe"===i.ccVideoSourceEntities[a].thirdSource)return"爱奇艺"}}},{label:"状态",prop:"videoStatus","min-width":"160",render:function(e,t){var i=t.row;switch(i.videoStatus){case 0:return"失效";case 1:return"有效";case 2:return"待审核";case 3:return"审核不通过";case 4:return"草稿"}}},{label:"图片",prop:"thumb",width:"130",render:function(e,t){var i=t.row;return e("img",{attrs:{src:i.thumb,width:"50px",height:"50px",class:"imgs"}})}},{label:"影片类型",prop:"videoType"},{label:"内容类型",prop:"contentType",width:"170"},{label:"期数",prop:"season"},{label:"导演",prop:"directors",width:"170",sortable:!0},{label:"演员",prop:"actors",width:"170",sortable:!0},{label:"地区",prop:"publishArea","min-width":"170"},{label:"年代",prop:"year"},{label:"已选集数",prop:"segment",fixed:"right"},{label:"操作",fixed:"right",render:N["utils"].component.createOperationRender(this,{operatSingle:"选择单集"})}],data:[],selected:[],selectionType:"multiple"}}},watch:{selected:function(e){this.$emit("input",e)},tableData:function(e,t){console.log(e)},"searchForm.sources":{deep:!0,handler:function(e,t){this.pannelResource=e}},partner:"getSources","searchForm.ccSearchReset":{deep:!0,handler:function(e,t){this.searchForm.ccSearchReset=e}}},methods:{showMore:function(){this.isMore=!this.isMore},search:function(){this.searchForm.ccSearchReset=!1,this.searchParams=this.deepClone(this.searchForm),this.fetchData();var e=Object.assign({},this.singleObj);e.data=[],e.selectId="",e.index=void 0,e.singleIdArr=[],e.singleIndexArr=[],e.titleArr=[],e.titleArrData=[]},reset:function(){this.searchForm={sources:"tencent",category:"",videoTypes:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},this.searchForm.ccSearchReset=!0,this.searchParams=this.deepClone(this.searchForm),"tencent"!==this.partner&&(this.partner="tencent"),this.$nextTick(this.getSources),this.fetchData()},yearStartListen:function(){if(this.searchForm.yearStart&&!+this.searchForm.yearStart)return this.$message("年代必须为数字"),void(this.searchForm.yearStart=null)},yearEndListen:function(){if(this.searchForm.yearEnd&&!+this.searchForm.yearEnd)return this.$message("年代必须为数字"),void(this.searchForm.yearEnd=null)},categorySelectChange:function(e){this.searchForm.videoTypes="";var t=this.categories,i=t.findIndex(function(t){return t.categoryId===e});this.videoTypes=t[i]?t[i].child[0].tagEntities:[]},sourceSelectChange:function(e){"tencent"!==e&&(this.searchForm.licensee="")},changeSort:function(){"asc"===this.searchForm.order?(this.searchForm.order="desc",this.orderTip="降序排列"):(this.searchForm.order="asc",this.orderTip="升序排列")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.coocaaVId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.coocaaVId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.coocaaVId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize,e.resType="vod",e.callbackparam="result"),e},fetchData:function(){var e=this,t=this.parseFilter(),i=Object.assign({},t);(this.searchForm.ccSearchReset=!0)?i.sources=this.searchForm.sources:this.searchForm.sources&&(i.sources=this.searchForm.sources),this.searchForm.category?i.category=this.searchForm.category:delete i.category,this.searchForm.videoTypes?i.videoTypes=this.searchForm.videoTypes:delete i.videoTypes,this.searchForm.licensee?i.licensee=this.searchForm.licensee:delete i.licensee,this.searchForm.payTypes?i.payTypes=this.searchForm.payTypes:delete i.payTypes,this.searchForm.yearStart?i.yearStart=this.searchForm.yearStart:delete i.yearStart,this.searchForm.yearEnd?i.yearEnd=this.searchForm.yearEnd:i.yearEnd,this.searchForm.title?i.title=this.searchForm.title:delete i.title,this.searchForm.contentTypes?i.contentTypes=this.searchForm.contentTypes:delete i.contentTypes,this.searchForm.videoFormat?i.videoFormat=this.searchForm.videoFormat:delete i.videoFormat,this.searchForm.contentTag?i.contentTag=this.searchForm.contentTag:delete i.contentTag,this.searchForm.orderBy?i.orderBy=this.searchForm.orderBy:delete matchMedia.orderBy,this.searchForm.directors?i.directors=this.searchForm.directors:delete i.directors,this.searchForm.actors?i.actors=this.searchForm.actors:delete i.actors,this.searchForm.areas?i.areas=this.searchForm.areas:delete i.areas,this.$service.getMediaVideoInfos(i).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getSources:function(){var e=this,t=this.partner;this.$service.getPartnerSource({partnerName:t}).then(function(i){var a=i.rows.reduce(function(e,t){return t.source_List&&(e=e.concat(t.source_List)),e},[]);e.source=a;var n=a.find(function(e){return e.source_code===t})||a[0];n&&(e.searchForm.sources=n.source_code)})},getCondition:function(){var e=this;this.$service.getCondition().then(function(t){e.categories=t.vod.sources[0].child,e.conditionList=t.vod})},operatSingle:function(e){this.dialogTableVisible=!0,this.singleId=e.row.coocaaVId},closeDialog:function(){this.singleId=null},singleSearch:function(e){this.dialogTableVisible=!1,console.log(e)}},created:function(){this.fetchData(),this.getSources(),this.getCondition()}},Bc=Uc,jc=(i("45bc"),Object(O["a"])(Bc,Rc,Nc,!1,null,"58ee7350",null)),qc=jc.exports,Wc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",staticClass:"admin-control-content",attrs:{model:e.form,rules:e.rules,"label-width":"200px"}},[i("el-form-item",{attrs:{label:"是否开启管理后台缓存",prop:"openCache"}},[i("el-select",{model:{value:e.form.openCache,callback:function(t){e.$set(e.form,"openCache",t)},expression:"form.openCache"}},e._l(e.cacheItems,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"缓存版本",prop:"cacheVersion"}},[i("el-input",{model:{value:e.form.cacheVersion,callback:function(t){e.$set(e.form,"cacheVersion",t)},expression:"form.cacheVersion"}})],1),i("el-form-item",{attrs:{label:"媒资回溯策略",prop:"mediaRecallPolicy"}},[i("el-select",{model:{value:e.form.mediaRecallPolicy,callback:function(t){e.$set(e.form,"mediaRecallPolicy",t)},expression:"form.mediaRecallPolicy"}},e._l(e.callBackItems,function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",[i("el-button",{on:{click:e.submitForm}},[e._v("保存修改")])],1)],1)],1)},zc=[],Jc={data:function(){return{form:{openCache:"",cacheVersion:"",mediaRecallPolicy:""},id:1,cacheItems:[{label:"开启缓存",value:1},{label:"关闭缓存",value:0}],callBackItems:[{label:"推送",value:"push"},{label:"定时",value:"polling"},{label:"不回溯",value:"none"}],rules:{openCache:[{required:!0,message:"请选择是否开启缓存",trigger:"blur"}],cacheVersion:[{required:!0,message:"请输入缓存版本",trigger:"blur"}],mediaRecallPolicy:[{required:!0,message:"请选择媒资回溯策略",trigger:"blur"}]}}},methods:{fetchData:function(){var e=this;this.$service.getAdminMasterControllInfo({id:this.id}).then(function(t){console.log(t),e.form=t})},submitForm:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.saveAdminMasterControll({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(e){console.log(e)})})}},created:function(){this.fetchData()}},Hc=Jc,Gc=(i("ad23"),Object(O["a"])(Hc,Wc,zc,!1,null,"54849a4f",null)),Kc=Gc.exports,Yc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("DataDictionaryList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("DataDictionaryAdd",{attrs:{editData:e.editData},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Xc=[],Zc=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addDict}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增字典分类")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}}),i("el-dialog",{attrs:{title:"添加字典分类",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px","label-position":e.labelPosition}},[i("el-form-item",{attrs:{label:"字典分类名称",prop:"dictCategoryCnName"}},[i("el-input",{model:{value:e.ruleForm.dictCategoryCnName,callback:function(t){e.$set(e.ruleForm,"dictCategoryCnName",t)},expression:"ruleForm.dictCategoryCnName"}})],1),i("el-form-item",{attrs:{label:"字典分类值",prop:"dictCategoryEnName"}},[i("el-input",{model:{value:e.ruleForm.dictCategoryEnName,callback:function(t){e.$set(e.ruleForm,"dictCategoryEnName",t)},expression:"ruleForm.dictCategoryEnName"}})],1),i("el-form-item",[i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")]),i("el-button",{staticStyle:{float:"right","margin-right":"15px"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1)],1)],1)},Qc=[],eu={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{dialogFormVisible:!1,labelPosition:"right",ruleForm:{dictCategoryEnName:"",dictCategoryCnName:""},rules:{dictCategoryCnName:[{required:!0,message:"请输入字典分类名称",trigger:"blur"}],dictCategoryEnName:[{required:!0,message:"请输入字典分类值",trigger:"blur"}]},formLabelWidth:"120px",filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],selectedRows:{},dictCategories:{},table:{props:{},header:[{label:"ID",prop:"dictId",width:"70"},{label:"字典名称","min-width":"90",prop:"dictCnName",sortable:!0},{label:"字典值",prop:"dictEnName",width:"110",sortable:!0},{label:"字典分类",prop:"dictCategory","min-width":"160"}],data:[],selected:[],selectionType:"multiple"}}},methods:{addDict:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selectedRows[this.selected[0]])},batchDel:function(){var e=this;0==this.selected.length&&this.$message("请选择一条数据"),1==this.selected.length&&window.confirm("确定要删除吗")&&this.$service.DeleteDict({id:this.selected[0]},"删除成功").then(function(t){e.fetchData()}),this.selected.length>1&&this.$message("只能选择一条数据")},getDictCategoryList:function(){var e=this;return this.$service.getDictCategoryList().then(function(t){t.forEach(function(t){e.dictCategories[t.label]=t.value})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(i){if(!i)return!1;var a={dictCategoryCnName:t.ruleForm.dictCategoryCnName,dictCategoryEnName:t.ruleForm.dictCategoryEnName};console.log(a),t.$service.SaveDictCategory(a,"保存成功").then(function(i){t.dialogFormVisible=!1,t.$refs[e].resetFields()})})},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.dictId);var t=e.dictId;this.selectedRows[t]=e,this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.dictId}),delete this.selectedRows[e.dictId],this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.dictId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getDictList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=this,t=J.a.map({dictId:J.a.o.string.other("form",{component:"Input",placeholder:"字典ID",cols:{item:3,label:0}}),dictCnName:J.a.o.string.other("form",{component:"Input",placeholder:"字典名称",cols:{item:3,label:0}}),dictEnName:J.a.o.string.other("form",{component:"Input",placeholder:"字典值",cols:{item:3,label:0}}),dictCategory:J.a.o.enum(this.dictCategories).other("form",{component:"Select",placeholder:"字典分类",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getDictCategoryList().then(function(){e.filterSchema=t}),this.fetchData()}},tu=eu,iu=(i("2f22"),Object(O["a"])(tu,Zc,Qc,!1,null,"0e632634",null)),au=iu.exports,nu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"字典名称",prop:"dictCnName"}},[i("el-input",{attrs:{placeholder:"字典名称"},model:{value:e.form.dictCnName,callback:function(t){e.$set(e.form,"dictCnName",t)},expression:"form.dictCnName"}})],1),i("el-form-item",{attrs:{label:"字典值",prop:"dictEnName"}},[i("el-input",{attrs:{placeholder:"字典值"},model:{value:e.form.dictEnName,callback:function(t){e.$set(e.form,"dictEnName",t)},expression:"form.dictEnName"}})],1),i("el-form-item",{attrs:{label:"字典分类",prop:"dictCategory"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择字典分类"},model:{value:e.form.dictCategory,callback:function(t){e.$set(e.form,"dictCategory",t)},expression:"form.dictCategory"}},e._l(e.dictCategoryStr,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},lu=[],ou={props:{editData:{type:Object}},data:function(){return{title:null,form:{dictId:null,dictCnName:null,dictEnName:null,dictCategory:null,checked:null,createdDate:null,creater:null,dictStatus:null,flag:null,id:null,keyword:null,lastUpdateDate:null,modifier:null},dictCategoryStr:[],formRules:{dictCnName:[{required:!0,message:"请输入字典名称",trigger:"blur"}],dictEnName:[{required:!0,message:"请输入字典值",trigger:"blur"}],dictCategory:[{required:!0,message:"请选择字典分类",trigger:"blur"}]}}},methods:{getDictCategoryList:function(){var e=this;this.$service.getDictCategoryList().then(function(t){e.dictCategoryStr=t})},submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i={dictId:e.form.dictId,dictCategory:e.form.dictCategory,dictCnName:e.form.dictCnName,dictEnName:e.form.dictEnName};e.$service.SaveDictionary(i,"保存成功").then(function(t){e.$emit("open-list-page")})}})}},created:function(){null!==this.editData&&void 0!==this.editData?(this.title="编辑",this.form=this.editData):this.title="新增",this.getDictCategoryList()}},ru=ou,su=Object(O["a"])(ru,nu,lu,!1,null,null,null),cu=su.exports,uu={components:{DataDictionaryList:au,DataDictionaryAdd:cu},data:function(){return{isShowList:!0,editData:null}},methods:{openAddPage:function(e){this.editData=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},du=uu,pu=Object(O["a"])(du,Yc,Xc,!1,null,null,null),hu=pu.exports,mu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("DepartmentManageList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("DepartmentManageAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},fu=[],bu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},gu=[],vu={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},data:function(){var e=this;return{filterSchema:null,filter:{sort:void 0,order:void 0},pagination:{currentPage:1,pageSize:15},selected:[],table:{props:{},header:[{label:"部门名称",prop:"deptName",fit:!0,sortable:!0},{label:"部门电话",prop:"deptTel",fit:!0,sortable:!0},{label:"部门传真",prop:"deptFax",fit:!0,sortable:!0},{label:"是否禁用",prop:"disabled",fit:!0,sortable:!0,render:function(e,t){var i=t.row;return e("div",{style:{color:["red","green"][i.disabled]}},["否","是"][i.disabled])}},{label:"备注",prop:"remark",fit:!0,sortable:!0},{label:"排序",prop:"seq",width:100,sortable:!0,render:function(t,i){var a=i.row;return t(S["Input"],{ref:"input",props:{value:a.seq},on:{input:function(e){a.seq=e},blur:function(t){e.$service.sysDeptUpdateSeq({id:a.deptId,seq:a.seq})}}})}},{label:"部门父编号",prop:"pid",fit:!0,sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.sysDeptPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},addUser:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.sysDeptRemove({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData(),e.table.selected=[]}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.deptId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.deptId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.deptId)>-1&&e.push(a),e},[])}},created:function(){var e=J.a.map({deptName:J.a.o.string.other("form",{placeholder:"部门名称",cols:{item:3,label:0}}),deptTel:J.a.o.string.other("form",{placeholder:"部门电话",cols:{item:3,label:0}}),deptFax:J.a.o.string.other("form",{placeholder:"部门传真",cols:{item:3,label:0}}),remark:J.a.o.string.other("form",{placeholder:"备注",cols:{item:3,label:0}}),pid:J.a.o.number.other("form",{placeholder:"部门父编号",cols:{item:3,label:0}}),disabled:J.a.o.enum({"否":0,"是":1}).other("form",{component:"Select",placeholder:"是否禁用",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},yu=vu,wu=(i("4673"),Object(O["a"])(yu,bu,gu,!1,null,"348e1a84",null)),Iu=wu.exports,Tu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[i("el-input",{attrs:{placeholder:"部门名称"},model:{value:e.formData.deptName,callback:function(t){e.$set(e.formData,"deptName",t)},expression:"formData.deptName"}})],1),i("el-form-item",{attrs:{label:"部门电话",prop:"deptTel"}},[i("el-input",{attrs:{placeholder:"部门电话"},model:{value:e.formData.deptTel,callback:function(t){e.$set(e.formData,"deptTel",t)},expression:"formData.deptTel"}})],1),i("el-form-item",{attrs:{label:"部门传真",prop:"deptFax"}},[i("el-input",{attrs:{placeholder:"部门传真"},model:{value:e.formData.deptFax,callback:function(t){e.$set(e.formData,"deptFax",t)},expression:"formData.deptFax"}})],1),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{placeholder:"备注"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),i("el-form-item",{attrs:{label:"排序",prop:"seq"}},[i("el-input",{attrs:{placeholder:"排序"},model:{value:e.formData.seq,callback:function(t){e.$set(e.formData,"seq",t)},expression:"formData.seq"}})],1),i("el-form-item",{attrs:{label:"上级部门",prop:"pid"}},[i("el-select",{attrs:{placeholder:"所在部门"},model:{value:e.formData.pid,callback:function(t){e.$set(e.formData,"pid",t)},expression:"formData.pid"}},[i("el-option",{attrs:{label:"无",value:"0"}}),e._l(e.pidList,function(e){return i("el-option",{key:e.deptId+"",attrs:{label:e.deptName,value:e.deptId}})})],2)],1),i("el-form-item",{attrs:{label:"是否禁用",prop:"disabled"}},[i("el-radio",{attrs:{label:"0"},model:{value:e.formData.disabled,callback:function(t){e.$set(e.formData,"disabled",t)},expression:"formData.disabled"}},[e._v("否")]),i("el-radio",{attrs:{label:"1"},model:{value:e.formData.disabled,callback:function(t){e.$set(e.formData,"disabled",t)},expression:"formData.disabled"}},[e._v("是")])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")]),i("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$emit("go-back")}}},[e._v("取消")])],1)],1)],1)],1)],1)},ku=[];J.a.addMsgs({required:"不能为空",enum:"请选择一项",enumList:"请选择一项",number:"请填写数字"});J.a;var Su,Cu,_u,Fu={props:{editId:Number,default:null},data:function(){return{title:null,pidList:[],formData:{deptName:"",deptTel:"",deptFax:"",remark:"",seq:null,disabled:"0",pid:"0"},formRules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],deptTel:[{required:!0,message:"请输入部门电话",trigger:"blur"}],deptFax:[{required:!0,message:"请输入部门传真",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}],seq:[{required:!0,message:"请输入序号",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i=e.formData;e.editId&&(i.deptId=e.editId),e.$service.sysDeptSave(i,"保存成功").then(function(){e.$emit("open-list-page")})}})},getDepts:function(){var e=this;return this.$service.getDepts().then(function(t){e.pidList=t})},getEditData:function(){var e=this;this.$service.sysDeptDetailInfo({id:this.editId}).then(function(t){Object.keys(e.formData).forEach(function(i){e.formData[i]="disabled"===i?t[i]+"":t[i]})})}},created:function(){this.getDepts(),this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},xu=Fu,Du=(i("7766"),Object(O["a"])(xu,Tu,ku,!1,null,"f44310cc",null)),Pu=Du.exports,$u={components:{DepartmentManageList:Iu,DepartmentManageAdd:Pu},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Ru=$u,Nu=Object(O["a"])(Ru,mu,fu,!1,null,"1c827294",null),Lu=Nu.exports,Au=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("RoleConfigList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("RoleConfigAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Vu=[],Ou=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-form",{ref:"form",attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[i("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.formData.roleName,callback:function(t){e.$set(e.formData,"roleName",t)},expression:"formData.roleName"}})],1),i("el-form-item",{attrs:{label:"排序号",prop:"seq"}},[i("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.formData.seq,callback:function(t){e.$set(e.formData,"seq",t)},expression:"formData.seq"}})],1),i("el-form-item",{attrs:{label:"说明",prop:"roleDesc"}},[i("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.formData.roleDesc,callback:function(t){e.$set(e.formData,"roleDesc",t)},expression:"formData.roleDesc"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("保存")])],1)],1)],1)},Eu=[],Mu={name:"RoleConfigAdd",props:{editId:void 0,index:void 0},data:function(){return{title:"",formData:{roleName:"",seq:"",roleDesc:""},formRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],seq:[{required:!0,message:"请输入排序号",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色说明",trigger:"blur"}]}}},methods:{saveRoleInfo:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.saveRoleData(e.formData,"保存成功").then(function(t){e.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.getRoleDetailById({id:this.editId}).then(function(t){Object.keys(e.formData).forEach(function(i){e.formData[i]=t[i]})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.formData.roleId=this.editId,this.getEditData()):this.title="新增"}},Uu=Mu,Bu=Object(O["a"])(Uu,Ou,Eu,!1,null,"5d6bd91e",null),ju=Bu.exports,qu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.handleBatchDelete}},[e._v("删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{title:"查看用户",visible:e.viewUserDialogVisible},on:{"update:visible":function(t){e.viewUserDialogVisible=t}}},[i("el-table",{attrs:{data:e.userRoleData,border:""}},[i("el-table-column",{attrs:{label:"用户ID",property:"userId"}}),i("el-table-column",{attrs:{label:"用户名",property:"userName"}}),i("el-table-column",{attrs:{label:"公司部门",property:"deptName"}}),i("el-table-column",{attrs:{label:"电子邮箱",property:"email"}})],1)],1),i("el-dialog",{staticClass:"auth-set-window",attrs:{title:"权限设置",visible:e.setAuthDialogVisible},on:{"update:visible":function(t){e.setAuthDialogVisible=t}}},[i("div",{staticClass:"auth-set-window__buttons"},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAllValue,callback:function(t){e.checkAllValue=t},expression:"checkAllValue"}},[e._v("全选")]),i("el-button",{staticClass:"button--position",on:{click:function(t){return e.updateAuth()}}},[e._v("保存修改")]),i("el-button",{on:{click:function(t){e.setAuthDialogVisible=!1}}},[e._v("关闭")])],1),i("div",{staticClass:"auth-set-window__header"},e._l(e.headerItems,function(t,a){return i("span",{key:a,staticClass:"auth-set-window__header-item"},[e._v("\n           "+e._s(t)+"\n        ")])}),0),i("div",{staticClass:"auth-set-window__content"},[i("el-tree",{attrs:{data:e.AuthList,"node-key":"menuId","default-expand-all":"","expand-on-click-node":""},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var a=t.data;return i("span",{},[i("span",{staticClass:"tree-data tree-data--big-size"},[e._v(e._s(a.title))]),e._l(e.dataItems,function(e,t){return i("span",{key:t,staticClass:"tree-data",on:{click:function(e){e.stopPropagation()}}},[i("el-checkbox",{key:a.menuId+t+Math.random(),attrs:{value:1==a[e],disabled:-1==a[e],runId:t+1},on:{input:function(t){a[e]=t?"1":"0"}}})],1)})],2)}}])})],1)]),i("el-dialog",{attrs:{title:"数据权限设置",visible:e.showAuthOfCrowdDialog},on:{"update:visible":function(t){e.showAuthOfCrowdDialog=t}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.policies.length,expression:"policies.length === 0"}]},[e._v("\n      加载中...\n    ")]),e._l(e.policies,function(t){return i("div",{key:t.value,staticClass:"crowd-selector"},[i("span",{staticClass:"crowd-selector__policy ellipsis",attrs:{title:t.label}},[e._v("\n        "+e._s(t.label)+"\n      ")]),i("div",{staticClass:"crowd-selector__crowd-list"},e._l(t.crowds,function(t,a){return i("el-tag",{key:a,class:{ellipsis:!0,"crowd-selector__crowd":!0,"crowd-selector__crowd--disabled":1==t.disable},attrs:{type:"info",title:t.label},nativeOn:{click:function(i){return e.handleSelectCrowd(t)}}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),1)])}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.showAuthOfCrowdDialog=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveAuth}},[e._v("确 定")])],1)],2)],1)},Wu=[],zu={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){var e=this;return{filter:{},filterSchema:J.a.map({roleName:J.a.o.string.other("form",{label:"角色名称",placeholder:"请输入角色名称",cols:{item:35,label:8,wrapper:15}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}}),pagination:{},selected:[],table:{props:{},header:[{label:"角色名称",prop:"roleName"},{label:"排序号",prop:"seq",sortable:!0,render:function(t,i){var a=i.row;return t("el-input",{props:{value:a.seq,type:"text"},on:{input:function(e){a.seq=e},blur:function(){e.$service.updateSeq({id:a.roleId,seq:a.seq})}}})}},{label:"说明",prop:"roleDesc"},{label:"创建人",prop:"createUid"},{label:"创建时间",width:"180",sortable:!0,prop:"createDate"},{label:"修改人",prop:"modifyUid"},{label:"修改时间",width:"180",sortable:!0,prop:"modifyDate"},{label:"操作",fixed:"right",width:"350",render:N["utils"].component.createOperationRender(this,{setAuth:"设置权限",handleSetAuthOfCrowd:"设置人群权限",sysRoleView:"查看用户"})}],data:[],selected:[],selectionType:"multiple"},viewUserDialogVisible:!1,userRoleData:[],showAuthOfCrowdDialog:!1,policies:[],roleId:void 0,setAuthDialogVisible:!1,AuthList:[],isIndeterminate:!0,checkAllValue:!1,headerItems:["菜单名称","浏览","新增","编辑","删除","搜索","刷新","打印","导入","导出","审核","认领","撤销认领","撤销审核","上架","创建副本","批量审核"],dataItems:["browser","add","edit","delete","search","refresh","print","inport","export","audit","claim","unclaim","unaudit","shelves","copy","batchAudit"]}},methods:{parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleCreate:function(){this.$emit("open-add-page",null)},handleBatchDelete:function(){var e=this;0!==this.selected.length?this.$confirm("确定删除此活动吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$service.deleteRole({id:e.selected.join(",")},"删除成功").then(function(t){e.handleAllRowSelectionRemove(),e.fetchData()})}):this.$message("请选择再删除")},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={roleName:void 0},this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e.roleId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.roleId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.roleId)>-1&&e.push(a),e},[])},handleCheckAllChange:function(e){this.checkAllValue=e,this.isIndeterminate=!1;var t=this.dataItems;function i(a){a.forEach(function(a){t.forEach(function(t){"-1"!==a[t]&&(a[t]=e?"1":"0")}),a.children&&i(a.children)})}i(this.AuthList)},updateAuth:function(){var e=this,t=this.roleId,i=this.dataItems,a=[];function n(e){e.forEach(function(e){i.forEach(function(t,i){"1"===e[t]&&a.push({menuId:e["menuId"],runId:(i+1).toString()})}),e.children&&n(e.children)})}n(this.AuthList),this.$service.saveAuthOfRole({roleId:t,mrs:JSON.stringify(a)},"设置成功").then(function(){e.setAuthDialogVisible=!1})},setAuth:function(e){var t=this,i=e.row;this.$service.getAuthList({roleId:i.roleId}).then(function(e){console.log(e),t.setAuthDialogVisible=!0,t.AuthList=e,t.roleId=i.roleId})},fetchPolicies:function(e){var t=this;this.$service.getPoliciesAndCrowds({roleId:e}).then(function(i){t.policies=i,i.forEach(function(i){console.log(i.crowds),t.$service.getCrowdOfPolicy({id:i.value,roleId:e}).then(function(e){console.log(e),t.$set(i,"crowds",e)})})})},handleSelectCrowd:function(e){e.disable=1===e.disable?0:1},handleSetAuthOfCrowd:function(e){var t=e.row;this.showAuthOfCrowdDialog=!0,this.policies=[],this.roleId=t.roleId,this.fetchPolicies(t.roleId)},handleSaveAuth:function(){var e=this,t=this.roleId,i=[],a=[],n=this.policies;n.forEach(function(e){var t=!0;e.crowds.forEach(function(e){1===e.disable?i.push(e.value):t=!1}),!1!==t&&e.crowds.length>0&&a.push(e.value)}),this.$service.setCrowdAuthOfRole({roleId:t,disableTagInfoList:[{type:"crowd",tagIds:i},{type:"crowdPolicy",tagIds:a}]},"设置成功").then(function(){e.showAuthOfCrowdDialog=!1})},sysRoleView:function(e){var t=this,i=e.row;this.viewUserDialogVisible=!0;var a=i.roleId;this.$service.userRoleList({roleId:a}).then(function(e){t.userRoleData=e})},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getRoleList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){this.fetchData()}},Ju=zu,Hu=(i("32a2"),Object(O["a"])(Ju,qu,Wu,!1,null,"7c2a5b23",null)),Gu=Hu.exports,Ku={components:{RoleConfigAdd:ju,RoleConfigList:Gu},data:function(){return{isShowList:!0,editId:void 0,index:void 0}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Yu=Ku,Xu=Object(O["a"])(Yu,Au,Vu,!1,null,null,null),Zu=Xu.exports,Qu=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},ed=[],td={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"id",width:"70"},{label:"用户名",width:"130",prop:"userName"},{label:"用户编号",prop:"userId",width:"90"},{label:"登录时间",prop:"loginTime",width:"150"},{label:"用户IP",prop:"loginIp",width:"150"},{label:"用户浏览器信息",prop:"userAgent","min-width":"100"},{label:"登录类型",prop:"loginType",width:"100"},{label:"说明",prop:"remark",width:"100"}],data:[],selected:[],selectionType:"multiple"}}},methods:{handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.id),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.id}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.id)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getLoginLogList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=J.a.map({userName:J.a.o.string.other("form",{component:"Input",placeholder:"用户名  ",cols:{item:3,label:0}}),id:J.a.o.string.other("form",{component:"Input",placeholder:"用户ID  ",cols:{item:3,label:0}}),loginIp:J.a.o.string.other("form",{component:"Input",placeholder:"用户登陆IP",cols:{item:3,label:0}}),loginType:J.a.o.string.other("form",{component:"Input",placeholder:"登陆类型",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},id=td,ad=(i("fa8e"),Object(O["a"])(id,Qu,ed,!1,null,"466453c8",null)),nd=ad.exports,ld=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.handleFilterChange}},[i("el-form",{ref:"form",attrs:{model:e.filter,inline:"","label-width":"90px",size:"mini"}},[i("el-form-item",{attrs:{label:"自增ID"}},[i("el-input",{model:{value:e.filter.id,callback:function(t){e.$set(e.filter,"id",t)},expression:"filter.id"}})],1),i("el-form-item",{attrs:{label:"操作者ID"}},[i("el-input",{model:{value:e.filter.userId,callback:function(t){e.$set(e.filter,"userId",t)},expression:"filter.userId"}})],1),i("el-form-item",{attrs:{label:"操作者名称"}},[i("el-input",{model:{value:e.filter.userName,callback:function(t){e.$set(e.filter,"userName",t)},expression:"filter.userName"}})],1),i("el-form-item",{attrs:{label:"菜单名称"}},[i("el-input",{model:{value:e.filter.menuName,callback:function(t){e.$set(e.filter,"menuName",t)},expression:"filter.menuName"}})],1),i("el-form-item",{attrs:{label:"菜单Elid"}},[i("el-input",{model:{value:e.filter.menuElid,callback:function(t){e.$set(e.filter,"menuElid",t)},expression:"filter.menuElid"}})],1),i("el-form-item",{attrs:{label:"执行的方法"}},[i("el-input",{model:{value:e.filter.execMethod,callback:function(t){e.$set(e.filter,"execMethod",t)},expression:"filter.execMethod"}})],1),i("el-form-item",{attrs:{label:"操作耗时"}},[i("el-input",{model:{value:e.filter.elapsedTime,callback:function(t){e.$set(e.filter,"elapsedTime",t)},expression:"filter.elapsedTime"}})],1),i("el-form-item",{attrs:{label:"操作时间"}},[i("el-input",{model:{value:e.filter.createTime,callback:function(t){e.$set(e.filter,"createTime",t)},expression:"filter.createTime"}})],1),i("el-form-item",{attrs:{label:"操作的数据"}},[i("el-input",{attrs:{type:"textarea",size:"medium"},model:{value:e.filter.opData,callback:function(t){e.$set(e.filter,"opData",t)},expression:"filter.opData"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilterChange}},[e._v("查询")]),i("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.clearForm}},[e._v("重置")])],1)],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType}})],1)],1)},od=[],rd={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},selected:[],pagination:{},table:{props:{},header:[{label:"自增ID",prop:"id",width:"70",sortable:!0},{label:"操作者ID",prop:"userId",width:"60",sortable:!0},{label:"操作名称",prop:"userName"},{label:"菜单名称",prop:"menuName"},{label:"菜单Elid",prop:"menuElid"},{label:"执行的方法",prop:"execMethod"},{label:"操作的数据",prop:"opData",render:function(e,t){var i=t.row;return e(S["Tooltip"],{props:{content:i.opData,placement:"top"}},[e("div",{class:"operatiton-data"},[i.opData])])}},{label:"操作耗时",prop:"elapsedTime",fit:!0,sortable:!0},{label:"操作时间",prop:"createTime",fit:!0},{label:"操作",width:"90",fixed:"right",render:function(t,i){var a=i.row;return t(S["Button"],{props:{type:"success",icon:"el-icon-plus"},on:{click:e.handleCopy.bind(e,a)}},["复制"])}}],data:[],selected:[],selectionType:"none"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.sysLogOpPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},clearForm:function(){this.filter={},this.fetchData()},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleCopy:function(e){var t=e.opData,i=document.createElement("textarea");i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="2em",i.style.height="2em",i.style.padding="0",i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=t,document.body.appendChild(i),i.select();try{var a=document.execCommand("copy");a&&this.$message({showClose:!0,message:"复制成功",type:"success"})}catch(n){this.$message({showClose:!0,message:"复制失败",type:"warning"})}document.body.removeChild(i)}},created:function(){this.fetchData()}},sd=rd,cd=(i("9a21"),Object(O["a"])(sd,ld,od,!1,null,"a11ba026",null)),ud=cd.exports,dd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("SysMenuList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("SysMenuAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},pd=[],hd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[i("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[i("el-input",{attrs:{placeholder:"菜单名称"},model:{value:e.form.menuName,callback:function(t){e.$set(e.form,"menuName",t)},expression:"form.menuName"}})],1),i("el-form-item",{attrs:{label:"元素ID",prop:"elid"}},[i("el-input",{attrs:{placeholder:"元素ID"},model:{value:e.form.elid,callback:function(t){e.$set(e.form,"elid",t)},expression:"form.elid"}})],1),i("el-form-item",{attrs:{label:"图标样式",prop:"iconClass"}},[i("el-input",{attrs:{placeholder:"图标样式"},model:{value:e.form.iconClass,callback:function(t){e.$set(e.form,"iconClass",t)},expression:"form.iconClass"}})],1),i("el-form-item",{attrs:{label:"标签ID",prop:"tabId"}},[i("el-input",{attrs:{placeholder:"标签ID"},model:{value:e.form.tabId,callback:function(t){e.$set(e.form,"tabId",t)},expression:"form.tabId"}})],1),i("el-form-item",{attrs:{label:"标签名称",prop:"tabTitle"}},[i("el-input",{attrs:{placeholder:"标签名称"},model:{value:e.form.tabTitle,callback:function(t){e.$set(e.form,"tabTitle",t)},expression:"form.tabTitle"}})],1),i("el-form-item",{attrs:{label:"标签图标",prop:"tabIcon"}},[i("el-input",{attrs:{placeholder:"标签图标"},model:{value:e.form.tabIcon,callback:function(t){e.$set(e.form,"tabIcon",t)},expression:"form.tabIcon"}})],1),i("el-form-item",{attrs:{label:"跳转地址URL",prop:"iframeUrl"}},[i("el-input",{attrs:{placeholder:"跳转地址URL"},model:{value:e.form.iframeUrl,callback:function(t){e.$set(e.form,"iframeUrl",t)},expression:"form.iframeUrl"}})],1),i("el-form-item",{attrs:{label:"排序",prop:"seq"}},[i("el-input",{attrs:{placeholder:"排序"},model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1),i("el-form-item",{attrs:{label:"菜单目录",prop:"modle"}},[i("el-radio",{attrs:{label:"0"},model:{value:e.form.modle,callback:function(t){e.$set(e.form,"modle",t)},expression:"form.modle"}},[e._v("收起")]),i("el-radio",{attrs:{label:"1"},model:{value:e.form.modle,callback:function(t){e.$set(e.form,"modle",t)},expression:"form.modle"}},[e._v("展开")]),i("el-radio",{attrs:{label:"3"},model:{value:e.form.modle,callback:function(t){e.$set(e.form,"modle",t)},expression:"form.modle"}},[e._v("媒资菜单")])],1),i("el-form-item",{attrs:{label:"是否禁用",prop:"disabled"}},[i("el-radio",{attrs:{label:"0"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("否")]),i("el-radio",{attrs:{label:"1"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("是")])],1),i("el-form-item",{attrs:{label:"菜单父ID",prop:"pmid"}},[i("el-input",{attrs:{placeholder:"菜单父ID"},model:{value:e.form.pmid,callback:function(t){e.$set(e.form,"pmid",t)},expression:"form.pmid"}})],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},md=[],fd={props:{editId:Number,default:null},data:function(){return{title:null,form:{menuName:null,elid:null,iconClass:null,tabId:null,tabTitle:null,tabIcon:null,iframeUrl:null,seq:null,modle:null,disabled:null,pmid:null},formRules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],elid:[{required:!0,message:"请输入元素ID",trigger:"blur"}],iconClass:[{required:!0,message:"请输入图标样式",trigger:"blur"}],tabId:[{required:!0,message:"请输入标签ID",trigger:"blur"}],tabTitle:[{required:!0,message:"请输入标签名称",trigger:"blur"}],tabIcon:[{required:!0,message:"请输入标签图标样式",trigger:"blur"}],iframeUrl:[{required:!0,message:"跳转地址URL",trigger:"blur"}],disabled:[{required:!0,message:"禁用",trigger:"blur"}],seq:[{required:!0,message:"请输入排序",trigger:"blur"}],modle:[{required:!0,message:"请选择菜单目录",trigger:"blur"}],pmid:[{required:!0,message:"请输入父菜单ID",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){t&&(console.log(e.form),e.$service.saveSysMenu(e.form,"保存成功").then(function(t){e.$emit("open-list-page")}))})},getEditData:function(){var e=this;this.$service.editSysMenu({id:this.editId}).then(function(t){Object.keys(e.form).forEach(function(i){e.form[i]="disabled"===i?t[i]+"":t[i]})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},bd=fd,gd=Object(O["a"])(bd,hd,md,!1,null,null,null),vd=gd.exports,yd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.deleteData}},[e._v("删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}}),i("el-dialog",{attrs:{title:"设置操作",visible:e.setDialogVisible},on:{"update:visible":function(t){e.setDialogVisible=t}}},[i("span",[i("el-transfer",{attrs:{data:e.sdata,titles:["待选操作","已选操作"]},on:{change:e.handleChange},model:{value:e.svalue,callback:function(t){e.svalue=t},expression:"svalue"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.setDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.setDialogVisible=!1,e.setSave()}}},[e._v("确 定")])],1)])],1)],1)},wd=[],Id={components:{ActionList:N["ActionList"],Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},setDialogVisible:!1,svalue:[],sdata:[],allData:[],setMenu:[],selectMenu:[],data1:[],data2:[],selected:[],buttonList:[],table:{props:{},header:[{label:"菜单ID",prop:"menuId"},{label:"菜单名称",prop:"menuName"},{label:"元素ID",prop:"elid"},{label:"图标样式",prop:"iconClass"},{label:"标签ID",prop:"tabId"},{label:"标签名称",prop:"tabTitle"},{label:"标签图标",prop:"tabIcon"},{label:"跳转地址URL",prop:"iframeUrl"},{label:"排序",prop:"seq"},{label:"菜单目录",prop:"modle"},{label:"禁用",prop:"disabled"},{label:"父菜单ID",prop:"pmid"},{label:"操作",fixed:"right",render:N["utils"].component.createOperationRender(this,{setData:"设置操作"})}],data:[],selected:[],selectionType:"multiple"}}},methods:{addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},deleteData:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.deleteMenuById({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.menuId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.menuId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.menuId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getSysMenuList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getSysMenuInfo:function(){var e=this;return this.$service.getMenuInfo().then(function(t){e.buttonList=t})},setData:function(e){var t=this,i=e.row;this.setDialogVisible=!0;var a={menuId:i.menuId},n=[],l=[],o=[];this.setMenu.push(["menuId",i.menuId]),this.$service.getNotMenuByRunId(a).then(function(e){t.data1=e,t.$service.getMenuByRunId(a).then(function(e){t.data2=e,t.allData=t.data1.concat(t.data2);var i={};t.allData=t.allData.reduce(function(e,t){return!i[t.runId]&&(i[t.runId]=e.push(t)),e},[]);for(var a=0;a<t.allData.length;a++)n.push({key:t.allData[a].runId,label:t.allData[a].runName});for(var r=0;r<t.data2.length;r++)l.push(t.data2[r].runId);for(var s=0;s<l.length;s++)-1==o.indexOf(l[s])&&o.push(l[s]);t.sdata=n,t.svalue=o,console.log(n),console.log(o)})})},handleChange:function(e,t,i){for(var a=[],n=[],l=0;l<e.length;l++)-1==a.indexOf(e[l])&&a.push(e[l]);for(var o=0;o<a.length;o++)n.push(["runIds",a[o]]);this.selectMenu=this.setMenu.concat(n)},setSave:function(){var e=this.selectMenu;this.$service.saveMenuRun(e,"保存成功")}},created:function(){var e=J.a.map({menuName:J.a.o.string.other("form",{component:"Input",placeholder:"菜单名称",cols:{item:3,label:0}}),elid:J.a.o.string.other("form",{component:"Input",placeholder:"元素ID",cols:{item:3,label:0}}),tabId:J.a.o.string.other("form",{component:"Input",placeholder:"标签ID",cols:{item:3,label:0}}),iframeUrl:J.a.o.string.other("form",{component:"Input",placeholder:"跳转地址URL",cols:{item:3,label:0}}),modle:J.a.o.string.other("form",{component:"Input",placeholder:"菜单目录",cols:{item:3,label:0}}),pmid:J.a.o.string.other("form",{component:"Input",placeholder:"菜单父ID",cols:{item:3,label:0}}),disabled:J.a.o.enum({"否":"0","是":"1"}).other("form",{component:"Select",placeholder:"是否禁用",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData(),this.getSysMenuInfo()}},Td=Id,kd=(i("972c"),Object(O["a"])(Td,yd,wd,!1,null,"a58205fe",null)),Sd=kd.exports,Cd={components:{SysMenuAdd:vd,SysMenuList:Sd},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},_d=Cd,Fd=Object(O["a"])(_d,dd,pd,!1,null,null,null),xd=Fd.exports,Dd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("UserConfigList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("UserConfigAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Pd=[],$d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("el-row",{attrs:{gutter:40}},[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[i("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),i("el-form-item",{attrs:{label:"所在部门",prop:"deptId"}},[i("el-select",{attrs:{placeholder:"所在部门"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}},e._l(e.departmentList,function(e){return i("el-option",{key:e.deptId+"",attrs:{label:e.deptName,value:e.deptId}})}),1)],1),i("el-form-item",{attrs:{label:"登录账号",prop:"loginName"}},[i("el-input",{attrs:{placeholder:"登录账号"},model:{value:e.form.loginName,callback:function(t){e.$set(e.form,"loginName",t)},expression:"form.loginName"}})],1),e.isShowloginPwd?i("el-form-item",{attrs:{label:"密码",prop:"loginPwd"}},[i("el-input",{attrs:{placeholder:"密码"},model:{value:e.form.loginPwd,callback:function(t){e.$set(e.form,"loginPwd",t)},expression:"form.loginPwd"}})],1):e._e(),i("el-form-item",{attrs:{label:"邮件地址",prop:"email"}},[i("el-input",{attrs:{type:"email",placeholder:"邮件地址"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),i("el-form-item",{attrs:{label:"是否可用",prop:"disabled"}},[i("el-radio",{attrs:{label:"0"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("是")]),i("el-radio",{attrs:{label:"1"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("否")])],1),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),i("el-form-item",{attrs:{label:"数据权限",prop:"dicts"}},[i("el-form-item",[i("el-checkbox-group",{model:{value:e.form.dicts,callback:function(t){e.$set(e.form,"dicts",t)},expression:"form.dicts"}},e._l(e.dictEnNameList,function(t){return i("el-checkbox",{key:t.dictId,attrs:{label:t.dictId}},[e._v(e._s(t.dictCnName))])}),1)],1)],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},Rd=[],Nd={props:{editId:Number,default:null},data:function(){return{title:null,dictEnNameList:null,departmentList:[],isShowloginPwd:!0,form:{userName:null,deptId:null,loginName:null,loginPwd:null,email:null,disabled:null,remark:null,dicts:[]},formRules:{userName:[{required:!0,message:"请输入用户名称",trigger:"blur"}],loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"}],loginPwd:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮件地址",trigger:"blur"},{type:"email",message:"邮件地址格式不正确",trigger:"blur"}]}}},methods:{userConfigBusinessType:function(){var e=this;this.$service.userConfigBusinessType().then(function(t){e.dictEnNameList=t})},submitBtn:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.userConfigSave(e.form,"保存成功").then(function(t){e.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.userConfigEdit({id:this.editId}).then(function(t){Object.keys(e.form).forEach(function(i){e.form[i]="disabled"===i?t[i]+"":t[i]})})},getDepts:function(){var e=this;return this.$service.getDepts().then(function(t){e.departmentList=t})}},created:function(){this.userConfigBusinessType(),this.getDepts(),null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.isShowloginPwd=!1,this.form.userId=this.editId,this.getEditData()):this.title="新增"}},Ld=Nd,Ad=Object(O["a"])(Ld,$d,Rd,!1,null,null,null),Vd=Ad.exports,Od=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{title:"设置用户角色",visible:e.roleDialogVisible},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[i("span",[i("el-transfer",{attrs:{data:e.roleData,titles:["待选角色","已选角色"]},on:{change:e.handleChange},model:{value:e.roleValue,callback:function(t){e.roleValue=t},expression:"roleValue"}})],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.roleDialogVisible=!1,e.add()}}},[e._v("确 定")])],1)]),i("el-dialog",{attrs:{title:"数据权限设置",width:"30%",visible:e.dataPermissionWinVisible},on:{"update:visible":function(t){e.dataPermissionWinVisible=t}}},[i("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],model:{value:e.checkedDictItems,callback:function(t){e.checkedDictItems=t},expression:"checkedDictItems"}},e._l(e.DataPermissionItems,function(t){var a=t.dictId,n=t.dictCnName;return i("el-checkbox",{key:a,staticClass:"checkItemStyle",attrs:{label:a}},[e._v("\n        "+e._s(n)+"\n      ")])}),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dataPermissionWinVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.saveProfession}},[e._v("确 定")])],1)],1)],1)},Ed=[],Md={components:{Table:N["Table"],ContentWrapper:N["ContentWrapper"]},data:function(){return{depts:{},roleData:[],roleValue:[],data1:[],user:[],roleDataSelected:null,roleDialogVisible:!1,currentUserId:null,dataPermissionWinVisible:!1,DataPermissionItems:{},checkedDictItems:[],isLoading:!1,selectedRole:[],filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"userId",width:"70"},{label:"用户名称","min-width":"120",prop:"userName",sortable:!0},{label:"登录账号",prop:"loginName",width:"110",sortable:!0},{label:"所在部门",prop:"deptName","min-width":"90"},{label:"电子邮箱",prop:"email","min-width":"160"},{label:"登录IP",prop:"loginIp",width:"130"},{label:"登录次数",prop:"loginCount"},{label:"最后登录时间",prop:"loginTime",width:"170"},{label:"是否禁用",prop:"disabled"},{label:"创建时间",prop:"dateCreate",width:"170",sortable:!0},{label:"修改时间",prop:"dateModify",width:"170",sortable:!0},{label:"备注",prop:"remark","min-width":"170"},{label:"操作",width:"200",fixed:"right",render:N["utils"].component.createOperationRender(this,{setRole:"设置角色",setData:"数据权限"})}],data:[],selected:[],selectionType:"multiple"}}},methods:(Su={addUser:function(){this.$emit("open-add-page",null)},handleRead:function(e){e.row},setRole:function(e){var t=this,i=e.row,a=i.userId,n={userId:a},l=[],o=[];this.roleDialogVisible=!0,this.user.push(["userId",a]),this.$service.getNotRolesByUserId(n).then(function(e){t.data1=e,t.$service.getRolesByUserId(n).then(function(e){null!=e&&(t.data1=t.data1.concat(e));for(var i=0;i<t.data1.length;i++)l.push({key:t.data1[i].roleId,label:t.data1[i].roleName});for(var a=0;a<e.length;a++)o.push(e[a].roleId);t.roleData=l,t.roleValue=o})})},handleChange:function(e,t,i){for(var a=[],n=0;n<e.length;n++)a.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(a)},add:function(){var e=this.selectedRole;this.$service.saveUserRoles(e,"保存成功")},setData:function(e){e.row},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.userConfigDelete({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.userId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.userId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.userId)>-1&&e.push(a),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.userConfigPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getDepts:function(){var e=this;return this.$service.getDepts().then(function(t){t.forEach(function(t){e.depts[t.deptName]=t.deptId})})},getNotRolesByUserId:function(e){var t=this;this.$service.getNotRolesByUserId({userId:e}).then(function(e){e.forEach(function(e){t.depts[e.deptName]=e.deptId})})}},Object(ee["a"])(Su,"setData",function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.row,this.currentUserId=i.userId,e.next=4,this.userConfigBusinessType(i.userId);case 4:return this.checkedDictItems=[],this.isLoading=!0,e.next=8,this.getDictCheckedByUserId(i.userId);case 8:this.isLoading=!1,this.dataPermissionWinVisible=!0;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),Object(ee["a"])(Su,"getDictCheckedByUserId",function(e){var t=this;return this.$service.getDictCheckedByUserId({userId:e}).then(function(e){t.checkedDictItems=e})}),Object(ee["a"])(Su,"userConfigBusinessType",function(e){var t=this;return this.$service.userConfigBusinessType({userId:e}).then(function(e){t.DataPermissionItems=e})}),Object(ee["a"])(Su,"saveProfession",function(){var e=this.checkedDictItems.join(",");this.$service.saveProfession({userId:this.currentUserId,dicts:e},"保存成功"),this.dataPermissionWinVisible=!1}),Su),created:function(){var e=this,t=J.a.map({userName:J.a.o.string.other("form",{component:"Input",placeholder:"用户名称",cols:{item:3,label:0}}),deptId:J.a.o.enum(this.depts).other("form",{component:"Select",placeholder:"所在部门",cols:{item:3,label:0}}),loginName:J.a.o.string.format("email").other("form",{component:"Input",placeholder:"登录账号",cols:{item:3,label:0}}),email:J.a.o.string.other("form",{component:"Input",placeholder:"电子邮箱",cols:{item:3,label:0}}),loginIp:J.a.o.string.other("form",{component:"Input",placeholder:"最后登录IP",cols:{item:3,label:0}}),disabled:J.a.o.enum({"否":"0","是":"1"}).other("form",{component:"Select",placeholder:"是否禁用",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getDepts().then(function(){e.filterSchema=t}),this.fetchData()}},Ud=Md,Bd=(i("2de8"),Object(O["a"])(Ud,Od,Ed,!1,null,"ceb0c0ee",null)),jd=Bd.exports,qd={components:{UserConfigAdd:Vd,UserConfigList:jd},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Wd=qd,zd=Object(O["a"])(Wd,Dd,Pd,!1,null,null,null),Jd=zd.exports,Hd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("ThemeInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():i("ThemeInfoAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Gd=[],Kd=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{staticClass:"content"},[i("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[i("div",{staticClass:"btns"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),i("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),i("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),i("el-dialog",{attrs:{title:"大图预览",visible:e.onclickPictureVisible,width:"1200px"},on:{"update:visible":function(t){e.onclickPictureVisible=t}}},[i("img",{attrs:{src:e.URL,width:"1100px"}})])],1)},Yd=[],Xd={components:{ContentWrapper:N["ContentWrapper"],Table:N["Table"]},data:function(){var e=this;return{URL:"",onclickPictureVisible:!1,filterSchema:null,filter:{sort:void 0,order:void 0},pagination:{currentPage:1,pageSize:10},selected:[],table:{props:{},data:[],header:[{label:"ID",prop:"themeId",sortable:!0},{label:"主题名称",prop:"themeName",sortable:!0,render:function(t,i){var a=i.row;return t(S["Button"],{props:{type:"success"},on:{click:function(){return e.themeInfoPreview(a.themeId)}}},a.themeName)}},{label:"主题品牌",prop:"themeBrand",sortable:!0,formatter:function(e){return"Coocaa"===e.themeBrand?"创维酷开":"Other"===e.themeBrand?"全部":void 0}},{label:"系统默认",prop:"systemDefault",sortable:!0,formatter:function(e){var t=["否","是"];return t[e.systemDefault]}},{label:"状态",prop:"themeStatus",sortable:!0,formatter:function(e){var t=["下架","上架","草稿","待审核","审核通过","审核不通过"];return t[e.themeStatus]}},{label:"主题当前版本",prop:"currentVersion",sortable:!0},{label:"主题预览图",prop:"previewImgUrl",sortable:!0,render:function(t,i){var a=i.row;if(a.previewImgUrl)return t("img",{attrs:{src:a.previewImgUrl,width:"100px",height:"45px",class:"imgs"},on:{click:function(){e.URL=a.previewImgUrl,e.onclickPictureVisible=!0}}})}},{label:"待审核副本",prop:"duplicateVersion",sortable:!0,render:function(t,i){var a=i.row;if(a.duplicateVersion)return t(S["Button"],{props:{type:"success"},on:{click:function(){return e.duplicatePreview(a.themeId,a.currentVersion)}}},a.duplicateVersion)}},{label:"原价(元)",prop:"price",sortable:!0,formatter:function(e){return e.chargeType?e.price:"免费"}},{label:"折扣价(元)",prop:"discountPrice",sortable:!0,formatter:function(e){return e.chargeType?e.discountPrice:"免费"}},{label:"更新时间",prop:"lastUpdateDate",sortable:!0},{label:"更新人",prop:"modifierName",sortable:!0}],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.themeInfoPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={},this.fetchData()},addUser:function(){this.$emit("open-add-page")},editData:function(){},batchDel:function(){var e=this.selected.join(",");this.$service.themeInfoRemove({id:e})},handleRowSelectionAdd:function(e){this.selected.push(e.themeId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.themeId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,i,a){return t.indexOf(i.themeId)>-1&&e.push(a),e},[])},themeInfoPreview:function(e){this.$service.themeInfoDetail({id:e}).then(function(e){console.log("预览数据",e)})},duplicatePreview:function(e,t){this.$service.themeInfoDetail({id:e,version:t}).then(function(e){console.log("预览数据",e)})}},created:function(){var e=J.a.map({themeId:J.a.o.string.other("form",{component:"Input",placeholder:"主题ID"}),themeName:J.a.o.string.other("form",{component:"Input",placeholder:"主题名称"}),currentVersion:J.a.o.string.other("form",{component:"Input",placeholder:"当前版本"}),themeStatus:J.a.o.enum({"待审核":"3","审核通过":"4","审核不通过":"5"}).other("form",{component:"Select",placeholder:"状态"})}).other("form",{cols:{item:3,label:0},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Zd=Xd,Qd=(i("a436"),Object(O["a"])(Zd,Kd,Yd,!1,null,"5fdb5d98",null)),ep=Qd.exports,tp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[i("div",{staticClass:"split-bar"},[i("i",{staticClass:"el-icon-edit"},[e._v("基本信息")])]),i("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"主题名称",prop:"themeName"}},[i("el-input",{staticStyle:{width:"200px"},model:{value:e.form.themeName,callback:function(t){e.$set(e.form,"themeName",t)},expression:"form.themeName"}})],1),i("el-form-item",{attrs:{label:"收费类型"}},[i("el-radio-group",{model:{value:e.form.chargeType,callback:function(t){e.$set(e.form,"chargeType",t)},expression:"form.chargeType"}},[i("el-radio",{attrs:{label:""}},[e._v("免费")]),i("el-radio",{attrs:{label:"pay"}},[e._v("付费")]),i("el-radio",{attrs:{label:"VIPfree"}},[e._v("VIP免费")])],1)],1),""!==e.form.chargeType?i("div",{staticClass:"priceInput"},[i("el-form-item",{attrs:{label:"价格"}},[i("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v("元\n      ")],1),i("el-form-item",{attrs:{label:"折扣价"}},[i("el-input",{model:{value:e.form.discountPrice,callback:function(t){e.$set(e.form,"discountPrice",t)},expression:"form.discountPrice"}}),e._v("元\n      ")],1)],1):e._e(),i("el-form-item",{attrs:{label:"主题品牌"}},[i("el-radio-group",{model:{value:e.form.themeBrand,callback:function(t){e.$set(e.form,"themeBrand",t)},expression:"form.themeBrand"}},[i("el-radio",{attrs:{label:"Coocaa"}},[e._v("创维酷开")]),i("el-radio",{attrs:{label:"Other"}},[e._v("全部")])],1)],1),i("el-form-item",{attrs:{label:"皮肤APK"}},[i("ThemeFileUpload",{attrs:{accept:"application/vnd.android.package-archive",fileCount:"1"},on:{"pic-data":e.handleApk,handleRemove:function(t){e.form.themeDownUrl="",e.form.themeMd5=""}}})],1),i("el-form-item",{attrs:{label:"主题预览图"}},[i("ThemeFileUpload",{attrs:{accept:"image/*",fileCount:"1"},on:{"pic-data":e.handlePreviewImg,handleRemove:function(t){e.form.previewImgUrl=""}}})],1),i("el-form-item",{attrs:{label:"主题缩略图"}},[i("ThemeFileUpload",{attrs:{accept:"image/*",fileCount:"1"},on:{"pic-data":e.handleThumbImg,handleRemove:function(t){e.form.thumbImgUrl=""}}})],1),i("el-form-item",{attrs:{label:"图标库"}},[i("ThemeFileUpload",{attrs:{accept:"application/zip",fileCount:"1",zipType:"icon"},on:{"pic-data":e.handlePictureEntitys,handleRemove:function(t){e.form.pictureEntitys=[]}}})],1),i("div",{staticClass:"icon-list"},e._l(e.form.pictureEntitys,function(t,a){return i("div",{key:a,staticClass:"icon-list__item"},[i("img",{staticClass:"icon-list__item-img--pictureEntitys",attrs:{src:t.pictureUrl}}),i("span",{staticClass:"icon-list__item-text"},[e._v(e._s(a+1))])])}),0),i("el-form-item",{attrs:{label:"指定背景图片"}},[i("ThemeFileUpload",{attrs:{accept:"application/zip",fileCount:"1",zipType:"tabBg"},on:{"pic-data":e.handleTabBgEntitys,handleRemove:function(t){e.form.tabBgEntitys=[]}}})],1),i("div",{staticClass:"icon-list"},e._l(e.form.tabBgEntitys,function(t,a){return i("div",{key:a,staticClass:"icon-list__item"},[i("img",{staticClass:"icon-list__item-img--tabBgEntitys",attrs:{src:t.pictureUrl}}),i("span",{staticClass:"icon-list__item-text"},[e._v(e._s(a+1))])])}),0)],1),i("div",{staticClass:"btn-save"},[i("el-button",{attrs:{type:"primary"},on:{click:e.btnSave}},[e._v("提交审核")]),i("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.$emit("go-back")}}},[e._v("关闭")])],1)],1)},ip=[],ap=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Upload",{ref:"upload",attrs:{multiple:!0,accept:e.accept},on:{upload:e.handleUpload},scopedSlots:e._u([{key:"preview",fn:function(t){var a=t.fileList;return i("div",{staticClass:"upload-pic-list"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("点击选择文件")]),e._l(a,function(t){return i("div",{key:t.id,staticClass:"upload-pic-list__item"},["error"===t.status?i("div",{staticClass:"upload-pic-list__error"},[e._v("上传失败: "+e._s(t.message))]):e._e(),"uploading"===t.status?i("div",{staticClass:"upload-pic-list__progress"},[i("el-progress",{attrs:{width:100,type:"circle",percentage:t.percentage}})],1):i("div",{staticClass:"upload-pic-list__success"},[i("img",{staticClass:"upload-pic-list__success__img",attrs:{src:t.dataUrl}}),"uploading"!==t.status?i("i",{staticClass:"upload-pic-list__remove el-icon el-icon-error",attrs:{title:"移除"},on:{click:function(i){return e.handleRemove(t)}}}):e._e(),i("div",{staticClass:"diy-file-name"},[e._v(e._s(t.name))]),"success"===t.status?i("div",{staticClass:"diy-bar"},[i("span",{staticClass:"diy-bar__text"},[e._v("上传完成")])]):e._e()])])})],2)}}])})},np=[],lp={components:{Upload:N["Upload"]},props:{accept:{type:String},fileCount:{type:String},zipType:{type:String,default:function(){return"none"}}},data:function(){return{fileNum:0,picData:{}}},methods:{handleUpload:function(e,t){var i=this,a=this.$refs.upload.fileList,n=!1;if(a.map(function(t){t.name!==e.name||(n=!0)}),n)return this.$message("该资源已存在"),void a.pop();if(a[a.length-1].name=e.name,this.fileNum>=parseInt(this.fileCount))return this.$message("上传文件数量超过限制,最大上传文件个数为"+this.fileCount),void a.pop();this.fileNum++,this.fileName=e.name;var l=this.accept;if(/image/.test(l))this.$service.uploadImage({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){0==e.code?(t.status="success",i.picData.url=e.data[0].url,i.$emit("pic-data",i.picData)):(t.status="error",t.message=e.msg)}).catch(function(){t.status="error",t.message="网络错误"});else if(/vnd.android.package-archive/.test(l))this.$service.uploadApk({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){0==e.code?(t.status="success",i.picData.url=e.data.url,i.picData.fileMd5=e.data.fileMd5,i.$emit("pic-data",i.picData)):(t.status="error",t.message=e.msg)}).catch(function(){t.status="error",t.message="网络错误"});else if(/zip/.test(l)){var o=this.zipType;this.$service.uploadZip({file:e,type:o,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){0==e.code?(t.status="success",i.picData=e.data,i.$emit("pic-data",i.picData)):(t.status="error",t.message=e.msg)}).catch(function(){t.status="error",t.message="网络错误"})}},handleRemove:function(e){this.$refs.upload.handleRemove(e),this.fileNum--,this.$emit("handleRemove")}},created:function(){}},op=lp,rp=(i("6065"),Object(O["a"])(op,ap,np,!1,null,"a9f0b3c8",null)),sp=rp.exports,cp={props:{editId:Number,default:null},components:{ThemeFileUpload:sp},data:function(){return{form:{themeName:"",chargeType:"",price:"",discountPrice:"",themeBrand:"Coocaa",themeDownUrl:"",previewImgUrl:"",thumbImgUrl:"",systemDefault:"0",themeCode:"",themeVersion:"",themeMd5:"",pictureEntitys:[],tabBgEntitys:[]},rules:{themeName:[{required:!0,message:"请输入主题名称",trigger:"blur"}]}}},methods:{btnSave:function(){var e=this.form;""===e.chargeType&&(e.price="0",e.discountPrice="0")},handleApk:function(e){this.form.themeDownUrl=e.url,this.form.themeMd5=e.fileMd5},handlePreviewImg:function(e){this.form.previewImgUrl=e.url},handleThumbImg:function(e){this.form.thumbImgUrl=e.url},handlePictureEntitys:function(e){this.form.pictureEntitys=this.EntitysPicUp(e)},handleTabBgEntitys:function(e){this.form.tabBgEntitys=this.EntitysPicUp(e)},EntitysPicUp:function(e){return e.reduce(function(e,t){var i={pictureName:t.originFileName,pictureUrl:t.url,pictureResolution:t.resolution};return e.push(i),e},[])}},created:function(){this.editId?this.title="编辑页面":this.title="新增页面"}},up=cp,dp=(i("b7a6"),Object(O["a"])(up,tp,ip,!1,null,"ca8697f2",null)),pp=dp.exports,hp={components:{ThemeInfoList:ep,ThemeInfoAdd:pp},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},mp=hp,fp=Object(O["a"])(mp,Hd,Gd,!1,null,"2fb7bc56",null),bp=fp.exports,gp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},vp=[],yp={},wp=yp,Ip=Object(O["a"])(wp,gp,vp,!1,null,"0792af46",null),Tp=Ip.exports,kp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},Sp=[],Cp={},_p=Cp,Fp=Object(O["a"])(_p,kp,Sp,!1,null,"005e1ca8",null),xp=Fp.exports,Dp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},Pp=[],$p={},Rp=$p,Np=Object(O["a"])(Rp,Dp,Pp,!1,null,"22e9c864",null),Lp=Np.exports,Ap=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},Vp=[],Op={},Ep=Op,Mp=Object(O["a"])(Ep,Ap,Vp,!1,null,"61fd7fe6",null),Up=Mp.exports,Bp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",[a("div",{staticClass:"ad-upsert"},[a("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{staticClass:"detail-ad-wrapper",attrs:{label:"详情页广告位",name:"detail"}},[a("img",{staticClass:"detail-ad-1-2",attrs:{src:i("58c5")}}),a("img",{staticClass:"detail-ad-3",attrs:{src:i("580c")}}),a("el-form",{ref:"form",staticClass:"detail-form",attrs:{"label-width":"150px"}},[e.adSwitches.middle?a("cc-var",{attrs:{ad:e.adSwitches.middle},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{staticClass:"detail-ad__1",attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,4110040685)}):e._e(),e.adSwitches.bottom_serial?a("cc-var",{attrs:{ad:e.adSwitches.bottom_serial},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{staticClass:"detail-ad__2",attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3558405422)}):e._e(),e.adSwitches.bottom_movie?a("cc-var",{attrs:{ad:e.adSwitches.bottom_movie},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{staticClass:"detail-ad__3",attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,4197844207)}):e._e()],1)],1),a("el-tab-pane",{attrs:{label:"视频播放广告",name:"video"}},[a("div",{staticClass:"video-ad-wrapper"},[a("p",{staticClass:"ad-title"},[e._v("前贴广告A"),a("span",[e._v("(加在腾讯、爱奇艺前贴广告之前的，酷开前贴广告)")])]),a("el-form",{attrs:{inline:!0,"label-width":"150px","label-position":"left"}},[e.adSwitches.front_detail_a?a("cc-var",{attrs:{ad:e.adSwitches.front_detail_a},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_loop_a?a("cc-var",{attrs:{ad:e.adSwitches.front_loop_a},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_topic_a?a("cc-var",{attrs:{ad:e.adSwitches.front_topic_a},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e()],1)],1),a("div",{staticClass:"video-ad-wrapper"},[a("p",{staticClass:"ad-title"},[e._v("前贴广告B"),a("span",[e._v("(仅针对腾讯、爱奇艺不播前贴广告的场景，才播放我们自己的前贴广告B)")])]),a("el-form",{attrs:{inline:!0,"label-width":"150px","label-position":"left"}},[e.adSwitches.front_detail_b?a("cc-var",{attrs:{ad:e.adSwitches.front_detail_b},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_loop_b?a("cc-var",{attrs:{ad:e.adSwitches.front_loop_b},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_topic_b?a("cc-var",{attrs:{ad:e.adSwitches.front_topic_b},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e()],1)],1),a("div",{staticClass:"video-ad-wrapper"},[a("p",{staticClass:"ad-title"},[e._v("中插广告")]),a("el-form",{attrs:{inline:!0,"label-width":"150px","label-position":"left"}},[e.adSwitches.middle_detail?a("cc-var",{attrs:{ad:e.adSwitches.middle_detail},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.middle_loop?a("cc-var",{attrs:{ad:e.adSwitches.middle_loop},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.middle_topic?a("cc-var",{attrs:{ad:e.adSwitches.middle_topic},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ad;return[a("el-form-item",{attrs:{label:i.label}},[a("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:i.value},on:{input:function(t){return e.handleToggleSwitch(i)}}})],1)]}}],null,!1,3495716613)}):e._e()],1)],1)])],1)],1)])},jp=[],qp={props:["element"],render:function(e){return e(this.element||"div",{class:"cc-var"},this.$scopedSlots.default(this.$vnode.data.attrs))}},Wp=qp,zp=Object(O["a"])(Wp,Cu,_u,!1,null,null,null),Jp=zp.exports,Hp={components:{"cc-var":Jp},data:function(){return{adSwitches:{},activeTab:"detail"}},methods:{handleToggleSwitch:function(e){var t=this;this.$confirm("确定"+(e.value?"关闭":"开启")+"【"+e.label+"】的广告投放权限吗？").then(function(){t.$service.advertisementUpsert({id:e.id,status:e.value?0:1},"操作成功").then(function(t){e.value=!e.value})}).catch(function(){})},getLabel:function(e,t){return this.adSwitches[e+t].label},getSwitches:function(){var e=this;this.$service.advertisementList().then(function(t){var i={};t.rows.forEach(function(e){i[e.remark]={id:e.id,label:e.name,key:e.remark,value:!!e.status}}.bind(e)),e.$set(e,"adSwitches",i)})}},created:function(){this.getSwitches()}},Gp=Hp,Kp=(i("561d"),Object(O["a"])(Gp,Bp,jp,!1,null,null,null)),Yp=Kp.exports,Xp=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-container",{staticClass:"layout"},[i("div",{class:e.isCollapseMenu?"aside__menu aside__menu_collapse":"aside__menu"},[i("div",{staticClass:"left-aside"},[i("el-button",{staticClass:"collpase-btn",attrs:{type:"text",icon:e.isCollapseMenu?"el-icon-cc-indent":"el-icon-cc-outdent"},on:{click:e.toggleMenu}}),i("Menu",{attrs:{"default-active":e.$route.name,items:e.defaultMenu,isCollapse:e.isCollapseMenu}})],1)]),i("el-container",{attrs:{direction:"vertical"}},[i("el-header",{staticClass:"header"},[i("div",{staticClass:"logo",attrs:{direction:"vertical"}},[i("div",{staticClass:"logo__img"},[i("i",{staticClass:"el-icon-location"}),e._v(" 内容运营平台\n        ")])]),i("span",[e._v("  /")]),i("Breadcrumb",{staticClass:"breadcrumb",attrs:{items:e.breadcrumb}}),i("div",{staticClass:"user-info"},[i("el-dropdown",{attrs:{"hide-on-click":!1},on:{command:e.handleDropdownCommand}},[i("span",{staticClass:"el-dropdown-link"},[i("i",{staticClass:"el-icon-cc-user"}),e._v("\n            "+e._s(e.$appState.user.name)+"\n            "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1),i("div",{staticClass:"system-setting",on:{click:function(t){e.isShowSetting=!e.isShowSetting}}},[i("i",{staticClass:"el-icon-setting"})])],1),i("TagNav",{directives:[{name:"show",rawName:"v-show",value:e.isShowTagNav,expression:"isShowTagNav"}],ref:"tag",attrs:{"init-tags":e.initTags}}),i("el-main",[i("keep-alive",[e.isKeepAlive?i("router-view"):e._e()],1),e.isKeepAlive?e._e():i("router-view")],1)],1),i("transition",{attrs:{name:"el-zoom-in-right"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSetting,expression:"isShowSetting"}],staticClass:"setting_side transition-box"},[i("div",{staticClass:"tagnav_switch"},[e._v("\n        标签导航\n        "),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.isShowTagNav,callback:function(t){e.isShowTagNav=t},expression:"isShowTagNav"}}),i("br"),i("el-button",{staticClass:"modifyPwd",attrs:{type:"primary"},on:{click:e.modifyPwd}},[e._v("修改密码")])],1)])]),i("el-dialog",{attrs:{title:"修改密码",visible:e.modifyDialogVisible},on:{"update:visible":function(t){e.modifyDialogVisible=t}}},[i("span",[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"旧密码",prop:"oldpwd"}},[i("el-input",{attrs:{placeholder:"旧密码"},model:{value:e.form.oldpwd,callback:function(t){e.$set(e.form,"oldpwd",t)},expression:"form.oldpwd"}})],1),i("el-form-item",{attrs:{label:"新密码",prop:"newpwd"}},[i("el-input",{attrs:{placeholder:"旧密码"},model:{value:e.form.newpwd,callback:function(t){e.$set(e.form,"newpwd",t)},expression:"form.newpwd"}})],1),i("el-form-item",{attrs:{label:"确认新密码",prop:"newpwd2"}},[i("el-input",{attrs:{placeholder:"旧密码"},model:{value:e.form.newpwd2,callback:function(t){e.$set(e.form,"newpwd2",t)},expression:"form.newpwd2"}})],1)],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.modifyDialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.modifyPwdSave}},[e._v("确 定")])],1)])],1)},Zp=[],Qp=(i("5118"),{components:{Menu:N["Menu"],Breadcrumb:N["Breadcrumb"],TagNav:N["TagNav"]},data:function(){return{breadcrumb:[],isCollapseMenu:!1,isShowSetting:!1,isShowTagNav:!0,modifyDialogVisible:!1,form:{oldpwd:null,newpwd:null,newpwd2:null},formRules:{oldpwd:[{required:!0,message:"请输入原始密码",trigger:"blur"}],newpwd:[{required:!0,message:"请输入新密码",trigger:"blur"}],newpwd2:[{required:!0,validator:this.validatePass2,trigger:"blur"}]}}},computed:{isKeepAlive:function(){var e=this.$route.meta;return e&&!1!==e.isCache},initTags:function(){return this.$appState.$get("tags")||[]},defaultMenu:function(){var e=this.$router.options.routes.find(function(e){return"/"===e.path});function t(e){var i=e.name,a=e.meta,n=void 0===a?{}:a,l=e.children;if(!n.hideInMenu){var o={title:n.title,icon:n.icon,route:i};return l&&(o.children=l.reduce(function(e,i){var a=t(i);return a&&e.push(a),e},[])),o}}var i=t(e).children;return i}},methods:{modifyPwd:function(){this.modifyDialogVisible=!0},modifyPwdSave:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.modifyPwd(e.form,"修改成功").then(function(t){e.modifyDialogVisible=!1,e.$logout().then(function(){e.$router.push({name:"login"})})})})},validatePass2:function(e,t,i){""===t?i(new Error("请再次输入密码")):t!=this.form.newpwd?i(new Error("两次输入密码不一致！")):i()},handleDropdownCommand:function(e){var t=this;"logout"===e&&this.$logout().then(function(){t.$router.push({name:"login"})})},toggleMenu:function(){var e=!this.isCollapseMenu;this.$appState.$set("isCollapseMenu",e),this.isCollapseMenu=e},saveTags:function(){var e=this.$refs.tag.tags;this.$appState.$set("tags",e)}},created:function(){var e=this;this.isCollapseMenu=!!this.$appState.$get("isCollapseMenu"),this.$bus.$on("breadcrumb-change",function(t){e.breadcrumb=t})},mounted:function(){window.addEventListener("beforeunload",this.saveTags)},destroyed:function(){window.removeEventListener("beforeunload",this.saveTags)}}),eh=Qp,th=(i("38b6"),Object(O["a"])(eh,Xp,Zp,!1,null,null,null)),ih=th.exports,ah={broadcastBlock:Vt,multiFunctionBlock:Pi,sysPlugin:pa,albumPannelInfo:Fa,markPanel:Za,pannelInfo:gn,privatePannelInfo:Rn,commonOnclickInfo:Yn,globalCornerIcon:Ml,globalCornerIconType:ao,globalPicture:To,layoutInfo:ur,commonAlbumPanneleUser:br,commonPannelUser:Tr,commonTabUser:xr,dataSync:Lr,slaveBizErrLog:Ur,slaveSecondAudit:Jr,actDmpGroupInfo:Kr,homepageInfo:hs,policyConf:ys,testPolicyConf:Cs,businessTab:qs,filmDetailPage:hc,tabInfo:$c,videoContent:qc,adminMasterControl:Kc,dict:hu,baDept:Lu,roleConfig:Zu,sysLogLogin:nd,sysLogOp:ud,sysMenu:xd,userConfig:Jd,themeInfo:bp,msn:Tp,myDrafts:xp,myReviewTasks:Lp,mySubmitTasks:Up,filmDetailAdBit:Yp};function nh(e){return e.$service.getMenu().then(function(t){0===t.length&&e.$logout().then(function(){e.$router.push({name:"login"})});var i=[];t.forEach(function(e){var t={};t.name=t.path=e.id,t.component=U,t.meta={title:e.title,icon:e.icon},t.children=[],"undefined"!==typeof e.children&&e.children.forEach(function(e){t.children.push({name:e.id,path:e.attributes.iframeUrl,component:ah[e.id],meta:{title:e.text,icon:e.iconCls,tagId:e.id}})}),i.push(t)});var a=[];a.push({path:"/",component:ih,children:i}),e.$router.options.routes=a,e.$router.addRoutes(a)})}k["default"].prototype.$isLoggedIn=Object(L["a"])(regeneratorRuntime.mark(function e(){var t,i,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$appState,!t.user){e.next=3;break}return e.abrupt("return");case 3:if(i=t.$get("user"),!i){e.next=7;break}return this.$service.service.state=i,e.abrupt("return",nh(this).then(function(e){a.$appState.user=i}));case 7:throw{};case 8:case"end":return e.stop()}},e,this)})),k["default"].prototype.$login=function(){var e=Object(L["a"])(regeneratorRuntime.mark(function e(t){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$service.login(t).then(function(e){var a={name:t.username,password:t.password};return i.$service.service.state=a,i.$appState.user=a,i.$appState.$set("user",a),nh(i).then(function(e){})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),k["default"].prototype.$logout=Object(L["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$appState.user=void 0,this.$appState.$remove("user");case 2:case"end":return e.stop()}},e,this)}));var lh=i("6bde");i("4917");k["default"].prototype.$isAllowEdit=function(e){return 1===e.length||(this.$message("请选择一条数据进行编辑"),!1)},k["default"].prototype.$isAllowDelete=function(e){return 0!==e.length||(this.$message("请选择数据后进行操作"),!1)},k["default"].prototype.$numToAuditStatus=function(e){var t="";if("number"===typeof e)switch(e){case 0:t="下架";break;case 1:t="上架";break;case 2:t="草稿";break;case 3:t="待审核";break;case 4:t="审核通过";break;case 5:t="审核不通过";break;case 6:t="审核中";break;case 7:t="审核通过未上线";break;case 9:t="待二次审核";break;default:t="未知"}return t},k["default"].prototype.$regParenthesesContent=function(e){return e.match(/([^\(\)]+)(?=\))/g)},k["default"].prototype.deepClone=function(e){var t,i=this;switch(Object(lh["a"])(e)){case"undefined":break;case"string":t=e+"";break;case"number":t=e-0;break;case"boolean":t=e;break;case"object":if(null===e)t=null;else if(e instanceof Array){t=[];for(var a=0,n=e.length;a<n;a++)t.push(i.deepClone(e[a]))}else for(var l in t={},e)t[l]=i.deepClone(e[l]);break;default:t=e;break}return t};var oh=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"content-card"},[void 0!==e.title?i("div",{staticClass:"content-card__header"},[e._v("\n        "+e._s(e.title)+"\n        "),i("div",{staticClass:"actions"},[e._t("actions",[i("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("go-back")}}},[e._v("返回")])])],2)]):e._e(),i("div",{staticClass:"content-card__main"},[e._t("default")],2)])},rh=[],sh={props:["title"]},ch=sh,uh=(i("886e"),Object(O["a"])(ch,oh,rh,!1,null,"1399a9d3",null)),dh=uh.exports;k["default"].use(C.a,{size:"small",zIndex:3e3}),k["default"].use(F.a),k["default"].use(C.a),k["default"].use(R.a),k["default"].component("GateSchemaForm",N["GateSchemaForm"]),k["default"].component("ContentCard",dh);var ph=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},hh=[],mh={name:"app"},fh=mh,bh=Object(O["a"])(fh,ph,hh,!1,null,null,null),gh=bh.exports,vh=i("8c4f"),yh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{margin:"auto"}},[a("el-col",{staticClass:"login-form",attrs:{span:6,offset:9}},[a("el-col",{staticClass:"login-logo"},[a("img",{attrs:{src:i("cf05")}})]),a("GateSchemaForm",{ref:"loginForm",attrs:{schema:e.formSchema},on:{submit:e.handleLogin},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),a("div",{attrs:{id:"verifyCode"}},[a("el-input",{attrs:{placeholder:"验证码"},model:{value:e.user.valicode,callback:function(t){e.$set(e.user,"valicode",t)},expression:"user.valicode"}}),a("img",{attrs:{src:e.codeUrl,alt:"验证码"},on:{click:e.updateValicode}})],1),a("el-button",{staticClass:"login-form__btn",attrs:{type:"primary"},on:{click:function(t){return e.$refs.loginForm.handleSubmit()}}},[e._v("登 录")])],1),a("div",{staticStyle:{width:"100%",height:"700px"},attrs:{id:"container"}},[a("div",{attrs:{id:"anitOut"}})])],1)},wh=[],Ih=(i("8449"),i("1157")),Th=i.n(Ih),kh=(i("6c7b"),i("63d9"),window.CAV={FRONT:0,BACK:1,DOUBLE:2,SVGNS:"http://www.w3.org/2000/svg"});function Sh(){Th()("body").css("overflow","hidden"),Th()(function(){if(Th()("#container").css({width:Th()(window).width(),height:Th()(window).height()}),Th()(window).bind("resize",function(){Th()("#container").css({width:Th()(window).width(),height:Th()(window).height()})}),!window.ActiveXObject&&document.createElement("canvas").getContext){var e,t,i,a,n,l,o,r=function(){s(),u(),d(),p(),g(),h(_.offsetWidth,_.offsetHeight),m()},s=function(){o=new CAV.CanvasRenderer,c(T.renderer)},c=function(e){switch(t&&F.removeChild(t.element),e){case I:t=o;break}t.setSize(_.offsetWidth,_.offsetHeight),F.appendChild(t.element)},u=function(){i=new CAV.Scene},d=function(){var e,o;for(i.remove(a),t.clear(),n=new CAV.Plane(y.width*t.width,y.height*t.height,y.segments,y.slices),l=new CAV.Material(y.ambient,y.diffuse),a=new CAV.Mesh(n,l),i.add(a),e=n.vertices.length-1;e>=0;e--)o=n.vertices[e],o.anchor=CAV.Vector3.clone(o.position),o.step=CAV.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),o.time=Math.randomInRange(0,Math.PIM2)},p=function(){var e,a;for(e=i.lights.length-1;e>=0;e--)a=i.lights[e],i.remove(a);for(t.clear(),e=0;e<w.count;e++)a=new CAV.Light(w.ambient,w.diffuse),a.ambientHex=a.ambient.format(),a.diffuseHex=a.diffuse.format(),i.add(a),a.mass=Math.randomInRange(10,100),a.velocity=CAV.Vector3.create(),a.acceleration=CAV.Vector3.create(),a.force=CAV.Vector3.create()},h=function(e,i){t.setSize(e,i),CAV.Vector3.set(S,t.halfWidth,t.halfHeight),d()},m=function t(){e=Date.now()-k,f(),b(),requestAnimationFrame(t)},f=function(){var t,a,l,o,r,s,c,u=y.depth/2;for(CAV.Vector3.copy(w.bounds,S),CAV.Vector3.multiplyScalar(w.bounds,w.xyScalar),CAV.Vector3.setZ(C,w.zOffset),o=i.lights.length-1;o>=0;o--){r=i.lights[o],CAV.Vector3.setZ(r.position,w.zOffset);var d=Math.clamp(CAV.Vector3.distanceSquared(r.position,C),w.minDistance,w.maxDistance),p=w.gravity*r.mass/d;CAV.Vector3.subtractVectors(r.force,C,r.position),CAV.Vector3.normalise(r.force),CAV.Vector3.multiplyScalar(r.force,p),CAV.Vector3.set(r.acceleration),CAV.Vector3.add(r.acceleration,r.force),CAV.Vector3.add(r.velocity,r.acceleration),CAV.Vector3.multiplyScalar(r.velocity,w.dampening),CAV.Vector3.limit(r.velocity,w.minLimit,w.maxLimit),CAV.Vector3.add(r.position,r.velocity)}for(s=n.vertices.length-1;s>=0;s--)c=n.vertices[s],t=Math.sin(c.time+c.step[0]*e*y.speed),a=Math.cos(c.time+c.step[1]*e*y.speed),l=Math.sin(c.time+c.step[2]*e*y.speed),CAV.Vector3.set(c.position,y.xRange*n.segmentWidth*t,y.yRange*n.sliceHeight*a,y.zRange*u*l-u),CAV.Vector3.add(c.position,c.anchor);n.dirty=!0},b=function(){t.render(i)},g=function(){window.addEventListener("resize",v)},v=function(e){h(_.offsetWidth,_.offsetHeight),b()},y={width:1.5,height:1.5,depth:10,segments:12,slices:6,xRange:.8,yRange:.1,zRange:1,ambient:"#481906",diffuse:"#FFFFFF",speed:2e-4},w={count:2,xyScalar:1,zOffset:100,ambient:"#722605",diffuse:"#923109",speed:.001,gravity:1200,dampening:.95,minLimit:10,maxLimit:null,minDistance:20,maxDistance:400,autopilot:!1,draw:!1,bounds:CAV.Vector3.create(),step:CAV.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1))},I="canvas",T={renderer:I},k=Date.now(),S=CAV.Vector3.create(),C=CAV.Vector3.create(),_=document.getElementById("container"),F=document.getElementById("anitOut");r()}else alert("发生错误，请重试！")})}kh.Array="function"===typeof Float32Array?Float32Array:Array,kh.Utils={isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var i=(new Date).getTime(),a=Math.max(0,16-(i-e)),n=window.setTimeout(function(){t(i+a)},a);return e=i+a,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),Math.PIM2=2*Math.PI,Math.PID2=Math.PI/2,Math.randomInRange=function(e,t){return e+(t-e)*Math.random()},Math.clamp=function(e,t,i){return e=Math.max(e,t),Math.min(e,i)},kh.Vector3={create:function(e,t,i){var a=new kh.Array(3);return this.set(a,e,t,i),a},clone:function(e){var t=this.create();return this.copy(t,e),t},set:function(e,t,i,a){return e[0]=t||0,e[1]=i||0,e[2]=a||0,this},setX:function(e,t){return e[0]=t||0,this},setY:function(e,t){return e[1]=t||0,this},setZ:function(e,t){return e[2]=t||0,this},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],this},add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],this},addVectors:function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],this},addScalar:function(e,t){return e[0]+=t,e[1]+=t,e[2]+=t,this},subtract:function(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],this},subtractVectors:function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],this},subtractScalar:function(e,t){return e[0]-=t,e[1]-=t,e[2]-=t,this},multiply:function(e,t){return e[0]*=t[0],e[1]*=t[1],e[2]*=t[2],this},multiplyVectors:function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],this},multiplyScalar:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,this},divide:function(e,t){return e[0]/=t[0],e[1]/=t[1],e[2]/=t[2],this},divideVectors:function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],this},divideScalar:function(e,t){return 0!==t?(e[0]/=t,e[1]/=t,e[2]/=t):(e[0]=0,e[1]=0,e[2]=0),this},cross:function(e,t){var i=e[0],a=e[1],n=e[2];return e[0]=a*t[2]-n*t[1],e[1]=n*t[0]-i*t[2],e[2]=i*t[1]-a*t[0],this},crossVectors:function(e,t,i){return e[0]=t[1]*i[2]-t[2]*i[1],e[1]=t[2]*i[0]-t[0]*i[2],e[2]=t[0]*i[1]-t[1]*i[0],this},min:function(e,t){return e[0]<t&&(e[0]=t),e[1]<t&&(e[1]=t),e[2]<t&&(e[2]=t),this},max:function(e,t){return e[0]>t&&(e[0]=t),e[1]>t&&(e[1]=t),e[2]>t&&(e[2]=t),this},clamp:function(e,t,i){return this.min(e,t),this.max(e,i),this},limit:function(e,t,i){var a=this.length(e);return null!==t&&a<t?this.setLength(e,t):null!==i&&a>i&&this.setLength(e,i),this},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},normalise:function(e){return this.divideScalar(e,this.length(e))},negate:function(e){return this.multiplyScalar(e,-1)},distanceSquared:function(e,t){var i=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return i*i+a*a+n*n},distance:function(e,t){return Math.sqrt(this.distanceSquared(e,t))},lengthSquared:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},length:function(e){return Math.sqrt(this.lengthSquared(e))},setLength:function(e,t){var i=this.length(e);return 0!==i&&t!==i&&this.multiplyScalar(e,t/i),this}},kh.Vector4={create:function(e,t,i){var a=new kh.Array(4);return this.set(a,e,t,i),a},set:function(e,t,i,a,n){return e[0]=t||0,e[1]=i||0,e[2]=a||0,e[3]=n||0,this},setX:function(e,t){return e[0]=t||0,this},setY:function(e,t){return e[1]=t||0,this},setZ:function(e,t){return e[2]=t||0,this},setW:function(e,t){return e[3]=t||0,this},add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],this},multiplyVectors:function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],this},multiplyScalar:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,this},min:function(e,t){return e[0]<t&&(e[0]=t),e[1]<t&&(e[1]=t),e[2]<t&&(e[2]=t),e[3]<t&&(e[3]=t),this},max:function(e,t){return e[0]>t&&(e[0]=t),e[1]>t&&(e[1]=t),e[2]>t&&(e[2]=t),e[3]>t&&(e[3]=t),this},clamp:function(e,t,i){return this.min(e,t),this.max(e,i),this}},kh.Color=function(e,t){this.rgba=kh.Vector4.create(),this.hex=e||"#000000",this.opacity=kh.Utils.isNumber(t)?t:1,this.set(this.hex,this.opacity)},kh.Color.prototype={set:function(e,t){e=e.replace("#","");var i=e.length/3;return this.rgba[0]=parseInt(e.substring(0*i,1*i),16)/255,this.rgba[1]=parseInt(e.substring(1*i,2*i),16)/255,this.rgba[2]=parseInt(e.substring(2*i,3*i),16)/255,this.rgba[3]=kh.Utils.isNumber(t)?t:this.rgba[3],this},hexify:function(e){return e=Math.ceil(255*e).toString(16),1===e.length&&(e="0"+e),e},format:function(){var e=this.hexify(this.rgba[0]),t=this.hexify(this.rgba[1]),i=this.hexify(this.rgba[2]);return this.hex="#"+e+t+i}},kh.Object=function(){this.position=kh.Vector3.create()},kh.Object.prototype={setPosition:function(e,t,i){return kh.Vector3.set(this.position,e,t,i),this}},kh.Light=function(e,t){kh.Object.call(this),this.ambient=new kh.Color(e||"#FFFFFF"),this.diffuse=new kh.Color(t||"#FFFFFF"),this.ray=kh.Vector3.create()},kh.Light.prototype=Object.create(kh.Object.prototype),kh.Vertex=function(e,t,i){this.position=kh.Vector3.create(e,t,i)},kh.Vertex.prototype={setPosition:function(e,t,i){return kh.Vector3.set(this.position,e,t,i),this}},kh.Triangle=function(e,t,i){this.a=e||new kh.Vertex,this.b=t||new kh.Vertex,this.c=i||new kh.Vertex,this.vertices=[this.a,this.b,this.c],this.u=kh.Vector3.create(),this.v=kh.Vector3.create(),this.centroid=kh.Vector3.create(),this.normal=kh.Vector3.create(),this.color=new kh.Color,this.polygon=document.createElementNS(kh.SVGNS,"polygon"),this.polygon.setAttributeNS(null,"stroke-linejoin","round"),this.polygon.setAttributeNS(null,"stroke-miterlimit","1"),this.polygon.setAttributeNS(null,"stroke-width","1"),this.computeCentroid(),this.computeNormal()},kh.Triangle.prototype={computeCentroid:function(){return this.centroid[0]=this.a.position[0]+this.b.position[0]+this.c.position[0],this.centroid[1]=this.a.position[1]+this.b.position[1]+this.c.position[1],this.centroid[2]=this.a.position[2]+this.b.position[2]+this.c.position[2],kh.Vector3.divideScalar(this.centroid,3),this},computeNormal:function(){return kh.Vector3.subtractVectors(this.u,this.b.position,this.a.position),kh.Vector3.subtractVectors(this.v,this.c.position,this.a.position),kh.Vector3.crossVectors(this.normal,this.u,this.v),kh.Vector3.normalise(this.normal),this}},kh.Geometry=function(){this.vertices=[],this.triangles=[],this.dirty=!1},kh.Geometry.prototype={update:function(){if(this.dirty){var e,t;for(e=this.triangles.length-1;e>=0;e--)t=this.triangles[e],t.computeCentroid(),t.computeNormal();this.dirty=!1}return this}},kh.Plane=function(e,t,i,a){kh.Geometry.call(this),this.width=e||100,this.height=t||100,this.segments=i||4,this.slices=a||4,this.segmentWidth=this.width/this.segments,this.sliceHeight=this.height/this.slices;var n,l,o;i=[];for(n=-.5*this.width,l=.5*this.height,e=0;e<=this.segments;e++)for(i.push([]),t=0;t<=this.slices;t++)a=new kh.Vertex(n+e*this.segmentWidth,l-t*this.sliceHeight),i[e].push(a),this.vertices.push(a);for(e=0;e<this.segments;e++)for(t=0;t<this.slices;t++)a=i[e+0][t+0],n=i[e+0][t+1],l=i[e+1][t+0],o=i[e+1][t+1],window.t0=new kh.Triangle(a,n,l),window.t1=new kh.Triangle(l,n,o),this.triangles.push(window.t0,window.t1)},kh.Plane.prototype=Object.create(kh.Geometry.prototype),kh.Material=function(e,t){this.ambient=new kh.Color(e||"#444444"),this.diffuse=new kh.Color(t||"#FFFFFF"),this.slave=new kh.Color},kh.Mesh=function(e,t){kh.Object.call(this),this.geometry=e||new kh.Geometry,this.material=t||new kh.Material,this.side=kh.FRONT,this.visible=!0},kh.Mesh.prototype=Object.create(kh.Object.prototype),kh.Mesh.prototype.update=function(e,t){var i,a,n,l,o;if(this.geometry.update(),t)for(i=this.geometry.triangles.length-1;i>=0;i--){for(a=this.geometry.triangles[i],kh.Vector4.set(a.color.rgba),n=e.length-1;n>=0;n--)l=e[n],kh.Vector3.subtractVectors(l.ray,l.position,a.centroid),kh.Vector3.normalise(l.ray),o=kh.Vector3.dot(a.normal,l.ray),this.side===kh.FRONT?o=Math.max(o,0):this.side===kh.BACK?o=Math.abs(Math.min(o,0)):this.side===kh.DOUBLE&&(o=Math.max(Math.abs(o),0)),kh.Vector4.multiplyVectors(this.material.slave.rgba,this.material.ambient.rgba,l.ambient.rgba),kh.Vector4.add(a.color.rgba,this.material.slave.rgba),kh.Vector4.multiplyVectors(this.material.slave.rgba,this.material.diffuse.rgba,l.diffuse.rgba),kh.Vector4.multiplyScalar(this.material.slave.rgba,o),kh.Vector4.add(a.color.rgba,this.material.slave.rgba);kh.Vector4.clamp(a.color.rgba,0,1)}return this},kh.Scene=function(){this.meshes=[],this.lights=[]},kh.Scene.prototype={add:function(e){return e instanceof kh.Mesh&&!~this.meshes.indexOf(e)?this.meshes.push(e):e instanceof kh.Light&&!~this.lights.indexOf(e)&&this.lights.push(e),this},remove:function(e){return e instanceof kh.Mesh&&~this.meshes.indexOf(e)?this.meshes.splice(this.meshes.indexOf(e),1):e instanceof kh.Light&&~this.lights.indexOf(e)&&this.lights.splice(this.lights.indexOf(e),1),this}},kh.Renderer=function(){this.halfHeight=this.halfWidth=this.height=this.width=0},kh.Renderer.prototype={setSize:function(e,t){if(this.width!==e||this.height!==t)return this.width=e,this.height=t,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this},clear:function(){return this},render:function(){return this}},kh.CanvasRenderer=function(){kh.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.context=this.element.getContext("2d"),this.setSize(this.element.width,this.element.height)},kh.CanvasRenderer.prototype=Object.create(kh.Renderer.prototype),kh.CanvasRenderer.prototype.setSize=function(e,t){return kh.Renderer.prototype.setSize.call(this,e,t),this.element.width=e,this.element.height=t,this.context.setTransform(1,0,0,-1,this.halfWidth,this.halfHeight),this},kh.CanvasRenderer.prototype.clear=function(){return kh.Renderer.prototype.clear.call(this),this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height),this},kh.CanvasRenderer.prototype.render=function(e){var t,i,a,n,l;for(kh.Renderer.prototype.render.call(this,e),this.clear(),this.context.lineJoin="round",this.context.lineWidth=1,t=e.meshes.length-1;t>=0;t--)if(i=e.meshes[t],i.visible)for(i.update(e.lights,!0),a=i.geometry.triangles.length-1;a>=0;a--)n=i.geometry.triangles[a],l=n.color.format(),this.context.beginPath(),this.context.moveTo(n.a.position[0],n.a.position[1]),this.context.lineTo(n.b.position[0],n.b.position[1]),this.context.lineTo(n.c.position[0],n.c.position[1]),this.context.closePath(),this.context.strokeStyle=l,this.context.fillStyle=l,this.context.stroke(),this.context.fill();return this};var Ch=J.a.map({username:J.a.required.$msg("请输入登录名").string.other("form",{placeholder:"登录名"}),password:J.a.required.$msg("请输入密码").string.other("form",{placeholder:"密码",type:"password"})}).other("form",{cols:{label:0,wrapper:24}}),_h={data:function(){return{user:{username:"yuanjunnan",password:"yuanjunnan@yjn@",valicode:""},codeUrl:"captcha.jpg"}},components:{},computed:{formSchema:function(){return this.schema||Ch}},props:["schema"],methods:{createCav:function(){!window.ActiveXObject&&document.createElement("canvas").getContext},handleLogin:function(e){var t=this;0===e.length&&this.$login(this.user).then(function(e){t.$router.push({path:t.$route.query.redirect||"/"})})},updateValicode:function(){this.codeUrl+="?_="+(new Date).getTime()}},created:function(){Sh()}},Fh=_h,xh=(i("7fa3"),Object(O["a"])(Fh,yh,wh,!1,null,null,null)),Dh=xh.exports,Ph=[{name:"login",path:"/login",component:Dh,meta:{title:"登录"}}],$h=Ph;function Rh(e,t,i){var a=this.app;a.$isLoggedIn().then(function(){i("login"!==e.name?0===e.matched.length&&a.$router.getMatchedComponents(e.fullPath).length>0?{path:e.fullPath}:void 0:{name:"/"})}).catch(function(){i("login"===e.name?void 0:{name:"login",query:{redirect:e.fullPath}})})}function Nh(e){var t=this.app,i=e.matched.slice(1).map(function(e){var t=e.name,i=e.meta;return{name:i.title,to:t?{name:t}:void 0}});t.$nextTick(function(){t.$bus.$emit("breadcrumb-change",i)})}k["default"].use(vh["a"]);var Lh=new vh["a"]({routes:$h});Lh.beforeEach(Rh.bind(Lh)),Lh.afterEach(Nh.bind(Lh));var Ah=Lh,Vh=i("c93e"),Oh=i("4328"),Eh=i.n(Oh),Mh=i("bc3a"),Uh=i.n(Mh),Bh=i("323e"),jh=i.n(Bh);i("a5d8");function qh(e){var t=e.method,i=void 0===t?"get":t,a=e.url,n=e.data,l=e.params,o=e.isJSON,r=void 0!==o&&o;jh.a.start();var s={method:i,url:a,data:r?n:"string"===typeof n?n:Eh.a.stringify(n),params:l};return Uh()(s).then(function(e){var t=e.data;if(jh.a.done(),"undefined"!==typeof t.success&&"undefined"!==typeof t.msg){if(t.success)return"undefined"!==typeof t.data?"undefined"!==typeof t.total?{rows:t.data,total:t.total}:t.data:"undefined"!==typeof t.rows?"undefined"!==typeof t.total?{rows:t.rows,total:t.total}:t.rows:t;throw new Error(t.msg)}if("undefined"!==typeof t.rows&&"undefined"!==typeof t.total)return{rows:t.rows,total:t.total};if("undefined"!==typeof t.code&&"0"!==t.code)throw new Error(t.msg);return t}).catch(function(e){throw jh.a.done(),e})}function Wh(e){var t=this;return this.fetch({method:"post",url:"api/userlogin.html",data:e}).then(function(e){return t.state=e,e})}function zh(e){return this.fetch({method:"post",url:"api/getMenus.html",data:e}).then(function(e){return e})}function Jh(e){var t=e.file,i=e.onUploadProgress,a=new FormData;return a.append("file",t),Uh()({method:"post",url:"api/upload/image.html",data:a,onUploadProgress:i}).then(function(e){var t=e.data;return t})}function Hh(e){var t=e.file,i=e.onUploadProgress,a=new FormData;return a.append("file",t),Uh()({method:"post",url:"api/layoutInfo/getLayoutFile.html",data:a,onUploadProgress:i}).then(function(e){var t=e.data;return t})}function Gh(e){var t=e.file,i=e.onUploadProgress,a=new FormData;return a.append("file",t),Uh()({method:"post",url:"api/upload/apk.html",data:a,onUploadProgress:i}).then(function(e){var t=e.data;return t})}function Kh(e){var t=e.file,i=e.type,a=e.onUploadProgress,n=new FormData;return n.append("file",t),Uh()({method:"post",url:"api/upload/zip.html?type="+i,data:n,onUploadProgress:a}).then(function(e){var t=e.data;return t})}function Yh(e){return this.fetch({method:"get",url:"api/v1/sysDept/listAllDept.html",params:e})}function Xh(e){return this.fetch({method:"post",url:"api/sysUser/getMenuInfo.html",data:e})}function Zh(e){return this.fetch({method:"post",url:"api/v1/sysUser/pageList.html",data:e})}function Qh(e){return this.fetch({method:"post",url:"api/sysUser/getNotRolesByUserId.html",data:e})}function em(e){return this.fetch({method:"post",url:"api/sysUser/getRolesByUserId.html",data:e})}function tm(e){return e=e.reduce(function(e,t){return e+="&"+t[0]+"="+t[1],e},"").slice(1),this.fetch({method:"post",url:"api/sysUser/saveUserRoles.html",data:e})}function im(e){return this.fetch({method:"get",url:"api/globalDictInfo/getTypes/businessType.html",params:e})}function am(e){return this.fetch({method:"get",url:"api/v1/sysUser/getDetailInfo.html",params:e})}function nm(e){return this.fetch({method:"get",url:"api/sysUser/getDictCheckedByUserId.html",params:e})}function lm(e){return this.fetch({method:"post",url:"api/sysUser/save.html",data:e})}function om(e){return this.fetch({method:"post",url:"api/sysUser/saveProfession.html",data:e})}function rm(e){return this.fetch({method:"get",url:"api/sysUser/remove.html",params:e})}function sm(e){return this.fetch({method:"post",url:"api/dict/pageList.html",data:e})}function cm(e){return this.fetch({method:"post",url:"api/dict/save.html",data:e,isJSON:!0})}function um(e){return this.fetch({method:"post",url:"api/dict/remove.html",data:e})}function dm(){return this.fetch({method:"post",url:"api/dictCategory/list.html"})}function pm(e){return this.fetch({method:"post",url:"api/dictCategory/save.html",data:e,isJSON:!0})}function hm(e){return this.fetch({method:"post",url:"api/sysLogLogin/pageList.html",data:e})}function mm(e){return this.fetch({method:"get",url:"api/sysMenu/pageList.html",params:e})}function fm(e){return this.fetch({method:"post",url:"api/sysMenu/save.html",data:e})}function bm(e){return this.fetch({method:"get",url:"api/sysMenu/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/para = (\{.+\})/)[1])})}function gm(e){return this.fetch({method:"post",url:"api/sysMenu/getNotMenuByRunId.html",data:e})}function vm(e){return this.fetch({method:"post",url:"api/sysMenu/getMenuByRunId.html",data:e})}function ym(e){return e=e.reduce(function(e,t){return e+="&"+t[0]+"="+t[1],e},"").slice(1),this.fetch({method:"post",url:"api/sysMenu/saveMenuRun.html",data:e})}function wm(){return this.fetch({method:"post",url:"api/sysMenu/getMenuInfo.html"})}function Im(e){return this.fetch({method:"get",url:"api/sysMenu/remove.html",params:e})}function Tm(e){return this.fetch({method:"get",url:"api/v1/updatePassword.html",params:e})}function km(e){return this.fetch({method:"post",url:"api/sysRole/pageList.html",data:e})}function Sm(e){return this.fetch({method:"post",url:"api/sysRole/userList.html",params:e})}function Cm(e){return this.fetch({method:"post",url:"api/sysRole/save.html",data:e})}function _m(e){return this.fetch({method:"get",url:"api/sysRole/remove.html",params:e})}function Fm(e){return this.fetch({method:"get",url:"api/tag/list.html?type=crowdPolicy",params:e})}function xm(e){return this.fetch({method:"get",url:"api/tag/list.html?type=crowd",params:e})}function Dm(e){return this.fetch({method:"post",url:"api/tag/save.html",data:e,isJSON:!0})}function Pm(e){return this.fetch({method:"get",url:"api/sysRole/modifyRoleAuthView.html",params:e})}function $m(e){return this.fetch({method:"post",url:"api/sysRole/modifyRoleAuthSave.html",data:e})}function Rm(e){return this.fetch({method:"get",url:"api/v1/sysRole/updateSeq.html",params:e})}function Nm(e){return this.fetch({method:"get",url:"api/v1/sysRole/getDetailInfo.html",params:e})}function Lm(e){return this.fetch({method:"post",url:"api/v1/sysDept/pageList.html",data:e})}function Am(e){return this.fetch({method:"get",url:"api/v1/sysDept/remove.html",params:e})}function Vm(e){return this.fetch({method:"post",url:"api/v1/sysDept/save.html",data:{jsonStr:JSON.stringify(e)}})}function Om(e){return this.fetch({method:"get",url:"api/v1/sysDept/getDetailInfo.html",params:e})}function Em(e){return this.fetch({method:"get",url:"api/v1/sysDept/updateSeq.html",params:e})}function Mm(e){return this.fetch({method:"post",url:"api/v1/sysLogOp/pageList.html",data:e})}function Um(e){return this.fetch({method:"post",url:"api/blockInfo/pageList.html",data:e})}function Bm(e){return this.fetch({method:"get",url:"api/v1/cornerIconType/getCornerTypes.html",params:e})}function jm(e){return this.fetch({method:"get",url:"api/dict/poster/materialType.html",params:e})}function qm(e){return this.fetch({method:"post",url:"api/blockInfo/save.html",data:e,isJSON:!0})}function Wm(e){return this.fetch({method:"post",url:"api/sysPlugin/pageList.html?pluginParentType=builtIn",data:e})}function zm(e){return this.fetch({method:"get",url:"api/sysPlugin/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/initPlugin = (\{.+\})/)[1])})}function Jm(e){return this.fetch({method:"post",url:"api/dict/sysPlugin/pluginParentType.html",data:e})}function Hm(e){return this.fetch({method:"post",url:"api/dict/sysPlugin/pluginType.html",data:e})}function Gm(e){return this.fetch({method:"get",url:"api/tvos/getMediaVideoInfos.html",params:e})}function Km(e){return this.fetch({method:"get",url:"api/tvos/getPartnerSource.html",params:e})}function Ym(e){return this.fetch({method:"get",url:"api/tvos/getCondition.html",params:e})}function Xm(e){return this.fetch({method:"get",url:"api/tvos/queryLiveVideoResult.html",params:e})}function Zm(e){return this.fetch({method:"post",url:"api/dict/sysPlugin/"+e+".html"})}function Qm(e){return this.fetch({method:"post",url:"api/globalPicture/dataList.html",data:e})}function ef(e){return this.fetch({method:"post",url:"api/globalCornerIcon/pageList.html",data:e})}function tf(e){return e={jsonStr:JSON.stringify(e)},this.fetch({method:"post",url:"api/sysPlugin/save.html",data:e})}function af(e){return this.fetch({method:"post",url:"api/sysPlugin/pageList.html?builtInNotShow=1",data:e})}function nf(e){return this.fetch({method:"get",url:"api/sysPlugin/getDetailInfo.html",params:e})}function lf(e){return this.fetch({method:"get",url:"api/v1/audit/auditTask.html",params:e})}function of(e){return this.fetch({method:"get",url:"api/sysPlugin/remove.html",params:e})}function rf(e){return this.fetch({method:"post",url:"api/commonOnclickInfo/pageList.html",data:e})}function sf(e){return this.fetch({method:"post",url:"api/adminMasterControl/getDetailInfo.html",data:e})}function cf(e){return this.fetch({method:"post",url:"api/adminMasterControl/save.html",data:e})}function uf(e){return this.fetch({method:"post",url:"api/dict/materialType.html",data:e})}function df(e){return this.fetch({method:"post",url:"api/v1/poster/pageList.html",data:e})}function pf(e){return this.fetch({method:"get",url:"api/v1/poster/batchAudit.html",params:e})}function hf(e){return this.fetch({method:"get",url:"api/v1/poster/remove.html",params:e})}function mf(){return this.fetch({method:"post",url:"api/v1/onclickInfo/getMenuInfo.html"})}function ff(e){return this.fetch({method:"post",url:"api/v1/onclickInfo/pageList.html",data:e})}function bf(e){return this.fetch({method:"post",url:"api/v1/onclickInfo/save.html",data:e})}function gf(e){return this.fetch({method:"get",url:"api/v1/onclickInfo/save.html",params:e})}function vf(e){return this.fetch({method:"get",url:"api/v1/onclickInfo/getDetailInfo.html",params:e}).then(function(e){return e})}function yf(e){return this.fetch({method:"post",url:"api/tabInfo/pageList.html",data:e})}function wf(e){return this.fetch({method:"post",url:"api/globalDictInfo/getTypes/appIdType.html",data:e})}function If(e){return this.fetch({method:"post",url:"api/globalDictInfo/getTypes/businessType.html",data:e})}function Tf(e){return this.fetch({method:"post",url:"api/dict/tab/tabType.html?tabParentType=biz",data:e})}function kf(e){return this.fetch({method:"get",url:"api/v1/getMediaResourceInfoToPanel.html",params:e,isJSON:!0})}function Sf(e){return this.fetch({method:"post",url:"api/filmDetailPage/pageList.html",data:e})}function Cf(e){return this.fetch({method:"post",url:"api/v1/panel/pageList.html",data:e})}function _f(e){return this.fetch({method:"post",url:"api/v1/panel/dataList.html",data:e})}function Ff(){return this.fetch({method:"post",url:"api/homepageInfo/getMenuInfo.html"})}function xf(e){return this.fetch({method:"post",url:"api/homepageInfo/pageList.html",data:e})}function Df(e){return this.fetch({method:"post",url:"api/homepageInfo/save.html",data:e})}function Pf(e){return this.fetch({method:"get",url:"api/homepageInfo/save.html",params:e})}function $f(e){return this.fetch({method:"get",url:"api/homepageInfo/getDetailInfo.html",params:e}).then(function(e){return e})}function Rf(e){return this.fetch({methods:"get",url:"api/tvos/getMediaVideoInfos.html",params:e}).then(function(e){return"string"===typeof e?JSON.parse(e.replace("result(","").replace(/\)*$/,"")):e})}function Nf(e){return this.fetch({methods:"get",url:"api/tvos/getPartnerSource.html",params:e})}function Lf(){return this.fetch({methods:"get",url:"api/tvos/getCondition.html"}).then(function(e){return"string"===typeof e?JSON.parse(e.replace("result(","").replace(/\)*$/,"")):e})}function Af(e){return this.fetch({methods:"get",url:"api/tvos/getSegmentList.html",params:e}).then(function(e){return"string"===typeof e?JSON.parse(e.replace("result(","").replace(/\)*$/,"")):e})}function Vf(e){return this.fetch({methods:"get",url:"api/appManagement/pageList.html",params:e})}function Of(e){return this.fetch({method:"post",url:"api/panel/pageList.html",data:e})}function Ef(e){return this.fetch({method:"post",url:"api/globalDictInfo/getTypes/businessType.html",data:e})}function Mf(e){return this.fetch({method:"get",url:"api/markPanel/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/pannelInit = (\{.+\})/)[1])})}function Uf(e){return this.fetch({method:"post",url:"api/panel/save.html",data:e})}function Bf(e){return this.fetch({method:"get",url:"api/panel/remove.html",params:e})}function jf(e){return this.fetch({method:"get",url:"api/panel/getDetailInfo.html",params:e})}function qf(e){return this.fetch({method:"post",url:"api/v1/hvi/historyList.html",data:e})}function Wf(e){return this.fetch({method:"post",url:"api/v1/timedTask/getTimedInfo.html",data:e})}function zf(e){return this.fetch({method:"get",url:"api/v1/audit/historyList.html",params:e})}function Jf(e){return this.fetch({method:"post",url:"api/v1/cornerIconType/pageList.html",data:e})}function Hf(e){return this.fetch({method:"post",url:"api/v1/cornerIconType/remove.html",data:e})}function Gf(e){return this.fetch({method:"post",url:"api/v1/cornerIconType/save.html",data:e})}function Kf(e){return this.fetch({method:"get",url:"api/v1/cornerIconType/getDetailInfo.html",params:e})}function Yf(e){return this.fetch({method:"post",url:"api/v1/layout/pageList.html",data:e})}function Xf(e){return this.fetch({method:"post",url:"api/v1/layout/remove.html",data:e})}function Zf(e){return this.fetch({method:"post",url:"api/v1/layout/save.html",data:e})}function Qf(e){return this.fetch({method:"get",url:"api/v1/layout/getDetailInfo.html",params:e})}function eb(e){return this.fetch({method:"post",url:"api/buttonManage/getAuditDetailButton.html",data:e})}function tb(e){return this.fetch({method:"post",url:"api/v1/audit/auditTask.html",data:e})}function ib(e){return this.fetch({method:"post",url:"api/v1/audit/revokedAudit.html",data:e})}function ab(e){return this.fetch({method:"post",url:"api/themeInfo/pageList.html",data:e})}function nb(e){return this.fetch({method:"get",url:"api/themeInfo/remove.html",params:e})}function lb(e){return this.fetch({method:"get",url:"api/themeInfo/getDetailInfo.html",params:e})}function ob(e){return this.fetch({url:"api/v1/poster/save.html",method:"post",data:e})}function rb(e){return this.fetch({url:"api/globalPicture/edit.html?id="+e.id}).then(function(e){return JSON.parse(e.match(/initData = (\{.+\})/)[1])})}function sb(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/pageList.html",params:e})}function cb(e){return this.fetch({method:"post",url:"api/v1/cornerIcon/getIconAttributes.html",params:e})}function ub(e){return this.fetch({method:"get",url:"api/globalCornerIcon/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/para = (\{.+\})/)[1])})}function db(e){return this.fetch({method:"post",url:"api/v1/cornerIcon/save.html",data:e})}function pb(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/remove.html",params:e})}function hb(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/batchAudit.html",params:e})}function mb(e){return this.fetch({method:"post",url:"api/auditTaskInfo/executionTask.html",data:e})}function fb(e){return this.fetch({method:"post",url:"api/auditTaskInfo/revokedAudit.html",data:e})}function bb(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/getDetailInfo.html",params:e})}function gb(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/changePriority.html",params:e})}function vb(){return this.fetch({url:"api/adBit/pageList.html?rows=10000"})}function yb(e){return this.fetch({method:"post",url:"api/adBit/switchStatus.html",data:e})}function wb(e){return this.fetch({method:"post",url:"api/privatePannelInfo/pageList.html",data:e})}var Ib=Object(Vh["a"])({state:{},fetch:qh,login:Wh,getMenu:zh},I,a,n,l,o,r,s,u,d,p,h,m,f,b,g,v,y,w,c,T);k["default"].prototype.$service=N["utils"].wrapService(Ib);i("86d7");k["default"].config.productionTip=!1,new k["default"]({router:Ah,render:function(e){return e(gh)}}).$mount("#app")},"580c":function(e,t,i){e.exports=i.p+"img/detail-ad-3.8a40a230.png"},"585a":function(e,t,i){},"58c5":function(e,t,i){e.exports=i.p+"img/detail-ad-1-2.151fc6ac.png"},"591d":function(e,t,i){},"5b53":function(e,t,i){},"603c":function(e,t,i){"use strict";var a=i("4e07"),n=i.n(a);n.a},6065:function(e,t,i){"use strict";var a=i("85de"),n=i.n(a);n.a},6182:function(e,t,i){"use strict";var a=i("7345"),n=i.n(a);n.a},"61ee":function(e,t,i){},"62e4":function(e,t,i){},"6a59":function(e,t,i){},"6a5e":function(e,t,i){},"6b22":function(e,t,i){"use strict";var a=i("aaed"),n=i.n(a);n.a},"6dce":function(e,t,i){},"6e9b":function(e,t,i){"use strict";var a=i("e1a7"),n=i.n(a);n.a},"6fc2":function(e,t,i){},"71d9":function(e,t,i){"use strict";var a=i("43de"),n=i.n(a);n.a},7290:function(e,t,i){"use strict";var a=i("6a5e"),n=i.n(a);n.a},7345:function(e,t,i){},7463:function(e,t,i){},"76d7":function(e,t,i){},7766:function(e,t,i){"use strict";var a=i("0c07"),n=i.n(a);n.a},"7ad3":function(e,t,i){},"7b8f":function(e,t,i){"use strict";var a=i("2ee1"),n=i.n(a);n.a},"7bf5":function(e,t,i){},"7fa3":function(e,t,i){"use strict";var a=i("ab44"),n=i.n(a);n.a},8186:function(e,t,i){"use strict";var a=i("f074"),n=i.n(a);n.a},8203:function(e,t,i){"use strict";var a=i("585a"),n=i.n(a);n.a},"83bf":function(e,t,i){},8437:function(e,t,i){},"854a":function(e,t,i){"use strict";var a=i("0338"),n=i.n(a);n.a},"85de":function(e,t,i){},"86d7":function(e,t,i){},"874c":function(e,t,i){},8757:function(e,t,i){"use strict";var a=i("2fa7"),n=i.n(a);n.a},"886e":function(e,t,i){"use strict";var a=i("61ee"),n=i.n(a);n.a},"8d7d":function(e,t,i){"use strict";var a=i("a5b3"),n=i.n(a);n.a},"8e69":function(e,t,i){},"907b":function(e,t,i){"use strict";var a=i("591d"),n=i.n(a);n.a},9159:function(e,t,i){"use strict";var a=i("7bf5"),n=i.n(a);n.a},"972c":function(e,t,i){"use strict";var a=i("1321"),n=i.n(a);n.a},"985a":function(e,t,i){"use strict";var a=i("ace3"),n=i.n(a);n.a},"989c":function(e,t,i){"use strict";var a=i("8e69"),n=i.n(a);n.a},"99e5":function(e,t,i){},"9a21":function(e,t,i){"use strict";var a=i("6fc2"),n=i.n(a);n.a},"9b2d":function(e,t,i){"use strict";var a=i("5b53"),n=i.n(a);n.a},a009:function(e,t,i){},a092:function(e,t,i){"use strict";var a=i("f968"),n=i.n(a);n.a},a272:function(e,t,i){"use strict";var a=i("0bf0"),n=i.n(a);n.a},a436:function(e,t,i){"use strict";var a=i("3062"),n=i.n(a);n.a},a5b3:function(e,t,i){},a5e2:function(e,t,i){"use strict";var a=i("99e5"),n=i.n(a);n.a},aaed:function(e,t,i){},ab44:function(e,t,i){},ace3:function(e,t,i){},ad23:function(e,t,i){"use strict";var a=i("3a0a"),n=i.n(a);n.a},b170:function(e,t,i){},b7a6:function(e,t,i){"use strict";var a=i("0704"),n=i.n(a);n.a},bf73:function(e,t,i){},cc8c:function(e,t,i){},cc9a:function(e,t,i){"use strict";var a=i("83bf"),n=i.n(a);n.a},cf05:function(e,t,i){e.exports=i.p+"img/logo.7c8ffc5c.png"},d09a:function(e,t,i){"use strict";var a=i("a009"),n=i.n(a);n.a},d5e5:function(e,t,i){},d73f:function(e,t,i){"use strict";var a=i("0e5e"),n=i.n(a);n.a},da0c:function(e,t,i){"use strict";var a=i("181e"),n=i.n(a);n.a},dd7d:function(e,t,i){"use strict";var a=i("76d7"),n=i.n(a);n.a},e1a7:function(e,t,i){},e2bc:function(e,t,i){},e5f0:function(e,t,i){"use strict";var a=i("472b"),n=i.n(a);n.a},eb95:function(e,t,i){"use strict";var a=i("3a19"),n=i.n(a);n.a},ed2c:function(e,t,i){},efa1:function(e,t,i){},f074:function(e,t,i){},f333:function(e,t,i){"use strict";var a=i("101e"),n=i.n(a);n.a},f34c:function(e,t,i){"use strict";var a=i("d5e5"),n=i.n(a);n.a},f44a:function(e,t,i){"use strict";var a=i("28ea"),n=i.n(a);n.a},f4b2:function(e,t,i){"use strict";var a=i("f62d"),n=i.n(a);n.a},f62d:function(e,t,i){},f7d8:function(e,t,i){"use strict";var a=i("874c"),n=i.n(a);n.a},f968:function(e,t,i){},f9a5:function(e,t,i){"use strict";var a=i("6a59"),n=i.n(a);n.a},fa8e:function(e,t,i){"use strict";var a=i("1e7d"),n=i.n(a);n.a},fc21:function(e,t,i){"use strict";var a=i("1715"),n=i.n(a);n.a},fc9f:function(e,t,i){"use strict";var a=i("16d9"),n=i.n(a);n.a},fd49:function(e,t,i){"use strict";var a=i("300e"),n=i.n(a);n.a}});
//# sourceMappingURL=app.fa38d918.js.map