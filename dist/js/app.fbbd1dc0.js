(function(e){function t(t){for(var i,l,r=t[0],s=t[1],c=t[2],d=0,p=[];d<r.length;d++)l=r[d],n[l]&&p.push(n[l][0]),n[l]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var s=a[r];0!==n[s]&&(i=!1)}i&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},n={app:0},o=[];function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=s;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0002":function(e,t,a){"use strict";var i=a("cb18"),n=a.n(i);n.a},"01b4":function(e,t,a){},"0247":function(e,t,a){},"0380":function(e,t,a){},"039e":function(e,t,a){},"0543":function(e,t,a){},"0547":function(e,t,a){},"0554":function(e,t,a){},"077b":function(e,t,a){},"07bd":function(e,t,a){"use strict";var i=a("de53"),n=a.n(i);n.a},"0818":function(e,t,a){},"0bf0":function(e,t,a){},"0d4b":function(e,t,a){},"0d52":function(e,t,a){"use strict";var i=a("c31d"),n=a.n(i);n.a},"0f73":function(e,t,a){},"101e":function(e,t,a){},1177:function(e,t,a){},"11f6":function(e,t,a){"use strict";var i=a("1539"),n=a.n(i);n.a},1229:function(e,t,a){},"12ef":function(e,t,a){},"14d6":function(e,t,a){"use strict";var i=a("7fe0"),n=a.n(i);n.a},"14f7":function(e,t,a){"use strict";var i=a("77d9"),n=a.n(i);n.a},1539:function(e,t,a){},"153d":function(e,t,a){"use strict";var i=a("89ed"),n=a.n(i);n.a},"166b":function(e,t,a){},"16f7":function(e,t,a){"use strict";var i=a("0380"),n=a.n(i);n.a},1929:function(e,t,a){},"19b7":function(e,t,a){"use strict";var i=a("7756"),n=a.n(i);n.a},"21f7":function(e,t,a){},"23c9":function(e,t,a){"use strict";var i=a("91b4"),n=a.n(i);n.a},"23d8":function(e,t,a){},2494:function(e,t,a){"use strict";var i=a("888d"),n=a.n(i);n.a},"262f":function(e,t,a){},"28af":function(e,t,a){},"298e":function(e,t,a){"use strict";var i=a("c217"),n=a.n(i);n.a},"2ac6":function(e,t,a){"use strict";var i=a("1929"),n=a.n(i);n.a},"2cdf":function(e,t,a){"use strict";var i=a("12ef"),n=a.n(i);n.a},"300e":function(e,t,a){},"33e6":function(e,t,a){"use strict";var i=a("0f73"),n=a.n(i);n.a},"364d":function(e,t,a){"use strict";var i=a("a60f"),n=a.n(i);n.a},"36b8":function(e,t,a){},3734:function(e,t,a){},"37d5":function(e,t,a){},"38b6":function(e,t,a){"use strict";var i=a("efa1"),n=a.n(i);n.a},"3a19":function(e,t,a){},"3f25":function(e,t,a){"use strict";var i=a("8814"),n=a.n(i);n.a},"41fc":function(e,t,a){},"424e":function(e,t,a){},4561:function(e,t,a){"use strict";var i=a("4c64"),n=a.n(i);n.a},"45bc":function(e,t,a){"use strict";var i=a("e2bc"),n=a.n(i);n.a},"472b":function(e,t,a){},4863:function(e,t,a){"use strict";var i=a("cd4d"),n=a.n(i);n.a},4869:function(e,t,a){},"48e3":function(e,t,a){},4927:function(e,t,a){},"49e3":function(e,t,a){"use strict";var i=a("e15f"),n=a.n(i);n.a},"4c64":function(e,t,a){},"4ef8":function(e,t,a){},"4f42":function(e,t,a){"use strict";var i=a("7a67"),n=a.n(i);n.a},5110:function(e,t,a){"use strict";var i=a("9045"),n=a.n(i);n.a},5160:function(e,t,a){"use strict";var i=a("79bc"),n=a.n(i);n.a},"54d3":function(e,t,a){"use strict";var i=a("8204"),n=a.n(i);n.a},"54ff":function(e,t,a){"use strict";var i=a("7d09"),n=a.n(i);n.a},5519:function(e,t,a){"use strict";var i=a("a6ff"),n=a.n(i);n.a},5552:function(e,t,a){"use strict";var i=a("8b7e"),n=a.n(i);n.a},"561d":function(e,t,a){"use strict";var i=a("41fc"),n=a.n(i);n.a},"566c":function(e,t,a){"use strict";var i=a("077b"),n=a.n(i);n.a},"566e":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var i={};a.r(i),a.d(i,"getMenu",function(){return Uy}),a.d(i,"getButtonGroupForPageList",function(){return jy});var n={};a.r(n),a.d(n,"uploadImage",function(){return Hy}),a.d(n,"uploadLayoutFile",function(){return qy}),a.d(n,"uploadApk",function(){return Wy}),a.d(n,"uploadZip",function(){return Gy});var o={};a.r(o),a.d(o,"getDepts",function(){return zy}),a.d(o,"userConfigMenuInfo",function(){return Jy}),a.d(o,"userConfigPageList",function(){return Ky}),a.d(o,"getNotRolesByUserId",function(){return Xy}),a.d(o,"getRolesByUserId",function(){return Yy}),a.d(o,"saveUserRoles",function(){return Zy}),a.d(o,"userConfigBusinessType",function(){return Qy}),a.d(o,"userConfigEdit",function(){return ew}),a.d(o,"getDictCheckedByUserId",function(){return tw}),a.d(o,"userConfigSave",function(){return aw}),a.d(o,"saveProfession",function(){return iw}),a.d(o,"userConfigDelete",function(){return nw}),a.d(o,"getDictList",function(){return ow}),a.d(o,"SaveDictionary",function(){return lw}),a.d(o,"DeleteDict",function(){return rw}),a.d(o,"getDictCategoryList",function(){return sw}),a.d(o,"SaveDictCategory",function(){return cw}),a.d(o,"getLoginLogList",function(){return uw}),a.d(o,"getSysMenuList",function(){return dw}),a.d(o,"saveSysMenu",function(){return pw}),a.d(o,"editSysMenu",function(){return hw}),a.d(o,"getNotMenuByRunId",function(){return mw}),a.d(o,"getMenuByRunId",function(){return fw}),a.d(o,"saveMenuRun",function(){return bw}),a.d(o,"getMenuInfo",function(){return gw}),a.d(o,"deleteMenuById",function(){return vw}),a.d(o,"modifyPwd",function(){return yw});var l={};a.r(l),a.d(l,"getRoleList",function(){return ww}),a.d(l,"userRoleList",function(){return Iw}),a.d(l,"saveRoleData",function(){return Tw}),a.d(l,"deleteRole",function(){return Sw}),a.d(l,"getPoliciesAndCrowds",function(){return Cw}),a.d(l,"rolePageGetCrowdOfPolicy",function(){return kw}),a.d(l,"setCrowdAuthOfRole",function(){return _w}),a.d(l,"getAuthList",function(){return Pw}),a.d(l,"saveAuthOfRole",function(){return xw}),a.d(l,"updateSeq",function(){return Dw}),a.d(l,"getRoleDetailById",function(){return Fw});var r={};a.r(r),a.d(r,"sysDeptPageList",function(){return $w}),a.d(r,"sysDeptRemove",function(){return Rw}),a.d(r,"sysDeptSave",function(){return Lw}),a.d(r,"sysDeptDetailInfo",function(){return Nw}),a.d(r,"sysDeptUpdateSeq",function(){return Ow});var s={};a.r(s),a.d(s,"sysLogOpPageList",function(){return Aw});var c={};a.r(c),a.d(c,"broadcastBlockPageList",function(){return Ew}),a.d(c,"deleteBroadcastBlock",function(){return Vw}),a.d(c,"getCornerTypes",function(){return Mw}),a.d(c,"getMaterialTypes",function(){return Bw}),a.d(c,"saveBlockInfo",function(){return Uw}),a.d(c,"getSysPlugin",function(){return jw}),a.d(c,"editSysPlugin",function(){return Hw}),a.d(c,"getPluginParentTypes",function(){return qw}),a.d(c,"getPluginTypes",function(){return Ww}),a.d(c,"getMediaVideoInfos",function(){return Gw}),a.d(c,"getPartnerSource",function(){return zw}),a.d(c,"getCondition",function(){return Jw}),a.d(c,"queryLiveVideoResult",function(){return Kw}),a.d(c,"getPluginVersions",function(){return Xw}),a.d(c,"getResourceList",function(){return Yw}),a.d(c,"getCornerList",function(){return Zw}),a.d(c,"SavePlugin",function(){return Qw}),a.d(c,"getMultiBlockList",function(){return eI}),a.d(c,"getData",function(){return tI}),a.d(c,"removeMulti",function(){return aI}),a.d(c,"getClickData",function(){return iI}),a.d(c,"getHistoryList",function(){return nI}),a.d(c,"getBroadcastBlockEditData",function(){return oI});var u={};a.r(u),a.d(u,"getAdminMasterControllInfo",function(){return lI}),a.d(u,"saveAdminMasterControll",function(){return rI});var d={};a.r(d),a.d(d,"getMaterialTypes",function(){return sI}),a.d(d,"getMaterialPageList",function(){return cI}),a.d(d,"materialBatchAudit",function(){return uI}),a.d(d,"materialBatchDelete",function(){return dI}),a.d(d,"getCommonOnclickInfoMenu",function(){return pI}),a.d(d,"getCommonOnclickInfoList",function(){return hI}),a.d(d,"commonOnclickInfoSave",function(){return mI}),a.d(d,"commonOnclickInfoDelete",function(){return fI}),a.d(d,"getCommonOnclickInfoEdit",function(){return bI});var p={};a.r(p),a.d(p,"tabInfoList",function(){return gI}),a.d(p,"getAppIdType",function(){return vI}),a.d(p,"getBusinessType",function(){return yI}),a.d(p,"getTabType",function(){return wI}),a.d(p,"getMediaResourceInfo",function(){return II}),a.d(p,"filmDetailPageList",function(){return TI}),a.d(p,"saveFilmDetailPage",function(){return SI}),a.d(p,"removeFilmDetailPage",function(){return CI}),a.d(p,"tabIconList",function(){return kI}),a.d(p,"tabInfoGet",function(){return _I}),a.d(p,"tabInfoUpsert",function(){return PI}),a.d(p,"editFilmDetailPage",function(){return xI}),a.d(p,"reviewFilmDetailPage",function(){return DI});var h={};a.r(h),a.d(h,"panelPageList",function(){return FI}),a.d(h,"panelDataList",function(){return $I}),a.d(h,"panelGetDetail",function(){return RI});var m={};a.r(m),a.d(m,"getHomePageInfoMenu",function(){return LI}),a.d(m,"getHomePageInfoList",function(){return NI}),a.d(m,"homePageInfoSave",function(){return OI}),a.d(m,"homePageInfoDelete",function(){return AI}),a.d(m,"homePageGetDetail",function(){return EI});var f={};a.r(f),a.d(f,"getMediaVideoInfos",function(){return VI}),a.d(f,"getPartnerSource",function(){return MI}),a.d(f,"getCondition",function(){return BI}),a.d(f,"getSegmentList",function(){return UI}),a.d(f,"getAppManagementList",function(){return jI});var b={};a.r(b),a.d(b,"getMarkPanelList",function(){return HI}),a.d(b,"getMarkEditData",function(){return qI}),a.d(b,"MarkPanelSave",function(){return WI}),a.d(b,"deleteMarkPanel",function(){return GI}),a.d(b,"getViewData",function(){return zI}),a.d(b,"getTimedInfo",function(){return JI}),a.d(b,"getHandlePerson",function(){return KI});var g={};a.r(g),a.d(g,"getGlobalCornerIconTypePageList",function(){return XI}),a.d(g,"globalCornerIconTypeBatchDel",function(){return YI}),a.d(g,"globalCornerIconTypeSave",function(){return ZI}),a.d(g,"globalCornerIconTypeDetail",function(){return QI});var v={};a.r(v),a.d(v,"getLayoutInforPageList",function(){return eT}),a.d(v,"getLayoutInforBatchDel",function(){return tT}),a.d(v,"getLayoutInforSave",function(){return aT}),a.d(v,"getLayoutInforById",function(){return iT}),a.d(v,"getAuditDetailButton",function(){return nT}),a.d(v,"auditTask",function(){return oT}),a.d(v,"revokedAudit",function(){return lT}),a.d(v,"putShelves",function(){return rT});var y={};a.r(y),a.d(y,"themeInfoPageList",function(){return sT}),a.d(y,"themeInfoRemove",function(){return cT}),a.d(y,"themeInfoDetail",function(){return uT}),a.d(y,"savethemeInfo",function(){return dT}),a.d(y,"checkThemeMd5",function(){return pT});var w={};a.r(w),a.d(w,"globalPictureUpsert",function(){return hT}),a.d(w,"globalPictureGet",function(){return mT}),a.d(w,"globalPictureList",function(){return fT});var I={};a.r(I),a.d(I,"getGlobalMgrList",function(){return bT}),a.d(I,"getCornerTypes",function(){return gT}),a.d(I,"getIconAttributes",function(){return vT}),a.d(I,"globalCornerIconEdit",function(){return yT}),a.d(I,"globalCornerIconSave",function(){return wT}),a.d(I,"globalCornerIconRemove",function(){return IT}),a.d(I,"batchAudit",function(){return TT}),a.d(I,"revokedAudit",function(){return ST}),a.d(I,"getDetailInfo",function(){return CT}),a.d(I,"changePriority",function(){return kT});var T={};a.r(T),a.d(T,"advertisementList",function(){return _T}),a.d(T,"advertisementUpsert",function(){return PT});var S={};a.r(S),a.d(S,"privatePannelInfo",function(){return xT}),a.d(S,"getDictType",function(){return DT}),a.d(S,"getHistory",function(){return FT}),a.d(S,"getEditData",function(){return $T}),a.d(S,"privatePanelUpsert",function(){return RT}),a.d(S,"remove",function(){return LT}),a.d(S,"privatePannelInfoView",function(){return NT}),a.d(S,"delHistory",function(){return OT});var C={};a.r(C),a.d(C,"myDraftsPageList",function(){return AT}),a.d(C,"mySubmitTasksPageList",function(){return ET}),a.d(C,"myReviewTasksPageList",function(){return VT});var k={};a.r(k),a.d(k,"getPolicyManagePageList",function(){return BT}),a.d(k,"getTestPolicyManagePageList",function(){return UT}),a.d(k,"getChipAndModelPageList",function(){return jT}),a.d(k,"addChipAndModel",function(){return HT}),a.d(k,"getHomePageModelPageList",function(){return qT}),a.d(k,"policyConfSave",function(){return WT}),a.d(k,"testPolicyConfSave",function(){return GT}),a.d(k,"policyConfRemove",function(){return zT}),a.d(k,"testPolicyConfRemove",function(){return JT}),a.d(k,"crowdRelGet",function(){return KT}),a.d(k,"getCrowdOfPolicyWithCache",function(){return XT}),a.d(k,"getCrowdOfPolicy",function(){return YT}),a.d(k,"getCrowdPolicy",function(){return ZT}),a.d(k,"getPolicyConfDetail",function(){return QT}),a.d(k,"getTestPolicyConfDetail",function(){return eS});var _={};a.r(_),a.d(_,"floatWindowList",function(){return tS});var P={};a.r(P),a.d(P,"getVersionList",function(){return aS}),a.d(P,"getAppIdType",function(){return iS}),a.d(P,"getBusinessType",function(){return nS}),a.d(P,"revokeAudit",function(){return oS}),a.d(P,"getTimedTaskLimit",function(){return lS}),a.d(P,"putOnShelves",function(){return rS}),a.d(P,"deleteVersion",function(){return cS}),a.d(P,"getAuditHistoryList",function(){return uS});var x={};a.r(x),a.d(x,"commonPannelUserList",function(){return dS});var D={};a.r(D),a.d(D,"businessTabSave",function(){return pS}),a.d(D,"businessTabEdit",function(){return hS}),a.d(D,"businessTabCollect",function(){return mS}),a.d(D,"businessTabCancelCollect",function(){return fS});a("cadf"),a("551c"),a("f751"),a("097d");var F=a("2b0e"),$=a("5c96"),R=a.n($),L=a("2819"),N=a.n(L),O=(a("0fae"),new F["default"]);Object.defineProperties(F["default"].prototype,{$bus:{get:function(){return O}}}),Object.defineProperties(F["default"].prototype,{$getMenu:{get:function(){}}});var A={};function E(){var e;do{e=""+Date.now()+Math.random()}while(A[e]);return e}function V(e){e.stopPropagation();var t=e.currentTarget,a=t.dataset.shadowDragId,i=A[a],n=i.binding,o=n.value;e.dataTransfer.setData("text/plain",JSON.stringify(o)),t.dispatchEvent(new Event("shadow-drag-start"))}function M(e){e.currentTarget.dispatchEvent(new Event("shadow-drag-end"))}var B,U,j={bind:function(e,t,a){if(t){var i=E();A[i]={binding:t,vnode:a},e.dataset.shadowDragId=i,e.addEventListener("dragstart",V),e.addEventListener("dragend",M),e.setAttribute("draggable",!0)}},inserted:function(e,t,a){},update:function(e,t,a){var i=e.dataset.shadowDragId,n=A[i];n.binding=t},unbind:function(e,t,a){var i=e.dataset.shadowDragId;delete A[i],e.removeEventListener("dragstart",V),e.removeEventListener("dragend",M)}},H=a("0754"),q=a.n(H),W=(a("616e"),a("59c7")),G=(a("ed2c"),a("96cf"),a("3b8d")),z=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("router-view")],1)}),J=[],K=a("2877"),X={},Y=Object(K["a"])(X,z,J,!1,null,null,null),Z=Y.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BroadcastBlockList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],ref:"list",on:{"open-add-page":e.openAddPage}}),"add"===e.mode?a("BroadcastBlockAdd",{attrs:{isReview:e.isReview,editData:e.editData},on:{"go-edit-Page":function(t){return e.openListPage(e.editData,!1)},"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},ee=[],te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"blockInfo"},on:{add:e.addItem,edit:e.editData,delete:e.batchDel}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[a("span",{staticClass:"pics"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.picDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.picDialogVisible=!1}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"预览图片",visible:e.auditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.auditDialogVisible=t}}},[a("span",[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.auditFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[a("el-radio",{attrs:{label:"4"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("通过")]),a("el-radio",{attrs:{label:"5"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("打回")])],1),a("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.auditDesc,callback:function(t){e.$set(e.addForm,"auditDesc",t)},expression:"addForm.auditDesc"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.auditDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitAudit}},[e._v("确 定")])],1)])],1)},ae=[],ie=a("f6e7"),ne=a.n(ie),oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ActionList",{staticClass:"buttonGroup",attrs:{actions:e.actions,target:this}})],1)},le=[],re=(a("6762"),a("2fdb"),{components:{ActionList:W["ActionList"]},props:{pageName:String,notContainBtns:{type:Array,default:function(){return[]}}},data:function(){return{actions:{}}},methods:{add:function(){this.$emit("add")},edit:function(){this.$emit("edit")},delete:function(){this.$emit("delete")}},created:function(){var e=this;this.$service.getButtonGroupForPageList(this.pageName).then(function(t){var a={};t.forEach(function(t){if(!e.notContainBtns.includes(t.runComm))switch(t.runComm){case"add":a[t.runComm]={text:t.runName,type:"primary"};break;case"edit":a[t.runComm]={text:t.runName,type:"success"};break;case"delete":a[t.runComm]={text:t.runName,type:"danger"};break;default:a[t.runComm]={text:t.runName,type:"primary"};break}}),e.actions=a})}}),se=re,ce=(a("a7da"),Object(K["a"])(se,oe,le,!1,null,"bd89181a",null)),ue=ce.exports,de={"待审核":3,"审核通过":4,"审核不通过":5},pe={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{materialTypes:{},typePosition:{"左上":0,"右上":1,"右下":2,"左下":3},picDialogVisible:!1,auditDialogVisible:!1,addForm:{idStr:null,auditFlag:"4",auditDesc:""},auditFormRules:{auditDesc:[{required:!0,message:"请输入意见说明",trigger:"blur"}],auditFlag:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",width:70,prop:"id",sortable:!0},{label:"轮播名称",prop:"containerName",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.containerName)}},{label:"状态",prop:"status",sortable:!0,render:function(t,a){var i=a.row;return e.$numToAuditStatus(i.status)}},{label:"更新时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{submitAudit:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&(e.auditForm.idStr=e.selected.join(","),e.$service.materialBatchAudit(e.auditForm,"审批成功").then(function(t){e.fetchData(),e.auditDialogVisible=!1}))})},openReview:function(e){this.$emit("open-add-page",e,!0)},addItem:function(){this.$emit("open-add-page",{},!1)},handleChange:function(e,t,a){for(var i=[],n=0;n<e.length;n++)i.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(i)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0],!1)},batchDel:function(){var e=this;if(this.$isAllowDelete&&window.confirm("确定要删除吗")){var t=this.selected.map(function(e){return e.id});this.$service.deleteBroadcastBlock({id:t.join(",")},"删除成功").then(function(t){e.fetchData()})}},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.id});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.id)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.broadcastBlockPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({id:ne.a.o.number.other("form",{component:"Input",placeholder:"推荐位ID"}),containerName:ne.a.o.string.other("form",{component:"Input",placeholder:"推荐位名称"}),status:ne.a.o.enum(de).other("form",{component:"Select",placeholder:"请选择"})}).other("form",{layout:"inline",cols:{item:6,label:0,wrapper:20},footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},he=pe,me=(a("153d"),Object(K["a"])(he,te,ae,!1,null,"b20ee0ca",null)),fe=me.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{staticClass:"split-bar"},[e._v("\n    基本信息\n  ")]),a("el-form",{ref:"basicForm",staticClass:"el-form-add",attrs:{model:e.basicForm,"label-width":"100px"}},[e.disabled?a("el-form-item",{attrs:{label:"审核状态"}},[e._v("\n       "+e._s(e.$numToAuditStatus(e.status))+"\n    ")]):e._e(),a("el-form-item",{attrs:{label:"推荐位名称",prop:"containerName",rules:[{required:!0,message:"请输入控件名称",trigger:"blur"}]}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.basicForm.containerName,callback:function(t){e.$set(e.basicForm,"containerName",t)},expression:"basicForm.containerName"}})],1),a("el-form-item",{attrs:{label:"推荐位类型"}},[a("el-select",{model:{value:e.basicForm.containerType,callback:function(t){e.$set(e.basicForm,"containerType",t)},expression:"basicForm.containerType"}},[a("el-option",{attrs:{label:"视频列表",value:"REFERENCE_BROADCASTING"}})],1)],1),a("el-form-item",{attrs:{label:"配置模式"}},[a("el-radio-group",{nativeOn:{change:function(t){return t.preventDefault(),e.modelChange(t)}},model:{value:e.basicForm.configModel,callback:function(t){e.$set(e.basicForm,"configModel",t)},expression:"basicForm.configModel"}},[a("el-radio",{attrs:{label:"broadcast",disabled:e.disabled}},[e._v("轮播模式")]),a("el-radio",{attrs:{label:"group",disabled:e.disabled}},[e._v("组合模式")])],1)],1)],1),a("div",{staticClass:"split-bar"},[e._v("\n    内容配置\n  ")]),a("div",{staticClass:"version-title"},[a("h4",{staticClass:"version-title__h"},[e._v("正常版本")]),"group"===e.basicForm.configModel?a("el-tag",{staticClass:"version-title__tag",attrs:{type:"warning"}},[e._v("短标题模式需至少运营四个资源，长标题模式至少6个，才能填满布局哦~")]):e._e(),"group"===e.basicForm.configModel?a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:"",disabled:e.disabled},nativeOn:{click:function(t){return e.selectResource("normal","normalForm","multiSelect")}}},[e._v("批量选择资源")]):e._e()],1),a("div",{staticClass:"form-wrap"},["group"===e.basicForm.configModel?a("el-row",{staticClass:"normal-left-list",style:e.classObject,attrs:{gutter:4}},[a("draggable",{attrs:{options:{group:"normalVersion"}},on:{start:function(t){return e.onDragStart(t)},end:function(t){return e.onDragtEnd(t)}},model:{value:e.normalVersionContent,callback:function(t){e.normalVersionContent=t},expression:"normalVersionContent"}},e._l(e.normalVersionContent,function(t,i){return a("el-card",{key:i,staticClass:"normal-version-wrap",class:{active:i===e.currentIndex},nativeOn:{click:function(t){return e.switchNormal(i)}}},[e.normalVersionContent.length>1?a("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),e.deleteNormal(i)}}}):e._e(),t.poster.pictureUrl?a("img",{attrs:{src:t.poster.pictureUrl,referrerpolicy:"no-referrer"}}):e._e(),a("span",[e._v(e._s(t.title))])])}),1),e.disabled?e._e():a("el-card",{staticStyle:{cursor:"pointer"}},[a("span",{staticClass:"add-version",on:{click:e.addNormal}},[e._v("+添加资源")])])],1):e._e(),a("el-form",{ref:"normalForm",staticClass:"el-form-add",class:{cutLine:"group"===e.basicForm.configModel},staticStyle:{float:"left",width:"75%"},attrs:{model:e.normalForm,rules:e.normalRules,"label-width":"100px"}},[a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:e.normalResourceBtn,prop:"thirdIdOrPackageName"}},[e.autoWrite?a("el-button",{attrs:{disabled:e.disabled,type:"primary",plain:""},nativeOn:{click:function(t){return e.selectResource("normal","normalForm")}},model:{value:e.normalForm.thirdIdOrPackageName,callback:function(t){e.$set(e.normalForm,"thirdIdOrPackageName",t)},expression:"normalForm.thirdIdOrPackageName"}},[e._v("选择资源")]):e._e(),e.autoWrite?e._e():a("el-input",{staticStyle:{float:"left"},attrs:{disabled:e.disabled},on:{blur:e.getUrlBlur},model:{value:e.normalForm.thirdIdOrPackageName,callback:function(t){e.$set(e.normalForm,"thirdIdOrPackageName",t)},expression:"normalForm.thirdIdOrPackageName"}}),e.normalForm.thirdIdOrPackageName&&e.autoWrite?a("el-tag",{staticClass:"marginL",attrs:{type:"success"}},[e._v("已选择："+e._s(e.normalForm.thirdIdOrPackageName))]):e._e(),e.autoWrite&&"group"===e.basicForm.configModel&&!e.disabled?a("a",{staticClass:"write-play",attrs:{href:"#"},on:{click:e.autoWriteFun}},[e._v("手动填写播放串")]):e._e(),e.autoWrite||"group"!==e.basicForm.configModel?e._e():a("a",{staticClass:"write-play",staticStyle:{float:"left"},attrs:{href:"#"},on:{click:e.autoWriteFun}},[e._v("自动配置播放资源")])],1),"group"===e.basicForm.configModel?a("div",[e.normalForm.subchannelIs?a("el-form-item",{attrs:{label:"指定子频道",prop:"subchannelId"}},[a("el-input",{attrs:{disabled:e.disabled},on:{blur:function(t){return e.getSubchannel(e.normalForm)}},model:{value:e.normalForm.subchannelId,callback:function(t){e.$set(e.normalForm,"subchannelId",t)},expression:"normalForm.subchannelId"}})],1):e._e(),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{disabled:e.disabled},on:{blur:e.getTitleNormal},model:{value:e.normalForm.title,callback:function(t){e.$set(e.normalForm,"title",t)},expression:"normalForm.title"}})],1),a("el-form-item",{attrs:{label:"副标题",prop:"subTitle"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.normalForm.subTitle,callback:function(t){e.$set(e.normalForm,"subTitle",t)},expression:"normalForm.subTitle"}})],1)],1):e._e(),a("el-form-item",{attrs:{label:"海报",prop:"poster.pictureUrl"}},[a("el-card",{staticClass:"post-box",staticStyle:{height:"180px"},nativeOn:{click:function(t){return e.openPicture("poster","normalForm")}}},[e.normalForm.poster.pictureUrl?a("img",{staticStyle:{height:"180px"},attrs:{src:e.normalForm.poster.pictureUrl,referrerpolicy:"no-referrer"}}):e._e()])],1),a("el-form-item",{attrs:{label:"角标"}},[a("el-card",{staticClass:"corner-box"},e._l(e.normalForm.cornerIconList,function(t,i){return a("span",{key:i,staticClass:"corner",class:"corner-"+i},[t.imgUrl?a("span",{staticClass:"corner-img-wrapper",on:{click:function(t){return e.openPicture("corner","normalForm",i)}}},[a("img",{attrs:{src:t.imgUrl,referrerpolicy:"no-referrer"}}),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.deleteCorner(e.normalForm,i)}}})]):a("el-tag",{attrs:{type:"success"},on:{click:function(t){return e.openPicture("corner","normalForm",i)}}},[a("i",{staticClass:"el-icon-plus"})])],1)}),0)],1),"group"===e.basicForm.configModel?a("el-form-item",{attrs:{label:"点击事件",prop:"sign"}},[a("el-radio-group",{attrs:{disabled:e.signDisabled,size:"mini"},model:{value:e.normalForm.sign,callback:function(t){e.$set(e.normalForm,"sign",t)},expression:"normalForm.sign"}},[a("el-radio",{attrs:{label:"autoSet",disabled:e.disabled}},[e._v("自动生成")]),a("el-radio",{attrs:{label:"manualSet",disabled:e.disabled}},[e._v("手动设置")])],1)],1):e._e(),"manualSet"===e.normalForm.sign?a("div",[a("el-form-item",{attrs:{label:"打开方式"}},[a("el-select",{attrs:{value:"第三方应用"}},[a("el-option",{attrs:{value:"app"}},[e._v("第三方应用")])],1),a("el-button",{staticClass:"marginL",attrs:{type:"primary",plain:"",disabled:e.disabled},on:{click:function(t){e.onclickEventVisible=!0,e.onclickEventVisibleFlag="normal"}}},[e._v("快速填充")])],1),a("AppParams",{attrs:{"prop-prefix":"onclick."},model:{value:e.normalForm.onclick,callback:function(t){e.$set(e.normalForm,"onclick",t)},expression:"normalForm.onclick"}})],1):e._e()],1)],1),a("div",{staticClass:"version-title",staticStyle:{"margin-top":"25px"}},[a("h4",{staticStyle:{float:"left","margin-top":"7px"}},[e._v("兼容低版本")]),"group"===e.basicForm.configModel?a("div",{staticStyle:{display:"inline-block","margin-left":"14px"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",plain:"",disabled:e.disabled},on:{click:e.lowerFill}},[e._v("快速填充")]),a("span",[e._v("使用正常版本的第一个资源，快速配置")])],1):e._e()]),a("div",{staticClass:"form-wrap"},[a("el-form",{ref:"lowerForm",staticClass:"el-form-add",attrs:{model:e.lowerForm,rules:e.lowerRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"资源类别",prop:"coverType"}},[a("el-radio-group",{on:{change:e.cleanLowerForm},model:{value:e.lowerForm.coverType,callback:function(t){e.$set(e.lowerForm,"coverType",t)},expression:"lowerForm.coverType"}},[a("el-radio",{attrs:{label:"media",disabled:e.disabled}},[e._v("媒体资源")]),a("el-radio",{attrs:{label:"app",disabled:e.disabled}},[e._v("应用")]),a("el-radio",{attrs:{label:"custom",disabled:e.disabled}},[e._v("自定义")])],1)],1),"media"===e.lowerForm.coverType||"app"===e.lowerForm.coverType?a("el-form-item",{attrs:{label:"内容资源",prop:"thirdIdOrPackageName"}},[a("el-button",{attrs:{type:"primary",plain:"",disabled:e.disabled},nativeOn:{click:function(t){return e.selectResource("lower","lowerForm")}},model:{value:e.lowerForm.thirdIdOrPackageName,callback:function(t){e.$set(e.lowerForm,"thirdIdOrPackageName",t)},expression:"lowerForm.thirdIdOrPackageName"}},[e._v("选择资源")]),e.lowerForm.thirdIdOrPackageName?a("el-tag",{staticClass:"marginL",attrs:{type:"success"}},[e._v("已选择："+e._s(e.lowerForm.thirdIdOrPackageName))]):e._e()],1):e._e(),e.lowerForm.subchannelIs?a("el-form-item",{attrs:{label:"指定子频道",prop:"subchannelId"}},[a("el-input",{attrs:{disabled:e.disabled},on:{blur:function(t){return e.getSubchannel(e.lowerForm)}},model:{value:e.lowerForm.subchannelId,callback:function(t){e.$set(e.lowerForm,"subchannelId",t)},expression:"lowerForm.subchannelId"}})],1):e._e(),e.lowerForm.smallTopicsIs?a("el-form-item",{attrs:{label:"指定小专题",prop:"smallTopicsId"}},[a("el-input",{attrs:{disabled:e.disabled},on:{blur:e.smallTopicsLower},model:{value:e.lowerForm.smallTopicsId,callback:function(t){e.$set(e.lowerForm,"smallTopicsId",t)},expression:"lowerForm.smallTopicsId"}})],1):e._e(),a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.lowerForm.title,callback:function(t){e.$set(e.lowerForm,"title",t)},expression:"lowerForm.title"}})],1),a("el-form-item",{attrs:{label:"副标题",prop:"subTitle"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.lowerForm.subTitle,callback:function(t){e.$set(e.lowerForm,"subTitle",t)},expression:"lowerForm.subTitle"}})],1),a("el-form-item",{attrs:{label:"海报",prop:"poster.pictureUrl"}},[a("el-card",{staticClass:"post-box",staticStyle:{height:"180px"},attrs:{disabled:e.disabled},nativeOn:{click:function(t){return e.openPicture("poster","lowerForm")}}},[e.lowerForm.poster.pictureUrl?a("img",{staticStyle:{height:"180px"},attrs:{src:e.lowerForm.poster.pictureUrl,referrerpolicy:"no-referrer"}}):e._e()])],1),a("el-form-item",{attrs:{label:"角标"}},[a("el-card",{staticClass:"corner-box"},e._l(e.lowerForm.cornerIconList,function(t,i){return a("span",{key:i,staticClass:"corner",class:"corner-"+i},[t.imgUrl?a("span",{staticClass:"corner-img-wrapper",on:{click:function(t){return e.openPicture("corner","lowerForm",i)}}},[a("img",{attrs:{src:t.imgUrl,referrerpolicy:"no-referrer"}}),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.deleteCorner(e.lowerForm,i)}}})]):a("el-tag",{attrs:{type:"success"},on:{click:function(t){return e.openPicture("corner","lowerForm",i)}}},[a("i",{staticClass:"el-icon-plus"})])],1)}),0)],1),"media"===e.lowerForm.coverType||"app"===e.lowerForm.coverType?a("div",[a("el-form-item",{attrs:{label:"应用版本号",prop:"versionCode"}},[a("el-input",{attrs:{disabled:e.disabled},model:{value:e.lowerForm.versionCode,callback:function(t){e.$set(e.lowerForm,"versionCode",t)},expression:"lowerForm.versionCode"}})],1)],1):e._e(),"custom"===e.lowerForm.coverType?a("div",[a("el-form-item",{attrs:{label:"打开方式"}},[a("el-select",{attrs:{value:"第三方应用"}},[a("el-option",{attrs:{value:"app"}},[e._v("第三方应用")])],1),a("el-button",{staticClass:"marginL",attrs:{type:"primary",plain:"",disabled:e.disabled},on:{click:function(t){e.onclickEventVisible=!0,e.onclickEventVisibleFlag="lower"}}},[e._v("快速填充")])],1),a("AppParams",{ref:"openWayLower",attrs:{"prop-prefix":"onclick."},model:{value:e.lowerForm.onclick,callback:function(t){e.$set(e.lowerForm,"onclick",t)},expression:"lowerForm.onclick"}})],1):e._e()],1)],1),a("div",{staticClass:"submitCheck"},[e.disabled?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.submitCheck}},[e._v("提交审核")]),e.disabled?a("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:e.type,"not-contain-btn":e.notContainBtn,status:e.status,menuElId:e.menuElId},on:{"go-edit-Page":e.goEditPage,"delete-item":e.deleteItem}}):e._e()],1),a("el-dialog",{attrs:{visible:e.customDialogPicture.visible,width:"1200px"},on:{"update:visible":function(t){return e.$set(e.customDialogPicture,"visible",t)}}},[e.customDialogPicture.visible?a("DialogPicture",{attrs:{title:e.customDialogPicture.title,form:e.customDialogPicture.form},on:{"close-dialog":e.savePicture},model:{value:e.selectPicture,callback:function(t){e.selectPicture=t},expression:"selectPicture"}}):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.customDialogPicture.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.savePicture}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.customDialogCorner.visible,width:"1200px"},on:{"update:visible":function(t){return e.$set(e.customDialogCorner,"visible",t)}}},[e.customDialogCorner.visible?a("DialogCorner",{attrs:{typePosition:e.customDialogCorner.index,cornerIconTypeOptions:e.cornerIconTypeOptions},on:{"close-dialog":e.savePicture},model:{value:e.selectPicture,callback:function(t){e.selectPicture=t},expression:"selectPicture"}}):e._e(),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.customDialogCorner.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.savePicture}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:e.onclickEventVisible,width:"1200px"},on:{"update:visible":function(t){e.onclickEventVisible=t}}},[a("selectClick",{on:{"row-click":e.getClickData}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.onclickEventVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onclickEventVisible=!1,e.clickThirdpartSubmit()}}},[e._v("确 定")])],1)],1),e.resourceVisible?a("ResourceSelector",{attrs:{title:"选择资源","pannel-resource":e.pannelResource,"resource-options":e.resourceOptions},on:{"confirm-click":function(t){return e.resourceConfirm(t,e.currentForm)},"select-cancel":e.selectCancel}}):e._e()],1)},ge=[],ve=(a("456d"),a("bd86")),ye=a("1980"),we=a.n(ye),Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("RemoteSelect",{ref:"selector",attrs:{title:e.title,customClass:"container",showSelection:!1,showClearSelectionBtn:!1},on:{"select-end":e.confirmClick}},[a("el-tabs",{attrs:{value:"first"}},[a("el-tab-pane",{attrs:{label:"轮播频道",name:"first"}},[a("BroadcastFilter",{model:{value:e.filterValue,callback:function(t){e.filterValue=t},expression:"filterValue"}})],1)],1)],1)},Te=[],Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},Ce=[],ke={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"]},props:["multi"],data:function(){return{filter:{resType:"operation",dataType:"rotate",levelType:"rotateSta",callback:"result",page:1,rows:10},filterSchema:null,pagination:{pageSize:5},selected:[],selectedRows:{},table:{props:{},header:[{label:"轮播入口ID",prop:"id",sortable:!0},{label:"轮播入口名称",prop:"title"}],data:[],selected:[],selectionType:"single"}}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return e.code=e.id,t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterReset:function(){this.filter={resType:"operation",dataType:"rotate",levelType:"rotateSta",callback:"result",page:1,rows:10},this.fetchData()},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.id});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.id)>-1&&e.push(i),e},[])}},created:function(){this.table.selectionType=this.multi;var e=ne.a.map({id:ne.a.o.number.other("form",{component:"Input",placeholder:"轮播入口ID",label:"轮播入口ID"}),title:ne.a.o.string.other("form",{component:"Input",placeholder:"轮播入口名称",label:"轮播入口名称"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},_e=ke,Pe=Object(K["a"])(_e,Se,Ce,!1,null,"a4937094",null),xe=Pe.exports,De=(a("d8b2"),{components:{RemoteSelect:W["RemoteSelect"],ContentWrapper:W["ContentWrapper"],Table:W["Table"],BroadcastFilter:xe},props:["title"],data:function(){return{filterValue:null}},methods:{confirmClick:function(){this.filterValue||(this.$refs.selector.showDialog=!0,this.$message("请选择一条记录")),this.$emit("input",this.filterValue)}}}),Fe=De,$e=(a("f4b2"),Object(K["a"])(Fe,Ie,Te,!1,null,"18e338a6",null)),Re=$e.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("RemoteSelect",{ref:"selector",attrs:{title:e.title,customClass:"container",showSelection:!1,showClearSelectionBtn:!1},on:{"select-end":e.multipleSelect,"select-cancel":e.selectCancel}},[a("el-tabs",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[e.resourceOptions.tabShow["video"]?a("el-tab-pane",{attrs:{label:"影视中心",name:"video"}},[a("MovieFilter",{attrs:{multi:e.multi,partner:e.pannelResourceNew,"disable-partner":e.disablePartner,"movie-select":e.movieSelect},on:{partnerChange:function(t){e.pannelResourceNew=t},"row-click":function(t){return e.rowClick(t,"video")},"select-single":e.selectSingle},model:{value:e.selectAll.video,callback:function(t){e.$set(e.selectAll,"video",t)},expression:"selectAll.video"}})],1):e._e(),e.resourceOptions.tabShow["edu"]?a("el-tab-pane",{attrs:{label:"教育中心",name:"edu"}},[a("EduFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"edu")}},model:{value:e.selectAll.edu,callback:function(t){e.$set(e.selectAll,"edu",t)},expression:"selectAll.edu"}})],1):e._e(),e.resourceOptions.tabShow["live"]?a("el-tab-pane",{attrs:{label:"直播资源",name:"live"}},[a("LiveFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"live")}},model:{value:e.selectAll.live,callback:function(t){e.$set(e.selectAll,"live",t)},expression:"selectAll.live"}})],1):e._e(),e.resourceOptions.tabShow["topics"]?a("el-tab-pane",{attrs:{label:"专题资源",name:"topics"}},[a("TopicsFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"topics")}},model:{value:e.selectAll.topics,callback:function(t){e.$set(e.selectAll,"topics",t)},expression:"selectAll.topics"}})],1):e._e(),e.resourceOptions.tabShow["broadcast"]?a("el-tab-pane",{attrs:{label:"轮播频道",name:"broadcast"}},[a("BroadcastFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"broadcast")}},model:{value:e.selectAll.broadcast,callback:function(t){e.$set(e.selectAll,"broadcast",t)},expression:"selectAll.broadcast"}})],1):e._e(),e.resourceOptions.tabShow["app"]?a("el-tab-pane",{attrs:{label:"应用圈",name:"app"}},[a("AppFilter",{attrs:{multi:e.multi},on:{"row-click":function(t){return e.rowClick(t,"app")}},model:{value:e.selectAll.app,callback:function(t){e.$set(e.selectAll,"app",t)},expression:"selectAll.app"}})],1):e._e()],1),"movieSingleFilter"===e.mode?a("MovieSingleFilter",{attrs:{multi:"single",params:e.movieParams},on:{"single-select":e.movieSelectComfirm}}):e._e()],1)},Ne=[],Oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"渠道"}},[a("el-select",{attrs:{value:e.partner,disabled:e.disablePartner,size:"small"},on:{input:e.partnerChange}},e._l(e.partnerList,function(e,t){return a("el-option",{key:"partner"+t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"内容源"}},[a("el-select",{attrs:{size:"small"},on:{change:e.sourceSelectChange},model:{value:e.searchForm.sources,callback:function(t){e.$set(e.searchForm,"sources",t)},expression:"searchForm.sources"}},e._l(e.sources,function(e){return a("el-option",{key:"source"+e.source_code,attrs:{label:e.source_title,value:e.source_code}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tencent"===e.searchForm.sources,expression:"searchForm.sources==='tencent'"}],attrs:{label:"牌照"}},[a("el-select",{attrs:{size:"small",clearable:""},model:{value:e.searchForm.licensee,callback:function(t){e.$set(e.searchForm,"licensee",t)},expression:"searchForm.licensee"}},e._l(e.conditionList.licensee,function(e){return a("el-option",{key:"item"+e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})}),1)],1),a("el-form-item",{attrs:{label:"频道类型"}},[a("el-select",{attrs:{filterable:"",size:"small"},on:{change:e.categorySelectChange},model:{value:e.searchForm.category,callback:function(t){e.$set(e.searchForm,"category",t)},expression:"searchForm.category"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.categories,function(e){return a("el-option",{key:"category"+e.categoryId,attrs:{label:e.categoryName,value:e.categoryId}})})],2)],1),a("el-form-item",{attrs:{label:"影片类型"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.videoTypes,callback:function(t){e.$set(e.searchForm,"videoTypes",t)},expression:"searchForm.videoTypes"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.videoTypes,function(e){return a("el-option",{key:"videoType"+e.tagId,attrs:{label:e.tagName,value:e.tagName}})})],2)],1),a("el-form-item",{attrs:{label:"付费类型"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.payTypes,callback:function(t){e.$set(e.searchForm,"payTypes",t)},expression:"searchForm.payTypes"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.payTypes,function(e){return a("el-option",{key:"payType"+e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{size:"small"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),a("el-form-item",{attrs:{label:"素材类型"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTypes,callback:function(t){e.$set(e.searchForm,"contentTypes",t)},expression:"searchForm.contentTypes"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTypes,function(e){return a("el-option",{key:"contentType"+e.contentTypeId,attrs:{label:e.contentType,value:e.contentTypeId}})})],2)],1),a("el-form-item",{attrs:{label:"年代"}},[a("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearStartListen},model:{value:e.searchForm.yearStart,callback:function(t){e.$set(e.searchForm,"yearStart",t)},expression:"searchForm.yearStart"}}),e._v("-\n            "),a("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearEndListen},model:{value:e.searchForm.yearEnd,callback:function(t){e.$set(e.searchForm,"yearEnd",t)},expression:"searchForm.yearEnd"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}]},[a("el-form-item",{attrs:{label:"影片格式"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.videoFormat,callback:function(t){e.$set(e.searchForm,"videoFormat",t)},expression:"searchForm.videoFormat"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.videoFormat,function(e){return a("el-option",{key:"videoFormat"+e.tagEnName,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),a("el-form-item",{attrs:{label:"内容标签"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTag,callback:function(t){e.$set(e.searchForm,"contentTag",t)},expression:"searchForm.contentTag"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTag,function(e){return a("el-option",{key:"label"+e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"排序方式"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.searchForm.orderBy,callback:function(t){e.$set(e.searchForm,"orderBy",t)},expression:"searchForm.orderBy"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.orderBy,function(e){return a("el-option",{key:"order"+e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2),a("el-tooltip",{attrs:{content:e.orderTip}},[a("el-button",{attrs:{icon:"asc"===e.searchForm.order?"arrow-up":"arrow-down",size:"mini"},on:{click:function(t){return e.changeSort()}}})],1)],1),a("el-form-item",{attrs:{label:"导演"}},[a("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.directors,callback:function(t){e.$set(e.searchForm,"directors",t)},expression:"searchForm.directors"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.directors,function(e){return a("el-option",{key:"director"+e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"主演"}},[a("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.actors,callback:function(t){e.$set(e.searchForm,"actors",t)},expression:"searchForm.actors"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.actors,function(e){return a("el-option",{key:"actor"+e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"地区"}},[a("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.areas,callback:function(t){e.$set(e.searchForm,"areas",t)},expression:"searchForm.areas"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.areas,function(e){return a("el-option",{key:"area"+e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{icon:e.isMore?"arrow-up":"arrow-down",size:"small"},on:{click:function(t){return e.showMore()}}},[e._v(e._s(e.isMore?"收起":"展开"))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Ae=[],Ee=(a("20d6"),{components:{RemoteSelect:W["RemoteSelect"],ContentWrapper:W["ContentWrapper"],Table:W["Table"]},props:["partner","disablePartner","singleObj","multi","movieSelect"],data:function(){var e=this;return{sources:[],mode:"list",selectIndex:null,searchForm:{resType:"vod",callbackparam:"result",sources:"",category:"",videoTypes:"",licensee:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},partnerList:[{label:"腾讯",value:"tencent"},{label:"爱奇艺",value:"yinhe"}],originPartner:void 0,conditionList:{},categories:[],videoTypes:[],isMore:!1,orderTip:"降序排列",pagination:{currentPage:1,pageSize:5},selected:[],table:{props:{},header:[{prop:"coocaaVId",label:"ID",width:"130",sortable:!0},{prop:"title",label:"标题",width:"100"},{prop:"subTitle",label:"副标题",width:"100"},{prop:"ccVideoSourceEntities",label:"内容源",width:"60",render:function(t,a){var i=a.row;return t("div",e.getSourceLabel(i))}},{prop:"videoStatus",label:"状态",width:"50",formatter:function(e){return["失效","有效","待审核","审核不通过","草稿"][e.videoStatus]}},{prop:"thumb",label:"图片",width:"60",render:function(e,t){var a=t.row;return e("img",{attrs:{src:a.thumb,width:"50px",height:"50px",class:"imgs"}})}},{prop:"videoType",label:"影片类型",width:"80"},{prop:"contentType",label:"内容类型",width:"80"},{prop:"season",label:"期数"},{prop:"directors",label:"导演"},{prop:"actors",label:"演员",showOverflowTooltip:!0},{prop:"publishArea",label:"地区"},{prop:"year",label:"年代"},{prop:"segment",label:"已选集数",type:"specialBut",width:"100",mouseStyle:"hover",fixed:"right",render:function(e,t){var a=t.row;console.log(10);var i="undefined"!==typeof a.singleMovie?a.singleMovie.urlTitle:"";return"undefined"!==typeof a.singleMovie?e("el-button",{attrs:{type:"primary",text:"已选集数",value:"已选集数",title:i}},"已选集数"):""}},{prop:"but",label:"操作",width:"100",fixed:"right",render:function(t,a){return t("el-button",{on:{click:function(t){t.stopPropagation(),e.selectSingle(a)}}},"选择单集")}}],data:[],selected:[],selectionType:"single"}}},watch:{partner:function(e){this.searchForm.sources=this.partner,this.getSource(e)},selected:function(e){this.$emit("input",this.selected)},movieSelect:function(e){this.table.data[this.selectIndex].singleMovie=e,this.table.data[this.selectIndex].singleId=e.coocaaMId}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},deepClone:function(e){return JSON.parse(JSON.stringify(e))},sourceSelectChange:function(e){"tencent"!==e&&(this.searchForm.licensee="")},partnerChange:function(e){this.$emit("partnerChange",e)},selectSingle:function(e){var t=e.$index,a=e.row;this.selectIndex=t,this.$emit("select-single",{id:a.coocaaVId,source:this.searchForm.sources})},getSource:function(e){var t=this;this.$service.getPartnerSource({partnerName:e}).then(function(e){t.sources=e.rows.reduce(function(e,t){return t.source_List&&(e=e.concat(t.source_List)),e},[])})},getSourceLabel:function(e){for(var t=!1,a=0;a<e.ccVideoSourceEntities.length;a++)if("4KGarden"===e.ccVideoSourceEntities[a].thirdSource){t=!0;break}return!0===t?"4k花园":e.ccVideoSourceEntities[0]&&"tencent"===e.ccVideoSourceEntities[0].thirdSource?"腾讯":e.ccVideoSourceEntities[0]&&"yinhe"===e.ccVideoSourceEntities[0].thirdSource?"爱奇艺":void 0},statusLabel:function(e){return["失效","有效","待审核","审核不通过","草稿"][e.videoStatus]},categorySelectChange:function(e){this.searchForm.videoTypes="";var t=this.categories,a=t.findIndex(function(t){return t.categoryId===e});this.videoTypes=t[a]?t[a].child[0].tagEntities:[]},yearStartListen:function(){if(this.searchForm.yearStart&&!+this.searchForm.yearStart)return this.$message("年代必须为数字"),void(this.searchForm.yearStart=null)},yearEndListen:function(){if(this.searchForm.yearEnd&&!+this.searchForm.yearEnd)return this.$message("年代必须为数字"),void(this.searchForm.yearEnd=null)},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows});var a=Object.assign({},this.singleObj);a.data=[],a.selectId="",a.index=void 0,a.singleIdArr=[],a.singleIndexArr=[],a.titleArr=[],a.titleArrData=[]},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var a={};return Object.keys(e).map(function(t){e[t]&&(a[t]=e[t])}),a},reset:function(){this.searchForm={resType:"vod",callbackparam:"result",sources:this.partner,category:"",videoTypes:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},this.table.data=[],this.searchParams=this.deepClone(this.searchForm),this.partner!==this.originPartner&&this.$emit("partnerChange",this.originPartner),this.getSource(this.partner)},showMore:function(){this.isMore=!this.isMore},changeSort:function(){"asc"===this.searchForm.order?(this.searchForm.order="desc",this.orderTip="降序排列"):(this.searchForm.order="asc",this.orderTip="升序排列")},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.coocaaVId});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.coocaaVId)>-1&&e.push(i),e},[])}},created:function(){this.originPartner=this.partner,this.searchForm.sources=this.partner,this.table.selectionType=this.multi},mounted:function(){var e=this;this.getSource(this.partner),this.$service.getCondition().then(function(t){e.categories=t.vod.sources[0].child,e.conditionList=t.vod})}}),Ve=Ee,Me=Object(K["a"])(Ve,Oe,Ae,!1,null,"696ba073",null),Be=Me.exports,Ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[a("el-form",{attrs:{inline:!0,"label-width":"72px"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"内容商"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.contentProviders,callback:function(t){e.$set(e.searchForm,"contentProviders",t)},expression:"searchForm.contentProviders"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.contentProviders,function(e){return a("el-option",{key:e.tagCnName,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"教育分类"}},[a("el-select",{attrs:{size:"small"},on:{change:e.teachTypesSelectChange},model:{value:e.searchForm.teachTypes,callback:function(t){e.$set(e.searchForm,"teachTypes",t)},expression:"searchForm.teachTypes"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.teachTypes,function(e){return a("el-option",{key:e.categoryName,attrs:{label:e.categoryName,value:e.categoryName}})})],2)],1),a("el-form-item",{attrs:{label:"年级年龄"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择教育分类"},model:{value:e.searchForm.gradeList,callback:function(t){e.$set(e.searchForm,"gradeList",t)},expression:"searchForm.gradeList"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.gradeList,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"内容分类"}},[a("el-select",{attrs:{filterable:"",size:"small",placeholder:"请选择教育分类"},model:{value:e.searchForm.videoTypes,callback:function(t){e.$set(e.searchForm,"videoTypes",t)},expression:"searchForm.videoTypes"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.eduTypes,function(e){return a("el-option",{key:e.tagName,attrs:{label:e.tagName,value:e.tagName}})})],2)],1),a("el-form-item",{attrs:{label:"付费类型"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.payTypes,callback:function(t){e.$set(e.searchForm,"payTypes",t)},expression:"searchForm.payTypes"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.payTypes,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),a("el-form-item",{attrs:{label:"内容标签"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.contentTag,callback:function(t){e.$set(e.searchForm,"contentTag",t)},expression:"searchForm.contentTag"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.contentTag,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"课程名称"}},[a("el-input",{attrs:{size:"small"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}]},[a("el-form-item",{attrs:{label:"课程版本"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.courseVersion,callback:function(t){e.$set(e.searchForm,"courseVersion",t)},expression:"searchForm.courseVersion"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.courseVersion,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"集数"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.segmentTag,callback:function(t){e.$set(e.searchForm,"segmentTag",t)},expression:"searchForm.segmentTag"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.segmentTag,function(e){return a("el-option",{key:e.tagEnName,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),a("el-form-item",{attrs:{label:"是否全集"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.updateStatus,callback:function(t){e.$set(e.searchForm,"updateStatus",t)},expression:"searchForm.updateStatus"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),a("el-option",{attrs:{label:"不限",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1),a("el-form-item",{attrs:{label:"同步时间"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.synDate,callback:function(t){e.$set(e.searchForm,"synDate",t)},expression:"searchForm.synDate"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),a("el-option",{attrs:{label:"7天",value:7,size:"small"}}),a("el-option",{attrs:{label:"15天",value:15,size:"small"}}),a("el-option",{attrs:{label:"1个月",value:30,size:"small"}}),a("el-option",{attrs:{label:"3个月",value:90,size:"small"}}),a("el-option",{attrs:{label:"1年",value:365,size:"small"}})],1)],1),a("el-form-item",{attrs:{label:"动漫明星"}},[a("el-input",{attrs:{size:"small"},model:{value:e.searchForm.cartoonStar,callback:function(t){e.$set(e.searchForm,"cartoonStar",t)},expression:"searchForm.cartoonStar"}})],1),a("el-form-item",{attrs:{label:"地区"}},[a("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.areas,callback:function(t){e.$set(e.searchForm,"areas",t)},expression:"searchForm.areas"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.areas,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"年代"}},[a("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearStartListen},model:{value:e.searchForm.yearStart,callback:function(t){e.$set(e.searchForm,"yearStart",t)},expression:"searchForm.yearStart"}}),e._v("-\n            "),a("el-input",{staticStyle:{width:"48px"},attrs:{size:"small"},on:{blur:e.yearEndListen},model:{value:e.searchForm.yearEnd,callback:function(t){e.$set(e.searchForm,"yearEnd",t)},expression:"searchForm.yearEnd"}})],1),a("el-form-item",{attrs:{label:"排序方式"}},[a("el-select",{staticStyle:{width:"85px"},attrs:{size:"small"},model:{value:e.searchForm.orderBy,callback:function(t){e.$set(e.searchForm,"orderBy",t)},expression:"searchForm.orderBy"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.orderBy,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2),a("el-tooltip",{attrs:{content:e.orderTip}},[a("el-button",{attrs:{icon:"asc"===e.searchForm.order?"arrow-up":"arrow-down",size:"mini"},on:{click:function(t){return e.changeSort()}}})],1)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{icon:e.isMore?"arrow-up":"arrow-down",size:"small"},on:{click:function(t){return e.showMore()}}},[e._v(e._s(e.isMore?"收起":"展开"))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},je=[],He={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"]},props:["pannelResource","multi"],data:function(){return{pagination:{currentPage:1,pageSize:5},searchForm:{resType:"vod",callbackparam:"result",contentProviders:"",teachTypes:"",gradeList:"",videoTypes:"",payTypes:"",contentTag:"",orderBy:"",order:"desc",title:"",courseVersion:"",segmentTag:"",updateStatus:"",synDate:"",cartoonStar:"",areas:"",yearStart:null,yearEnd:null,businessType:1},selected:[],table:{props:{},data:[],header:[{prop:"coocaaVId",label:"ID",fixed:!0,width:"220"},{prop:"title",label:"课程名称",fixed:!0,width:"220"},{prop:"description",label:"课程简介",width:"250",showOverflowTooltip:!0},{prop:"sourceName",label:"内容提供商",width:"150"},{prop:"videoKey",label:"自定义标签",width:"150"},{prop:"classfication",label:"第三方标签",width:"150"},{prop:"thumb",label:"图片",width:"120",render:function(e,t){var a=t.row;return e("img",{attrs:{src:a.thumb,width:"50px",height:"50px",class:"imgs"}})}},{prop:"publistSegment",label:"课程集数",width:"120"}],selected:[],selectionType:"single"},conditionList:{},teachTypes:[],eduTypes:[],gradeList:[],isMore:!1,orderTip:"降序排列"}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},teachTypesSelectChange:function(e){this.searchForm.gradeList="",this.searchForm.videoTypes="";var t=this.teachTypes,a=t.findIndex(function(t){return t.categoryName===e});this.eduTypes=t[a]?t[a].child[0].tagEntities:[];var i=this.conditionList.gradeList,n=[];switch(e){case"幼儿":n=i.slice(0,2);break;case"小学":n=i.slice(2,8);break;case"初中":n=i.slice(8,11);break;case"高中":n=i.slice(11,14);break;default:break}this.gradeList=n},handleRowChange:function(e,t){this.table.selected=t,this.selected=e},yearStartListen:function(){if(this.searchForm.yearStart&&!+this.searchForm.yearStart)return this.$message("年代必须为数字"),void(this.searchForm.yearStart=null)},yearEndListen:function(){if(this.searchForm.yearEnd&&!+this.searchForm.yearEnd)return this.$message("年代必须为数字"),void(this.searchForm.yearEnd=null)},showMore:function(){this.isMore=!this.isMore},changeSort:function(){"asc"===this.searchForm.order?(this.searchForm.order="desc",this.orderTip="降序排列"):(this.searchForm.order="asc",this.orderTip="升序排列")},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var a={};return Object.keys(e).map(function(t){e[t]&&(a[t]=e[t])}),a},reset:function(){this.searchForm={resType:"vod",callbackparam:"result",contentProviders:"",teachTypes:"",gradeList:"",videoTypes:"",payTypes:"",contentTag:"",orderBy:"",order:"desc",title:"",courseVersion:"",segmentTag:"",updateStatus:"",synDate:"",cartoonStar:"",areas:"",yearStart:null,yearEnd:null,businessType:1},this.table.data=[]},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.coocaaVId});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.coocaaVId)>-1&&e.push(i),e},[])}},mounted:function(){var e=this,t={type:"vod",businessType:1};this.$service.getCondition(t).then(function(t){e.conditionList=t.vod})},created:function(){this.table.selectionType=this.multi}},qe=He,We=Object(K["a"])(qe,Ue,je,!1,null,"4e9bc269",null),Ge=We.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[a("el-form",{attrs:{inline:!0,"label-width":"72px"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"内容源"}},[a("el-select",{model:{value:e.searchForm.source,callback:function(t){e.$set(e.searchForm,"source",t)},expression:"searchForm.source"}},e._l(e.options.source,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"资源类型"}},[a("el-select",{model:{value:e.searchForm.nodeType,callback:function(t){e.$set(e.searchForm,"nodeType",t)},expression:"searchForm.nodeType"}},e._l(e.options.nodeType,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"内容类型"}},[a("el-select",{model:{value:e.searchForm.cateid,callback:function(t){e.$set(e.searchForm,"cateid",t)},expression:"searchForm.cateid"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.options.cateid,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-form-item",{attrs:{label:"内容搜索"}},[a("el-input",{model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},Je=[],Ke=(a("a481"),{components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"]},props:["multi"],data:function(){var e;return{pagination:{currentPage:1,pageSize:5},selected:[],searchForm:{callbackparam:"result",source:"tencent",nodeType:"live",cateid:"",title:""},options:{source:[{label:"腾讯",value:"tencent"},{label:"爱奇艺",value:"yinhe"}],nodeType:[{label:"直播",value:"live"},{label:"录播",value:"res"}],cateid:[{label:"足球",value:"1"},{label:"篮球",value:"2"},{label:"综合类型",value:"3"},{label:"非对阵类",value:"4"}]},table:(e={props:{},data:[],selected:[],header:[{prop:"vId",label:"ID",fixed:!0,width:"100"},{prop:"thirdId",label:"第三方ID",fixed:!0,width:"100"},{prop:"title",label:"标题",fixed:!0,width:"220"},{prop:"subTitle",label:"副标题",width:"120"},{prop:"cateid",label:"内容类别",width:"120"},{prop:"thumb",label:"海报",render:function(e,t){var a=t.row;return e("img",{attrs:{src:a.thumb,width:"50px",height:"50px",class:"imgs"}})},width:"120"},{prop:"startTime",label:"开始时间",width:"200"},{prop:"endTime",label:"结束时间",width:"200"},{prop:"createdDate",label:"创建时间",width:"200"},{prop:"lastUpdateDate",label:"更新时间",width:"200"}]},Object(ve["a"])(e,"selected",[]),Object(ve["a"])(e,"selectionType","single"),e)}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.queryLiveVideoResult(t).then(function(t){t=JSON.parse(t.replace("result(","").replace(/\)*$/,"")),e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var a={};return Object.keys(e).map(function(t){e[t]&&(a[t]=e[t])}),a},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.vId});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.vId)>-1&&e.push(i),e},[])},reset:function(){this.searchForm={callbackparam:"result",source:"tencent",nodeType:"live",cateid:"",title:""},this.table.data=[]}},created:function(){this.table.selectionType=this.multi}}),Xe=Ke,Ye=Object(K["a"])(Xe,ze,Je,!1,null,"0e9f3aa2",null),Ze=Ye.exports,Qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.search}},[a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[a("el-form",{attrs:{inline:!0,"label-width":"72px"},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"专题类别"}},[a("el-select",{model:{value:e.searchForm.levelType,callback:function(t){e.$set(e.searchForm,"levelType",t)},expression:"searchForm.levelType"}},e._l(e.options,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"专题名称"}},[a("el-input",{model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},et=[],tt={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"]},props:["multi"],data:function(){return{pagination:{currentPage:1,pageSize:5},searchForm:{resType:"operation",dataType:"topic",callback:"result",levelType:"",title:""},options:[{label:"大专题",value:"parentTopic"},{label:"小专题",value:"childTopic"}],table:{props:{},data:[],header:[{prop:"id",label:"ID",fixed:!0,width:"100"},{prop:"title",label:"专题名称",fixed:!0,width:"220"},{prop:"picture",label:"专题背景",render:function(e,t){var a=t.row;if(a.picture)return e("img",{attrs:{src:a.picture,width:"110px",height:"50px",class:"imgs"}})},width:"120"},{prop:"dataSign",label:"专题类别",width:"200",formatter:function(e){return"parentTopic"===e.dataSign?"大专题":"childTopic"===e.dataSign?"小专题":void 0}},{prop:"lastUpdateDate",label:"更新时间",width:"200"}],selected:[],selectionType:"single"},selected:[]}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("single-select",e)},reset:function(){this.searchForm={resType:"operation",dataType:"topic",callback:"result",levelType:"",title:""},this.table.data=[]},search:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMediaVideoInfos(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.searchForm,t=this.pagination;t&&(e.page=t.currentPage,e.rows=t.pageSize);var a={};return Object.keys(e).map(function(t){e[t]&&(a[t]=e[t])}),a},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.id});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.id)>-1&&e.push(i),e},[])},created:function(){this.table.selectionType=this.multi}}},at=tt,it=Object(K["a"])(at,Qe,et,!1,null,"8ca8a73a",null),nt=it.exports,ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},lt=[],rt={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],RemoteSelect:W["RemoteSelect"]},props:{multi:{type:String,default:"single"},params:Object},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{pageSize:5},selected:[],table:{props:{},header:[{label:"ID",prop:"appId",width:"70"},{label:"应用名称",prop:"appName",width:"100"},{label:"应用包名",prop:"appPackageName"},{label:"图片",prop:"appImageUrl",render:function(e,t){var a=t.row;return e("img",{attrs:{src:a.appImageUrl,width:"50px",height:"50px",class:"imgs"}})}}],data:[],selected:[],selectionType:"multiple"}}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("row-click",e)},selectCancel:function(){this.$emit("select-cancel")},handleChange:function(e,t,a){for(var i=[],n=0;n<e.length;n++)i.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(i)},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.appId});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.appId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();Object.assign(t,this.params),this.$service.getAppManagementList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){this.table.selectionType=this.multi;var e=ne.a.map({appId:ne.a.o.string.other("form",{component:"Input",placeholder:"应用ID"}),appName:ne.a.o.string.other("form",{component:"Input",placeholder:"应用名称"}),appPackageName:ne.a.o.string.other("form",{component:"Input",placeholder:"应用包名"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},st=rt,ct=(a("f3d2"),Object(K["a"])(st,ot,lt,!1,null,"45d0b298",null)),ut=ct.exports,dt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)},pt=[],ht={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],RemoteSelect:W["RemoteSelect"]},props:{multi:{type:String,default:"single"},params:Object},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{pageSize:5},selected:[],table:{props:{},header:[{label:"集数名",prop:"urlCollection",width:"70"},{label:"单集ID",prop:"coocaaMId",width:"100"},{label:"单集名称",prop:"urlTitle"},{label:"图片",prop:"thumb",render:function(e,t){var a=t.row;return e("img",{attrs:{src:a.thumb,width:"50px",height:"50px",class:"imgs"}})}},{label:"素材类型",width:"120",prop:"urlIsTrailer",render:function(e,t){var a=t.row;return"1"===a.urlIsTrailer?"非正片":"正片"}}],data:[],selected:[],selectionType:"multiple"}}},watch:{selected:function(e){this.$emit("input",this.selected)}},methods:{rowClick:function(e){"single"===this.multi&&this.$emit("single-select",e)},selectCancel:function(){this.$emit("select-cancel")},handleChange:function(e,t,a){for(var i=[],n=0;n<e.length;n++)i.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(i)},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.coocaaMId});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.coocaaMId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();Object.assign(t,this.params),this.$service.getSegmentList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){this.table.selectionType=this.multi;var e=ne.a.map({urlIsTrailer:ne.a.o.enum({"非正片":"1","正片":"0"}).other("form",{component:"Select",placeholder:"素材类型"}),urlTitle:ne.a.o.string.other("form",{component:"Input",placeholder:"单集名称"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},mt=ht,ft=(a("8e78"),Object(K["a"])(mt,dt,pt,!1,null,"656ad996",null)),bt=ft.exports,gt={components:{RemoteSelect:W["RemoteSelect"],ContentWrapper:W["ContentWrapper"],Table:W["Table"],BroadcastFilter:xe,MovieFilter:Be,EduFilter:Ge,LiveFilter:Ze,TopicsFilter:nt,MovieSingleFilter:bt,AppFilter:ut},props:{resourceOptions:{type:Object,default:{multi:"single",tabShow:{broadcast:!0}}},title:String},data:function(){return{mode:"list",currentTab:"broadcast",movieSelect:null,disablePartner:!0,selectAll:{},selected:null,pannelResourceNew:"",pannelResource:"",multi:null,movieParams:null}},methods:{movieSelectComfirm:function(e){this.mode="list",this.movieSelect=e,this.$refs.selector.showDialog=!0},multipleSelect:function(){var e=this;this.selectAll||(this.$refs.selector.showDialog=!0,this.$message("请选择一条记录"));var t=[],a=Object.keys(this.selectAll),i=function(i){var n=a[i];e.selectAll[n].forEach(function(a){t.push(e.callbackParam(n,a))})};for(var n in a)i(n);this.$emit("confirm-click",t)},selectCancel:function(){"list"!==this.mode?this.mode="list":this.$emit("select-cancel")},selectSingle:function(e){this.mode="movieSingleFilter",this.movieParams=e,this.$refs.selector.showDialog=!0},rowClick:function(e,t){var a=this.callbackParam(t,e);this.$emit("confirm-click",a)},callbackParam:function(e,t){var a={type:"",contentType:"",thirdIdOrPackageName:""};switch(e){case"video":a.contentType="movie","o_tencent"===this.pannelResourceNew||"tencent"===this.pannelResourceNew?a.thirdIdOrPackageName="_otx_"+t.coocaaVId:"o_iqiyi"===this.pannelResourceNew||"yinhe"===this.pannelResourceNew?a.thirdIdOrPackageName="_oqy_"+t.coocaaVId:a.thirdIdOrPackageName=t.coocaaVId,a.singleId=t.singleId,a.pictureUrl=t.thumb,a.title=t.title,a.subTitle=t.subTitle,a.type="res";break;case"app":a.contentType="app",a.coverType="app",a.thirdIdOrPackageName=t.appPackageName,a.pictureUrl=t.appImageUrl,a.title=t.appName,a.type="app";break;case"edu":a.contentType="edu",a.thirdIdOrPackageName="_otx_"+t.coocaaVId,a.platformId=t.source,a.pictureUrl=t.thumb,a.title=t.title,a.subTitle=t.subTitle,a.type="res";break;case"pptv":a.contentType="pptv",a.thirdIdOrPackageName="pptv_tvsports://tvsports_detail?section_id="+t.pid+"&from_internal=1",a.title=t.pTitle,a.type="";break;case"live":a.contentType="txLive",a.thirdIdOrPackageName="_otx_"+t.vId,a.platformId=t.source,a.pictureUrl=t.thumb,a.title=t.title,a.subTitle=t.subTitle,a.type="live";break;case"topics":"parentTopic"===t.dataSign?a.contentType="bigTopic":a.contentType="topic",a.thirdIdOrPackageName=t.id+"",a.pictureUrl=t.picture,a.title=t.title,a.subTitle=t.subTitle,a.type="topic";break;case"broadcast":a.contentType="rotate",a.thirdIdOrPackageName=t.id+"",a.pictureUrl=t.picture,a.title=t.title,a.subTitle=t.subTitle,a.type="rotate";break;default:break}return a}},created:function(){this.multi=this.resourceOptions.multi?"multiple":"single";var e=Object.keys(this.resourceOptions.tabShow);this.currentTab=e[0]},mounted:function(){switch(this.$refs.selector.showDialog=!0,this.pannelResource){case"o_tencent":this.pannelResourceNew="tencent",this.disablePartner=!0;break;case"o_iqiyi":this.pannelResourceNew="yinhe",this.disablePartner=!0;break;case"o_voole":this.pannelResourceNew="voole",this.disablePartner=!0;break;default:this.pannelResourceNew="tencent",this.disablePartner=!1}}},vt=gt,yt=(a("7b00"),Object(K["a"])(vt,Le,Ne,!1,null,"bd0996b8",null)),wt=yt.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var i=t.row;return a("div",{staticClass:"box-list"},[a("p",{staticClass:"list-p"},[a("img",{staticClass:"list-img",attrs:{src:i.pictureUrl,alt:""}})]),a("p",{staticClass:"list-title"},[e._v(e._s(i.pictureName))]),a("p",{staticStyle:{margin:"0"}},[1==i.pictureStatus?a("span",[e._v("审核通过")]):a("span",[e._v("待审核")]),a("span",[e._v(e._s(i.pictureResolution))])])])}}])})],1)],1)},Tt=[],St={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],CardList:W["CardList"]},props:{title:String},data:function(){return{materialTypes:{},pictureStatus:{"审核通过":1,"待审核":2},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{pageSize:5},selected:[],table:{props:{},data:[],selected:void 0,selectionType:"single"}}},methods:{handleRowSelectionChange:function(e,t){this.table.selected=t,this.$emit("input",e),"single"===this.table.selectionType&&this.$emit("close-dialog","savePicture")},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getResourceList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=ne.a.map({pictureId:ne.a.o.string.other("form",{component:"Input",placeholder:"素材ID"}),pictureName:ne.a.o.string.other("form",{component:"Input",placeholder:"素材名称"}),pictureCategory:ne.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别"}),pictureStatus:ne.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},Ct=St,kt=(a("c3f6"),Object(K["a"])(Ct,It,Tt,!1,null,"7e77e0e0",null)),_t=kt.exports,Pt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var i=t.row;return a("div",{staticClass:"box-list"},[a("p",{staticClass:"list-p"},[a("img",{staticClass:"list-img",attrs:{src:i.imgUrl,alt:""}})]),a("p",{staticClass:"list-title"},[e._v(e._s(i.cornerIconName))]),a("p",{staticStyle:{margin:"0"}},[1==i.cornerStatus?a("span",[e._v("审核通过")]):a("span",[e._v("待审核")])])])}}])})],1)],1)},xt=[],Dt=(a("c5f6"),{components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],CardList:W["CardList"]},props:{title:String,typePosition:Number,cornerIconTypeOptions:Object,visible:!1},watch:{visible:function(e){e&&this.fetchData()}},data:function(){return{pictureStatus:{"审核通过":1,"待审核":2},cornerIconType:{typePosition:this.typePosition,typeId:""},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{currentPage:1,pageSize:10},selected:[],table:{props:{},data:[],selected:void 0,selectionType:"single"}}},methods:{handleRowSelectionChange:function(e,t){this.table.selected=t,this.$emit("input",e),"single"===this.table.selectionType&&this.$emit("close-dialog","savePicture")},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={page:1,rows:10},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),this.cornerIconType.typeId=e.cornerIconType,this.cornerIconType.typePosition=this.typePosition,e.cornerIconType=void 0,e["cornerIconType.typeId"]=this.cornerIconType.typeId,e["cornerIconType.typePosition"]=this.cornerIconType.typePosition,e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getCornerList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})}},created:function(){var e=ne.a.map({cornerIconId:ne.a.o.string.other("form",{component:"Input",placeholder:"角标ID"}),cornerIconName:ne.a.o.string.other("form",{component:"Input",placeholder:"角标名称"}),cornerIconType:ne.a.o.enum(this.cornerIconTypeOptions).other("form",{component:"Select",placeholder:"角标类别"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.filterSchema=e}}),Ft=Dt,$t=(a("9c56"),Object(K["a"])(Ft,Pt,xt,!1,null,"3207607a",null)),Rt=$t.exports,Lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick}})],1)],1)},Nt=[],Ot={},At=Object(K["a"])(Ot,B,U,!1,null,null,null),Et=(At.exports,{components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:void 0,table:{props:{},header:[{label:"ID",prop:"commonOnclickId",width:"70"},{label:"点击事件名称",prop:"onlickName"},{label:"备注",prop:"remark"},{label:"修改人",prop:"modifierName"},{label:"修改时间",prop:"lastUpdateDate",width:"170"}],data:[],selected:[],selectionType:"single"}}},methods:{rowClick:function(e){this.$emit("row-click",e)},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getClickData(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},handleRowSelectionAdd:function(e){this.selected.push(e.commonOnclickId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.commonOnclickId}),this.updateTableSelected()},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.commonOnclickId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e}},created:function(){var e=ne.a.map({commonOnclickId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID  "}),onlickName:ne.a.o.string.other("form",{component:"Input",placeholder:"点击事件名称"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}}),Vt=Et,Mt=(a("a644"),Object(K["a"])(Vt,Lt,Nt,!1,null,"1b863604",null)),Bt=Mt.exports,Ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ActionList",{staticClass:"actions",attrs:{actions:e.actions,target:this}}),a("el-dialog",{attrs:{title:"审核",visible:e.auditDialog,width:"30%"},on:{"update:visible":function(t){e.auditDialog=t}}},[a("span",[a("el-form",{ref:"auditForm",staticClass:"demo-ruleForm",attrs:{model:e.auditForm,"status-icon":"",rules:e.auditFormRule,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[a("el-radio",{attrs:{label:"4"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),a("el-radio",{attrs:{label:"5"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),a("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入意见说明"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitAuditMessage}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.auditDialog=!1}}},[e._v("取 消")])],1)])],1)},jt=[],Ht=(a("5df3"),{components:{ActionList:W["ActionList"]},props:{id:Number,version:{type:String,default:""},hasHistory:{type:Boolean,default:function(){return!0}},type:String,status:Number,menuElId:String,notContainBtn:{type:Array,default:function(){return[]}}},watch:{version:function(e,t){this.getAuditDetailButton()}},data:function(){return{actions:{},auditDialog:!1,auditForm:{auditFlag:"4",auditDesc:""},auditFormRule:{auditDesc:[{required:!0,message:"请输入审核意见",trigger:"blur"}]}}},methods:{submitAuditMessage:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&e.$service.auditTask({id:e.id,version:e.version,type:e.type,auditFlag:e.auditForm.auditFlag,auditDesc:e.auditForm.auditDesc},"审核成功").then(function(t){e.auditDialog=!1,e.$emit("auditTask")})})},promiseAll:function(){var e=this,t={resourceId:this.id,version:this.version,type:this.type,status:this.status,menuElId:this.menuElId},a=this.$service.getHistoryList({id:this.id,type:this.type}),i=this.$service.getAuditDetailButton(t);Promise.all([a,i]).then(function(t){var a=t[0].rows,i=!0;null===a&&(a=[]),a.forEach(function(e){if(2===parseInt(e.status)||3===parseInt(e.status))return i=!1,!1}),i||e.notContainBtn.push("copy");var n=t[1],o={};n.forEach(function(t){e.notContainBtn.indexOf(t.runComm)<0&&(o[t.runComm]={text:t.runName,type:"primary"})}),e.actions=o})},getAuditDetailButton:function(){var e=this;if(this.hasHistory)this.promiseAll();else{var t={resourceId:this.id,version:this.version,type:this.type,status:this.status,menuElId:this.menuElId};this.$service.getAuditDetailButton(t).then(function(t){var a={};t.forEach(function(t){e.notContainBtn.indexOf(t.runComm)<0&&(a[t.runComm]={text:t.runName,type:"primary"})}),e.actions=a})}},edit:function(){this.$emit("go-edit-Page")},delete:function(){this.$emit("delete-item")},audit:function(){this.auditDialog=!0},unaudit:function(){var e=this;window.confirm("真的要撤销审核吗？")&&this.$service.revokedAudit({id:this.id,version:this.version,type:this.type},"撤销成功").then(function(t){e.auditDialog=!1,e.$emit("revokedAudit")})},copy:function(){this.$emit("copy")},shelves:function(){var e=this,t={id:this.id,version:this.version,type:this.type};this.$service.putShelves(t,"上架成功").then(function(){e.$emit("open-list-page")})}},created:function(){this.getAuditDetailButton()}}),qt=Ht,Wt=(a("4561"),Object(K["a"])(qt,Ut,jt,!1,null,"f21aa1e4",null)),Gt=Wt.exports,zt={components:{draggable:we.a,BroadcastSource:Re,ResourceSelector:wt,DialogPicture:_t,DialogCorner:Rt,selectClick:Bt,AppParams:W["AppParams"],AuditDetailButton:Gt},props:{editData:Object,isReview:Boolean},data:function(){var e;return e={status:null,id:null,version:"",type:"block",menuElId:"broadcastBlock",notContainBtn:["claim","unclaim","copy"],disabled:!1,historyList:[],onclickEventVisibleFlag:"",clickData:void 0,onclickEventVisible:!1,cornerIconTypeOptions:{},cornerTypes:[],materialTypes:null,resourceVisible:!1,resourceOptions:{multi:!1,activeTabName:"video",tabShow:{video:!0,app:!0,edu:!0,live:!0,broadcast:!0}},basicForm:{containerName:"",containerType:"REFERENCE_BROADCASTING",configModel:"broadcast"},normalForm:{},lowerForm:{coverType:"media"},auditDisabled:!1,normalRules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],"poster.pictureUrl":[{required:!0,message:"请上传海报",trigger:"blur"}],thirdIdOrPackageName:[{required:!0,message:"请填选择资源",trigger:"blur"}]},lowerRules:{title:[{required:!0,message:"请填写标题",trigger:"blur"}],"poster.pictureUrl":[{required:!0,message:"请上传海报",trigger:"blur"}],thirdIdOrPackageName:[{required:!0,message:"请填选择资源",trigger:"blur"}]},normalResourceBtn:"轮播资源",currentIndex:0,pictureListOptions:{poster:{idField:"pictureId",searchParams:{pictureId:{label:"素材ID"},pictureName:{label:"素材名称"},pictureCategory:{label:"素材类别",options:[]},pictureStatus:{label:"素材状态",options:[{label:"审核通过",value:"1"},{label:"待审核",value:"2"}]}},picField:"pictureUrl",textItems:[{field:"pictureName"},{field:"pictureStatus",customFormatter:function(e,t){return["","审核通过","待审核"][t]}}]},corner:{idField:"cornerIconId",searchParams:{cornerIconId:{label:"角标ID"},cornerIconName:{label:"角标名称"},"cornerIconType.typeId":{label:"角标类别",options:[]}},picField:"imgUrl",textItems:[{field:"cornerIconName"},{field:"cornerStatus",customFormatter:function(e,t){return["","审核通过","待审核"][t]}}]}},signDisabled:!1,modelType:"broadcast",versionForm:{title:"",subTitle:"",type:"",coverType:"media",thirdIdOrPackageName:"",subchannelId:"",subchannelIs:"",params:{},onclick:"",sign:"autoSet",contentType:"",clickParams:"",poster:{},cornerIconList:[{},{},{},{}]},pictureType:"",currentForm:"",pannelResource:"",autoWrite:!0,normalVersionContent:[],openModeArray:[{name:"第三方应用",value:"app"}],referenceDataNormal:[],referenceData:[],noPreview:"noPreview",referenceOptions:{picture:!1}},Object(ve["a"])(e,"resourceVisible",!1),Object(ve["a"])(e,"layoutOptions",{contentDataNew:[]}),Object(ve["a"])(e,"selectPicture",""),Object(ve["a"])(e,"resourceSeq",""),Object(ve["a"])(e,"layoutparam",{}),Object(ve["a"])(e,"layouttypenew",""),Object(ve["a"])(e,"checkresourceis",!0),Object(ve["a"])(e,"customDialogPicture",{}),Object(ve["a"])(e,"customDialogCorner",{}),Object(ve["a"])(e,"pictureOptions",{}),e},computed:{classObject:function(){return"autoSet"===this.normalForm.sign?{height:"600px"}:{height:"1000px"}}},watch:{"basicForm.configModel":{deep:!0,handler:function(e,t){"group"===e?this.normalResourceBtn="播放资源":"broadcast"===e&&(this.normalResourceBtn="轮播资源")}},"normalForm.sign":{deep:!0,handler:function(e,t){"manualSet"===e&&(this.normalForm.coverType="custom",this.normalForm.contentType="custom",!1===this.autoWrite&&(this.normalForm.type="url"))}}},methods:{getVersion:function(e){},goEditPage:function(){this.$emit("go-edit-Page")},deleteItem:function(){this.$emit("open-list-page")},clickThirdpartSubmit:function(){var e=this.onclickEventVisibleFlag;if("lower"===e){var t=this.$refs.openWayLower.inputValue;this.parseOnclick(t)}else{var a=this.$refs.openWayNormal.inputValue;this.parseOnclick(a)}},selectCancel:function(e){this.resourceVisible=!1,"savePicture"===e&&this.savePicture()},parseOnclick:function(e){var t=this.clickData;Object.keys(e).map(function(a){if("params"===a){var i=JSON.parse(t[a]);e[a]=Object.keys(i).map(function(e){return{key:e,value:i[e]}})}else e[a]=t[a]})},getClickData:function(e){this.clickData=e;var t=JSON.parse(e.params),a=Object.keys(t),i=a.reduce(function(e,a,i){var n={};return n.key=a,n.value=t[a],e.push(n),e},[]),n={packagename:e.packagename,versioncode:e.versioncode,dowhat:e.dowhat,bywhat:e.bywhat,byvalue:e.byvalue,params:i,exception:e.exception};this[this.onclickEventVisibleFlag+"Form"]["onclick"]=n},autoWriteFun:function(){if(this.autoWrite=!this.autoWrite,!1===this.autoWrite){this.normalForm=Object.assign({},this.versionForm),this.normalVersionContent.splice(this.currentIndex,1,this.normalForm),this.normalForm.sign="manualSet",this.signDisabled=!0,this.normalForm.type="url",this.normalForm.contentType="custom",this.normalForm.coverType="custom";var e=Object.assign({},this.normalForm),t={url:this.normalForm.thirdIdOrPackageName,source:"",name:this.normalForm.title,needParse:"false",url_type:"web"};e.params=JSON.stringify(t),this.normalForm=e}else this.normalForm=Object.assign({},this.versionForm),this.normalForm.sign="autoSet",this.signDisabled=!1,this.normalVersionContent[this.currentIndex]=this.normalForm},deleteCorner:function(e,t){var a=e.cornerIconList.slice(0);a[t]={cornerIconId:"",imgUrl:"",position:t},e.cornerIconList=a,console.log(e)},modelChange:function(e){var t=this;this.$confirm("切换后配置数据将被清空, 是否确认切换?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"模式切换成功!"}),t.modelType=t.basicForm.configModel,t.clearFormAll()}).catch(function(){t.$message({type:"info",message:"已取消切换"});var e=Object.assign({},t.basicForm);e.configModel=t.modelType,t.basicForm=e})},clearFormAll:function(){this.normalForm=Object.assign({},this.versionForm),this.lowerForm=Object.assign({},this.versionForm);var e=[];e.push(this.normalForm),this.normalVersionContent=e},selectResource:function(e,t,a){this.resourceVisible=!0,this.resourceOptions.activeTabName="video",this.currentForm=t;var i=Object.assign({},this.resourceOptions);i.multi=!1,"multiSelect"===a&&(i.multi=!0),i.activeTabName="video","normal"===e?"broadcast"===this.basicForm.configModel?(i.tabShow={broadcast:!0},i.activeTabName="broadcast"):"group"===this.basicForm.configModel&&(i.tabShow={video:!0,edu:!0,live:!0,topics:!1,broadcast:!0}):"lower"===e&&("media"===this.lowerForm.coverType?i.tabShow={video:!0,edu:!0,live:!0,topics:!0,broadcast:!0}:"app"===this.lowerForm.coverType&&(i.tabShow={app:!0},i.activeTabName="app")),this.resourceOptions=i},paramIdFun:function(e,t){if("movie"===t.contentType)if(t.singleId)var a={id:t.thirdIdOrPackageName,vid:t.singleId};else a={id:t.thirdIdOrPackageName};else if("app"===t.contentType||"edu"===t.contentType||"txLive"===t.contentType)a={id:t.thirdIdOrPackageName};else if("bigTopic"===t.contentType)a={pTopicCode:t.thirdIdOrPackageName};else if("topic"===t.contentType)a={topicCode:t.thirdIdOrPackageName};else if("rotate"===t.contentType)a={rotateId:t.thirdIdOrPackageName};return a},packageFormParam:function(e,t){var a=JSON.parse(JSON.stringify(this.versionForm));a=Object.assign({},a,e),"rotate"===e.contentType?a.subchannelIs=!0:a.subchannelIs=!1,"bigTopic"===e.contentType?a.smallTopicsIs=!0:a.smallTopicsIs=!1,e.pictureUrl&&(a.poster.pictureUrl=e.pictureUrl,a.poster.pictureId=e.pictureId);var i=this.paramIdFun(a,e);return a.clickParams=JSON.stringify(i),a.params=JSON.stringify(i),a},smallTopicsLower:function(){if(this.lowerForm.smallTopicsId){var e=JSON.parse(this.lowerForm.params);e.topicCode=this.lowerForm.smallTopicsId,this.lowerForm.params=JSON.stringify(e)}},getUrlBlur:function(){if(!1===this.autoWrite){var e=Object.assign({},this.normalForm),t={url:this.normalForm.thirdIdOrPackageName,source:"",name:this.normalForm.title,needParse:"false",url_type:"web"};e.params=JSON.stringify(t),this.normalForm=e}},getTitleNormal:function(){if(!1===this.autoWrite){var e=Object.assign({},this.normalForm),t={url:this.normalForm.thirdIdOrPackageName,source:"",name:this.normalForm.title,needParse:"false",url_type:"web"};e.params=JSON.stringify(t),this.normalForm=e,this.normalVersionContent.splice(this.currentIndex,1,this.normalForm)}},getSubchannel:function(e){if(e.subchannelId){var t=JSON.parse(e.params);t.stationId=e.subchannelId,e.params=JSON.stringify(t)}},resourceConfirm:function(e,t){var a=this;this.resourceVisible=!1,this.normalVersionContent=this.normalVersionContent.filter(function(e){return""!==e.type}),e instanceof Array?(this.normalVersionContent=e.reduce(function(e,t){return e.push(a.packageFormParam(t)),e},this.normalVersionContent),this[t]=this.normalVersionContent[0]):(this[t]=this.packageFormParam(e),this.normalVersionContent.push(this.packageFormParam(e,t)))},checkNormalForm:function(e){var t=this;this.$refs.normalForm.validate(function(a){if(!a)return t.$message("请将表单填写完整"),!1;"manualSet"===t.normalForm.sign?(t.normalVersionContent.splice(t.currentIndex,1,t.normalForm),e()):e()})},checkLowerForm:function(e){var t=this;this.$refs.lowerForm.validate(function(a){if(!a)return t.$message("请将表单填写完整"),!1;t.lowerForm.coverType,e()})},deepClone:function(e){return JSON.parse(JSON.stringify(e))},addNormal:function(e){var t=this;this.checkNormalForm(function(){t.normalForm=t.deepClone(t.versionForm),t.normalVersionContent.push(t.normalForm),t.currentIndex=t.normalVersionContent.length-1,t.referenceDataNormal=[],t.autoWrite=!0,t.signDisabled=!1})},deleteNormal:function(e){var t=this;this.$confirm("是否删除当前选中项?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"删除成功!"}),t.normalVersionContent.splice(e,1),t.currentIndex=0,t.normalForm=t.normalVersionContent[0],"url"===t.normalForm.type?t.autoWrite=!1:t.autoWrite=!0,"manualSet"===t.normalForm.sign?(t.referenceDataNormal={onclick:t.normalForm.onclick,params:"openMode==app"},"url"!==t.normalForm.type?t.signDisabled=!1:t.signDisabled=!0):t.signDisabled=!0}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},switchNormal:function(e){var t=this;this.checkNormalForm(function(){t.currentIndex=e,t.normalForm=t.normalVersionContent[e],"url"===t.normalForm.type?t.autoWrite=!1:t.autoWrite=!0,"manualSet"===t.normalForm.sign?(t.referenceDataNormal={onclick:t.normalForm.onclick,params:"openMode==app"},"url"===t.normalForm.type?t.signDisabled=!0:t.signDisabled=!1):t.signDisabled=!1,t.normalVersionContent.splice(e,1,t.normalForm)})},openPicture:function(e,t,a){this.disabled||(this.pictureType=e,this.currentForm=t,"poster"===e?this.customDialogPicture={visible:!0,form:t}:this.customDialogCorner={visible:!0,form:t,index:a},this.pictureOptions=this.pictureListOptions[e])},savePicture:function(){var e=this.selectPicture;if("{}"===JSON.stringify(e))this.$message("请至少选择一项");else{if(this.customDialogPicture.visible=!1,this.customDialogCorner.visible=!1,"poster"===this.pictureType)this[this.currentForm].poster={pictureUrl:e.pictureUrl,pictureId:e.pictureId};else if("corner"===this.pictureType){var t=e.cornerIconType.typePosition,a={cornerIconId:e.cornerIconId,position:t,imgUrl:e.imgUrl},i=this[this.currentForm].cornerIconList.slice(0);i[t]=a,this[this.currentForm].cornerIconList=i,this.customDialogCorner.visible=!1}this.selectPicture={}}this.normalVersionContent[this.currentIndex]=this.normalForm},onDragStart:function(e){console.log(e)},onDragtEnd:function(e){console.log(e),this.currentIndex=e.newIndex,this.normalForm=this.normalVersionContent[e.newIndex]},lowerFill:function(){var e=Object.assign({},this.normalVersionContent[0]);this.lowerForm=e},cleanLowerForm:function(e){var t=Object.assign({},this.versionForm);t.type=e,t.coverType=e,"custom"===e&&(t.sign="openMode==app",t.contentType="custom",t.params="{}"),this.lowerForm=t},saveNormal:function(e){var t=this;this.checkNormalForm(function(){if("group"===t.basicForm.configModel){if(t.normalVersionContent.length<4)return t.$message("组合模式下，正常版本的配置资源至少4个，才可以进行保存！"),!1;e()}else e()})},submitCheck:function(){var e=this;this.$refs.basicForm.validate(function(t){if(!t)return e.$message("请将表单填写完整"),!1;e.saveNormal(function(){e.checkLowerForm(function(){var t={normalVersionContent:[],lowerVersionContent:{}};"group"===e.basicForm.configModel?(e.normalVersionContent.map(function(e){e.onclick&&(e.onclick=JSON.stringify(e.onclick)),delete e.thirdIdOrPackageName}),t.normalVersionContent=e.normalVersionContent):(e.normalForm.onclick&&(e.normalForm.onclick=JSON.stringify(e.normalForm.onclick)),t.normalVersionContent.push(e.normalForm)),delete e.lowerForm.smallTopicsId,t.lowerVersionContent=e.lowerForm;var a=Object.assign(t,e.basicForm);a.status=3,a.parentType="Block",console.log("resultObj",a),e.$service.saveBlockInfo(a,"提交成功").then(function(){e.$emit("open-list-page")})})})})},close:function(){window.parent.$("#add-view").dialog("_close")},getEditData:function(){var e=this;this.$service.getBroadcastBlockEditData({id:this.id,version:this.version}).then(function(t){e.normalVersionContent=t.normalVersionContent.map(function(e){var t=JSON.parse(e.params);return e.thirdIdOrPackageName="undefined"!==typeof t.id?t.id:t.rotateId,e}),e.normalForm=e.normalVersionContent[0],"undefined"!==typeof JSON.parse(t.lowerVersionContent.params).id&&(t.lowerVersionContent.thirdIdOrPackageName=JSON.parse(t.lowerVersionContent.params).id),e.lowerVersionContent=e.lowerForm=t.lowerVersionContent,e.basicForm.configModel=t.configModel,e.basicForm.containerName=t.containerName,e.basicForm.containerType=t.containerType})}},created:function(){var e=this,t=this;this.normalForm=Object.assign({},this.versionForm),this.lowerForm=Object.assign({},this.versionForm),this.lowerForm.smallTopicsId="",this.lowerForm.smallTopicsIs=!1,"{}"!==JSON.stringify(this.editData)?(this.id=this.editData.id,this.version=this.editData.currentVersion,this.status=this.editData.status,this.isReview?(this.title="预览页面",this.disabled=!0):(this.title="编辑页面",this.disabled=!1),this.getEditData()):(this.title="新增页面",this.disabled=!1),this.$service.getMaterialTypes().then(function(e){for(var a=[],i=0;i<e.length;i++){var n={label:e[i].dictCnName,value:e[i].dictId};a.push(n),t.pictureListOptions.poster.searchParams.pictureCategory.options=a}}),this.$service.getCornerTypes().then(function(t){for(var a={},i=0;i<t.length;i++){var n=t[i].typeName,o=t[i].typeId;a[n]=o}e.cornerIconTypeOptions=a})}},Jt=zt,Kt=(a("d158"),Object(K["a"])(Jt,be,ge,!1,null,"5803594c",null)),Xt=Kt.exports,Yt={components:{BroadcastBlockList:fe,BroadcastBlockAdd:Xt},data:function(){return{mode:"list",editData:{},isReview:!1,currentVersion:null}},methods:{openAddPage:function(e,t){this.editData=e,this.isReview=t,this.mode="add"},openListPage:function(){this.mode="list",this.editData={},this.$refs.list.fetchData()},goBack:function(){this.mode="list",this.editData={}}}},Zt=Yt,Qt=Object(K["a"])(Zt,Q,ee,!1,null,"5361c572",null),ea=Qt.exports,ta=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("MultiFunctionBlockList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?a("MultiFunctionBlockAdd",{attrs:{editData:e.editData},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?a("MultiFunctionBlockView",{attrs:{viewId:e.viewId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},aa=[],ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"multiFunctionBlock"},on:{add:e.addData,edit:e.editData,delete:e.batchDel}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},na=[],oa={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{parentTypes:{"多版本推荐位":"multi","标记推荐位":"sign","秒杀推荐位":"secKill"},childTypes:{},pictureStatus:{"下架":0,"上架":1,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},source:{"无":0,"腾讯":1,"爱奇艺":2},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pluginId",width:"70"},{label:"功能名称",prop:"pluginName",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.previewData(i)}}},i.pluginName)}},{label:"内容源",prop:"source",render:function(e,t){var a=t.row;switch(a.source){case 0:return"无";case 1:return"腾讯";case 2:return"爱奇艺"}}},{label:"状态",prop:"pluginStatus",render:function(e,t){var a=t.row;switch(a.pluginStatus){case 0:return"下架";case 1:return"上架";case 2:return"草稿";case 3:return"待审核";case 4:return"审核通过";case 5:return"审核不通过"}}},{label:"更新时间",prop:"lastUpdateDate"}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMultiBlockList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getPluginParentTypes:function(){this.$service.getPluginParentTypes().then(function(e){console.log(e)})},getPluginTypes:function(){var e=this;this.$service.getPluginTypes().then(function(t){console.log(t),0==t.code&&t.forEach(function(t){e.childTypes[t.label]=t.id})})},addData:function(){this.$emit("open-add-page",null)},editData:function(e){e.row;0==this.selected.length?this.$message("请选择一条数据"):this.selected.length>1?this.$message("只能选择一条"):this.$emit("open-add-page",this.selected[0])},previewData:function(e){this.$emit("open-view-page",e.pluginId)},batchDel:function(){var e=this;0!==this.selected.length?this.selected.length>1?this.$message("只能选择一条数据"):window.confirm("确定要删除吗")&&this.$service.removeMulti({id:this.selected[0]},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.pluginId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pluginId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pluginId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e}},created:function(){var e=ne.a.map({pluginId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),pluginName:ne.a.o.string.other("form",{component:"Input",placeholder:"功能名称"}),pluginParentType:ne.a.o.enum(this.parentTypes).other("form",{component:"Select",placeholder:"父功能名称"}),pluginStatus:ne.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"状态"}),source:ne.a.o.enum(this.source).other("form",{component:"Select",placeholder:"内容源"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getPluginParentTypes(),this.getPluginTypes(),this.filterSchema=e,this.fetchData()}},la=oa,ra=(a("07bd"),Object(K["a"])(la,ia,na,!1,null,"25303a06",null)),sa=ra.exports,ca=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{staticClass:"multi-func-block-upsert"},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])]),a("el-form",{ref:"blockForm",staticClass:"el-form-add",attrs:{rules:e.rules,model:e.block,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName",rules:e.rules.pluginInfo.pluginName}},[a("el-input",{model:{value:e.block.pluginInfo.pluginName,callback:function(t){e.$set(e.block.pluginInfo,"pluginName","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginName"}})],1),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[a("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime},model:{value:e.block.pluginInfo.refreshTime,callback:function(t){e.$set(e.block.pluginInfo,"refreshTime",t)},expression:"block.pluginInfo.refreshTime"}})],1)]),a("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[a("el-radio-group",{on:{change:e.handleChangeActivityFlag},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[a("el-radio",{attrs:{label:0}},[e._v("非活动")]),a("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType",rules:e.rules.pluginInfo.pluginParentType}},[a("el-select",{staticClass:"plugin-parent-type-selector",attrs:{value:e.block.pluginInfo.pluginParentType,disabled:"edit"===e.mode,placeholder:"请选择"},on:{input:e.handleChangePluginParentType}},e._l(e.pluginParentTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),"secKill"!==e.pluginParentType?a("el-form-item",{attrs:{label:"内容源",prop:"pluginInfo.source",rules:e.rules.pluginInfo.source}},[a("el-radio-group",{attrs:{value:e.block.pluginInfo.source,disabled:e.isDisabledSource},on:{input:e.handleChangeSource}},e._l(e.SOURCE,function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),"sign"===e.pluginParentType?[a("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[a("el-input",{model:{value:e.block.pluginInfo.pluginType,callback:function(t){e.$set(e.block.pluginInfo,"pluginType","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginType"}})],1)]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0?a("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[a("el-select",{staticClass:"plugin-type-selector",staticStyle:{width:"300px","max-width":"300px"},attrs:{value:e.block.pluginInfo.pluginType,placeholder:"请选择"},on:{input:e.handleChangePluginType}},e._l(e.pluginTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e.baseHasTitle?[a("el-form-item",{attrs:{label:"标题",prop:"helper.title",rules:e.rules.title}},[a("el-input",{model:{value:e.block.helper.title,callback:function(t){e.$set(e.block.helper,"title","string"===typeof t?t.trim():t)},expression:"block.helper.title"}})],1),a("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle",rules:e.rules.subTitle}},[a("el-input",{model:{value:e.block.helper.subTitle,callback:function(t){e.$set(e.block.helper,"subTitle","string"===typeof t?t.trim():t)},expression:"block.helper.subTitle"}})],1)]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,i){return a("div",{key:i},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v(e._s(t.label))])]),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"状态栏文字",prop:"rlsInfo."+i+".title",rules:e.rules.barText}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title","string"===typeof a?a.trim():a)},expression:"item.title"}}),e._v("|\n              "),a("el-input",{model:{value:t.subTitle,callback:function(a){e.$set(t,"subTitle","string"===typeof a?a.trim():a)},expression:"item.subTitle"}})],1)]:e._e(),e.versionHasTitle?[a("el-form-item",{attrs:{label:"标题",prop:"rlsInfo."+i+".title",rules:e.rules.title}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title","string"===typeof a?a.trim():a)},expression:"item.title"}})],1),a("el-form-item",{attrs:{label:"副标题",prop:"rlsInfo."+i+".subTitle",rules:e.rules.subTitle}},[a("el-input",{model:{value:t.subTitle,callback:function(a){e.$set(t,"subTitle","string"===typeof a?a.trim():a)},expression:"item.subTitle"}})],1)]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"商品ID",prop:"rlsInfo."+i+".goodsId",rules:e.rules.goodsId}},[a("el-input",{model:{value:t.goodsId,callback:function(a){e.$set(t,"goodsId","string"===typeof a?a.trim():a)},expression:"item.goodsId"}})],1),a("el-form-item",{attrs:{label:"商品名称",prop:"rlsInfo."+i+".title",rules:e.rules.goodsId}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title","string"===typeof a?a.trim():a)},expression:"item.title"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"海报",prop:"rlsInfo."+i+".poster.pictureUrl",rules:e.rules.poster.pictureUrl}},[a("div",{staticClass:"poster",on:{click:function(t){return e.handleSelectPosterStart(i)}}},[t.poster.pictureUrl?a("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[a("el-form-item",{attrs:{label:"异形焦点",prop:"rlsInfo."+i+".extendInfo.focusImgUrl",rules:e.rules.focusImgUrl}},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSelectFocusImgStart(i)}}},[e._v("选择异形焦点")]),t.extendInfo.focusImgUrl?a("div",{staticClass:"focus-transition"},[a("i",{staticClass:"focus-transition__remove el-icon-circle-close",attrs:{title:"移除异形焦点"},on:{click:function(t){return e.handleRemoveFocusImg(i)}}}),a("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):e._e()],1),a("el-form-item",{attrs:{label:"存活时间",prop:"rlsInfo."+i+".extendInfo.aliveTime",rules:e.rules.aliveTime}},[a("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime1},model:{value:t.extendInfo.aliveTime,callback:function(a){e.$set(t.extendInfo,"aliveTime",a)},expression:"item.extendInfo.aliveTime"}})],1)]),a("el-form-item",{attrs:{label:"点击次数",prop:"rlsInfo."+i+".extendInfo.clickCount",rules:e.rules.clickCount}},[a("el-input",{model:{value:t.extendInfo.clickCount,callback:function(a){e.$set(t.extendInfo,"clickCount",e._n(a))},expression:"item.extendInfo.clickCount"}})],1)]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType||"builtIn"===e.pluginParentType?a("el-form-item",{attrs:{label:"打开方式",rules:e.rules.openMode}},[a("el-select",{attrs:{value:t.openMode},on:{input:function(a){return e.handleChangeOpenMode(t,a)}}},["builtIn"===e.pluginParentType||"REFERENCE_MOVIE_VIP"===e.pluginType||"REFERENCE_ACTIVITY"===e.pluginType?a("el-option",{attrs:{label:"网页",value:"webpage"}}):e._e(),"REFERENCE_ACTIVITY"===e.pluginType?[a("el-option",{attrs:{label:"视频",value:"video"}}),a("el-option",{attrs:{label:"图片",value:"picture"}}),a("el-option",{attrs:{label:"版面",value:"tab"}})]:e._e(),a("el-option",{attrs:{label:"第三方应用",value:"app"}})],2),"app"===t.openMode?a("el-button",{staticClass:"marginL",attrs:{type:"primary",plain:""},on:{click:function(t){return e.handleSelectClickStart(i)}}},[e._v("快速填充")]):e._e()],1):e._e(),"webpage"===t.openMode?[a("el-form-item",{attrs:{label:"网页地址",prop:"rlsInfo."+i+".onclick.webpageUrl",rules:e.rules.webpageUrl}},[a("el-input",{model:{value:t.onclick.webpageUrl,callback:function(a){e.$set(t.onclick,"webpageUrl","string"===typeof a?a.trim():a)},expression:"item.onclick.webpageUrl"}})],1),a("el-form-item",{attrs:{label:"网页类型",prop:"rlsInfo."+i+".onclick.webpageType"}},[a("el-radio-group",{model:{value:t.onclick.webpageType,callback:function(a){e.$set(t.onclick,"webpageType",a)},expression:"item.onclick.webpageType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("浮窗网页")]),a("el-radio",{attrs:{label:"2"}},[e._v("全屏网页")])],1)],1),a("el-form-item",{attrs:{label:"应用版本号",prop:"rlsInfo."+i+".onclick.webpageAppVersion",rules:e.rules.webpageAppVersion}},[a("el-input",{model:{value:t.onclick.webpageAppVersion,callback:function(a){e.$set(t.onclick,"webpageAppVersion","string"===typeof a?a.trim():a)},expression:"item.onclick.webpageAppVersion"}})],1)]:e._e(),"video"===t.openMode?[a("el-form-item",{attrs:{label:"视频名称",prop:"rlsInfo."+i+".onclick.videoName",rules:e.rules.videoName}},[a("el-input",{model:{value:t.onclick.videoName,callback:function(a){e.$set(t.onclick,"videoName","string"===typeof a?a.trim():a)},expression:"item.onclick.videoName"}})],1),a("el-form-item",{attrs:{label:"视频地址",prop:"rlsInfo."+i+".onclick.videoUrl",rules:e.rules.videoUrl}},[a("el-input",{model:{value:t.onclick.videoUrl,callback:function(a){e.$set(t.onclick,"videoUrl","string"===typeof a?a.trim():a)},expression:"item.onclick.videoUrl"}})],1)]:e._e(),"tab"===t.openMode?[a("el-form-item",{attrs:{label:"版面",prop:"rlsInfo."+i+".onclick.tab",rules:e.rules.tab}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSelectTabStart(i)}}},[e._v("选择版面")]),t.onclick.tab?a("el-tag",{attrs:{type:"primary"}},[e._v("已选择: "+e._s(t.onclick.tab.tabId))]):e._e()],1)]:e._e(),"picture"===t.openMode?[a("el-form-item",{attrs:{label:"选择图片",prop:"rlsInfo."+i+".onclick.picture",rules:e.rules.picture}},[a("el-upload",{attrs:{action:e.urls.uploadImg,"on-success":e.createUploadSuccessHandler(i),"on-remove":e.createUploadRemoveHandler(i),multiple:!1,"file-list":t.onclick.picture,accept:"image/png, image/gif, image/jpeg, image/bmp","list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("点击上传")]),a("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("提示:只能上传png/gif/jpg/bmp文件")])],1)],1)]:e._e(),"app"===t.openMode?a("AppParams",{attrs:{"prop-prefix":"rlsInfo."+i+".onclick."},model:{value:t.onclick,callback:function(a){e.$set(t,"onclick",a)},expression:"item.onclick"}}):e._e()],2)}):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitAudit}},[e._v("提交审核")])],1)],2),a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("selectResource",{on:{selected:e.getSelectResource}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogClickTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogClickTableVisible=t}}},[a("selectClick",{on:{"row-click":e.getClickData}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogClickTableVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{visible:e.showFocusImgSelectorVisible,width:"1200px"},on:{"update:visible":function(t){e.showFocusImgSelectorVisible=t}}},[a("selectImg",{on:{selectImg:e.getSelectImg}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showFocusImgSelectorVisible=!1}}},[e._v("取 消")])],1)],1)],1)])},ua=[],da=(a("7f7f"),a("28a5"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form-item",{attrs:{label:"应用包名",prop:e.formProp("packagename"),rules:e.rules.packagename}},[a("el-input",{model:{value:e.inputValue.packagename,callback:function(t){e.$set(e.inputValue,"packagename","string"===typeof t?t.trim():t)},expression:"inputValue.packagename"}})],1),a("el-form-item",{attrs:{label:"应用版本号",prop:e.formProp("versioncode"),rules:e.rules.versioncode}},[a("el-input",{model:{value:e.inputValue.versioncode,callback:function(t){e.$set(e.inputValue,"versioncode","string"===typeof t?t.trim():t)},expression:"inputValue.versioncode"}})],1),a("el-form-item",{attrs:{label:"启动动作",prop:e.formProp("dowhat"),rules:e.rules.dowhat}},[a("el-select",{model:{value:e.inputValue.dowhat,callback:function(t){e.$set(e.inputValue,"dowhat",t)},expression:"inputValue.dowhat"}},[a("el-option",{attrs:{label:"startActivity",value:"startActivity"}}),a("el-option",{attrs:{label:"startService",value:"startService"}}),a("el-option",{attrs:{label:"sendBroadcast",value:"sendBroadcast"}})],1)],1),a("el-form-item",{attrs:{label:"启动方式",prop:e.formProp("bywhat"),rules:e.rules.bywhat}},[a("el-select",{model:{value:e.inputValue.bywhat,callback:function(t){e.$set(e.inputValue,"bywhat",t)},expression:"inputValue.bywhat"}},[a("el-option",{attrs:{label:"action",value:"action"}}),a("el-option",{attrs:{label:"class",value:"class"}}),a("el-option",{attrs:{label:"uri",value:"uri"}}),a("el-option",{attrs:{label:"activity",value:"activity"}})],1)],1),a("el-form-item",{attrs:{label:"启动参数",prop:e.formProp("byvalue"),rules:e.rules.byvalue}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.inputValue.byvalue,callback:function(t){e.$set(e.inputValue,"byvalue","string"===typeof t?t.trim():t)},expression:"inputValue.byvalue"}})],1),a("el-form-item",{attrs:{label:"扩展参数"}},[e._l(e.inputValue.params,function(t,i){return a("div",{key:i,staticClass:"app-extend-params"},[a("el-form-item",{attrs:{label:"key:","label-width":"60px",prop:e.formProp("params."+i+".key"),rules:e.rules.params.key}},[a("el-input",{model:{value:t.key,callback:function(a){e.$set(t,"key","string"===typeof a?a.trim():a)},expression:"param.key"}})],1),a("el-form-item",{attrs:{label:"value:","label-width":"60px",prop:e.formProp("params."+i+".value"),rules:e.rules.params.value}},[a("el-input",{model:{value:t.value,callback:function(a){e.$set(t,"value","string"===typeof a?a.trim():a)},expression:"param.value"}})],1),a("a",{staticClass:"app-params__remove-param",on:{click:function(t){return e.handleRemoveParam(i)}}},[a("i",{staticClass:"el-icon-minus"})])],1)}),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddParam}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加\n        ")])],2)],1)}),pa=[],ha={data:function(){function e(e,t,a){/[！￥……（）——【】：；“”‘’、《》，。？\s+]/.test(t)?a(new Error("请勿输入特殊或空白字符")):a()}return{inputValue:{packagename:void 0,versioncode:void 0,dowhat:void 0,bywhat:void 0,byvalue:void 0,params:[],exception:{}},rules:{packagename:[{required:!0,message:"请输入应用包名",trigger:"blur"}],versioncode:[{required:!0,message:"请输入应用版本号",trigger:"blur"}],dowhat:[{required:!0,message:"请选择启动动作",trigger:"blur"}],bywhat:[{required:!0,message:"请选择启动方式",trigger:"blur"}],byvalue:[{required:!0,message:"请输入启动参数",trigger:"blur"}],params:{key:[{required:!0,message:"不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],value:[{required:!0,message:"不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}}},props:["value","label-width","propPrefix"],watch:{value:"setInputValue"},methods:{formProp:function(e){return(this.propPrefix||"")+e},genDefaultValue:function(){return{packagename:void 0,versioncode:void 0,dowhat:void 0,bywhat:void 0,byvalue:void 0,params:[]}},setInputValue:function(e){e!==this.inputValue&&(this.inputValue=Object.assign(this.genDefaultValue(),e))},emitInputValue:function(e){this.$emit("input",this.inputValue)},handleAddParam:function(){this.inputValue.params.push({key:void 0,value:void 0})},handleRemoveParam:function(e){this.inputValue.params.splice(e,1)}},created:function(){this.value&&this.setInputValue(this.value),this.$watch("inputValue",this.emitInputValue,{deep:!0})}},ma=ha,fa=(a("5110"),Object(K["a"])(ma,da,pa,!1,null,"61957cee",null)),ba=fa.exports,ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handle},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})},va=[],ya={data:function(){return{value1:"",time:""}},methods:{parseStrToMin:function(e){var t=e.split(":"),a=parseInt(t[0]),i=parseInt(t[1]);return 60*a+i},handle:function(){void 0!=this.value1&&(this.time=this.parseStrToMin(this.value1),this.$emit("input",this.time))}}},wa=ya,Ia=Object(K["a"])(wa,ga,va,!1,null,null,null),Ta=Ia.exports,Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var i=t.row;return a("div",{staticClass:"box-list"},[a("p",{staticClass:"list-p"},[a("img",{staticClass:"list-img",attrs:{src:i.pictureUrl,alt:""},on:{click:function(t){return e.reviewPic(i.pictureUrl)}}})]),a("p",{staticClass:"list-title"},[e._v(" "+e._s(i.pictureName))]),a("p",{staticStyle:{margin:"0"}},[1==i.pictureStatus?a("span",[e._v("审核通过")]):a("span",[e._v("待审核")]),a("span",[e._v(" "+e._s(i.pictureResolution))])])])}}])}),a("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.picDialogVisible=t}}},[a("span",{staticClass:"pics"},[a("img",{staticStyle:{width:"50%"},attrs:{src:e.reviewPicUrl,alt:"图片"}})])])],1)],1)},Ca=[],ka={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],CardList:W["CardList"]},data:function(){var e=this;return{materialTypes:{},pictureStatus:{"审核通过":1,"待审核":2},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pictureId",width:"70"},{label:"ID",prop:"pictureUrl",width:"70",render:function(t,a){var i=a.row;return t("img",{attrs:{src:i.pictureUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(i)}}})}},{label:"素材名称",width:"120",prop:"pictureName",sortable:!0},{label:"分辨率",prop:"pictureResolution",width:"110",sortable:!0},{label:"状态",prop:"pictureStatus",width:"90",render:function(e,t){var a=t.row;switch(a.pictureStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"素材类型",prop:"materialTypes",width:"70",render:function(e,t){var a=t.row;return a.materialTypes.length>0?a.materialTypes[0].dictCnName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0},{label:"操作",width:"200",fixed:"right",render:W["utils"].component.createOperationRender(this,{editData:"编辑"})}],data:[],selected:void 0,selectionType:"single"}}},methods:{reviewPic:function(e){this.reviewPicUrl=e,this.picDialogVisible=!0},handleRowSelectionChange:function(e,t){console.log(e),this.$emit("selected",e);this.table.selected=t},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getResourceList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=ne.a.map({pictureId:ne.a.o.string.other("form",{component:"Input",placeholder:"素材ID",cols:{item:3,label:0}}),pictureName:ne.a.o.string.other("form",{component:"Input",placeholder:"素材名称",cols:{item:3,label:0}}),pictureCategory:ne.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别",cols:{item:3,label:0}}),pictureStatus:ne.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},_a=ka,Pa=(a("e5f0"),Object(K["a"])(_a,Sa,Ca,!1,null,"f3a6d82c",null)),xa=Pa.exports,Da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("CardList",{attrs:{data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange},scopedSlots:e._u([{key:"row",fn:function(t){var i=t.row;return a("div",{staticClass:"box-list"},[a("p",{staticClass:"list-p"},[a("img",{staticClass:"list-img",attrs:{src:i.pictureUrl,alt:""},on:{click:function(t){return e.reviewPic(i.pictureUrl)}}})]),a("p",{staticClass:"list-title"},[e._v(" "+e._s(i.pictureName))]),a("p",{staticStyle:{margin:"0"}},[1==i.pictureStatus?a("span",[e._v("审核通过")]):a("span",[e._v("待审核")]),a("span",[e._v(" "+e._s(i.pictureResolution))])])])}}])}),a("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.picDialogVisible=t}}},[a("span",{staticClass:"pics"},[a("img",{staticStyle:{width:"50%"},attrs:{src:e.reviewPicUrl,alt:"图片"}})])])],1)],1)},Fa=[],$a={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],CardList:W["CardList"]},data:function(){var e=this;return{materialTypes:{},pictureStatus:{"审核通过":1,"待审核":2},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pictureId",width:"70"},{label:"ID",prop:"pictureUrl",width:"70",render:function(t,a){var i=a.row;return t("img",{attrs:{src:i.pictureUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(i)}}})}},{label:"素材名称",width:"120",prop:"pictureName",sortable:!0},{label:"分辨率",prop:"pictureResolution",width:"110",sortable:!0},{label:"状态",prop:"pictureStatus",width:"90",render:function(e,t){var a=t.row;switch(a.pictureStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"素材类型",prop:"materialTypes",width:"70",render:function(e,t){var a=t.row;return a.materialTypes.length>0?a.materialTypes[0].dictCnName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0},{label:"操作",width:"200",fixed:"right",render:W["utils"].component.createOperationRender(this,{editData:"编辑"})}],data:[],selected:void 0,selectionType:"single"}}},methods:{reviewPic:function(e){this.reviewPicUrl=e,this.picDialogVisible=!0},handleRowSelectionChange:function(e,t){console.log(e),this.$emit("selectImg",e);this.table.selected=t},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getResourceList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,console.log(t)})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=ne.a.map({pictureId:ne.a.o.string.other("form",{component:"Input",placeholder:"素材ID",cols:{item:3,label:0}}),pictureName:ne.a.o.string.other("form",{component:"Input",placeholder:"素材名称",cols:{item:3,label:0}}),pictureCategory:ne.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别",cols:{item:3,label:0}}),pictureStatus:ne.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},Ra=$a,La=(a("2ac6"),Object(K["a"])(Ra,Da,Fa,!1,null,"b0ab0348",null)),Na=La.exports,Oa={sign:"sign",multi:"multi",builtIn:"builtIn",secKill:"secKill"},Aa={none:{label:"无",value:0},tencent:{label:"腾讯",value:1},iqiyi:{label:"爱奇艺",value:2}},Ea={draft:2,waiting:3,accepted:4,reject:5,processing:7};window.basicFn={};var Va={components:{ccAppParamsForm:ba,ccTimeSpinner:Ta,selectResource:xa,selectClick:Bt,selectImg:Na,AppParams:W["AppParams"]},props:{editId:Number,default:null},data:function(){return{title:null,dialogTableVisible:!1,dialogClickTableVisible:!1,showFocusImgSelectorVisible:!1,clickData:{},selectResource:{},selectImgData:{},urls:{uploadImg:"/api/uploadHomeImg.html"},STATUS:Ea,PARENT_TYPES:Oa,SOURCE:Aa,mode:"create",pluginParentTypes:[],pluginTypes:[],pluginVersions:{},selectingPostForIndex:void 0,selectingClickForIndex:void 0,showTabSelector:!1,selectingTabForIndex:void 0,selectingFocusImgForIndex:void 0,block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:""},rlsInfo:[],hasActivity:0},rules:{pluginInfo:{pluginName:[{required:!0,message:"请输入系统功能名称",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],pluginParentType:[{required:!0,message:"请选择类型",trigger:"blur"}],pluginType:[{required:!0,message:"不能为空",trigger:"blur"}]},barText:[{max:50,message:"不超过 50 个字符",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],subTitle:[{max:100,message:"不超过 100 个字符",trigger:"blur"}],openMode:[{required:!0,message:"请选择打开方式",trigger:"blur"}],goodsId:[{required:!0,message:"请填写商品ID",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],webpageUrl:[{required:!0,message:"请填写网页地址",trigger:"blur"}],webpageAppVersion:[{required:!0,message:"请填写应用版本号",trigger:"blur"}],videoName:[{required:!0,message:"请填写视频名称",trigger:"blur"}],videoUrl:[{required:!0,message:"请填写视频地址",trigger:"blur"}],picture:[{trigger:"change",validator:function(e,t,a){a(t&&t.length>0?void 0:new Error("请上传图片"))}},{required:!0,message:"请上传图片"}],tab:[{trigger:"change",validator:function(e,t,a){a(t?void 0:new Error("请选择版面"))}},{required:!0,message:"请选择版面"}],clickCount:[{required:!0,message:"请填入点击次数"},{type:"number",message:"请填入数字"},{validator:function(e,t,a){/^[1-9][0-9]*$/.test(t)?a():a(new Error("请输入正整数"))}}],aliveTime:[{required:!0,message:"请填入存活时间"}],focusImgUrl:[{required:!0,message:"请选择异形焦点"}],poster:{pictureUrl:[{required:!0,message:"请选择海报",trigger:"blur"}]}}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},isDisabledSource:function(){return"edit"===this.mode},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},watch:{},methods:{parseMinToStr:function(e){if(void 0!==e){var t=e.split(":"),a=parseInt(t[0]),i=parseInt(t[1]);return 60*a+i}},parseStrToMin:function(e){var t=Math.floor(e/60),a=e%60,i=t>9?""+t:"0"+t,n=a>9?""+a:"0"+a;return i+":"+n},getEditData:function(){var e=this;this.$service.editSysPlugin({id:this.editId}).then(function(t){t&&(e.setData(t),e.pluginType&&e.getPluginVersions(e.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,a=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var i=a[t.value];return i&&(this.$set(i,"label",t.label),e.push(i)),e}.bind(this),[])}}.bind(e)))})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value}))})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){e&&(t.pluginTypes=e)})},handleTime:function(){},handleTime1:function(){},getPluginVersions:function(e){var t=this,a=this.pluginVersions;return new Promise(function(i,n){a[e]?i(a[e]):t.$service.getPluginVersions(e).then(function(t){console.log(t),t&&(a[e]=t,i(a[e]))})})},handleChangeSource:function(e){this.$confirm("确定切换内容源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){this.block.pluginInfo.source=e}.bind(this)).catch(function(e){throw e})},handleChangePluginParentType:function(e){var t=this.block.pluginInfo.pluginParentType,a=function(){this.pluginTypes=[],this.setPluginParentType(e),this.getPluginTypes(e),"secKill"===e&&this.setPluginType("REFERENCE_MALL_SECKILL")}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a).catch(function(e){throw e}):t||a()},setPluginParentType:function(e){this.PARENT_TYPES;var t=this.SOURCE,a=this.block,i=a.pluginInfo,n=a.helper;a.rlsInfo=[],i.source=t.none.value,i.pluginType=void 0,i.pluginParentType=e,n.title="",n.subTitle=""},handleChangePluginType:function(e){var t=this.block.pluginInfo.pluginType,a=function(){this.setPluginType(e)}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a).catch(function(){}):t||a()},setPluginType:function(e){var t=this.block,a=t.helper;this.getPluginVersions(e).then(function(i){t.pluginInfo.pluginType=e,a.title="",a.subTitle="",t.rlsInfo=i.map(function(t){return this.genRlsInfo({label:t.label,dataType:+t.value},e)}.bind(this))}.bind(this)).then(function(){})},genRlsInfo:function(e,t){var a={};return"REFERENCE_ACTIVITY"===t&&(a={focusImgUrl:void 0,aliveTime:"",clickCount:5}),Object.assign({openMode:"app",pluginDataId:void 0,dataType:5,onclick:{},params:0,title:"",subTitle:"",goodsId:void 0,webpageUrl:void 0,poster:{pictureId:void 0,pictureUrl:void 0}},{extendInfo:a},e)},handleSelectPosterStart:function(e){this.selectingPostForIndex=e,this.dialogTableVisible=!0},handleSelectClickStart:function(e){this.selectingClickForIndex=e,this.dialogClickTableVisible=!0},handleSelectTabStart:function(e){this.showTabSelector=!0,this.selectingTabForIndex=e},handleSelectFocusImgStart:function(e){this.showFocusImgSelectorVisible=!0,this.selectingFocusImgForIndex=e},handleRemoveFocusImg:function(e){this.block.rlsInfo[e].extendInfo.focusImgUrl=void 0},createUploadSuccessHandler:function(e){return function(t){if(t.success){var a=this.block.rlsInfo[e];this.$set(a.onclick,"picture",[{name:"已上传",url:t.url}])}else this.$message(t.msg)}.bind(this)},createUploadRemoveHandler:function(e){return function(){var t=this.block.rlsInfo[e];t.onclick.picture=[]}.bind(this)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleChangeOpenMode:function(e,t){e.openMode=t,e.onclick="webpage"===t?{webpageType:"1",webpageUrl:void 0,webpageAppVersion:""}:{}},getData:function(){var e=this.STATUS,t=JSON.parse(JSON.stringify(this.block));return t.pluginInfo.pluginStatus=e.waiting,t},validateData:function(e,t){this.$refs.blockForm.validate(function(a){a?t(e):this.$message({type:"error",message:"请把表单填写完整"})}.bind(this))},setData:function(e){var t=this.block.helper,a=JSON.parse(JSON.stringify(e)),i=a.pluginInfo.pluginParentType,n=a.pluginInfo.pluginType;if(a.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,a=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:a.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:a.name,videoUrl:a.url};break;case"picture":e.onclick={picture:[{name:"已上传",url:a.url}]};break;case"tab":e.onclick={tab:{tabId:a.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),i&&this.getPluginTypes(i),"secKill"!==i&&n&&"REFERENCE_MOVIE_VIP"!==n){var o=a.rlsInfo[0];o&&(t.title=o.title,t.subTitle=o.subTitle)}this.block=Object.assign(this.block,a),this.block.pluginInfo.refreshTime=this.parseStrToMin(this.block.pluginInfo.refreshTime);for(var l=0;l<this.block.rlsInfo.length;l++)this.block.rlsInfo[l].extendInfo.aliveTime=this.parseStrToMin(this.block.rlsInfo[l].extendInfo.aliveTime)},parseData:function(e){var t=e.helper,a=this.baseHasTitle,i=this.pluginParentType;return"sign"===i&&(e.rlsInfo=e.rlsInfo||[],e.rlsInfo[0]=e.rlsInfo[0]||{dataType:5,title:void 0,subTitle:void 0}),e.rlsInfo.forEach(function(e){var i=e.onclick;switch(e.openMode&&(e.params="openMode=="+e.openMode),e.openMode){case"webpage":"1"===i.webpageType?e.onclick={packagename:"com.coocaa.app_browser",versioncode:i.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser",params:[{key:"url",value:i.webpageUrl}],exception:{}}:"2"===i.webpageType&&(e.onclick={packagename:"com.coocaa.app_browser",versioncode:i.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser.no_trans",params:[{key:"url",value:i.webpageUrl}],exception:{}});break;case"video":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"-1",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.video",params:[{key:"name",value:i.videoName},{key:"url",value:i.videoUrl},{key:"needParse",value:"false"},{key:"url_type",value:"web"}],exception:{}};break;case"picture":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.image",params:[{key:"name",value:""},{key:"url",value:i.picture[0].url}],exception:{}};break;case"tab":e.params+=",tabType=="+i.tab.tabType,e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startActivity",bywhat:"action",byvalue:1==i.tab.tabType?"coocaa.intent.action.HOME_COMMON_LIST":"coocaa.intent.action.HOME_SPECIAL_TOPIC",params:[{key:"id",value:i.tab.tabId}],exception:{}};break;case"app":e.onclick.exception={name:"onclick_exception",value:{packagename:"com.tianci.appstore",dowhat:"startActivity",versioncode:"-1",params:[{key:"id",value:i.packagename}],byvalue:"coocaa.intent.action.APP_STORE_DETAIL",bywhat:"action"}};break}a&&(e.title=t.title,e.subTitle=t.subTitle),e.onclick&&e.onclick.params&&(e.onclick.params=e.onclick.params.reduce(function(e,t){return e[t.key]=t.value,e},{}),e.onclick=JSON.stringify(e.onclick)),delete e.openMode}),delete e.helper,e},handleSubmitAudit:function(){var e=this.getData();this.validateData(e,function(){this.submit(e)}.bind(this))},getSelectResource:function(e){this.selectResource=e,this.dialogTableVisible=!1;var t={pictureId:this.selectResource.pictureId,pictureStatus:this.selectResource.pictureStatus,pictureUrl:this.selectResource.pictureUrl};this.block.rlsInfo[this.selectingPostForIndex].poster=t},getClickData1:function(e){this.clickData=e,this.dialogClickTableVisible=!1;var t=this.clickData;t=JSON.parse(t.onlickJson);var a=this.selectingClickForIndex,i=this.block.rlsInfo[a];i.onclick=this.parseOnclick(t),this.showselectClickor=!1,this.selectingClickForIndex=void 0},getClickData:function(e){this.dialogClickTableVisible=!1;var t=JSON.parse(e.params),a=Object.keys(t),i=a.reduce(function(e,a,i){var n={};return n.key=a,n.value=t[a],e.push(n),e},[]),n={packagename:e.packagename,versioncode:e.versioncode,dowhat:e.dowhat,bywhat:e.bywhat,byvalue:e.byvalue,params:i,exception:e.exception},o=this.selectingClickForIndex,l=this.block.rlsInfo[o];l.onclick=n},clickSubmit:function(){},getSelectImg:function(e){this.selectImgData=e,this.showFocusImgSelectorVisible=!1;var t=this.selectingFocusImgForIndex,a=this.block.rlsInfo[t];this.$set(a.extendInfo,"focusImgUrl",this.selectImgData.pictureUrl),this.selectingFocusImgForIndex=void 0},selectImgSubmit:function(){},submit:function(e){this.validateData(e,function(){var t=this;e.pluginInfo.refreshTime=this.parseMinToStr(e.pluginInfo.refreshTime);for(var a=0;a<e.rlsInfo.length;a++)e.rlsInfo[a].extendInfo.aliveTime=this.parseMinToStr(e.rlsInfo[a].extendInfo.aliveTime);e=this.parseData(e),this.$service.SavePlugin(e,"保存成功").then(function(e){t.$emit("open-list-page")})}.bind(this))},handleChangeActivityFlag:function(e){e?this.block.rlsInfo.unshift(this.genRlsInfo({label:"活动形式",dataType:4})):this.block.rlsInfo=this.block.rlsInfo.filter(function(e){return 4!==e.dataType})}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.mode="edit",this.getEditData()):(this.title="新增",this.mode="create")}},Ma=Va,Ba=(a("14f7"),Object(K["a"])(Ma,ca,ua,!1,null,"775679e8",null)),Ua=Ba.exports,ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{staticClass:"multi-func-block-read"},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])]),a("el-form",{ref:"blockForm",attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName"}},[e._v("\n               "+e._s(e.block.pluginInfo.pluginName)+"\n           ")]),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[e._v("\n                   "+e._s(e.parseMinToStr(e.block.pluginInfo.refreshTime))+"\n               ")]),a("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[a("el-radio",{attrs:{label:0}},[e._v("非活动")]),a("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType"}},[e._v("\n               "+e._s(e.pluginParentTypeText)+"\n           ")]),"secKill"!==e.pluginParentType?a("el-form-item",{attrs:{label:"内容源"}},[e._v("\n               "+e._s(e.SOURCE_TEXT[e.block.pluginInfo.source])+"\n           ")]):e._e(),"sign"===e.pluginParentType?[a("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType"}},[e._v("\n                   "+e._s(e.block.pluginInfo.pluginType)+"\n               ")])]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0&&e.pluginTypeText?a("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType"}},[e._v("\n               "+e._s(e.pluginTypeText)+"\n           ")]):e._e(),e.baseHasTitle?[a("el-form-item",{attrs:{label:"标题",prop:"helper.title"}},[e._v("\n                   "+e._s(e.block.helper.title)+"\n               ")]),a("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle"}},[e._v("\n                   "+e._s(e.block.helper.subTitle)+"\n               ")])]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,i){return a("div",{key:i},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v(e._s(t.label))])]),e.versionHasTitle?[a("el-form-item",{attrs:{label:"标题"}},[e._v("\n                       "+e._s(t.title)+"\n                   ")]),a("el-form-item",{attrs:{label:"副标题"}},[e._v("\n                       "+e._s(t.subTitle)+"\n                   ")])]:e._e(),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"状态栏文字"}},[e._v("\n                       "+e._s(t.title)+" "+e._s(t.subTitle?" | "+t.subTitle:"")+"\n                   ")])]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"商品ID"}},[e._v("\n                       "+e._s(t.goodsId)+"\n                   ")]),a("el-form-item",{attrs:{label:"商品名称"}},[e._v("\n                       "+e._s(t.title)+"\n                   ")])]:e._e(),a("el-form-item",{attrs:{label:"海报"}},[a("div",{staticClass:"poster"},[t.poster.pictureUrl?a("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[a("el-form-item",{attrs:{label:"异形焦点"}},[t.extendInfo.focusImgUrl?a("div",{staticClass:"focus-transition"},[a("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):a("span",[e._v("\n                           无\n                       ")])]),a("el-form-item",{attrs:{label:"存活时间"}},[e._v("\n                       "+e._s(e.parseMinToStr(t.extendInfo.aliveTime))+"\n                   ")]),a("el-form-item",{attrs:{label:"点击次数"}},[e._v("\n                       "+e._s(t.extendInfo.clickCount)+"\n                   ")])]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType?a("el-form-item",{attrs:{label:"打开方式"}},[e._v("\n                   "+e._s(e.OPEN_MODE_TEXT[t.openMode])+"\n               ")]):e._e(),"webpage"===t.openMode?[a("el-form-item",{attrs:{label:"网页地址"}},[e._v(" "+e._s(t.onclick.webpageUrl)+"\n                   ")]),a("el-form-item",{attrs:{label:"网页类型"}},[e._v("\n                       "+e._s(["","浮窗网页","全屏网页"][+t.onclick.webpageType])+"\n                   ")]),a("el-form-item",{attrs:{label:"应用版本号"}},[e._v("\n                       "+e._s(t.onclick.webpageAppVersion)+"\n                   ")])]:e._e(),"video"===t.openMode?[a("el-form-item",{attrs:{label:"视频名称"}},[e._v("\n                       "+e._s(t.onclick.videoName)+"\n                   ")]),a("el-form-item",{attrs:{label:"视频地址"}},[e._v("\n                       "+e._s(t.onclick.videoUrl)+"\n                   ")])]:e._e(),"picture"===t.openMode?[a("el-form-item",{attrs:{label:"图片"}},[a("div",{staticClass:"open-picture"},[a("img",{staticClass:"open-picture__img",attrs:{src:t.onclick.picture[0].url}})])])]:e._e(),"tab"===t.openMode?[a("el-form-item",{attrs:{label:"版面"}},[e._v("\n                       "+e._s(t.onclick.tab.tabId)+"\n                   ")])]:e._e(),"app"===t.openMode?a("AppParamsRead",{attrs:{"label-width":"140px"},model:{value:t.onclick,callback:function(a){e.$set(t,"onclick",a)},expression:"item.onclick"}}):e._e()],2)}):e._e(),a("el-form-item",[void 0!==e.id?a("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:"systemPlugin",status:e.status,menuElId:"multiFunctionBlock"},on:{auditTask:function(t){return e.$emit("open-list-page")}}}):e._e()],1)],2),a("el-dialog",{attrs:{title:"审核",visible:e.showAuditDialog},on:{"update:visible":function(t){e.showAuditDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"审核意见"}},[a("el-radio",{staticClass:"radio",attrs:{label:4},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),a("el-radio",{staticClass:"radio",attrs:{label:5},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),a("el-form-item",{attrs:{label:"意见说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showAuditDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAudit}},[e._v("确 定")])],1)],1)],1)])},Ha=[],qa=(a("7514"),{0:"无",1:"腾讯",2:"爱奇艺"}),Wa={webpage:"网页",app:"第三方应用",video:"视频",tab:"版面",picture:"图片"},Ga={draft:2,waiting:3,accepted:4,reject:5,processing:7},za={components:{AppParamsRead:W["AppParamsRead"],AuditDetailButton:Gt},props:{viewId:Number,default:null},data:function(){return{showAuditDialog:!1,title:void 0,STATUS:Ga,SOURCE_TEXT:qa,OPEN_MODE_TEXT:Wa,pluginParentTypes:[],pluginTypes:[],pluginVersions:{},auditForm:{auditFlag:4,auditDesc:""},version:void 0,status:void 0,id:void 0,block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:240},rlsInfo:[],hasActivity:0}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},pluginParentTypeText:function(){var e=this.pluginParentType,t=this.pluginParentTypes;if(t.length>0){var a=t.find(function(t){return t.value===e});if(a)return a.label}},pluginTypeText:function(){var e=this.pluginType,t=this.pluginTypes;if(console.log(e),console.log(t),t.length>0){var a=t.find(function(t){return t.value===e});if(a)return a.label}},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},methods:{parseMinToStr:function(e){var t=Math.floor(e/60),a=e%60,i=t>9?""+t:"0"+t,n=a>9?""+a:"0"+a;return i+":"+n},getData:function(){var e=this;this.$service.getData({id:this.viewId}).then(function(t){e.setData(t)})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){console.log(t),t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value})),t&&(e.pluginParentTypes=t)})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){console.log(e),e&&(t.pluginTypes=e)})},getPluginVersions:function(e){this.urls,this.FastDevTool;var t=this.pluginVersions;return new Promise(function(a,i){t[e]?a(t[e]):that.$service.getPluginVersions(e).then(function(i){console.log(i),i&&(t[e]=i,a(t[e]))})})},setData:function(e){var t=this.block.helper,a=JSON.parse(JSON.stringify(e)),i=a.pluginInfo.pluginParentType,n=a.pluginInfo.pluginType;if(this.id=a.pluginInfo.pluginId,this.version=a.pluginInfo.currentVersion,this.status=a.pluginInfo.pluginStatus,a.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,a=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:a.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:a.name,videoUrl:a.url};break;case"picture":e.onclick={picture:[{url:a.url}]};break;case"tab":e.onclick={tab:{tabId:a.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),i&&this.getPluginTypes(i),"secKill"!==i&&n&&"REFERENCE_MOVIE_VIP"!==n){var o=a.rlsInfo[0];o&&(t.title=o.title,t.subTitle=o.subTitle)}this.block=Object.assign(this.block,a)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleAudit:function(){var e=this,t=this.block,a=this.auditForm;""===a.auditDesc.trim()?this.$message("请填写意见说明"):this.$service.SaveAudit({id:t.pluginInfo.pluginId,type:"systemPlugin",auditFlag:a.auditFlag,auditDesc:a.auditDesc},"审核成功").then(function(t){t&&(e.showAuditDialog=!1,e.$emit("open-list-page"))})},handleClose:function(){window.parent.$("#edit-view").dialog("close")}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),window.mode="read",window.mode&&(this.mode=window.mode,this.title="预览"),this.getData(),this.pluginType&&this.getPluginVersions(this.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,a=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var i=a[t.value];return i&&(this.$set(i,"label",t.label),e.push(i)),e}.bind(this),[])}}.bind(this))}},Ja=za,Ka=(a("eb95"),Object(K["a"])(Ja,ja,Ha,!1,null,null,null)),Xa=Ka.exports,Ya={components:{MultiFunctionBlockList:sa,MultiFunctionBlockAdd:Ua,MultiFunctionBlockView:Xa},data:function(){return{model:"list",editId:null,viewId:null}},methods:{openAddPage:function(e){this.editData=e,this.model="add"},openViewPage:function(e){this.viewId=e,this.model="view"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},goBack:function(){this.model="list"}}},Za=Ya,Qa=Object(K["a"])(Za,ta,aa,!1,null,"86b5af60",null),ei=Qa.exports,ti=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SysPluginList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?a("SysPluginAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?a("SysPluginView",{attrs:{viewId:e.viewId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},ai=[],ii=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"sysPlugin"},on:{edit:e.editData}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},ni=[],oi={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{pluginStatus:{"下架":0,"上架":1,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},source:{"无":0,"腾讯":1,"爱奇艺":2},channel:{"影视":"movie","体育":"sport","教育":"edu","少儿":"child"},filterSchema:null,pagination:{},selected:[],filter:{sort:void 0,order:void 0},table:{props:{},header:[{label:"ID",prop:"pluginId",width:"70"},{label:"功能名称",prop:"pluginName",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.priviewData(i)}}},i.pluginName)}},{label:"内容源",prop:"source",render:function(e,t){var a=t.row;switch(a.source){case 0:return"无";case 1:return"腾讯";case 2:return"爱奇艺"}}},{label:"状态",prop:"pluginStatus",render:function(e,t){var a=t.row;switch(a.pluginStatus){case 0:return"下架";case 1:return"上架";case 2:return"草稿";case 3:return"待审核";case 4:return"审核通过";case 5:return"审核不通过"}}},{label:"频道",prop:"channel",render:function(e,t){var a=t.row;switch(a.channel){case"movie":return"影视";case"child":return"少儿";case"sport":return"体育";case"edu":return"教育"}}},{label:"更新时间",prop:"lastUpdateDate"}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getSysPlugin(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},editData:function(){0==this.selected.length?this.$message("请选择一条数据"):this.selected.length>1?this.$message("只能选择一条"):this.$emit("open-add-page",this.selected[0])},priviewData:function(e){this.$emit("open-view-page",e.pluginId)},handleRowSelectionAdd:function(e){this.selected.push(e.pluginId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pluginId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pluginId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e}},created:function(){var e=ne.a.map({pluginId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),pluginName:ne.a.o.string.other("form",{component:"Input",placeholder:"功能名称"}),source:ne.a.o.enum(this.source).other("form",{component:"Select",placeholder:"内容源"}),channel:ne.a.o.enum(this.channel).other("form",{component:"Select",placeholder:"频道"}),pluginStatus:ne.a.o.enum(this.pluginStatus).other("form",{component:"Select",placeholder:"状态"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},li=oi,ri=(a("aa49"),Object(K["a"])(li,ii,ni,!1,null,"6ce316fc",null)),si=ri.exports,ci=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{staticClass:"multi-func-block-upsert"},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])]),a("el-form",{ref:"blockForm",staticClass:"el-form-add",attrs:{rules:e.rules,model:e.block,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName",rules:e.rules.pluginInfo.pluginName}},[a("el-input",{model:{value:e.block.pluginInfo.pluginName,callback:function(t){e.$set(e.block.pluginInfo,"pluginName","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginName"}})],1),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[a("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime},model:{value:e.block.pluginInfo.refreshTime,callback:function(t){e.$set(e.block.pluginInfo,"refreshTime",t)},expression:"block.pluginInfo.refreshTime"}})],1)]),a("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[a("el-radio-group",{on:{change:e.handleChangeActivityFlag},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[a("el-radio",{attrs:{label:0}},[e._v("非活动")]),a("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType",rules:e.rules.pluginInfo.pluginParentType}},[a("el-select",{staticClass:"plugin-parent-type-selector",attrs:{value:e.block.pluginInfo.pluginParentType,disabled:"edit"===e.mode,placeholder:"请选择"},on:{input:e.handleChangePluginParentType}},e._l(e.pluginParentTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1),"secKill"!==e.pluginParentType?a("el-form-item",{attrs:{label:"内容源",prop:"pluginInfo.source",rules:e.rules.pluginInfo.source}},[a("el-radio-group",{attrs:{value:e.block.pluginInfo.source,disabled:e.isDisabledSource},on:{input:e.handleChangeSource}},e._l(e.SOURCE,function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),"sign"===e.pluginParentType?[a("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[a("el-input",{model:{value:e.block.pluginInfo.pluginType,callback:function(t){e.$set(e.block.pluginInfo,"pluginType","string"===typeof t?t.trim():t)},expression:"block.pluginInfo.pluginType"}})],1)]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0?a("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType",rules:e.rules.pluginInfo.pluginType}},[a("el-select",{staticClass:"plugin-type-selector",staticStyle:{width:"300px","max-width":"300px"},attrs:{value:e.block.pluginInfo.pluginType,placeholder:"请选择"},on:{input:e.handleChangePluginType}},e._l(e.pluginTypes,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e.baseHasTitle?[a("el-form-item",{attrs:{label:"标题",prop:"helper.title",rules:e.rules.title}},[a("el-input",{model:{value:e.block.helper.title,callback:function(t){e.$set(e.block.helper,"title","string"===typeof t?t.trim():t)},expression:"block.helper.title"}})],1),a("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle",rules:e.rules.subTitle}},[a("el-input",{model:{value:e.block.helper.subTitle,callback:function(t){e.$set(e.block.helper,"subTitle","string"===typeof t?t.trim():t)},expression:"block.helper.subTitle"}})],1)]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,i){return a("div",{key:i},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v(e._s(t.label))])]),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"状态栏文字",prop:"rlsInfo."+i+".title",rules:e.rules.barText}},[a("el-row",{staticClass:"leftSide"},[a("el-col",{attrs:{span:11}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title","string"===typeof a?a.trim():a)},expression:"item.title"}})],1),a("el-col",{staticClass:"textAlignCenter",attrs:{span:2}},[e._v("\n               |\n               ")]),a("el-col",{attrs:{span:11}},[a("el-input",{model:{value:t.subTitle,callback:function(a){e.$set(t,"subTitle","string"===typeof a?a.trim():a)},expression:"item.subTitle"}})],1)],1)],1)]:e._e(),e.versionHasTitle?[a("el-form-item",{attrs:{label:"标题",prop:"rlsInfo."+i+".title",rules:e.rules.title}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title","string"===typeof a?a.trim():a)},expression:"item.title"}})],1),a("el-form-item",{attrs:{label:"副标题",prop:"rlsInfo."+i+".subTitle",rules:e.rules.subTitle}},[a("el-input",{model:{value:t.subTitle,callback:function(a){e.$set(t,"subTitle","string"===typeof a?a.trim():a)},expression:"item.subTitle"}})],1)]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"商品ID",prop:"rlsInfo."+i+".goodsId",rules:e.rules.goodsId}},[a("el-input",{model:{value:t.goodsId,callback:function(a){e.$set(t,"goodsId","string"===typeof a?a.trim():a)},expression:"item.goodsId"}})],1),a("el-form-item",{attrs:{label:"商品名称",prop:"rlsInfo."+i+".title",rules:e.rules.goodsId}},[a("el-input",{model:{value:t.title,callback:function(a){e.$set(t,"title","string"===typeof a?a.trim():a)},expression:"item.title"}})],1)]:e._e(),a("el-form-item",{attrs:{label:"海报",prop:"rlsInfo."+i+".poster.pictureUrl",rules:e.rules.poster.pictureUrl}},[a("div",{staticClass:"poster",on:{click:function(t){return e.handleSelectPosterStart(i)}}},[t.poster.pictureUrl?a("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[a("el-form-item",{attrs:{label:"异形焦点",prop:"rlsInfo."+i+".extendInfo.focusImgUrl",rules:e.rules.focusImgUrl}},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(t){return e.handleSelectFocusImgStart(i)}}},[e._v("选择异形焦点")]),t.extendInfo.focusImgUrl?a("div",{staticClass:"focus-transition"},[a("i",{staticClass:"focus-transition__remove el-icon-circle-close",attrs:{title:"移除异形焦点"},on:{click:function(t){return e.handleRemoveFocusImg(i)}}}),a("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):e._e()],1),a("el-form-item",{attrs:{label:"存活时间",prop:"rlsInfo."+i+".extendInfo.aliveTime",rules:e.rules.aliveTime}},[a("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handleTime},model:{value:t.extendInfo.aliveTime,callback:function(a){e.$set(t.extendInfo,"aliveTime",e._n(a))},expression:"item.extendInfo.aliveTime"}})],1)]),a("el-form-item",{attrs:{label:"点击次数",prop:"rlsInfo."+i+".extendInfo.clickCount",rules:e.rules.clickCount}},[a("el-input",{model:{value:t.extendInfo.clickCount,callback:function(a){e.$set(t.extendInfo,"clickCount",e._n(a))},expression:"item.extendInfo.clickCount"}})],1)]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType||"builtIn"===e.pluginParentType?a("el-form-item",{attrs:{label:"打开方式",rules:e.rules.openMode}},[a("el-select",{attrs:{value:t.openMode},on:{input:function(a){return e.handleChangeOpenMode(t,a)}}},["builtIn"===e.pluginParentType||"REFERENCE_MOVIE_VIP"===e.pluginType||"REFERENCE_ACTIVITY"===e.pluginType?a("el-option",{attrs:{label:"网页",value:"webpage"}}):e._e(),"REFERENCE_ACTIVITY"===e.pluginType?[a("el-option",{attrs:{label:"视频",value:"video"}}),a("el-option",{attrs:{label:"图片",value:"picture"}}),a("el-option",{attrs:{label:"版面",value:"tab"}})]:e._e(),a("el-option",{attrs:{label:"第三方应用",value:"app"}})],2),"app"===t.openMode?a("el-button",{staticClass:"marginL",attrs:{type:"primary",plain:""},on:{click:function(t){return e.handleSelectClickStart(i)}}},[e._v("快速填充")]):e._e()],1):e._e(),"webpage"===t.openMode?[a("el-form-item",{attrs:{label:"网页地址",prop:"rlsInfo."+i+".onclick.webpageUrl",rules:e.rules.webpageUrl}},[a("el-input",{model:{value:t.onclick.webpageUrl,callback:function(a){e.$set(t.onclick,"webpageUrl","string"===typeof a?a.trim():a)},expression:"item.onclick.webpageUrl"}})],1),a("el-form-item",{attrs:{label:"网页类型",prop:"rlsInfo."+i+".onclick.webpageType"}},[a("el-radio-group",{model:{value:t.onclick.webpageType,callback:function(a){e.$set(t.onclick,"webpageType",a)},expression:"item.onclick.webpageType"}},[a("el-radio",{attrs:{label:"1"}},[e._v("浮窗网页")]),a("el-radio",{attrs:{label:"2"}},[e._v("全屏网页")])],1)],1),a("el-form-item",{attrs:{label:"应用版本号",prop:"rlsInfo."+i+".onclick.webpageAppVersion",rules:e.rules.webpageAppVersion}},[a("el-input",{model:{value:t.onclick.webpageAppVersion,callback:function(a){e.$set(t.onclick,"webpageAppVersion","string"===typeof a?a.trim():a)},expression:"item.onclick.webpageAppVersion"}})],1)]:e._e(),"video"===t.openMode?[a("el-form-item",{attrs:{label:"视频名称",prop:"rlsInfo."+i+".onclick.videoName",rules:e.rules.videoName}},[a("el-input",{model:{value:t.onclick.videoName,callback:function(a){e.$set(t.onclick,"videoName","string"===typeof a?a.trim():a)},expression:"item.onclick.videoName"}})],1),a("el-form-item",{attrs:{label:"视频地址",prop:"rlsInfo."+i+".onclick.videoUrl",rules:e.rules.videoUrl}},[a("el-input",{model:{value:t.onclick.videoUrl,callback:function(a){e.$set(t.onclick,"videoUrl","string"===typeof a?a.trim():a)},expression:"item.onclick.videoUrl"}})],1)]:e._e(),"tab"===t.openMode?[a("el-form-item",{attrs:{label:"版面",prop:"rlsInfo."+i+".onclick.tab",rules:e.rules.tab}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSelectTabStart(i)}}},[e._v("选择版面")]),t.onclick.tab?a("el-tag",{attrs:{type:"primary"}},[e._v("已选择: "+e._s(t.onclick.tab.tabId))]):e._e()],1)]:e._e(),"picture"===t.openMode?[a("el-form-item",{attrs:{label:"选择图片",prop:"rlsInfo."+i+".onclick.picture",rules:e.rules.picture}},[a("el-upload",{attrs:{action:e.urls.uploadImg,"on-success":e.createUploadSuccessHandler(i),"on-remove":e.createUploadRemoveHandler(i),multiple:!1,"file-list":t.onclick.picture,accept:"image/png, image/gif, image/jpeg, image/bmp","list-type":"picture"}},[a("el-button",{attrs:{type:"primary"}},[e._v("点击上传")]),a("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("提示:只能上传png/gif/jpg/bmp文件")])],1)],1)]:e._e(),"app"===t.openMode?a("AppParams",{attrs:{"prop-prefix":"rlsInfo."+i+".onclick."},model:{value:t.onclick,callback:function(a){e.$set(t,"onclick",a)},expression:"item.onclick"}}):e._e()],2)}):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitAudit}},[e._v("提交审核")])],1)],2),a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("selectResource",{on:{selected:e.getSelectResource}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogClickTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogClickTableVisible=t}}},[a("selectClick",{on:{"row-clcik":e.getClickData}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogClickTableVisible=!1}}},[e._v("取 消")])],1)],1),a("el-dialog",{attrs:{visible:e.showFocusImgSelectorVisible,width:"1200px"},on:{"update:visible":function(t){e.showFocusImgSelectorVisible=t}}},[a("selectImg",{on:{selectImg:e.getSelectImg}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showFocusImgSelectorVisible=!1}}},[e._v("取 消")])],1)],1)],1)])},ui=[],di={sign:"sign",multi:"multi",builtIn:"builtIn",secKill:"secKill"},pi={none:{label:"无",value:0},tencent:{label:"腾讯",value:1},iqiyi:{label:"爱奇艺",value:2}},hi={draft:2,waiting:3,accepted:4,reject:5,processing:7};window.basicFn={};var mi,fi,bi,gi,vi,yi,wi,Ii={components:{ccTimeSpinner:Ta,selectResource:xa,selectClick:Bt,selectImg:Na,AppParams:W["AppParams"]},props:{editId:Number,default:null},data:function(){return{title:null,dialogTableVisible:!1,dialogClickTableVisible:!1,showFocusImgSelectorVisible:!1,clickData:{},selectResource:{},selectImgData:{},urls:{uploadImg:"/api/uploadHomeImg.html"},STATUS:hi,PARENT_TYPES:di,SOURCE:pi,mode:"create",pluginParentTypes:[],pluginTypes:[],pluginVersions:{},selectingPostForIndex:void 0,showClickSelector:!1,selectingClickForIndex:void 0,showTabSelector:!1,selectingTabForIndex:void 0,showFocusImgSelector:!1,selectingFocusImgForIndex:void 0,block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:240},rlsInfo:[],hasActivity:0},rules:{pluginInfo:{pluginName:[{required:!0,message:"请输入系统功能名称",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],pluginParentType:[{required:!0,message:"请选择类型",trigger:"blur"}],pluginType:[{required:!0,message:"不能为空",trigger:"blur"}]},barText:[{max:50,message:"不超过 50 个字符",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],subTitle:[{max:100,message:"不超过 100 个字符",trigger:"blur"}],openMode:[{required:!0,message:"请选择打开方式",trigger:"blur"}],goodsId:[{required:!0,message:"请填写商品ID",trigger:"blur"},{max:50,message:"不超过 50 个字符",trigger:"blur"}],webpageUrl:[{required:!0,message:"请填写网页地址",trigger:"blur"}],webpageAppVersion:[{required:!0,message:"请填写应用版本号",trigger:"blur"}],videoName:[{required:!0,message:"请填写视频名称",trigger:"blur"}],videoUrl:[{required:!0,message:"请填写视频地址",trigger:"blur"}],picture:[{trigger:"change",validator:function(e,t,a){a(t&&t.length>0?void 0:new Error("请上传图片"))}},{required:!0,message:"请上传图片"}],tab:[{trigger:"change",validator:function(e,t,a){a(t?void 0:new Error("请选择版面"))}},{required:!0,message:"请选择版面"}],clickCount:[{required:!0,message:"请填入点击次数"},{type:"number",message:"请填入数字"},{validator:function(e,t,a){/^[1-9][0-9]*$/.test(t)?a():a(new Error("请输入正整数"))}}],aliveTime:[{required:!0,message:"请填入存活时间"},{type:"number",message:"请填入数字"}],focusImgUrl:[{required:!0,message:"请选择异形焦点"}],poster:{pictureUrl:[{required:!0,message:"请选择海报",trigger:"blur"}]}}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},isDisabledSource:function(){return"edit"===this.mode},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},watch:{},methods:{parseMinToStr:function(e){var t=e.split(":"),a=parseInt(t[0]),i=parseInt(t[1]);return 60*a+i},parseStrToMin:function(e){var t=Math.floor(e/60),a=e%60,i=t>9?""+t:"0"+t,n=a>9?""+a:"0"+a;return i+":"+n},getEditData:function(){var e=this;this.$service.editSysPlugin({id:this.editId}).then(function(t){t&&(e.setData(t),e.pluginType&&e.getPluginVersions(e.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,a=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var i=a[t.value];return i&&(this.$set(i,"label",t.label),e.push(i)),e}.bind(this),[])}}.bind(e)))})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){console.log(t),t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value}))})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){console.log(e),e&&(t.pluginTypes=e)})},handleTime:function(){},getPluginVersions:function(e){var t=this,a=this.pluginVersions;return new Promise(function(i,n){a[e]?i(a[e]):t.$service.getPluginVersions(e).then(function(t){console.log(t),t&&(a[e]=t,i(a[e]))})})},handleChangeSource:function(e){this.$confirm("确定切换内容源？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){this.block.pluginInfo.source=e}.bind(this)).catch(function(e){throw e})},handleChangePluginParentType:function(e){var t=this.block.pluginInfo.pluginParentType,a=function(){this.pluginTypes=[],this.setPluginParentType(e),this.getPluginTypes(e),"secKill"===e&&this.setPluginType("REFERENCE_MALL_SECKILL")}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a).catch(function(e){throw e}):t||a()},setPluginParentType:function(e){this.PARENT_TYPES;var t=this.SOURCE,a=this.block,i=a.pluginInfo,n=a.helper;a.rlsInfo=[],i.source=t.none.value,i.pluginType=void 0,i.pluginParentType=e,n.title="",n.subTitle=""},handleChangePluginType:function(e){var t=this.block.pluginInfo.pluginType,a=function(){this.setPluginType(e)}.bind(this);t&&t!==e?this.$confirm("切换类型将清空版本等相关数据，确定切换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a).catch(function(){}):t||a()},setPluginType:function(e){var t=this.block,a=t.helper;this.getPluginVersions(e).then(function(i){t.pluginInfo.pluginType=e,a.title="",a.subTitle="",t.rlsInfo=i.map(function(t){return this.genRlsInfo({label:t.label,dataType:+t.value},e)}.bind(this))}.bind(this)).then(function(){})},genRlsInfo:function(e,t){var a={};return"REFERENCE_ACTIVITY"===t&&(a={focusImgUrl:void 0,aliveTime:60,clickCount:5}),Object.assign({openMode:"app",pluginDataId:void 0,dataType:5,onclick:{},params:0,title:"",subTitle:"",goodsId:void 0,webpageUrl:void 0,poster:{pictureId:void 0,pictureUrl:void 0}},{extendInfo:a},e)},handleSelectPosterStart:function(e){this.selectingPostForIndex=e,this.dialogTableVisible=!0},getSelectResource:function(e){this.selectResource=e,this.dialogTableVisible=!1;var t={pictureId:this.selectResource.pictureId,pictureStatus:this.selectResource.pictureStatus,pictureUrl:this.selectResource.pictureUrl};this.block.rlsInfo[this.selectingPostForIndex].poster=t},selectSubmit:function(){},handleSelectClickStart:function(e){this.selectingClickForIndex=e,this.dialogClickTableVisible=!0},getClickData1:function(e){this.clickData=e,this.dialogClickTableVisible=!1;var t=this.clickData;t=JSON.parse(t.onlickJson);var a=this.selectingClickForIndex,i=this.block.rlsInfo[a];i.onclick=this.parseOnclick(t),this.showselectClickor=!1,this.selectingClickForIndex=void 0},getClickData:function(e){this.dialogClickTableVisible=!1;var t=JSON.parse(e.params),a=Object.keys(t),i=a.reduce(function(e,a,i){var n={};return n.key=a,n.value=t[a],e.push(n),e},[]),n={packagename:e.packagename,versioncode:e.versioncode,dowhat:e.dowhat,bywhat:e.bywhat,byvalue:e.byvalue,params:i,exception:e.exception},o=this.selectingClickForIndex,l=this.block.rlsInfo[o];l.onclick=n},clickSubmit:function(){},handleSelectFocusImgStart:function(e){this.showFocusImgSelectorVisible=!0,this.selectingFocusImgForIndex=e},getSelectImg:function(e){this.selectImgData=e,this.showFocusImgSelectorVisible=!1;var t=this.selectingFocusImgForIndex,a=this.block.rlsInfo[t];this.$set(a.extendInfo,"focusImgUrl",this.selectImgData.pictureUrl),this.selectingFocusImgForIndex=void 0},selectImgSubmit:function(){},handleSelectTabStart:function(e){this.showTabSelector=!0,this.selectingTabForIndex=e},handleRemoveFocusImg:function(e){this.block.rlsInfo[e].extendInfo.focusImgUrl=void 0},createUploadSuccessHandler:function(e){return function(t){if(t.success){var a=this.block.rlsInfo[e];this.$set(a.onclick,"picture",[{name:"已上传",url:t.url}])}else this.$message(t.msg)}.bind(this)},createUploadRemoveHandler:function(e){return function(){var t=this.block.rlsInfo[e];t.onclick.picture=[]}.bind(this)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleChangeOpenMode:function(e,t){e.openMode=t,e.onclick="webpage"===t?{webpageType:"1",webpageUrl:void 0,webpageAppVersion:""}:{}},getData:function(){var e=this.STATUS,t=JSON.parse(JSON.stringify(this.block));return t.pluginInfo.pluginStatus=e.waiting,t},validateData:function(e,t){this.$refs.blockForm.validate(function(a){a?t(e):this.$message({type:"error",message:"请把表单填写完整"})}.bind(this))},setData:function(e){var t=this.block.helper,a=JSON.parse(JSON.stringify(e)),i=a.pluginInfo.pluginParentType,n=a.pluginInfo.pluginType;if(a.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,a=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:a.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:a.name,videoUrl:a.url};break;case"picture":e.onclick={picture:[{name:"已上传",url:a.url}]};break;case"tab":e.onclick={tab:{tabId:a.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),i&&this.getPluginTypes(i),"secKill"!==i&&n&&"REFERENCE_MOVIE_VIP"!==n){var o=a.rlsInfo[0];o&&(t.title=o.title,t.subTitle=o.subTitle)}this.block=Object.assign(this.block,a),this.block.pluginInfo.refreshTime=this.parseStrToMin(this.block.pluginInfo.refreshTime);for(var l=0;l<this.block.rlsInfo.length;l++)this.block.rlsInfo[l].extendInfo.aliveTime=this.parseStrToMin(this.block.rlsInfo[l].extendInfo.aliveTime)},parseData:function(e){var t=e.helper,a=this.baseHasTitle,i=this.pluginParentType;return"sign"===i&&(e.rlsInfo=e.rlsInfo||[],e.rlsInfo[0]=e.rlsInfo[0]||{dataType:5,title:void 0,subTitle:void 0}),e.rlsInfo.forEach(function(e){var i=e.onclick;switch(e.openMode&&(e.params="openMode=="+e.openMode),e.openMode){case"webpage":"1"===i.webpageType?e.onclick={packagename:"com.coocaa.app_browser",versioncode:i.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser",params:[{key:"url",value:i.webpageUrl}],exception:{}}:"2"===i.webpageType&&(e.onclick={packagename:"com.coocaa.app_browser",versioncode:i.webpageAppVersion,dowhat:"startActivity",bywhat:"action",byvalue:"coocaa.intent.action.browser.no_trans",params:[{key:"url",value:i.webpageUrl}],exception:{}});break;case"video":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"-1",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.video",params:[{key:"name",value:i.videoName},{key:"url",value:i.videoUrl},{key:"needParse",value:"false"},{key:"url_type",value:"web"}],exception:{}};break;case"picture":e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startService",bywhat:"action",byvalue:"coocaa.intent.player.image",params:[{key:"name",value:""},{key:"url",value:i.picture[0].url}],exception:{}};break;case"tab":e.params+=",tabType=="+i.tab.tabType,e.onclick={packagename:"com.tianci.movieplatform",versioncode:"",dowhat:"startActivity",bywhat:"action",byvalue:1==i.tab.tabType?"coocaa.intent.action.HOME_COMMON_LIST":"coocaa.intent.action.HOME_SPECIAL_TOPIC",params:[{key:"id",value:i.tab.tabId}],exception:{}};break;case"app":e.onclick.exception={name:"onclick_exception",value:{packagename:"com.tianci.appstore",dowhat:"startActivity",versioncode:"-1",params:[{key:"id",value:i.packagename}],byvalue:"coocaa.intent.action.APP_STORE_DETAIL",bywhat:"action"}};break}a&&(e.title=t.title,e.subTitle=t.subTitle),e.onclick&&e.onclick.params&&(e.onclick.params=e.onclick.params.reduce(function(e,t){return e[t.key]=t.value,e},{}),e.onclick=JSON.stringify(e.onclick)),delete e.openMode}),delete e.helper,e},handleSubmitAudit:function(){var e=this.getData();this.validateData(e,function(){this.submit(e)}.bind(this))},submit:function(e){this.validateData(e,function(){var t=this;e.pluginInfo.refreshTime=this.parseMinToStr(e.pluginInfo.refreshTime);for(var a=0;a<e.rlsInfo.length;a++)e.rlsInfo[a].extendInfo.aliveTime=this.parseMinToStr(e.rlsInfo[a].extendInfo.aliveTime);e=this.parseData(e),console.log(e),this.$service.SavePlugin(e,"保存成功").then(function(e){t.$emit("open-list-page")})}.bind(this))},handleChangeActivityFlag:function(e){e?this.block.rlsInfo.unshift(this.genRlsInfo({label:"活动形式",dataType:4})):this.block.rlsInfo=this.block.rlsInfo.filter(function(e){return 4!==e.dataType})}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.mode="edit",this.getEditData()):(this.title="新增",this.mode="create")}},Ti=Ii,Si=(a("5519"),Object(K["a"])(Ti,ci,ui,!1,null,"f2236244",null)),Ci=Si.exports,ki=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{staticClass:"multi-func-block-read"},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])]),a("el-form",{ref:"blockForm",attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"系统功能名称",prop:"pluginInfo.pluginName"}},[e._v(e._s(e.block.pluginInfo.pluginName))]),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"固定刷新时间",prop:"pluginInfo.refreshTime"}},[e._v(e._s(e.parseMinToStr(e.block.pluginInfo.refreshTime)))]),a("el-form-item",{attrs:{label:"活动形式",prop:"hasActivity"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.block.hasActivity,callback:function(t){e.$set(e.block,"hasActivity",t)},expression:"block.hasActivity"}},[a("el-radio",{attrs:{label:0}},[e._v("非活动")]),a("el-radio",{attrs:{label:1}},[e._v("活动")])],1)],1)]:e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"builtIn"!==e.block.pluginInfo.pluginParentType,expression:"block.pluginInfo.pluginParentType !== 'builtIn'"}],attrs:{label:"类型",prop:"pluginInfo.pluginParentType"}},[e._v(e._s(e.pluginParentTypeText))]),"secKill"!==e.pluginParentType?a("el-form-item",{attrs:{label:"内容源"}},[e._v(e._s(e.SOURCE_TEXT[e.block.pluginInfo.source]))]):e._e(),"sign"===e.pluginParentType?[a("el-form-item",{attrs:{label:"标记推荐位类型",prop:"pluginInfo.pluginType"}},[e._v(e._s(e.block.pluginInfo.pluginType))])]:e._e(),"sign"!==e.pluginParentType&&e.pluginTypes.length>0&&e.pluginTypeText?a("el-form-item",{attrs:{label:"多功能推荐位类型",prop:"pluginInfo.pluginType"}},[e._v(e._s(e.pluginTypeText))]):e._e(),e.baseHasTitle?[a("el-form-item",{attrs:{label:"标题",prop:"helper.title"}},[e._v(e._s(e.block.helper.title))]),a("el-form-item",{attrs:{label:"副标题",prop:"helper.subTitle"}},[e._v(e._s(e.block.helper.subTitle))])]:e._e(),"sign"!==e.pluginParentType?e._l(e.block.rlsInfo,function(t,i){return a("div",{key:i},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v(e._s(t.label))])]),e.versionHasTitle?[a("el-form-item",{attrs:{label:"标题"}},[e._v(e._s(t.title))]),a("el-form-item",{attrs:{label:"副标题"}},[e._v(e._s(t.subTitle))])]:e._e(),"builtIn"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"状态栏文字"}},[e._v(e._s(t.title)+" "+e._s(t.subTitle?" | "+t.subTitle:""))])]:e._e(),"secKill"===e.block.pluginInfo.pluginParentType?[a("el-form-item",{attrs:{label:"商品ID"}},[e._v(e._s(t.goodsId))]),a("el-form-item",{attrs:{label:"商品名称"}},[e._v(e._s(t.title))])]:e._e(),a("el-form-item",{attrs:{label:"海报"}},[a("div",{staticClass:"poster"},[t.poster.pictureUrl?a("img",{staticClass:"poster__img",attrs:{src:t.poster.pictureUrl}}):e._e()])]),"REFERENCE_ACTIVITY"===e.pluginType?[a("el-form-item",{attrs:{label:"异形焦点"}},[t.extendInfo.focusImgUrl?a("div",{staticClass:"focus-transition"},[a("img",{staticClass:"focus-transition__img",attrs:{src:t.extendInfo.focusImgUrl}})]):a("span",[e._v("无")])]),a("el-form-item",{attrs:{label:"存活时间"}},[e._v(e._s(e.parseMinToStr(t.extendInfo.aliveTime)))]),a("el-form-item",{attrs:{label:"点击次数"}},[e._v(e._s(t.extendInfo.clickCount))])]:e._e(),"multi"===e.pluginParentType||"secKill"===e.pluginParentType?a("el-form-item",{attrs:{label:"打开方式"}},[e._v(e._s(e.OPEN_MODE_TEXT[t.openMode]))]):e._e(),"webpage"===t.openMode?[a("el-form-item",{attrs:{label:"网页地址"}},[e._v(e._s(t.onclick.webpageUrl))]),a("el-form-item",{attrs:{label:"网页类型"}},[e._v(e._s(["","浮窗网页","全屏网页"][+t.onclick.webpageType]))]),a("el-form-item",{attrs:{label:"应用版本号"}},[e._v(e._s(t.onclick.webpageAppVersion))])]:e._e(),"video"===t.openMode?[a("el-form-item",{attrs:{label:"视频名称"}},[e._v(e._s(t.onclick.videoName))]),a("el-form-item",{attrs:{label:"视频地址"}},[e._v(e._s(t.onclick.videoUrl))])]:e._e(),"picture"===t.openMode?[a("el-form-item",{attrs:{label:"图片"}},[a("div",{staticClass:"open-picture"},[a("img",{staticClass:"open-picture__img",attrs:{src:t.onclick.picture[0].url}})])])]:e._e(),"tab"===t.openMode?[a("el-form-item",{attrs:{label:"版面"}},[e._v(e._s(t.onclick.tab.tabId))])]:e._e(),"app"===t.openMode?a("AppParamsRead",{attrs:{"label-width":"140px"},model:{value:t.onclick,callback:function(a){e.$set(t,"onclick",a)},expression:"item.onclick"}}):e._e()],2)}):e._e(),a("el-form-item",[void 0!==e.id?a("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:"systemPlugin",status:e.status,menuElId:"sysPlugin"},on:{auditTask:function(t){return e.$emit("open-list-page")}}}):e._e()],1)],2)],1)])},_i=[],Pi={0:"无",1:"腾讯",2:"爱奇艺"},xi={webpage:"网页",app:"第三方应用",video:"视频",tab:"版面",picture:"图片"},Di={draft:2,waiting:3,accepted:4,reject:5,processing:7},Fi={components:{AppParamsRead:W["AppParamsRead"],AuditDetailButton:Gt},props:{viewId:Number,default:null},data:function(){return{showAuditDialog:!1,title:void 0,STATUS:Di,SOURCE_TEXT:Pi,OPEN_MODE_TEXT:xi,pluginParentTypes:[],pluginTypes:[],version:void 0,status:void 0,id:void 0,pluginVersions:{},block:{helper:{title:void 0,subTitle:void 0,webpageUrl:void 0,webpageType:"1",webpageAppVersion:void 0},pluginInfo:{pluginId:void 0,pluginName:"",pluginParentType:void 0,source:0,channel:"",pluginType:void 0,enableEdit:1,pluginStatus:void 0,refreshTime:240},rlsInfo:[],hasActivity:0}}},computed:{pluginParentType:function(){return this.block.pluginInfo.pluginParentType},pluginType:function(){return this.block.pluginInfo.pluginType},pluginParentTypeText:function(){var e=this.pluginParentType,t=this.pluginParentTypes;if(t.length>0){var a=t.find(function(t){return t.value===e});if(a)return a.label}},pluginTypeText:function(){var e=this.pluginType,t=this.pluginTypes;if(console.log(e),console.log(t),t.length>0){var a=t.find(function(t){return t.value===e});if(a)return a.label}},versionHasTitle:function(){this.pluginParentType;var e=this.pluginType;return"REFERENCE_MOVIE_VIP"===e},baseHasTitle:function(){var e=this.pluginParentType,t=this.pluginType;return"secKill"!==e&&"builtIn"!==e&&t&&"REFERENCE_MOVIE_VIP"!==t}},methods:{parseMinToStr:function(e){var t=Math.floor(e/60),a=e%60,i=t>9?""+t:"0"+t,n=a>9?""+a:"0"+a;return i+":"+n},getData:function(){var e=this;this.$service.getData({id:this.viewId}).then(function(t){e.setData(t),e.pluginType&&e.getPluginVersions(e.pluginType).then(function(e){if(e){var t=this.block.rlsInfo,a=t.reduce(function(e,t){return e[t.dataType]=t,e},{});this.block.rlsInfo=e.reduce(function(e,t){var i=a[t.value];return i&&(this.$set(i,"label",t.label),e.push(i)),e}.bind(this),[])}}.bind(e))})},getPluginParentTypes:function(){var e=this;this.$service.getPluginParentTypes().then(function(t){console.log(t),t&&(e.pluginParentTypes=t.filter(function(e){return"builtIn"!==e.value}))})},getPluginTypes:function(e){var t=this;this.$service.getPluginTypes({pluginParentType:e}).then(function(e){console.log(e),e&&(t.pluginTypes=e)})},getPluginVersions:function(e){this.urls;var t=this,a=(this.FastDevTool,this.pluginVersions);return new Promise(function(i,n){a[e]?i(a[e]):t.$service.getPluginVersions(e).then(function(t){t&&(a[e]=t,i(a[e]))})})},setData:function(e){var t=this.block.helper,a=JSON.parse(JSON.stringify(e)),i=a.pluginInfo.pluginParentType,n=a.pluginInfo.pluginType;if(this.id=a.pluginInfo.pluginId,this.version=a.pluginInfo.currentVersion,this.status=a.pluginInfo.pluginStatus,a.rlsInfo.forEach(function(e){if(e.openMode=e.params.split(",")[0].split("==")[1],e.onclick){e.onclick=this.parseOnclick(JSON.parse(e.onclick));var t=e.onclick,a=t.params.reduce(function(e,t){return e[t.key]=t.value,e},{});switch(e.openMode){case"webpage":e.onclick={webpageType:"coocaa.intent.action.browser"===t.byvalue?"1":"2",webpageUrl:a.url,webpageAppVersion:t.versioncode};break;case"video":e.onclick={videoName:a.name,videoUrl:a.url};break;case"picture":e.onclick={picture:[{url:a.url}]};break;case"tab":e.onclick={tab:{tabId:a.id}}}}e.extendInfo=e.extendInfo||{}}.bind(this)),i&&this.getPluginTypes(i),"secKill"!==i&&n&&"REFERENCE_MOVIE_VIP"!==n){var o=a.rlsInfo[0];o&&(t.title=o.title,t.subTitle=o.subTitle)}this.block=Object.assign(this.block,a)},parseOnclick:function(e){if(e.params){var t=e.params;e.params=Object.keys(e.params).map(function(e){return{key:e,value:t[e]}})}return e},handleClose:function(){window.parent.$("#edit-view").dialog("close")}},created:function(){this.basicFn=basicFn,this.getPluginParentTypes(),window.mode="read",window.mode&&(this.mode=window.mode,this.title="预览"),this.getData()}},$i=Fi,Ri=(a("fd49"),Object(K["a"])($i,ki,_i,!1,null,null,null)),Li=Ri.exports,Ni={components:{SysPluginList:si,SysPluginAdd:Ci,SysPluginView:Li},data:function(){return{editId:null,viewId:null,model:"list"}},methods:{openAddPage:function(e){this.editId=e,this.model="add",console.log(this.mode)},openListPage:function(){this.model="list",this.$refs.list.fetchData()},openViewPage:function(e){console.log(this.mode),this.viewId=e,this.model="view"},goBack:function(){this.model="list"}}},Oi=Ni,Ai=Object(K["a"])(Oi,ti,ai,!1,null,null,null),Ei=Ai.exports,Vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("AlbumPannelInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("AlbumPannelInfoAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Mi=[],Bi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[void 0===e.dataList?a("ButtonGroupForListPage",{attrs:{pageName:"albumPanel"},on:{add:e.addTabInfo,edit:e.editData,delete:e.batchDel}}):e._e(),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Ui=[],ji=(a("6b54"),{components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"],ButtonGroupForListPage:ue},props:{dataList:{type:Object}},data:function(){var e=this;return{pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],pannelStatus:{},filter:{idPrefix:10,pannelType:3},filterSchema:null,pagination:{currentPage:1},businessType:{},table:{props:{},data:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.pannelGroupRemark)}},{label:"布局",prop:"fullLayoutName"},{label:"业务分类",prop:"categoryName"},{label:"内容源",prop:"pannelResource",formatter:function(e){return{o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_voole:"优朋"}[e.pannelList[0].pannelResource]}},{label:"专辑数据",prop:"albumName"},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var a=t.pannelStatus,i=t.currentVersion;return i+"/"+e.pannelStatusOption.map(function(e){if(a.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate","show-overflow-tooltip":!0},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"userName"},{label:"操作"}],selected:[],selectionType:"multiple"},selected:[]}},watch:{selected:{handler:function(e,t){var a=this.table,i=[];a.data.map(function(t){e.indexOf(t.pannelGroupId)>-1&&(console.log("AlbumPannelInfoList"),t.type="AlbumPannelInfo",i.push(t))}),this.$emit("input",i)}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},fetchData:function(){var e=this,t=this.parseFilter();this.dataList?this.$service.panelDataList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows}):this.$service.panelPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){console.log(this.dataList),this.dataList?(this.filter=Object.assign({},this.dataList.filter),console.log(this.filter)):this.filter={idPrefix:10},this.fetchData()},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.businessType[t.dictCnName]=t.dictId})})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pannelGroupId)>-1&&e.push(i),e},[])},addTabInfo:function(){},editData:function(){},batchDel:function(){}},created:function(){var e=this;this.pannelStatus=this.pannelStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=ne.a.map({pannelCategory:ne.a.o.enum(this.businessType).other("form",{placeholder:"业务分类",component:"Select"}),pannelId:ne.a.o.string.other("form",{placeholder:"板块ID",component:"Input"}),pannelName:ne.a.o.string.other("form",{placeholder:"板块名称",component:"Input"}),pannelTitle:ne.a.o.string.other("form",{placeholder:"板块标题",component:"Input"}),vDataListName:ne.a.o.string.other("form",{placeholder:"关联专辑名",component:"Input"}),tabName:ne.a.o.string.other("form",{placeholder:"引用状态",component:"Input"}),pannelResource:ne.a.o.enum({"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"}).other("form",{placeholder:"内容源",component:"Select"}),pannelStatus:ne.a.o.enum(this.pannelStatus).other("form",{placeholder:"状态",component:"Select"}),type:ne.a.o.enum({"默认":-1,"置顶":1,"下沉":0}).other("form",{placeholder:"板块类别",component:"Select"})}).other("form",{cols:{item:6,label:0,wrapper:18},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getBusinessType().then(function(){e.dataList?e.filterSchema=a.filterSchema:e.filterSchema=t});var a=this.dataList;a&&(this.filter=Object.assign({},a.filter),this.table=a.table),this.fetchData()}}),Hi=ji,qi=(a("aba8"),Object(K["a"])(Hi,Bi,Ui,!1,null,"7efc5c56",null)),Wi=qi.exports,Gi={},zi=Object(K["a"])(Gi,mi,fi,!1,null,null,null),Ji=zi.exports,Ki={components:{AlbumPannelInfoList:Wi,AlbumPannelInfoAdd:Ji},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Xi=Ki,Yi=Object(K["a"])(Xi,Vi,Mi,!1,null,"240eaf46",null),Zi=Yi.exports,Qi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("MarkPanelList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?a("MarkPanelAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?a("MarkPanelView",{attrs:{viewData:e.viewData},on:{"pen-list-page":e.openListPage,"open-add-page":e.openAddPage,"go-back":e.goBack}}):e._e()],1)},en=[],tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"markPanel"},on:{add:e.addData,edit:e.editData,delete:e.deleteData}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},an=[],nn={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{businessTypes:{},pannelResources:{"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"},pannelStatuses:{"下架":0,"上架":1,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pannelGroupId",width:"90"},{label:"名称",prop:"pannelGroupRemark",width:"100",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.preview(i)}}},i.pannelGroupRemark)}},{label:"业务分类",prop:"categoryName",width:"90"},{label:"内容源",prop:"pannelList",width:"90",render:function(e,t){var a=t.row;if(a.pannelList.length<0)return"";switch(a.pannelList[0].pannelResource){case"o_tencent":return"腾讯";case"o_iqiyi":return"爱奇艺";case"o_voole":return"优朋"}}},{label:"引用状态",prop:"fullTabName","min-width":"90"},{label:"版本/状态",prop:"pannelStatus",width:"90",render:function(t,a){var i=a.row;return e.$numToAuditStatus(i.pannelStatus)}},{label:"当前版本",prop:"currentVersion",width:"70"},{label:"待审核副本",prop:"duplicateVersion",width:"90"},{label:"更新时间",prop:"lastUpdateDate"}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMarkPanelList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize,e.idPrefix="10",e.pannelType="8"),e},addData:function(){this.$emit("open-add-page",null)},editData:function(){0==this.selected.length?this.$message("请选择一条数据"):this.selected.length>1?this.$message("只能选择一条数据"):(console.log(this.selected),this.$emit("open-add-page",this.selected[0]))},deleteData:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.deleteMarkPanel({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},preview:function(e){this.$emit("open-view-page",e)},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.businessTypes[t.dictCnName]=t.dictId}),console.log(e.businessTypes)})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pannelGroupId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()}},created:function(){var e=this,t=ne.a.map({pannelGroupId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),pannelGroupRemark:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"}),categoryName:ne.a.o.enum(this.businessTypes).other("form",{component:"Select",placeholder:"业务分类"}),pannelResource:ne.a.o.enum(this.pannelResources).other("form",{component:"Select",placeholder:"内容源"}),fullTabName:ne.a.o.string.other("form",{component:"Input",placeholder:"引用状态"}),pannelStatus:ne.a.o.enum(this.pannelStatuses).other("form",{component:"Select",placeholder:"状态"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.getBusinessType().then(function(){e.filterSchema=t})}},on=nn,ln=(a("298e"),Object(K["a"])(on,tn,an,!1,null,"9318b666",null)),rn=ln.exports,sn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版块名称",prop:"pannelList[0].pannelName"}},[a("el-input",{attrs:{placeholder:"版块名称"},model:{value:e.form.pannelList[0].pannelName,callback:function(t){e.$set(e.form.pannelList[0],"pannelName",t)},expression:"form.pannelList[0].pannelName"}})],1),a("el-form-item",{attrs:{label:"版块标题",prop:"pannelList[0].pannelTitle"}},[a("el-input",{attrs:{placeholder:"版块标题"},model:{value:e.form.pannelList[0].pannelTitle,callback:function(t){e.$set(e.form.pannelList[0],"pannelTitle",t)},expression:"form.pannelList[0].pannelTitle"}}),a("el-checkbox",{staticClass:"marginL",attrs:{value:!e.form.pannelList[0].showTitle},on:{input:function(t){e.form.pannelList[0].showTitle=!t}}},[e._v("前端不显示标题")])],1),a("el-form-item",{attrs:{label:"功能类型",prop:"clientType"}},[a("el-input",{attrs:{placeholder:"功能类型"},model:{value:e.form.clientType,callback:function(t){e.$set(e.form,"clientType",t)},expression:"form.clientType"}})],1),a("el-form-item",{attrs:{label:"内容源",prop:"pannelList[0].pannelResource"}},[a("el-radio",{attrs:{label:""},model:{value:e.form.pannelList[0].pannelResource,callback:function(t){e.$set(e.form.pannelList[0],"pannelResource",t)},expression:"form.pannelList[0].pannelResource"}},[e._v("不限")]),a("el-radio",{attrs:{label:"o_tencent"},model:{value:e.form.pannelList[0].pannelResource,callback:function(t){e.$set(e.form.pannelList[0],"pannelResource",t)},expression:"form.pannelList[0].pannelResource"}},[e._v("腾讯")]),a("el-radio",{attrs:{label:"o_iqiyi"},model:{value:e.form.pannelList[0].pannelResource,callback:function(t){e.$set(e.form.pannelList[0],"pannelResource",t)},expression:"form.pannelList[0].pannelResource"}},[e._v("爱奇艺")]),a("el-radio",{attrs:{label:"o_youku"},model:{value:e.form.pannelList[0].pannelResource,callback:function(t){e.$set(e.form.pannelList[0],"pannelResource",t)},expression:"form.pannelList[0].pannelResource"}},[e._v("优酷")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitStart}},[e._v("提交审核")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.submitEnd}},[e._v("保存草稿")])],1)],1),a("el-dialog",{attrs:{visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{ref:"submitForm",attrs:{model:e.submitForm,rules:e.submitRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"是否定时",prop:"isTiming"}},[a("el-radio-group",{model:{value:e.submitForm.isTiming,callback:function(t){e.$set(e.submitForm,"isTiming",t)},expression:"submitForm.isTiming"}},[a("el-radio",{staticClass:"radio",attrs:{label:1}},[e._v("是")]),a("el-radio",{staticClass:"radio",attrs:{label:0}},[e._v("否")])],1)],1),1==e.submitForm.isTiming?a("el-form-item",{attrs:{label:"设定时间",prop:"releaseTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择时间"},model:{value:e.submitForm.releaseTime,callback:function(t){e.$set(e.submitForm,"releaseTime",t)},expression:"submitForm.releaseTime"}})],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitTime("submitForm")}}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogTableVisible=!1,e.resetFields("submitForm")}}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)},cn=[],un={props:{editId:Number,default:null},data:function(){return{title:"",form:{parentType:"function",pannelGroupId:void 0,currentVersion:void 0,panelGroupType:8,clientType:"",pannelList:[{pannelName:"",pannelType:8,pannelResource:"",pannelTitle:"",showTitle:!1,pannelCategory:67}]},rules:{"pannelList[0].pannelName":[{required:!0,message:"请输入板块名称",trigger:"blur"}],"pannelList[0].pannelTitle":[{required:!0,message:"请输入板块标题",trigger:"blur"}],clientType:[{required:!0,message:"请输入功能类型",trigger:"blur"}]},dialogTableVisible:!1,submitForm:{isTiming:0,releaseTime:""},submitRules:{releaseTime:[{required:!0,message:"请选择时间"}]}}},methods:{submitEnd:function(e,t){var a=this,i=this.getFormData(e,t);this.$refs.form.validate(function(e){e&&a.$service.MarkPanelSave({jsonStr:JSON.stringify(i)},"保存成功").then(function(e){a.$emit("open-list-page")})})},getFormData:function(e,t){var a=this.form;a.pannelList[0]["showTitle"]?a.pannelList[0]["showTitle"]=1:a.pannelList[0]["showTitle"]=0,a.pannelList[0]["pannelStatus"]=t?3:2;var i=Object.assign({},a,e);return i},submitTime:function(e){var t=this;this.$refs.submitForm.validate(function(e){e&&(t.form.isTiming=t.$refs.submitForm.model.isTiming,t.form.releaseTime=t.$refs.submitForm.model.releaseTime,t.dialogTableVisible=!1,t.$refs.form.validate(function(e){if(e){JSON.stringify(t.form);t.$service.MarkPanelSave({jsonStr:JSON.stringify(t.form)},"成功").then(function(e){t.$emit("open-list-page")})}}))})},resetFields:function(e){var t=this;this.$nextTick(function(){t.$refs.submitForm.resetFields()}),console.log(this.$refs.submitForm.model)},submitStart:function(){this.dialogTableVisible=!0},getEditData:function(){var e=this;this.$service.getMarkEditData({id:this.editId}).then(function(t){console.log(t),e.form=t})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},dn=un,pn=(a("33e6"),Object(K["a"])(dn,sn,cn,!1,null,"0985a938",null)),hn=pn.exports,mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{attrs:{id:"preview"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.releaseTime,expression:"releaseTime"}],staticClass:"audit-tip"},[e._v("该版块为定时任务，审核通过后将于"+e._s(e.releaseTime)+"上线")]),a("div",{attrs:{id:"pannelStatus"}},[a("el-form",{attrs:{inline:!0}},[a("HistoryTool",{attrs:{id:e.id,type:e.type,initialStatus:e.status},on:{change:e.changeVsersion}})],1)],1),a("div",{staticClass:"base-tit"},[a("span",{staticClass:"el-icon-edit"},[e._v("基本信息")])]),a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版块名称"}},[a("div",[e._v(e._s(e.pannelName))])]),a("el-form-item",{attrs:{label:"版块标题"}},[a("div",[e._v(e._s(e.pannelTitle)+" "+e._s(0===e.showTitle?"(前端不显示)":""))])]),a("el-form-item",{attrs:{label:"功能类型"}},[a("div",[e._v(e._s(e.clientType))])]),a("el-form-item",{attrs:{label:"内容源"}},[a("div",[e._v(e._s(e.pannelResourceText[e.pannelResource]||"不限"))])])],1),a("div",{staticClass:"base-tit auditor-title"},[a("span",{staticClass:"el-icon-edit"},[e._v("审核者备注")])]),a("div",{staticClass:"up-addlist"},[a("table",[a("tbody",{staticClass:"auditor-wrapper"},e._l(e.auditHistories,function(t,i){return a("tr",{key:i},[a("td",[e._v(e._s(t.lastUpdateDate))]),a("td",[e._v(e._s(t.auditor))]),4==t.auditFlag?a("td",[e._v("通过")]):a("td",[e._v("不通过")]),a("td",[e._v(e._s(t.auditDesc))])])}),0)])]),a("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:e.type,"not-contain-btn":e.notContainBtn,status:e.status,menuElId:e.menuElId},on:{"go-edit-Page":e.goEditPage,"delete-item":e.deleteItem,copy:e.createCopy}})],1)])},fn=[],bn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operate-box__head"},[e.isShowHistory?a("div",{staticClass:"operate-box__version"},[a("span",[e._v("版本：")]),a("el-select",{staticStyle:{width:"300px"},on:{change:e.changeVersion},model:{value:e.currentVersion,callback:function(t){e.currentVersion=t},expression:"currentVersion"}},e._l(e.historyList,function(t,i){return a("el-option",{key:i,attrs:{label:t.label,value:t.value}},[e._v(e._s(t.label))])}),1)],1):e._e(),a("div",{staticClass:"operate-box__status"},[e._v(e._s(e.statusName))])])},gn=[],vn={props:{id:Number,type:String,initialStatus:Number},data:function(){return{isShowHistory:!0,historyList:[],currentVersion:""}},computed:{statusName:function(){return this.$numToAuditStatus(""===this.currentVersion?this.initialStatus:parseInt(this.currentVersion.split("_")[1]))}},methods:{changeVersion:function(e){e=e.split("_"),this.$emit("change",{version:e[0],status:parseInt(e[1])})},getHistoryList:function(){var e=this;return this.$service.getHistoryList({id:this.id,type:this.type}).then(function(t){0===t.total?e.isShowHistory=!1:(e.isShowHistory=!0,t.rows.forEach(function(t){t.status===e.initialStatus&&(e.currentVersion=t.version+"_"+t.status);var a=t.version+"/"+t.lastUpdateDate+"/"+t.modifierName+"/"+e.$numToAuditStatus(parseInt(t.status));e.historyList.push({label:a,value:t.version+"_"+t.status})}))})}},created:function(){var e=this;this.getHistoryList().then(function(){e.$emit("getHistoryList",e.historyList)})}},yn=vn,wn=(a("ce35"),Object(K["a"])(yn,bn,gn,!1,null,"b7109b24",null)),In=wn.exports,Tn={components:{AuditDetailButton:Gt,HistoryTool:In},props:{viewData:Object},data:function(){return{title:"预览",id:null,version:"",type:"pannel",status:null,menuElId:"pannelInfo",notContainBtn:["claim","unclaim"],pannelType:"pannel",auditHistories:[],blockContentProps:{},releaseTime:void 0,activePannelIndex:0,buttonGroup:{params:{},options:{isAllowCopy:!0}},pannelResourceText:{o_iqiyi:"爱奇艺",o_tencent:"腾讯",o_voole:"优朋"},clientType:"",showTitle:1,pannelResource:"",pannelName:"",pannelTitle:"",versions:"",versionList:[],isShowVersion:!1,pannelStatus:""}},methods:{getViewData:function(){var e=this;return this.$service.getViewData({id:this.viewData.pannelGroupId}).then(function(t){console.log(t),e.buttonGroup.params=t,e.pannelName=t.pannelList[0].pannelName,e.pannelTitle=t.pannelList[0].pannelTitle,e.pannelResource=t.pannelList[0].pannelResource,e.pannelStatus=e.parasNumToStr(t.pannelList[0].pannelStatus),e.versions=t.currentVersion,e.clientType=t.clientType,e.getHandlePerson(t)})},parasNumToStr:function(e){var t=["下架","上架","草稿","待审核","审核通过","审核不通过"],a=t[e];return a},getTimedInfo:function(){var e=this,t={id:this.viewData.pannelGroupId,version:this.buttonGroup.params.currentVersion,type:this.pannelType};this.$service.getTimedInfo(t).then(function(t){e.releaseTime=t.releaseTime})},changeVsersion:function(e){var t=this;e=e.split("_");var a=e[0];this.version=a,this.status=parseInt(e[1]),this.$service.getViewData({id:this.viewData.pannelGroupId,version:a}).then(function(e){t.getHandlePerson(e),t.buttonGroup.params=e,t.pannelName=e.pannelList[0].pannelName,t.pannelTitle=e.pannelList[0].pannelTitle,t.pannelResource=e.pannelList[0].pannelResource,t.pannelStatus=t.parasNumToStr(e.pannelList[0].pannelStatus),t.versions=e.currentVersion,t.clientType=e.clientType})},getHandlePerson:function(e){var t=this;return this.$service.getHandlePerson({id:e.pannelGroupId,version:e.currentVersion,type:"pannel"}).then(function(e){t.auditHistories=e})},handleSelectVersion:function(e){var t=this,a={id:this.viewData.pannelGroupId,version:e,type:this.pannelType};this.$service.getTimedInfo(a).then(function(e){t.releaseTime=e.releaseTime}),this.getViewData()},goEditPage:function(){this.$emit("open-add-page",this.viewData.pannelGroupId)},deleteItem:function(){var e=this;window.confirm("确定要删除吗")&&this.$service.deleteMarkPanel({id:this.viewData.pannelGroupId},"删除成功").then(function(t){e.$emit("open-list-page")})},createCopy:function(){this.$emit("open-add-page",this.viewData.pannelGroupId)}},created:function(){var e=this;this.id=this.viewData.pannelGroupId,this.status=this.viewData.pannelStatus,this.version=this.viewData.currentVersion,this.getViewData().then(function(){e.getTimedInfo()})}},Sn=Tn,Cn=(a("e222"),Object(K["a"])(Sn,mn,fn,!1,null,"eee37122",null)),kn=Cn.exports,_n={components:{MarkPanelList:rn,MarkPanelAdd:hn,MarkPanelView:kn},data:function(){return{model:"list",editId:null,viewData:null}},methods:{openAddPage:function(e){this.editId=e,this.model="add"},openViewPage:function(e){this.viewData=e,this.model="view"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},goBack:function(){this.model="list"}}},Pn=_n,xn=Object(K["a"])(Pn,Qi,en,!1,null,"b38687fa",null),Dn=xn.exports,Fn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PannelInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("PannelInfoAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},$n=[],Rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[void 0===e.dataList?a("ButtonGroupForListPage",{attrs:{pageName:"panel"},on:{add:e.addTabInfo,edit:e.editData,delete:e.batchDel}}):e._e(),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Ln=[],Nn={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"],ButtonGroupForListPage:ue},props:{dataList:{type:Object}},data:function(){var e=this;return{pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],pannelStatus:{},filter:{idPrefix:10},filterSchema:null,pagination:{currentPage:1},businessType:{},table:{props:{},data:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.pannelGroupRemark)}},{label:"布局",prop:"fullLayoutName"},{label:"业务分类",prop:"categoryName"},{label:"内容源",prop:"pannelResource",formatter:function(e){return{o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_voole:"优朋"}[e.pannelList[0].pannelResource]}},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var a=t.pannelStatus,i=t.currentVersion;return i+"/"+e.pannelStatusOption.map(function(e){if(a.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate","show-overflow-tooltip":!0},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"userName"},{label:"操作"}],selected:[],selectionType:"multiple"},selected:[]}},watch:{selected:{handler:function(e,t){var a=this.table,i=[];a.data.map(function(t){e.indexOf(t.pannelGroupId)>-1&&(console.log("pannelInfoList"),t.type="pannelInfo",i.push(t))}),this.$emit("input",i)}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},fetchData:function(){var e=this,t=this.parseFilter();this.dataList?this.$service.panelDataList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows}):this.$service.panelPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){console.log(this.dataList),this.dataList?(this.filter=Object.assign({},this.dataList.filter),console.log(this.filter)):this.filter={idPrefix:10},this.fetchData()},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.businessType[t.dictCnName]=t.dictId})})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pannelGroupId)>-1&&e.push(i),e},[])},addTabInfo:function(){},editData:function(){},batchDel:function(){}},created:function(){var e=this;this.pannelStatus=this.pannelStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=ne.a.map({pannelCategory:ne.a.o.enum(this.businessType).other("form",{placeholder:"业务分类",component:"Select"}),pannelId:ne.a.o.string.other("form",{placeholder:"板块ID",component:"Input"}),pannelName:ne.a.o.string.other("form",{placeholder:"板块名称",component:"Input"}),pannelTitle:ne.a.o.string.other("form",{placeholder:"板块标题",component:"Input"}),tabName:ne.a.o.string.other("form",{placeholder:"引用状态",component:"Input"}),pannelResource:ne.a.o.enum({"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"}).other("form",{placeholder:"内容源",component:"Select"}),pannelStatus:ne.a.o.enum(this.pannelStatus).other("form",{placeholder:"状态",component:"Select"}),pannelType:ne.a.o.enum({"影视推荐板块":6,"定向板块":7,"常规板块":1}).other("form",{placeholder:"板块类别",component:"Select"}),contentTitle:ne.a.o.string.other("form",{placeholder:"推荐位标题",component:"Input"}),contentPackageName:ne.a.o.string.other("form",{placeholder:"推荐位包名",component:"Input"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getBusinessType().then(function(){e.dataList?e.filterSchema=a.filterSchema:e.filterSchema=t});var a=this.dataList;a&&(this.filter=Object.assign({},a.filter),this.table=a.table),this.fetchData()}},On=Nn,An=(a("4863"),Object(K["a"])(On,Rn,Ln,!1,null,"6d216400",null)),En=An.exports,Vn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},Mn=[],Bn={components:{},data:function(){return{}},methods:{},created:function(){}},Un=Bn,jn=Object(K["a"])(Un,Vn,Mn,!1,null,"46aa801e",null),Hn=jn.exports,qn={components:{PannelInfoList:En,PannelInfoAdd:Hn},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}},created:function(){}},Wn=qn,Gn=Object(K["a"])(Wn,Fn,$n,!1,null,"1ae2e89e",null),zn=Gn.exports,Jn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PrivatePannelInfoList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?a("PrivatePannelInfoAdd",{attrs:{editId:e.editId,isCopy:e.isCopy},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?a("PrivatePannelInfoView",{attrs:{viewData:e.viewData,version:e.version},on:{"open-list-page":e.openListPage,"create-copy":e.createCopy,"go-back":e.goBack}}):e._e()],1)},Kn=[],Xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[void 0===e.dataList?a("ButtonGroupForListPage",{attrs:{pageName:"privatePanel"},on:{add:e.addTabInfo,edit:e.editData,delete:e.batchDel}}):e._e(),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Yn=[],Zn={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"],ButtonGroupForListPage:ue},props:{dataList:{type:Object}},data:function(){var e=this;return{pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],pannelCategories:{},pannelStatus:{},pannelResources:{"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pannelGroupId",width:"90"},{label:"名称",prop:"pannelGroupRemark",width:"100",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.pannelGroupRemark)}},{label:"业务分类",prop:"categoryName",width:"90"},{label:"引用状态",prop:"fullTabName"},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var a=t.pannelStatus,i=t.currentVersion;return i+"/"+e.pannelStatusOption.map(function(e){if(a.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion",width:"90",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i,i.duplicateVersion)}}},i.duplicateVersion)}},{label:"更新时间",prop:"lastUpdateDate"},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"userName"}],data:[],selected:[],selectionType:"multiple"}}},watch:{selected:{handler:function(e,t){var a=this.table,i=[];a.data.map(function(t){e.indexOf(t.pannelGroupId)>-1&&(console.log("PrivatePannelInfo"),t.type="PrivatePannelInfo",i.push(t))}),this.$emit("input",i)}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.dataList,this.$service.privatePannelInfo(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},addTabInfo:function(){this.$emit("open-add-page",null)},editData:function(){var e=this;if(0==e.selected.length)e.$message("请选择一条数据");else if(e.selected.length>1)e.$message("只能选择一条数据");else for(var t=0;t<e.table.data.length;t++)e.selected[0]==e.table.data[t].pannelGroupId&&(2==e.table.data[t].pannelStatus?e.$emit("open-add-page",e.selected[0]):e.$message("该状态不允许编辑"))},batchDel:function(){var e=this;if(0==e.selected.length)e.$message("未选中记录");else for(var t=e.selected,a=0;a<t.length;a++)for(var i=0;i<e.table.data.length;i++)t[a]==e.table.data[i].pannelGroupId&&(3==e.table.data[i].pannelStatus?e.$message("待审核状态下不允许删除"):e.$service.remove({id:t.join(",")},"删除成功").then(function(t){e.fetchData()}))},openReview:function(e,t){this.$emit("open-view-page",e,t)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.dataList?(this.filter=Object.assign({},this.dataList.filter),console.log(this.filter)):this.filter={sort:void 0,order:void 0},this.fetchData()},getDictType:function(){var e=this;return this.$service.getDictType().then(function(t){t.forEach(function(t){e.pannelCategories[t.label]=t.id})})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pannelGroupId)>-1&&e.push(i),e},[])}},created:function(){var e=this;this.pannelStatus=this.pannelStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=ne.a.map({pannelId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),pannelName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"}),pannelTitle:ne.a.o.string.other("form",{component:"Input",placeholder:"标题"}),pannelResource:ne.a.o.enum(this.pannelResources).other("form",{component:"Select",placeholder:"内容源"}),pannelCategory:ne.a.o.enum(this.pannelCategories).other("form",{component:"Select",placeholder:"业务分类"}),tabName:ne.a.o.string.other("form",{component:"Input",placeholder:"引用状态"}),pannelStatus:ne.a.o.enum(this.pannelStatus).other("form",{component:"Select",placeholder:"状态"})}).other("form",{cols:{item:6,label:0,wrapper:18},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}}),a=this.dataList;a&&(this.filter=Object.assign({},a.filter),this.table=a.table),this.getDictType().then(function(){e.dataList?e.filterSchema=a.filterSchema:e.filterSchema=t}),this.fetchData()}},Qn=Zn,eo=(a("7d68"),Object(K["a"])(Qn,Xn,Yn,!1,null,"bc0c74c6",null)),to=eo.exports,ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",["create"===e.mode||"edit"===e.mode||"replica"===e.mode?a("div",{staticClass:"private-panel-info-upsert"},[a("div",{staticClass:"base-info"},[a("div",[e._v("专属影院版块：")]),a("div",[e._v("专属影院，影片数据 由大数据和媒资库提供，运营人员只需配置相应内容块的影片类型（0 会员影片，1 非会员影片，2 单点影片）。")])]),a("el-form",{ref:"upsertForm",staticClass:"el-form-add",attrs:{model:e.panel,"label-width":"120px",rules:e.rules}},[a("div",{staticClass:"base-tit"},[a("span",[e._v("基本信息")])]),a("el-form-item",{attrs:{label:"业务分类"}},[a("el-select",{attrs:{value:e.panel.panelGroupCategory},on:{input:e.handlePanelGroupCategoryChange}},e._l(e.panelGroupCategoryOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.id}})}),1),a("span",{staticClass:"spform marginL"},[e._v("注：只有一个权限的操作者不能选择业务分类")])],1),"common"===e.panelGroupCategoryValue||"video"===e.panelGroupCategoryValue?a("el-form-item",{attrs:{label:"内容源"}},[a("el-radio-group",{attrs:{value:e.panel.pannelResource,disabled:e.isReplica},on:{input:e.handlePannelResourceChange}},[a("el-radio",{attrs:{label:"o_tencent"}},[e._v("腾讯")]),a("el-radio",{attrs:{label:"o_iqiyi"}},[e._v("爱奇艺")])],1)],1):e._e(),a("el-form-item",{attrs:{label:"版块名称",prop:"pannelList.0.pannelName",rules:e.rules.pannelName}},[a("el-input",{model:{value:e.panel.pannelList[0].pannelName,callback:function(t){e.$set(e.panel.pannelList[0],"pannelName",t)},expression:"panel.pannelList[0].pannelName"}})],1),9===e.panel.panelGroupType||10===e.panel.panelGroupType?[a("el-form-item",{attrs:{label:"二级分类"}},[a("el-select",{attrs:{value:"1"}},[a("el-option",{attrs:{value:"1",label:"电视剧"}})],1)],1),a("el-form-item",{attrs:{label:"推荐维度"}},[a("el-radio-group",{model:{value:e.panel.panelGroupType,callback:function(t){e.$set(e.panel,"panelGroupType",t)},expression:"panel.panelGroupType"}},[a("el-radio",{attrs:{label:9}},[e._v("根据用户近期观影偏好推荐")]),a("el-radio",{attrs:{label:10}},[e._v("根据用户近期观看的影片推荐")])],1)],1)]:e._e(),a("div",{staticClass:"base-tit"},[a("span",[e._v("内容配置")])]),a("el-form-item",{attrs:{label:"版块标题",prop:"pannelList.0.pannelTitle",rules:e.rules.pannelTitle}},[a("el-input",{attrs:{placeholder:"请输入版本标题"},model:{value:e.panel.pannelList[0].pannelTitle,callback:function(t){e.$set(e.panel.pannelList[0],"pannelTitle",t)},expression:"panel.pannelList[0].pannelTitle"}}),a("el-checkbox",{staticClass:"marginL",attrs:{value:!e.panel.showTitle},on:{input:function(t){e.panel.showTitle=!t}}},[e._v("前端不显示标题")])],1),a("div",[5===e.panel.panelGroupType?a("el-form-item",{attrs:{label:"版块布局"}},[e.panel.layoutId>0?a("span",{staticClass:"spform J-selected J_select J_layout-selected"},[e._v(e._s(e.panel.layoutId))]):e._e(),a("el-checkbox",{model:{value:e.panel.lucenyFlag,callback:function(t){e.$set(e.panel,"lucenyFlag",t)},expression:"panel.lucenyFlag"}},[e._v("设置前端推荐位底色透明")]),a("div",{staticClass:"content-list"},e._l(e.panel.pannelList[0].contentList,function(t,i){return a("div",{key:i,staticClass:"content-list__item"},[a("el-select",{attrs:{size:"mini"},model:{value:t.blockVideoType,callback:function(a){e.$set(t,"blockVideoType",a)},expression:"item.blockVideoType"}},e._l(e.blockVideoTypeOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1),a("span",{staticClass:"content-list__item-id"},[e._v(e._s(i+1))])],1)}),0)],1):e._e()],1),a("el-form-item",{attrs:{prop:"pannelList.0.firstPageVipContentAmount",label:"首屏付费内容数",rules:e.rules.amount}},[a("el-input-number",{attrs:{max:6,min:0},model:{value:e.panel.pannelList[0].firstPageVipContentAmount,callback:function(t){e.$set(e.panel.pannelList[0],"firstPageVipContentAmount",t)},expression:"panel.pannelList[0].firstPageVipContentAmount"}})],1),a("el-form-item",{attrs:{prop:"pannelList.0.vipContentAmount",label:"总付费内容数",rules:e.rules.amount}},[a("el-input-number",{attrs:{max:15,min:0},model:{value:e.panel.pannelList[0].vipContentAmount,callback:function(t){e.$set(e.panel.pannelList[0],"vipContentAmount",t)},expression:"panel.pannelList[0].vipContentAmount"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitAudit}},[e._v("提交审核")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleSaveDraft}},[e._v("保存草稿")])],1)],2)],1):e._e()])])},io=[],no=(a("7cdf"),{props:["editId","isCopy"],data:function(){var e=[{value:0,label:"会员影片"},{value:1,label:"非会员影片"},{value:2,label:"单点影片"}],t={draft:2,waiting:3,accepted:4,reject:5,processing:7},a={0:"下架",2:"草稿",3:"待审核",4:"审核通过",5:"审核不通过",7:"审核通过未上线"};return{STATUS:t,STATUS_TEXT:a,auditHistories:[],panelGroupCategoryOptions:[],blockVideoTypeOptions:e,rules:{pannelName:[{required:!0,message:"请填写板块名称"}],pannelTitle:[{required:!0,message:"请填写标题"}],amount:[{validator:function(e,t,a){Number.isInteger(Number(t))&&Number(t)>0?a():a(new Error("请输入整数"))},trigger:"blur"}]},auditForm:{auditFlag:4,auditDesc:""},versionList:[],panel:{pannelGroupId:void 0,currentVersion:void 0,parentType:"normal",groupTitle:"",pannelName:void 0,pannelTitle:void 0,showTitle:!0,lucenyFlag:!1,pannelStatus:void 0,layoutId:void 0,pannelResource:"o_tencent",panelGroupCategory:67,panelGroupType:9,focusConfig:void 0,dictInfoList:"",content:"",priority:"1",pannelList:[{pannelId:void 0,pannelCategory:void 0,pannelName:void 0,pannelTitle:void 0,pannelResource:void 0,pannelType:5,pannelStatus:void 0,showTitle:void 0,flagIs4k:0,layoutId:void 0,panelIsFocus:void 0,focusShape:void 0,vipContentAmount:2,firstPageVipContentAmount:5,contentList:[{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0}]}]}}},computed:{panelGroupCategoryValue:function(){var e=this.panelGroupCategoryOptions,t=this.panel.panelGroupCategory;if(e){var a=e.find(function(e){return e.id===t});return a&&a.value}},isReplica:function(){return this.isCopy},buttonGroupParams:function(){var e=this.panel||{};return{type:"pannel",menuElId:"privatePannelInfo",status:e.pannelList[0].pannelStatus,resourceId:e.pannelGroupId,version:e.currentVersion}},isAllowCopy:function(){var e=this.STATUS,t=this.versionList.some(function(t){var a=t.row.status;return a===e.draft||a===e.waiting||a===e.rejected});return!t}},methods:{getCategoryLabel:function(e){var t=this.panelGroupCategoryOptions.find(function(t){return t.id===e});return t&&t.label},getPanelGroupTypeLabel:function(e){var t={9:"根据用户近期观影偏好推荐",10:"根据用户近期观看的影片推荐"};return t[e]},getResourceLabel:function(e){var t={o_iqiyi:"爱奇艺",o_tencent:"腾讯"};return t[e]},handlePanelGroupCategoryChange:function(e){this.panel.panelGroupCategory=e;var t=this.panelGroupCategoryValue;this.panel.pannelResource="common"===t||"video"===t?"o_tencent":""},handlePannelResourceChange:function(e){this.panel.pannelResource=e},handleSaveDraft:function(){var e=JSON.parse(JSON.stringify(this.panel));e.pannelStatus=2,this.submit(e)},handleSubmitAudit:function(){var e=JSON.parse(JSON.stringify(this.panel));e.pannelStatus=3,this.submit(e)},validate:function(e,t){this.$refs.upsertForm.validate(function(e){e&&t()})},submit:function(e){this.validate(e,function(t){var a=this;t?this.$message({type:"error",message:t}):this.$service.privatePanelUpsert({jsonStr:JSON.stringify(this.parseDataToApi(e))},"保存成功").then(function(e){a.$emit("open-list-page")})}.bind(this))},parseDataToApi:function(e){var t=JSON.parse(JSON.stringify(e)),a=t.panelGroupCategory,i=t.pannelResource,n=t.pannelStatus,o=t.layoutId,l=t.showTitle?1:0,r=t.lucenyFlag?1:0;return t.pannelList.forEach(function(e){e.pannelCategory=a,e.pannelResource=i,e.pannelStatus=n,e.layoutId=o,e.showTitle=l,e.contentList&&e.contentList.forEach(function(e){e.lucenyFlag=r})}),delete t.pannelResource,delete t.showTitle,delete t.lucenyFlag,delete t.pannelStatus,delete t.layoutId,t},parseApiToData:function(e){var t=JSON.parse(JSON.stringify(e)),a=e.pannelList[0];if(t.pannelResource=a.pannelResource,t.showTitle=1==a.showTitle,t.pannelStatus=a.pannelStatus,t.layoutId=a.layoutId,a.contentList&&a.contentList.length>0){var i=a.contentList[0];t.lucenyFlag=1==i.lucenyFlag}return t},setPanel:function(e){var t=this.parseApiToData(e);Object.assign(this.panel,t)},handleSelectVersion:function(e){var t=this.panel,a=location.pathname+"?id="+t.pannelGroupId+"&version="+e;location.href=a},getDictType:function(){var e=this;this.$service.getDictType().then(function(t){console.log(t),e.panelGroupCategoryOptions=t})}},created:function(){var e=this;null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.mode="edit",this.$service.getEditData({id:this.editId}).then(function(t){e.setPanel(t)})):(this.title="新增",this.mode="create"),this.getDictType()}}),oo=no,lo=(a("6463"),Object(K["a"])(oo,ao,io,!1,null,"eb6f1e34",null)),ro=lo.exports,so=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},["read"===e.mode?a("div",{staticClass:"private-panel-info-read"},[a("div",{staticClass:"private-panel-info-wrapper"},[a("div",{staticStyle:{"margin-left":"10px"}},[a("el-form",{staticStyle:{margin:"10px 0px"},attrs:{inline:!0}},[a("HistoryTool",{ref:"history",attrs:{id:e.id,type:e.type,initialStatus:e.status},on:{change:e.changeVersionAndStatus}})],1)],1)]),a("div",{staticClass:"base-info"},[a("div",[e._v("专属影院版块：")]),a("div",[e._v("专属影院，影片数据 由大数据和媒资库提供，运营人员只需配置相应内容块的影片类型（0 会员影片，1 非会员影片，2 单点影片）。")])]),a("el-form",{attrs:{"label-width":"120px","label-position":"right"}},[a("div",{staticClass:"base-tit"},[a("span",[e._v("基本信息")])]),a("el-form-item",{attrs:{label:"业务分类"}},[a("span",[e._v(e._s(e.getCategoryLabel(e.panel.panelGroupCategory)))])]),"common"===e.panelGroupCategoryValue||"video"===e.panelGroupCategoryValue?a("el-form-item",{attrs:{label:"内容源"}},[a("span",[e._v(e._s(e.getResourceLabel(e.panel.pannelResource)))])]):e._e(),a("el-form-item",{attrs:{label:"版块名称",prop:"pannelList.0.pannelName"}},[e._v(e._s(e.panel.pannelList[0].pannelName))]),9===e.panel.panelGroupType||10===e.panel.panelGroupType?[a("el-form-item",{attrs:{label:"二级分类"}},[e._v(e._s("电视剧"))]),a("el-form-item",{attrs:{label:"推荐维度"}},[e._v(e._s(e.getPanelGroupTypeLabel(e.panel.panelGroupType)))])]:e._e(),a("div",{staticClass:"base-tit"},[a("span",[e._v("内容配置")])]),a("el-form-item",{attrs:{label:"版块标题",prop:"pannelList.0.pannelTitle"}},[e._v("\n        "+e._s(e.panel.pannelList[0].pannelTitle)+"\n        ("+e._s(e.panel.showTitle?"显示":"不显示")+")\n      ")]),5===e.panel.panelGroupType?a("el-form-item",{attrs:{label:"版块布局"}},[e.panel.layoutId>0?a("span",{staticClass:"spform J-selected J_select J_layout-selected"},[e._v(e._s(e.panel.layoutId))]):e._e(),e._v("\n        ("+e._s(e.panel.lucenyFlag?"透明":"非透明")+")\n        "),a("div",{staticClass:"content-list"},e._l(e.panel.pannelList[0].contentList,function(t,i){return a("div",{key:i,staticClass:"content-list__item"},[a("el-select",{attrs:{disabled:"read"===e.mode,size:"mini"},model:{value:t.blockVideoType,callback:function(a){e.$set(t,"blockVideoType",a)},expression:"item.blockVideoType"}},e._l(e.blockVideoTypeOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1),a("span",{staticClass:"content-list__item-id"},[e._v(e._s(i+1))])],1)}),0)]):e._e(),9===e.panel.panelGroupType||10===e.panel.panelGroupType?a("el-form-item",{attrs:{label:"内容免/付费比例"}},[a("el-form-item",{staticClass:"amount-input",attrs:{label:"首屏付费内容数"}},[e._v(e._s(e.panel.pannelList[0].firstPageVipContentAmount))]),a("el-form-item",{staticClass:"amount-input",attrs:{label:"总付费内容数"}},[e._v(e._s(e.panel.pannelList[0].vipContentAmount))])],1):e._e()],2),a("div",{staticClass:"base-tit auditor-title"},[a("span",[e._v("审核者备注")])]),a("div",{staticClass:"up-addlist"},[a("table",[a("tbody",{staticClass:"auditor-wrapper"},e._l(e.auditHistories,function(t,i){return a("tr",{key:i},[a("td",[e._v(e._s(t.lastUpdateDate))]),a("td",[e._v(e._s(t.auditor))]),4==t.auditFlag?a("td",[e._v("审核通过")]):a("td",[e._v("审核不通过")]),a("td",[e._v(e._s(t.auditDesc))])])}),0)])])],1):e._e(),a("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:e.type,"not-contain-btn":e.notContainBtn,status:e.status,menuElId:e.menuElId},on:{"go-edit-Page":e.goEditPage,"delete-item":e.deleteItem,copy:e.CreatCopy}})],1)},co=[],uo={components:{AuditDetailButton:Gt,HistoryTool:In},props:["viewData","version"],data:function(){var e=[{value:0,label:"会员影片"},{value:1,label:"非会员影片"},{value:2,label:"单点影片"}],t={draft:2,waiting:3,accepted:4,reject:5,processing:7},a={0:"下架",2:"草稿",3:"待审核",4:"审核通过",5:"审核不通过",7:"审核通过未上线"};return{id:null,type:"pannel",status:null,menuElId:"privatePannelInfo",notContainBtn:["claim","unclaim"],mode:null,title:null,STATUS:t,STATUS_TEXT:a,auditHistories:[],panelGroupCategoryOptions:[],blockVideoTypeOptions:e,rules:{pannelName:[{required:!0,message:"请填写板块名称"}],pannelTitle:[{required:!0,message:"请填写标题"}],amount:[{validator:function(e,t,a){Number.isInteger(Number(t))&&Number(t)>0?a():a(new Error("请输入整数"))},trigger:"blur"}]},versionList:[],panel:{pannelGroupId:void 0,currentVersion:void 0,parentType:"normal",groupTitle:"",pannelName:void 0,pannelTitle:void 0,showTitle:!0,lucenyFlag:!1,pannelStatus:void 0,layoutId:void 0,pannelResource:"o_tencent",panelGroupCategory:67,panelGroupType:9,focusConfig:void 0,dictInfoList:"",content:"",priority:"1",pannelList:[{pannelId:void 0,pannelCategory:void 0,pannelName:void 0,pannelTitle:void 0,pannelResource:void 0,pannelType:5,pannelStatus:void 0,showTitle:void 0,flagIs4k:0,layoutId:void 0,panelIsFocus:void 0,focusShape:void 0,vipContentAmount:2,firstPageVipContentAmount:5,contentList:[{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0},{blockVideoType:0}]}]}}},computed:{panelGroupCategoryValue:function(){var e=this.panelGroupCategoryOptions,t=this.panel.panelGroupCategory;if(e){var a=e.find(function(e){return e.id===t});return a&&a.value}}},methods:{getCategoryLabel:function(e){var t=this.panelGroupCategoryOptions.find(function(t){return t.id===e});return t&&t.label},getPanelGroupTypeLabel:function(e){var t={9:"根据用户近期观影偏好推荐",10:"根据用户近期观看的影片推荐"};return t[e]},getResourceLabel:function(e){var t={o_iqiyi:"爱奇艺",o_tencent:"腾讯"};return t[e]},parseApiToData:function(e){var t=JSON.parse(JSON.stringify(e)),a=e.pannelList[0];if(t.pannelResource=a.pannelResource,t.showTitle=1==a.showTitle,t.pannelStatus=a.pannelStatus,t.layoutId=a.layoutId,a.contentList&&a.contentList.length>0){var i=a.contentList[0];t.lucenyFlag=1==i.lucenyFlag}return t},setPanel:function(e){var t=this.parseApiToData(e);Object.assign(this.panel,t)},handleSelectVersion:function(e){},getDictType:function(){var e=this;this.$service.getDictType().then(function(t){console.log(t),e.panelGroupCategoryOptions=t})},parasNumToStr:function(e){var t=["下架","上架","草稿","待审核","审核通过","审核不通过"],a=t[e];return a},getHandlePerson:function(e){var t=this;console.log(e),this.$service.getHandlePerson({id:e.pannelGroupId,version:e.currentVersion,type:"pannel"}).then(function(e){t.auditHistories=e})},goEditPage:function(){this.$emit("open-add-page",this.viewData.pannelGroupId)},deleteItem:function(){console.log(this.version),window.confirm("确定要删除")},CreatCopy:function(){this.$emit("create-copy",this.viewData.pannelGroupId)},privatePannelInfoView:function(){var e=this;this.$service.privatePannelInfoView({id:this.viewData.pannelGroupId}).then(function(t){e.setPanel(t),e.getHandlePerson(t)})},changeVersionAndStatus:function(e){var t=this;this.status=e.status,this.version=e.version,this.$service.privatePannelInfoView({id:this.viewData.pannelGroupId,version:this.version}).then(function(e){t.setPanel(e),t.getHandlePerson(e)})}},created:function(){console.log(this.viewData),this.title="预览",this.mode="read",this.privatePannelInfoView(),this.id=this.viewData.pannelGroupId,this.version=this.viewData.currentVersion,this.status=parseInt(this.viewData.pannelStatus),this.getDictType()}},po=uo,ho=(a("ec3a"),Object(K["a"])(po,so,co,!1,null,"6366b9d5",null)),mo=ho.exports,fo={components:{PrivatePannelInfoList:to,PrivatePannelInfoAdd:ro,PrivatePannelInfoView:mo},data:function(){return{model:"list",isCopy:!1,editId:null,viewData:null,version:void 0}},methods:{createCopy:function(e){this.editId=e,this.model="add",this.isCopy=!0},openAddPage:function(e){this.editId=e,this.model="add"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},openViewPage:function(e,t){this.model="view",this.viewData=e,this.version=t},goBack:function(){this.model="list"}}},bo=fo,go=Object(K["a"])(bo,Jn,Kn,!1,null,"1c3a7bfc",null),vo=go.exports,yo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("CommonOnclickInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("CommonOnclickInfoAdd",{attrs:{editId:e.editId},on:{openListPage:e.openListPage,"go-back":e.goBack}})],1)},wo=[],Io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"点击事件名称",prop:"onlickName"}},[a("el-input",{attrs:{placeholder:"点击事件名称"},model:{value:e.form.onlickName,callback:function(t){e.$set(e.form,"onlickName",t)},expression:"form.onlickName"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("AppParams",{attrs:{"prop-prefix":"onclick."},model:{value:e.form.onclick,callback:function(t){e.$set(e.form,"onclick",t)},expression:"form.onclick"}}),a("el-form-item",{attrs:{label:"异常处理(exception)",prop:"exception"}},[a("el-input",{attrs:{type:"textarea",placeholder:"异常处理(exception)"},model:{value:e.form.exception,callback:function(t){e.$set(e.form,"exception",t)},expression:"form.exception"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},To=[],So={components:{AppParams:W["AppParams"]},props:{editId:Number,default:null},data:function(){return{title:null,form:{onlickName:null,remark:null,onlickJson:null,onclick:{packagename:null,versioncode:"-1",dowhat:"startActivity",bywhat:"action",byvalue:null,params:[]},exception:null},formRules:{onlickName:[{required:!0,message:"请输入点击事件名称",trigger:"blur"}],packagename:[{required:!0,message:"请输入应用包名",trigger:"blur"}],byvalue:[{required:!0,message:"请输入启动参数",trigger:"blur"}]},paramsList:[{key:"",value:""}]}},methods:{paramsAddBtn:function(){this.paramsList.push({key:"",value:""})},paramsRedBtn:function(e){this.paramsList.splice(e,1)},submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a={};e.form.onclick.params.forEach(function(e){a[e.key]=e.value}),e.form.onclick.params=a,e.form=Object.assign({},e.form,e.form.onclick),e.form.onlickJson=JSON.stringify(e.form.onclick),delete e.form.onclick,e.$service.commonOnclickInfoSave({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("openListPage")})}})},getEditData:function(){var e=this;this.$service.getCommonOnclickInfoEdit({id:this.editId}).then(function(t){var a=JSON.parse(t.params||"{}");t.params=Object.keys(a).map(function(e){return{key:e,value:a[e]}}),t.onclick={packagename:t.packagename,versioncode:t.versioncode,dowhat:t.dowhat,bywhat:t.bywhat,byvalue:t.byvalue,params:t.params},delete t.packagename,delete t.versioncode,delete t.dowhat,delete t.bywhat,delete t.byvalue,delete t.params,e.form=Object.assign({},e.form,t)})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},Co=So,ko=(a("0002"),Object(K["a"])(Co,Io,To,!1,null,"79980419",null)),_o=ko.exports,Po=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.deleteData}},[e._v("删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},xo=[],Do={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},setDialogVisible:!1,selected:[],buttonList:[],table:{props:{},header:[{label:"ID",prop:"commonOnclickId"},{label:"点击事件名称",prop:"onlickName"},{label:"备注",prop:"remark"},{label:"应用包名",prop:"packagename"},{label:"应用版本号",prop:"versioncode"},{label:"启动动作",prop:"dowhat"},{label:"启动方式",prop:"bywhat"},{label:"启动参数",prop:"byvalue"},{label:"扩展参数",prop:"params"},{label:"异常处理",prop:"exception"},{label:"创建人",prop:"createrName"},{label:"创建时间",prop:"createdDate"},{label:"修改人",fixed:"modifierName"},{label:"修改时间",fixed:"lastUpdateDate"}],data:[],selected:[],selectionType:"multiple"}}},methods:{addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},deleteData:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.commonOnclickInfoDelete({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.commonOnclickId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.commonOnclickId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.commonOnclickId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getCommonOnclickInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getSysMenuInfo:function(){var e=this;return this.$service.getCommonOnclickInfoMenu().then(function(t){e.buttonList=t})}},created:function(){var e=ne.a.map({commonOnclickId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),onlickName:ne.a.o.string.other("form",{component:"Input",placeholder:"点击事件名"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData(),this.getSysMenuInfo()}},Fo=Do,$o=(a("b301"),Object(K["a"])(Fo,Po,xo,!1,null,"3f867ea8",null)),Ro=$o.exports,Lo={components:{CommonOnclickInfoAdd:_o,CommonOnclickInfoList:Ro},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},No=Lo,Oo=Object(K["a"])(No,yo,wo,!1,null,null,null),Ao=Oo.exports,Eo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("GlobalCornerIconList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.model,expression:"model === 'list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-view-page":e.openViewPage}}),"add"===e.model?a("GlobalCornerIconAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e(),"view"===e.model?a("GlobalCornerIconView",{attrs:{viewData:e.viewData},on:{"open-list-page":e.openListPage,"open-add-page":e.openAddPage,"go-back":e.goBack}}):e._e()],1)},Vo=[],Mo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"cornerIcon"},on:{add:e.addData,edit:e.editData,delete:e.deleteData}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[a("span",{staticClass:"pics"},[a("img",{staticStyle:{width:"200px"},attrs:{src:e.reviewPicUrl,alt:"图片"}})])]),a("el-dialog",{attrs:{title:"审核",visible:e.dialogPLVisible,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.dialogPLVisible=t}}},[a("GlobalIconAudit",{ref:"auditForm",on:{auditForm:e.submitForm,cancle:e.cancle}})],1),a("el-dialog",{attrs:{title:"调整优先级",visible:e.dialogLevelVisible},on:{"update:visible":function(t){e.dialogLevelVisible=t}}},[a("GlobelIconLevel"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogLevelVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogLevelVisible=!1}}},[e._v("确 定")])],1)],1)],1)},Bo=[],Uo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"auditForm",staticClass:"demo-ruleForm",attrs:{model:e.auditForm,"status-icon":"",rules:e.auditFormRule,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[a("el-radio",{attrs:{label:"4"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),a("el-radio",{attrs:{label:"5"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),a("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入意见说明"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1),a("el-form-item",[a("el-button",{on:{click:function(t){return e.cancle("auditForm")}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("auditForm")}}},[e._v("确定")])],1)],1)],1)},jo=[],Ho={data:function(){return{auditForm:{auditFlag:"4",auditDesc:""},auditFormRule:{auditDesc:[{required:!0,message:"请输入审核意见",trigger:"blur"}]}}},methods:{onSubmit:function(e){var t=this;this.$refs.auditForm.validate(function(e){if(e){var a=t.auditForm;t.$emit("auditForm",a)}})},cancle:function(e){this.$refs.auditForm.resetFields();var t=!1;this.$emit("cancle",t)}},created:function(){}},qo=Ho,Wo=Object(K["a"])(qo,Uo,jo,!1,null,null,null),Go=Wo.exports,zo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("el-table",{staticStyle:{"margin-top":"20px","max-width":"80%"},attrs:{data:e.tab.pannelList,border:""}},[a("el-table-column",{attrs:{prop:"cornerIconId",label:"板块ID"}}),a("el-table-column",{attrs:{prop:"cornerIconName",label:"板块名称"}}),a("el-table-column",{attrs:{label:"图片",prop:""},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.imgUrl,width:"70px"}})]}}])}),a("el-table-column",{attrs:{prop:"",label:"优先级",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("OrderInput",{key:Math.random().toString(),attrs:{value:t.$index+1},on:{input:function(a){return e.handleChangePannelOrderStart(t.$index,a)},blur:function(a){return e.handleChangePannelOrderEnd(t.$index)}}})]}}])})],1)],1)],1)},Jo=[],Ko=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-input",{on:{blur:function(t){return e.$emit("blur")}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}})},Xo=[],Yo=void 0,Zo={data:function(){return{inputValue:void 0}},props:["value"],watch:{inputValue:"handleInputValue",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){Yo.inputValue=value})},methods:{handleInputValue:function(e){this.$emit("input",e)}},created:function(){this.inputValue=this.value}},Qo=Zo,el=Object(K["a"])(Qo,Ko,Xo,!1,null,null,null),tl=el.exports,al={components:{ActionList:W["ActionList"],Table:W["Table"],OrderInput:tl,ContentWrapper:W["ContentWrapper"]},data:function(){return{tab:{cornerIconId:void 0,cornerIconName:void 0,imgUrl:void 0,pannelList:[]},globalTypes:{test1:"1010",test2:"1011","付费属性":"101","排行榜":"103","教育角标":"105","策划类":"104","素材播出属性":"102"},attributeTypes:{},dialogPLVisible:!1,dialogLevelVisible:!1,typePositions:{"左上":0,"右上":1,"左下":3,"右下":2},reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[]}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getGlobalMgrList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.tab.pannelList=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.idPrefix="10",e.page=t.currentPage,e.rows=t.pageSize),e},handleChangePannelOrderStart:function(e,t){if(""!==t){t=parseInt(t);var a=this.tab.pannelList;isNaN(t)||t>a.length||t<=0?(this.currentPannelIndex=void 0,this.$message({type:"error",message:"序号必须大于0且不能大于总数量"}),this.tab.pannelList=a.slice()):(this.currentPannelIndex=e,this.currentPannelOrder=t)}},handleChangePannelOrderEnd:function(e){if(this.currentPannelIndex===e){var t=this.currentPannelOrder-1,a=e,i=this.tab.pannelList,n=i[a];i.splice(a,1),this.tab.pannelList=[].concat(i.slice(0,t),n,i.slice(t)),this.currentPannelIndex=void 0,this.currentPannelOrder=void 0}},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e.cornerIconId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.cornerIconId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.cornerIconId)>-1&&e.push(i),e},[])},getCornerTypes:function(){var e=this;return this.$service.getCornerTypes().then(function(t){t.forEach(function(t){e.globalTypes[t.typeName]=t.typeId}),console.log(e.globalTypes)})},getIconAttributes:function(){var e=this;return this.$service.getIconAttributes().then(function(t){t.attributes.forEach(function(t){e.attributeTypes[t.attributeName]=t.attributeCode}),console.log(e.attributeTypes)})}},created:function(){var e=this,t=ne.a.map({typeId:ne.a.o.enum(this.globalTypes).other("form",{component:"Select",placeholder:"角标分类",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.getCornerTypes().then(function(){e.getIconAttributes().then(function(){e.filterSchema=t})})}},il=al,nl=(a("f34c"),Object(K["a"])(il,zo,Jo,!1,null,"ce468642",null)),ol=nl.exports,ll={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],GlobalIconAudit:Go,GlobelIconLevel:ol,ButtonGroupForListPage:ue},data:function(){var e=this;return{checkAll:!1,globalTypes:{test1:"1010",test2:"1011","付费属性":"101","排行榜":"103","教育角标":"105","策划类":"104","素材播出属性":"102"},attributeTypes:{},dialogPLVisible:!1,dialogLevelVisible:!1,cornerStatuses:{"待审核":3,"审核通过":4,"审核不通过":5},typePositions:{"左上":0,"右上":1,"左下":3,"右下":2},picDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"cornerIconId"},{label:"角标名称",prop:"cornerIconName",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.cornerIconName)}},{label:"图片",prop:"imgUrl",render:function(t,a){var i=a.row;return t("img",{attrs:{src:i.imgUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(i)}}})}},{label:"审核状态",prop:"cornerStatus",render:function(e,t){var a=t.row;switch(a.cornerStatus){case 0:return"下架";case 1:return"上架";case 2:return"草稿";case 3:return"待审核";case 4:return"审核通过";case 5:return"审核不通过"}}}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.getGlobalMgrList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.idPrefix="10",e.page=t.currentPage,e.rows=t.pageSize),e},addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},deleteData:function(){var e=this;if(0==this.selected.length)this.$message("请至少选择一条数据");else if(window.confirm("确定要删除吗"))this.$service.globalCornerIconRemove({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()})},batchHandle:function(){var e=this;if(0==e.selected.length)e.$message("最少选择一条数据");else{console.log(e.table.data);for(var t=e.selected,a=0;a<t.length;a++)for(var i=0;i<e.table.data.length;i++)t[a]==e.table.data[i].cornerIconId&&(3==e.table.data[i].cornerStatus||2==e.table.data[i].cornerStatuses?this.dialogPLVisible=!0:e.$message("["+t[a]+"]不是待审核状态，不允许审核"))}},submitForm:function(e){var t=this,a=e;this.$service.batchAudit({idStr:this.selected.join(","),auditFlag:a.auditFlag,auditDesc:a.auditDesc},"审核成功").then(function(e){t.fetchData(),t.$refs.auditForm.cancle(),t.dialogPLVisible=!1})},cancle:function(e){this.dialogPLVisible=e},handleDialogClose:function(){this.$refs.auditForm.cancle()},changePriority:function(){this.dialogLevelVisible=!0},openReview:function(e){console.log(e),this.$emit("open-view-page",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e.cornerIconId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.cornerIconId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.cornerIconId)>-1&&e.push(i),e},[])},getCornerTypes:function(){var e=this;return this.$service.getCornerTypes().then(function(t){t.forEach(function(t){e.globalTypes[t.typeName]=t.typeId}),console.log(e.globalTypes)})},getIconAttributes:function(){var e=this;return this.$service.getIconAttributes().then(function(t){t.attributes.forEach(function(t){e.attributeTypes[t.attributeName]=t.attributeCode}),console.log(e.attributeTypes)})},reviewPic:function(e){this.reviewPicUrl=e.imgUrl,this.picDialogVisible=!0}},created:function(){var e=this,t=ne.a.map({cornerIconName:ne.a.o.string.other("form",{component:"Input",placeholder:"角标名称  "}),cornerIconId:ne.a.o.string.other("form",{component:"Input",placeholder:"角标ID"}),typeId:ne.a.o.enum(this.globalTypes).other("form",{component:"Select",placeholder:"角标分类"}),typePosition:ne.a.o.enum(this.typePositions).other("form",{component:"Select",placeholder:"角标位置"}),attributeCode:ne.a.o.enum(this.attributeTypes).other("form",{component:"Select",placeholder:"角标类别"}),cornerStatus:ne.a.o.enum(this.cornerStatuses).other("form",{component:"Select",placeholder:"审核状态"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.fetchData(),this.getCornerTypes().then(function(){e.getIconAttributes().then(function(){e.filterSchema=t})})}},rl=ll,sl=(a("8f01"),Object(K["a"])(rl,Mo,Bo,!1,null,"5556d600",null)),cl=sl.exports,ul=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{staticClass:"global-picture"},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{"label-width":"120px",model:this}},[a("div",{staticClass:"global-picture__label"},[e._v("角标图片")]),a("Upload",{ref:"upload",staticClass:"global-picture__uploader",attrs:{multiple:!0},on:{upload:e.handleUpload}},[a("template",{slot:"preview"},[e._l(e.fileInfo,function(t,i){return a("div",{key:i,staticClass:"upload-pic-list__item-wrapper"},[a("div",{staticClass:"upload-pic-list__item"},["error"===t.upload.status?a("div",{staticClass:"upload-pic-list__error"},[e._v("上传失败: "+e._s(t.upload.message))]):e._e(),"uploading"===t.upload.status?a("div",{staticClass:"upload-pic-list__progress"},[a("el-progress",{attrs:{width:180,type:"circle",percentage:t.upload.percentage}})],1):a("img",{attrs:{src:t.upload.dataUrl}})]),a("div",{staticClass:"pic-info"},[a("el-form-item",{attrs:{prop:"fileInfo."+i+".cornerIconName",rules:e.rules.title,label:"角标标题"}},[a("el-input",{model:{value:t.cornerIconName,callback:function(a){e.$set(t,"cornerIconName",a)},expression:"file.cornerIconName"}})],1),a("el-form-item",{attrs:{prop:"fileInfo."+i+".globalIconTypeId",rules:e.rules.type,label:"角标分类"}},[a("el-select",{model:{value:e.fileInfo[i].globalIconTypeId,callback:function(t){e.$set(e.fileInfo[i],"globalIconTypeId",t)},expression:"fileInfo[index].globalIconTypeId"}},e._l(e.attributes,function(e,t){return a("el-option",{key:t,attrs:{value:e.typeId,label:e.typeName}})}),1)],1),a("el-form-item",{attrs:{prop:"fileInfo."+i+".attributeCode",rules:e.rules.code,label:"角标类别"}},[a("el-radio-group",{model:{value:t.attributeCode,callback:function(a){e.$set(t,"attributeCode",a)},expression:"file.attributeCode"}},[a("el-radio",{attrs:{label:"0"}},[e._v("其他")]),a("el-radio",{attrs:{label:"1"}},[e._v("VIP")])],1)],1)],1),"uploading"!==t.status?a("i",{staticClass:"upload-pic-list__remove el-icon el-icon-close",attrs:{title:"移除"},on:{click:function(a){return e.handleRemoveFile(t,i)}}}):e._e()])}),a("el-button",{staticClass:"upload-pic-list__add",attrs:{disabled:"edit"===e.mode&&e.fileInfo.length>=1,type:"primary",plain:""},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("点击选择图片")])],2)],2)],1),a("div",{staticClass:"global_icon_actions"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提交审核")])],1)],1)])},dl=[],pl={components:{Upload:W["Upload"]},data:function(){return{mode:"create",fileInfo:[],attributes:[],attributesIndexed:[],rules:{title:[{required:!0,message:"请填写素材标题"}],type:[{required:!0,message:"请选择角标类别"}],code:[{required:!0,message:"请选择角标分类"}]}}},props:["editId"],methods:{handleUpload:function(e,t){this.$refs.upload.getImageInfo(t.dataUrl).then(function(a){var i={upload:t,globalIconTypeId:void 0,cornerIconName:void 0,attributeCode:void 0,imgUrl:void 0,pictureType:void 0};this.fileInfo.push(i),t.status="uploading",this.$service.uploadImage({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){if(0==e.code){var a=e.data[0];i.cornerIconName=a.originFileName,i.pictureType=a.fileType,i.imgUrl=a.url,t.status="success"}else t.status="error",t.message=e.msg}).catch(function(){t.status="error",t.message="网络错误"})}.bind(this))},handleRemoveFile:function(e,t){this.$refs.upload.handleRemove(e.upload),this.fileInfo=this.fileInfo.filter(function(e,a){return a!==t})},handleSubmit:function(){var e=this;this.validateFormData(function(t){if(!t){var a=e.getFormData();console.log(a),e.$service.globalCornerIconSave(a,"保存成功").then(function(){e.$emit("open-list-page")})}})},getFormData:function(){var e=this,t=(this.attributesIndexed,this.getUploadedFiles().map(function(t){return{cornerIconId:e.editId,cornerIconName:t.cornerIconName,imgUrl:t.imgUrl,attributeCode:t.attributeCode,typeRls:{typeId:String(t.globalIconTypeId)}}})),a={jsonStr:JSON.stringify(t)};return a},globalCornerIconEdit:function(){this.$service.globalCornerIconEdit({id:this.editId}).then(this.setFormData)},setFormData:function(e){e=JSON.parse(JSON.stringify(e)),e.globalIconTypeId=e.cornerIconType.typeId,e.upload={status:"success",dataUrl:e.imgUrl},console.log(e.attributeCode),this.fileInfo.push(e)},validateFormData:function(e){this.$refs.form.validate(function(t){if(t){var a=this.getUploadedFiles();0===a.length?(this.$message({type:"error",message:"最少要上传一个角标素材，才能保存"}),e(!0)):e()}else this.$message({type:"error",message:"请把表单填写完整"}),e(!0)}.bind(this))},getUploadedFiles:function(){return this.fileInfo.filter(function(e){return void 0!==e.imgUrl})},getCornerTypes:function(){var e=this;this.$service.getCornerTypes().then(function(t){e.attributes=t||[],e.attributesIndexed=e.attributes.reduce(function(e,t){return e[t.typeName]=t,e},{})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.globalCornerIconEdit(),this.title="编辑"):this.title="新增",this.getCornerTypes()}},hl=pl,ml=(a("a272"),Object(K["a"])(hl,ul,dl,!1,null,null,null)),fl=ml.exports,bl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{staticClass:"global-picture"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("div",{staticClass:"global-picture__label"},[e._v("角标图片")]),a("el-form-item",{attrs:{label:"角标标题",prop:"cornerIconName"}},[a("div",[e._v(e._s(e.form.cornerIconName))])]),a("el-form-item",{attrs:{label:"角标图片",prop:"imgUrl"}},[a("div",[a("img",{staticStyle:{width:"200px"},attrs:{src:e.form.imgUrl}})])]),a("el-form-item",{attrs:{label:"角标类别",prop:"attributeName"}},[a("div",[e._v(e._s(e.form.attributeName))])]),a("el-form-item",{attrs:{label:"审核状态",prop:"cornerStatus"}},[a("div",[e._v(e._s(e.form.cornerStatus))])])],1),a("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:e.type,"not-contain-btn":e.notContainBtn,status:e.status,hasHistory:e.hasHistory,menuElId:e.menuElId},on:{"go-edit-Page":e.goEditPage,"delete-item":e.deleteItem}})],1)])},gl=[],vl={components:{Upload:W["Upload"],GlobalIconAudit:Go,AuditDetailButton:Gt},data:function(){return{form:{},dialogPLVisible:!1,hasHistory:!1,id:null,version:"",type:"icon",status:null,menuElId:"globalCornerIcon",notContainBtn:["claim","unclaim","copy","unaudit"]}},props:{viewData:Object},methods:{getDetailInfo:function(){var e=this;this.$service.getDetailInfo({id:this.viewData.cornerIconId}).then(function(t){console.log(t),e.form=t,e.form.cornerStatus=e.paraNumToNam(e.form.cornerStatus)})},paraNumToNam:function(e){var t=["下架","上架","草稿","待审核","审核通过","审核不通过"],a=t[e];return a},goEditPage:function(){this.$emit("open-add-page",this.viewData.cornerIconId)},deleteItem:function(){var e=this;window.confirm("确定要删除吗")&&this.$service.globalCornerIconRemove({id:this.viewData.cornerIconId},"删除成功").then(function(t){e.$emit("open-list-page")})},handleSubmit:function(){this.dialogPLVisible=!0},cancelSubmit:function(){var e=this;window.confirm("确定撤销审核吗")&&this.$service.revokedAudit({resourceId:this.viewId,resourceType:"icon"},"撤销审核成功").then(function(t){e.$emit("open-list-page")})},submitForm:function(e){var t=this,a=e.auditFlag,i=e.auditDesc;this.$service.auditTask({resourceId:this.viewId,resourceType:"icon",auditFlag:a,auditDesc:i}).then(function(e){t.$emit("open-list-page"),t.$refs.auditForm.cancle(),t.dialogPLVisible=!1})},cancle:function(e){this.dialogPLVisible=e},handleDialogClose:function(){this.$refs.auditForm.cancle()}},created:function(){this.title="预览",this.getDetailInfo(),this.id=this.viewData.cornerIconId,this.status=this.viewData.cornerStatus}},yl=vl,wl=(a("e945"),Object(K["a"])(yl,bl,gl,!1,null,"e30bf170",null)),Il=wl.exports,Tl={components:{GlobalCornerIconList:cl,GlobalCornerIconAdd:fl,GlobalCornerIconView:Il},data:function(){return{model:"list",editId:null,viewData:{}}},methods:{openAddPage:function(e){this.editId=e,this.model="add"},openListPage:function(){this.model="list",this.$refs.list.fetchData()},openViewPage:function(e){this.model="view",this.viewData=e},goBack:function(){this.model="list"}}},Sl=Tl,Cl=Object(K["a"])(Sl,Eo,Vo,!1,null,null,null),kl=Cl.exports,_l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("GlobalCornerIconTypeList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("GlobalCornerIconTypeAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Pl=[],xl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"cornerIconType"},on:{add:e.addItem,edit:e.editData,delete:e.batchDel}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[a("span",{staticClass:"pics"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.picDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.picDialogVisible=!1}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"预览图片",visible:e.auditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.auditDialogVisible=t}}},[a("span",[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.auditFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[a("el-radio",{attrs:{label:"4"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("通过")]),a("el-radio",{attrs:{label:"5"},model:{value:e.addForm.auditFlag,callback:function(t){e.$set(e.addForm,"auditFlag",t)},expression:"addForm.auditFlag"}},[e._v("打回")])],1),a("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.addForm.auditDesc,callback:function(t){e.$set(e.addForm,"auditDesc",t)},expression:"addForm.auditDesc"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.auditDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitAudit}},[e._v("确 定")])],1)])],1)},Dl=[],Fl={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){return{materialTypes:{},typePosition:{"左上":0,"右上":1,"右下":2,"左下":3},picDialogVisible:!1,auditDialogVisible:!1,addForm:{idStr:null,auditFlag:"4",auditDesc:""},auditFormRules:{auditDesc:[{required:!0,message:"请输入意见说明",trigger:"blur"}],auditFlag:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"typeId",width:"70"},{label:"分类名称",width:"120",prop:"typeName",sortable:!0},{label:"角标位置",prop:"typePosition",width:"110",sortable:!0},{label:"优先级(越小越靠前)",prop:"typePriority",width:"110",sortable:!0},{label:"修改人",prop:"modifierUser",width:"90",render:function(e,t){var a=t.row;return a.userName}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{submitAudit:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&(e.auditForm.idStr=e.selected.join(","),e.$service.materialBatchAudit(e.auditForm,"审批成功").then(function(t){e.fetchData(),e.auditDialogVisible=!1}))})},addItem:function(){this.$emit("open-add-page",null)},handleChange:function(e,t,a){for(var i=[],n=0;n<e.length;n++)i.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(i)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.globalCornerIconTypeBatchDel({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.typeId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.typeId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.typeId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getGlobalCornerIconTypePageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({typeId:ne.a.o.string.other("form",{component:"Input",placeholder:"角标分类ID"}),typeName:ne.a.o.string.other("form",{component:"Input",placeholder:"角标名称"}),pictureCategory:ne.a.o.enum(this.typePosition).other("form",{component:"Select",placeholder:"角标位置"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},$l=Fl,Rl=(a("54d3"),Object(K["a"])($l,xl,Dl,!1,null,"50d85256",null)),Ll=Rl.exports,Nl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角标名称",prop:"typeName"}},[a("el-input",{attrs:{placeholder:"角标名称"},model:{value:e.form.typeName,callback:function(t){e.$set(e.form,"typeName",t)},expression:"form.typeName"}})],1),a("el-form-item",{attrs:{label:"角标位置",prop:"typePosition"}},[a("el-select",{attrs:{placeholder:"角标位置"},model:{value:e.form.typePosition,callback:function(t){e.$set(e.form,"typePosition",t)},expression:"form.typePosition"}},e._l(e.typePosition,function(e){return a("el-option",{key:e.name+"",attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"优先级",prop:"typePriority"}},[a("el-input-number",{attrs:{min:1,label:"优先级"},model:{value:e.form.typePriority,callback:function(t){e.$set(e.form,"typePriority",t)},expression:"form.typePriority"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},Ol=[],Al={props:{editId:Number,default:null},data:function(){return{title:null,typePosition:[{name:"左上",id:0},{name:"右上",id:1},{name:"右下",id:2},{name:"左下",id:3}],form:{typeName:null,typePosition:null,typePriority:null},formRules:{typeName:[{required:!0,message:"请输入角标名称",trigger:"blur"}],typePosition:[{required:!0,message:"请输入角标位置",trigger:"blur"}],typePriority:[{required:!0,message:"请输入角标优先级",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.globalCornerIconTypeSave({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.globalCornerIconTypeDetail({id:this.editId}).then(function(t){Object.keys(e.form).forEach(function(a){e.form[a]=t[a]})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.typeId=this.editId,this.getEditData()):this.title="新增"}},El=Al,Vl=Object(K["a"])(El,Nl,Ol,!1,null,null,null),Ml=Vl.exports,Bl={components:{GlobalCornerIconTypeAdd:Ml,GlobalCornerIconTypeList:Ll},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Ul=Bl,jl=Object(K["a"])(Ul,_l,Pl,!1,null,null,null),Hl=jl.exports,ql=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("GlobalPictureList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("GlobalPictureUpsert",{attrs:{"edit-id":e.editId},on:{"show-list":e.openListPage,"go-back":e.goBack}})],1)},Wl=[],Gl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",[a("div",{staticClass:"global-picture"},[a("div",{staticClass:"global-picture__actions"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n                保存\n            ")]),a("el-button",{on:{click:e.handleCancel}},[e._v("\n                关闭\n            ")])],1),a("el-form",{ref:"form",attrs:{"label-width":"120px",model:this}},[a("div",{staticClass:"global-picture__label"},[e._v("\n                素材图片\n            ")]),a("Upload",{ref:"upload",staticClass:"global-picture__uploader",attrs:{multiple:!0},on:{upload:e.handleUpload}},[a("template",{slot:"preview"},[e._l(e.fileInfo,function(t,i){return a("div",{key:i,staticClass:"upload-pic-list__item-wrapper"},[a("div",{staticClass:"upload-pic-list__item"},["error"===t.upload.status?a("div",{staticClass:"upload-pic-list__error"},[e._v("\n                                上传失败: "+e._s(t.upload.message)+"\n                            ")]):e._e(),"uploading"===t.upload.status?a("div",{staticClass:"upload-pic-list__progress"},[a("el-progress",{attrs:{width:180,type:"circle",percentage:t.upload.percentage}})],1):a("img",{attrs:{src:t.upload.dataUrl}})]),a("div",{staticClass:"pic-info"},[a("el-form-item",{attrs:{prop:"fileInfo."+i+".pictureName",rules:e.rules.title,label:"素材标题"}},[a("el-input",{model:{value:t.pictureName,callback:function(a){e.$set(t,"pictureName",a)},expression:"file.pictureName"}})],1),a("el-form-item",{attrs:{label:"素材分辨率"}},[e._v("\n                                "+e._s(t.pictureResolution)+"\n                            ")]),a("el-form-item",{attrs:{prop:"fileInfo."+i+".materialTypeDictEnName",rules:e.rules.type,label:"素材类型"}},[a("el-select",{model:{value:e.fileInfo[i].materialTypeDictEnName,callback:function(t){e.$set(e.fileInfo[i],"materialTypeDictEnName",t)},expression:"fileInfo[index].materialTypeDictEnName"}},e._l(e.picTypeOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1)],1),"uploading"!==t.status?a("i",{staticClass:"upload-pic-list__remove el-icon el-icon-close",attrs:{title:"移除"},on:{click:function(a){return e.handleRemoveFile(t,i)}}}):e._e()])}),a("el-button",{staticClass:"upload-pic-list__add",attrs:{disabled:"edit"===e.mode&&e.fileInfo.length>=1,type:"primary"},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("\n                        点击选择图片\n                    ")]),a("el-button",{on:{click:function(t){e.showPicTypeSelector=!0}}},[e._v("\n                        批量设置类型\n                    ")])],2)],2)],1),a("el-dialog",{staticClass:"global-pic-type-selector",attrs:{title:"选择素材类型",size:"tiny",visible:e.showPicTypeSelector},on:{"update:visible":function(t){e.showPicTypeSelector=t}}},e._l(e.picTypeOptions,function(t,i){return a("el-tag",{key:i,nativeOn:{click:function(a){return e.handleBatchSetPicType(t)}}},[e._v("\n                "+e._s(t.label)+"\n            ")])}),1)],1)])},zl=[],Jl={components:{Upload:W["Upload"]},data:function(){return{mode:"create",showPicTypeSelector:!1,pictureId:void 0,fileInfo:[],picTypeOptions:[],picTypeOptionsIndexed:[],rules:{title:[{required:!0,message:"请填写素材标题"}],type:[{required:!0,message:"请选择素材类型"}]}}},props:["editId"],methods:{handleUpload:function(e,t){this.$refs.upload.getImageInfo(t.dataUrl).then(function(a){var i={upload:t,materialTypeDictEnName:void 0,pictureId:void 0,pictureName:void 0,pictureResolution:a.width+"*"+a.height,pictureStatus:void 0,pictureType:void 0,pictureUrl:void 0};this.fileInfo.push(i),t.status="uploading",this.$service.uploadImage({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){if(0==e.code){var a=e.data[0];i.pictureName=a.originFileName,i.pictureType=a.fileType,i.pictureUrl=a.url,t.status="success"}else t.status="error",t.message=e.msg}).catch(function(){t.status="error",t.message="网络错误"})}.bind(this))},handleRemoveFile:function(e,t){this.$refs.upload.handleRemove(e.upload),this.fileInfo=this.fileInfo.filter(function(e,a){return a!==t})},handleSelectPicTypeStart:function(){this.showPicTypeSelector=!0},handleBatchSetPicType:function(e){this.fileInfo.forEach(function(t){t.materialTypeDictEnName=e.value}),this.showPicTypeSelector=!1},getFormData:function(){var e=this,t=this.pictureId,a=this.picTypeOptionsIndexed,i=this.getUploadedFiles().map(function(i){return{pictureId:t,pictureType:i.pictureType,pictureResolution:i.pictureResolution,pictureUrl:i.pictureUrl,pictureStatus:i.pictureStatus,pictureName:i.pictureName,materialTypes:e.parseMaterialType(a[i.materialTypeDictEnName])}}),n={jsonStr:JSON.stringify(i)};return n},setFormData:function(e){e=JSON.parse(JSON.stringify(e));var t=e.materialTypes;e.materialTypeDictEnName=t[0].dictEnName,e.upload={status:"success",dataUrl:e.pictureUrl},this.pictureId=e.pictureId,this.fileInfo.push(e)},parseMaterialType:function(e){return{dictId:e.id,dictEnName:e.value,dictCnName:e.label}},validateFormData:function(e){this.$refs.form.validate(function(t){if(t){var a=this.getUploadedFiles();0===a.length?(this.$message({type:"error",message:"最少要上传一个素材，才能保存"}),e(!0)):e()}else this.$message({type:"error",message:"请把表单填写完整"}),e(!0)}.bind(this))},getUploadedFiles:function(){return this.fileInfo.filter(function(e){return void 0!==e.pictureUrl})},handleSubmit:function(){var e=this;this.validateFormData(function(t){if(!t){var a=e.getFormData();e.$service.globalPictureUpsert(a,"保存成功").then(function(){e.$emit("show-list")})}})},handleCancel:function(){this.$emit("go-back")},getMaterialTypes:function(){var e=this;this.$service.getMaterialTypes().then(function(t){e.picTypeOptions=t||[],e.picTypeOptionsIndexed=e.picTypeOptions.reduce(function(e,t){return e[t.value]=t,e},{})})}},created:function(){this.editId&&this.$service.globalPictureGet({id:this.editId}).then(this.setFormData),this.getMaterialTypes()}},Kl=Jl,Xl=(a("6b22"),Object(K["a"])(Kl,Gl,zl,!1,null,null,null)),Yl=Xl.exports,Zl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addItem}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchAudit}},[e._v("批量审核")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{title:"预览图片",visible:e.picDialogVisible,width:"30%"},on:{"update:visible":function(t){e.picDialogVisible=t}}},[a("span",{staticClass:"pics"},[a("img",{attrs:{src:e.reviewPicUrl,alt:"图片","max-width":"500"}})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.picDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.picDialogVisible=!1}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"预览图片",visible:e.auditDialogVisible,width:"30%"},on:{"update:visible":function(t){e.auditDialogVisible=t}}},[a("span",[a("el-form",{ref:"auditForm",attrs:{model:e.auditForm,rules:e.auditFormRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[a("el-radio",{attrs:{label:"4"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),a("el-radio",{attrs:{label:"5"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),a("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.auditDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitAudit}},[e._v("确 定")])],1)])],1)},Ql=[],er={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{materialTypes:{},pictureStatus:{"可用":1,"待审核":2,"审核不通过":3,"不可用":0},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,auditForm:{idStr:null,auditFlag:"4",auditDesc:""},auditFormRules:{auditDesc:[{required:!0,message:"请输入意见说明",trigger:"blur"}],auditFlag:[{required:!0,message:"请输入审核意见",trigger:"blur"}]},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pictureId",width:"70"},{label:"ID",prop:"pictureUrl",width:"70",render:function(t,a){var i=a.row;return t("img",{attrs:{src:i.pictureUrl,width:"50px",height:"50px",class:"imgs"},on:{click:function(){e.reviewPic(i)}}})}},{label:"素材名称",width:"120",prop:"pictureName",sortable:!0},{label:"分辨率",prop:"pictureResolution",width:"110",sortable:!0},{label:"状态",prop:"pictureStatus",width:"90",render:function(e,t){var a=t.row;switch(a.pictureStatus){case 0:return"不可用";case 1:return"可用";case 2:return"待审核";case 3:return"审核不通过"}}},{label:"素材类型",prop:"materialTypes",width:"70",render:function(e,t){var a=t.row;return a.materialTypes.length>0?a.materialTypes[0].dictCnName:""}},{label:"创建时间",prop:"createdDate",sortable:!0},{label:"修改时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{submitAudit:function(){var e=this;this.$refs.auditForm.validate(function(t){t&&(e.auditForm.idStr=e.selected.join(","),e.$service.materialBatchAudit(e.auditForm,"审批成功").then(function(t){e.fetchData(),e.auditDialogVisible=!1}))})},addItem:function(){this.$emit("open-add-page")},handleRead:function(e){e.row},handleChange:function(e,t,a){for(var i=[],n=0;n<e.length;n++)i.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(i)},batchAudit:function(){0!==this.selected.length?this.auditDialogVisible=!0:this.$message("请选择再审批")},reviewPic:function(e){this.reviewPicUrl=e.pictureUrl,this.picDialogVisible=!0},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.materialBatchDelete({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.pictureId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pictureId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pictureId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getMaterialPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})}},created:function(){var e=this,t=ne.a.map({pictureId:ne.a.o.string.other("form",{component:"Input",placeholder:"素材ID"}),pictureName:ne.a.o.string.other("form",{component:"Input",placeholder:"素材名称"}),pictureCategory:ne.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别"}),pictureStatus:ne.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t}),this.fetchData()}},tr=er,ar=(a("7d93"),Object(K["a"])(tr,Zl,Ql,!1,null,"9802f6fc",null)),ir=ar.exports,nr={components:{GlobalPictureUpsert:Yl,GlobalPictureList:ir},data:function(){return{isShowList:!0,editId:null}},methods:{goBack:function(){this.isShowList=!0},openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()}}},or=nr,lr=Object(K["a"])(or,ql,Wl,!1,null,null,null),rr=lr.exports,sr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("LayoutInfoList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-review-page":e.openReviewPage}}),"add"===e.mode?a("LayoutInfoAdd",{attrs:{editData:e.editData,generatorLayoutData:e.generatorLayoutData},on:{"open-list-page":e.openListPage,"go-back":e.goBack,"open-generator-page":e.openGeneratorPage}}):e._e(),"generator"===e.mode?a("LayoutInfoGenerator",{on:{"go-back":e.goBack,"generator-layout":e.generatorLayout}}):e._e(),"review"===e.mode?a("LayoutInfoReview",{attrs:{reviewData:e.reviewData},on:{"open-list-page":e.openListPage,"go-edit-Page":e.goEditPage,"go-back":e.goBack}}):e._e()],1)},cr=[],ur=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back","list")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"布局名称(中文)",prop:"layoutName"}},[a("el-input",{attrs:{placeholder:"布局名称"},model:{value:e.form.layoutName,callback:function(t){e.$set(e.form,"layoutName",t)},expression:"form.layoutName"}})],1),a("el-form-item",{attrs:{label:"布局类别",prop:"layoutType"}},[a("el-select",{attrs:{placeholder:"布局类别"},model:{value:e.form.layoutType,callback:function(t){e.$set(e.form,"layoutType",t)},expression:"form.layoutType"}},e._l(e.layoutType,function(e){return a("el-option",{key:e.name+"",attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"上传文件"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("上传布局文件")]),a("Upload",{ref:"upload",staticClass:"global-picture__uploader",attrs:{multiple:!0},on:{upload:e.handleUpload}},[a("template",{slot:"preview"},e._l(e.fileInfo,function(t,i){return a("div",{key:i,staticClass:"upload-pic-list__item-wrapper"},[a("div",{staticClass:"upload-pic-list__item"},["error"===t.upload.status?a("div",{staticClass:"upload-pic-list__error"},[e._v("上传失败: "+e._s(t.upload.message))]):e._e(),"uploading"===t.upload.status?a("div",{staticClass:"upload-pic-list__progress"},[a("el-progress",{attrs:{width:180,type:"circle",percentage:t.upload.percentage}})],1):a("img",{attrs:{src:t.upload.dataUrl}})])])}),0)],2)],1),a("el-form-item",{attrs:{label:"布局"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.productLayout}},[e._v("生存布局")])],1),a("el-form-item",[a("LayoutBloack",{staticClass:"layoutBloack",attrs:{content:e.content}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("提交审核")])],1)],1)],1)],1)],1)},dr=[],pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pannel-wrap",style:{height:e.maxY*e.ratio+"px",width:e.contentWidth+"px"},attrs:{id:"layout"}},e._l(e.content,function(t,i){return a("div",{key:i},[t.resize?a("div",{style:{top:t.resize.y*e.ratio+"px",left:t.resize.x*e.ratio+"px",width:t.resize.width*e.ratio+"px",height:t.resize.height*e.ratio+"px",position:"absolute"},attrs:{draggable:"true"}},[a("div",{staticClass:"single-blcok pannel-content",style:{top:t.y*e.ratio+"px",left:t.x*e.ratio+"px",width:t.width*e.ratio+"px",height:t.height*e.ratio+"px"}},[a("span",{staticClass:"seq-num"},[e._v(e._s(i+1))]),a("span",{staticClass:"size-mark"},[e._v(e._s(t.width)+"*"+e._s(t.height))]),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",left:"0"},attrs:{name:"topLeft"}}),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",right:"0"},attrs:{name:"topRight"}}),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"30px",left:"0"},attrs:{name:"bottomLeft"}}),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"30px",right:"0"},attrs:{name:"bottomRight"}}),"Mall"===t.type?a("div",{staticClass:"specialSamll",attrs:{name:"smallPrice"}},[t.resize.width*e.ratio<150?a("div",[a("span",{staticClass:"secKillPrice",style:{"font-size":"10px","margin-right":"5px"},attrs:{name:"secKillPrice"}}),a("s",{staticClass:"price",style:{"font-size":"10px"},attrs:{name:"price"}})]):a("div",[a("span",{staticClass:"secKillPrice",attrs:{name:"secKillPrice"}}),a("s",{staticClass:"price",attrs:{name:"price"}})])]):e._e()]),t.title_info?a("div",{style:{width:t.title_info.width*e.ratio+"px",height:t.title_info.height*e.ratio+"px","font-size":t.title_info.size*e.ratio+"px","text-align":"center"}},[a("span",{attrs:{name:"titleName"}},[e._v("title")])]):e._e()]):a("div",[a("div",{staticClass:"single-blcok pannel-content",style:{top:t.y*e.ratio+"px",left:t.x*e.ratio+"px",width:t.width*e.ratio+"px",height:t.height*e.ratio+"px",position:"absolute"},attrs:{draggable:"true"}},[a("span",{staticClass:"seq-num"},[e._v(e._s(i+1))]),a("span",{staticClass:"size-mark"},[e._v(e._s(t.width)+"*"+e._s(t.height))]),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",left:"0"},attrs:{name:"topLeft"}}),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",top:"0px",right:"0"},attrs:{name:"topRight"}}),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"0px",left:"0"},attrs:{name:"bottomLeft"}}),a("div",{staticClass:"corner-img",staticStyle:{position:"absolute",bottom:"0px",right:"0"},attrs:{name:"bottomRight"}}),t.width*e.ratio>=150?a("div",["Mall"===t.type?a("div",{staticClass:"specialSamll",staticStyle:{bottom:"5px"},attrs:{name:"smallPrice"}},[a("span",{staticClass:"secKillPrice",attrs:{name:"secKillPrice"}}),a("s",{staticClass:"price",attrs:{name:"price"}})]):e._e()]):a("div",["Mall"===t.type?a("div",{staticClass:"specialSamll",staticStyle:{bottom:"5px"},style:{"font-size":"10px !important"},attrs:{name:"smallPrice"}},[a("span",{staticClass:"secKillPrice",attrs:{name:"secKillPrice"}}),a("s",{staticClass:"price",attrs:{name:"price"}})]):e._e()])])])])}),0)},hr=[],mr={props:{content:{type:Array},contentWidth:{type:Number,default:811}},data:function(){return{maxX:0,maxY:0,ratio:0}},methods:{init:function(){var e=this;this.content.forEach(function(t){t=t.resize?t.resize:t,e.maxX=Math.max(e.maxX,t.x+t.width),e.maxY=Math.max(e.maxY,t.y+t.height)})}},mounted:function(){this.ratio=document.querySelector("#layout").clientWidth/this.maxX},watch:{content:function(e,t){this.init(),this.ratio=document.querySelector("#layout").clientWidth/this.maxX}},created:function(){this.init()}},fr=mr,br=(a("f333"),Object(K["a"])(fr,pr,hr,!1,null,"13449cc9",null)),gr=br.exports,vr={components:{Upload:W["Upload"],LayoutBloack:gr},props:{editData:Object,generatorLayoutData:Object},data:function(){return{title:null,fileInfo:[],content:[],layoutType:[{name:"主页6.0",id:1},{name:"影视V2",id:2}],form:{layoutName:null,layoutType:null,layoutJson:{},layoutModel:null,layoutStatus:2},formRules:{layoutName:[{required:!0,message:"请输入布局名称",trigger:"blur"}],layoutType:[{required:!0,message:"请输入布局类别",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(0===e.content.length)return void e.$message({type:"error",message:"请上传布局文件或者生成布局"});e.$service.getLayoutInforSave({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("open-list-page")})}})},getEditData:function(){var e=this;Object.keys(this.form).forEach(function(t){e.form[t]=e.editData[t]}),this.getLayoutJson({fileName:this.form.layoutName,content:this.form.layoutJson})},handleUpload:function(e,t){var a=this;this.$service.uploadLayoutFile({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){var t=JSON.parse(e.data.content);"undefined"===typeof t.type||"Panel"!==t.type&&"Lengthwise"!==t.type&&"Expander"!==t.type?a.$message({type:"error",message:"选择的文件不对，应该选择布局格式的文件"}):a.getLayoutJson(e.data)})},getLayoutJson:function(e){var t=JSON.parse(e.content);this.form.layoutModel=t.type,this.form.layoutName=e.fileName.substr(0,45);var a={};this.content=t.contents,"Expander"===t.type?(a={type:t.type,extra:t.extra,contents:t.contents},0==t.extra.orientation&&(this.form.layoutRemark="支持横向扩展"),1==t.extra.orientation&&(this.form.layoutRemark="支持纵向扩展"),this.form.space=t.extra.space,this.form.layoutFlag=t.extra.orientation,this.form.width=t.extra.width,this.form.height=t.extra.height):a={type:t.type,contents:t.contents},this.form.layoutJson=JSON.stringify(a)},productLayout:function(){this.$emit("open-generator-page")}},created:function(){"{}"!==JSON.stringify(this.editData)?(this.title="编辑",this.getEditData()):this.title="新增","{}"!==JSON.stringify(this.generatorLayoutData)&&this.getLayoutJson(this.generatorLayoutData)}},yr=vr,wr=(a("19b7"),Object(K["a"])(yr,ur,dr,!1,null,"c893e53a",null)),Ir=wr.exports,Tr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("ButtonGroupForListPage",{attrs:{pageName:"layout","not-contain-btns":e.notContainBtns},on:{add:e.addItem,edit:e.editData,delete:e.batchDel}})],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Sr=[],Cr={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{notContainBtns:["audit","batchAudit"],layoutType:{"主页6.0":1,"影视V2":2},layoutIsTitle:{"带标题":1,"不带标题":0},layoutStatus:{"上架":1,"下架":0,"草稿":2,"待审核":3,"审核通过":4,"审核不通过":5},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],selectedRows:{},table:{props:{},header:[{label:"ID",prop:"layoutId",width:"70"},{label:"名称",width:"170",prop:"layoutName",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.layoutName)}},{label:"分类",prop:"layoutType",width:"80",render:function(e,t){var a=t.row;return 1===a.layoutType?"主页6.0":"影视V2"}},{label:"布局标题",prop:"layoutIsTitle",width:"80",render:function(e,t){var a=t.row;return 1===a.layoutIsTitle?"带标题":"不带标题"}},{label:"扩展方式",prop:"layoutFlag",width:"80",render:function(e,t){var a=t.row;if("undefined"===typeof a.layoutFlag)return"无";switch(a.layoutFlag){case 0:return"横向扩展";case 1:return"纵向扩展"}}},{label:"间距",prop:"space",width:70,sortable:!0},{label:"高度",prop:"height",width:70,sortable:!0},{label:"宽度",prop:"width",width:70,sortable:!0},{label:"状态",prop:"layoutStatus",width:70,render:function(e,t){var a=t.row,i="";switch(a.layoutStatus){case 0:i="下架";break;case 1:i="上架";break;case 2:i="草稿";break;case 3:i="待审核";break;case 4:i="已审核";break;case 5:i="审核不通过";break}return i}},{label:"更新时间",prop:"lastUpdateDate",sortable:!0},{label:"更新人",prop:"modifierName",render:function(e,t){var a=t.row;return a.modifierName}}],data:[],selected:[],selectionType:"multiple"}}},methods:{addItem:function(){this.$emit("open-add-page",{})},openReview:function(e){this.$emit("open-review-page",e)},editData:function(){if(this.$isAllowEdit(this.selected)){var e=this.selectedRows[this.selected[0]];4!==e.layoutStatus?this.$emit("open-add-page",this.selectedRows[this.selected[0]]):this.$message("该状态不能审核")}},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.getLayoutInforBatchDel({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.layoutId);var t=e.layoutId;this.selectedRows[t]=e,this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.layoutId}),delete this.selectedRows[e.layoutId],this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.layoutId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getLayoutInforPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({layoutName:ne.a.o.string.other("form",{component:"Input",placeholder:"布局名称"}),layoutType:ne.a.o.enum(this.layoutType).other("form",{component:"Select",placeholder:"布局分类"}),layoutIsTitle:ne.a.o.enum(this.layoutIsTitle).other("form",{component:"Select",placeholder:"布局标题"}),layoutStatus:ne.a.o.enum(this.layoutStatus).other("form",{component:"Select",placeholder:"状态"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},kr=Cr,_r=(a("2494"),Object(K["a"])(kr,Tr,Sr,!1,null,"56bd595b",null)),Pr=_r.exports,xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:"生成布局"},on:{"go-back":function(t){return e.$emit("go-back","add")}}},[a("el-form",{ref:"dynamicValidateForm",staticClass:"layout-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[a("el-form-item",{staticClass:"spacing",attrs:{prop:"spacing",label:"间距",rules:[{required:!0,message:"间距不能为空",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}]}},[a("el-input-number",{attrs:{min:10,max:e.totalWidth,placeholder:"间距"},on:{change:e.setAllBlockWidth},model:{value:e.dynamicValidateForm.spacing,callback:function(t){e.$set(e.dynamicValidateForm,"spacing",t)},expression:"dynamicValidateForm.spacing"}})],1),a("el-form-item",{attrs:{label:"附加条件"}},[a("el-checkbox",{model:{value:e.dynamicValidateForm.hasPrice,callback:function(t){e.$set(e.dynamicValidateForm,"hasPrice",t)},expression:"dynamicValidateForm.hasPrice"}},[e._v("价格")]),a("el-checkbox",{on:{change:e.changeLayout},model:{value:e.dynamicValidateForm.lengthwiseIs,callback:function(t){e.$set(e.dynamicValidateForm,"lengthwiseIs",t)},expression:"dynamicValidateForm.lengthwiseIs"}},[e._v("纵向扩展布局")])],1),e._l(e.dynamicValidateForm.rows,function(t,i){return a("el-form-item",{key:t.key,staticClass:"blockList",attrs:{label:"第"+(i+1)+"行有几块"}},[a("el-form-item",{staticClass:"el-form-item__select",attrs:{prop:"rows."+i+".blockNum",rules:[{required:!0,message:"请选择行数",trigger:"blur"}]}},[a("el-col",{attrs:{span:9}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.setBlockWidth(t)}},model:{value:t.blockNum,callback:function(a){e.$set(t,"blockNum",a)},expression:"row.blockNum"}},e._l(e.blockCount,function(t,i){return a("el-option",{key:i,attrs:{label:i+1+"块",value:i+1}},[e._v(e._s(i+1)+"块")])}),1)],1)],1),a("el-form-item",{staticClass:"el-form-item__select el-form-item__height",attrs:{prop:"rows."+i+".height",rules:[{required:!0,message:"请输入高度",trigger:"blur"}]}},[a("span",{staticClass:"title"},[e._v("高度:")]),a("el-col",{attrs:{span:9}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.height,callback:function(a){e.$set(t,"height",a)},expression:"row.height"}},e._l(e.heightInit,function(t,i){return a("el-option",{key:i,attrs:{label:t,value:t}},[e._v(e._s(t))])}),1)],1)],1),a("el-form-item",[a("span",{staticClass:"title",staticStyle:{"margin-left":"10px"}},[e._v("标题:")]),a("el-col",{attrs:{span:1}},[a("el-checkbox",{model:{value:t.hasTitle,callback:function(a){e.$set(t,"hasTitle",a)},expression:"row.hasTitle"}})],1)],1),t.blockWidth.length>0?a("el-form-item",{staticClass:"el-form-item__block-width"},[a("span",[e._v("宽度:")]),e._l(t.blockWidth,function(i,n){return a("div",{key:n},[a("el-input",{on:{change:function(a){return e.surplusWidth(t)}},model:{value:t.blockWidth[n],callback:function(a){e.$set(t.blockWidth,n,a)},expression:"row.blockWidth[i]"}})],1)}),a("span",[e._v("剩余的宽度="+e._s(t.surplusWidth)+"px")])],2):e._e(),a("el-form-item",{staticClass:"el-form-item__delete"},[a("el-col",{attrs:{span:2}},[i>0?a("el-button",{on:{click:function(a){return a.preventDefault(),e.removeDomain(t)}}},[e._v("删除")]):e._e()],1)],1)],1)}),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.reviewLayout("dynamicValidateForm")}}},[e._v("预览布局")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("生存布局")]),a("el-button",{attrs:{type:"primary"},on:{click:e.export_raw}},[e._v("导出布局文件")]),e.dynamicValidateForm.lengthwiseIs?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.addDomain}},[e._v("添加行数")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetForm("dynamicValidateForm")}}},[e._v("重置")])],1)],2),a("section",[a("LayoutBloack",{staticClass:"layoutBloack",attrs:{content:e.data.contents},on:{"change-width":e.changeWidth}})],1)],1)},Dr=[],Fr={components:{LayoutBloack:gr},data:function(){return{dynamicValidateForm:{rows:[{value:"",key:Date.now(),blockNum:null,height:null,hasTitle:!1,blockWidth:[],surplusWidth:0}],spacing:0,hasPrice:!1,lengthwiseIs:!1},blockCount:6,totalWidth:1622,titleHeight:58,priceHeight:52,titleSize:32,x:0,y:0,heightInit:[130,150,200,247,300,346,360,365,398,423,448],data:{contents:[],parents:"",type:"Panel"},fileName:""}},methods:{submitForm:function(e){var t=this;this.$refs.dynamicValidateForm.validate(function(a){if(!a)return console.log("error submit!!"),!1;t.genLayout(e)})},genLayout:function(e){for(var t="",a=new Array("A","B","C","D"),i=this.dynamicValidateForm.rows,n=0;n<i.length;n++)t+=a[n]+i[n].blockNum+"-"+i[n].height,i[n].hasTitle&&(t+="-title"),this.dynamicValidateForm.hasPrice&&(t+="-price"),n<i.length-1&&(t+="_");t+=".txt",this.fileName=t,0===this.data.contents.length&&this.getLayoutData(),void 0===e&&this.$emit("generator-layout",{fileName:t,content:JSON.stringify(this.data)})},resetForm:function(e){this.$refs[e].resetFields()},surplusWidth:function(e){var t=this;e.surplusWidth=0,e.surplusWidth=this.totalWidth-e.blockWidth.reduce(function(e,a,i){return i>0?e+parseInt(a)+t.dynamicValidateForm.spacing:e+parseInt(a)},0)},setBlockWidth:function(e){e.blockWidth=[],e.surplusWidth=0;for(var t=this.getBlockWidth(e.blockNum),a=0;a<e.blockNum;a++)e.blockWidth.push(t)},setAllBlockWidth:function(){var e=this;this.dynamicValidateForm.rows.forEach(function(t){e.setBlockWidth(t)})},changeLayout:function(){if(this.dynamicValidateForm.rows.length>1){var e=[];e.push(this.dynamicValidateForm.rows.shift()),this.dynamicValidateForm.rows=e,this.getLayoutData()}},getLayoutData:function(){var e=this;this.data.contents=[],this.dynamicValidateForm.rows.reduce(function(t,a,i){for(var n=0,o=0;o<a.blockNum;o++){var l=parseInt(a.blockWidth[o]),r={};r["height"]=a.height,r["title_align"]=0,e.dynamicValidateForm.hasPrice?(r["parents"]="Block",r["type"]="Mall",r["mall_resize"]={x:n,y:parseInt(t.height),width:l,height:a.height+e.priceHeight}):(r["parents"]="",r["type"]="Block"),a.hasTitle&&(r["resize"]={x:n,y:parseInt(t.height),width:l,height:a.height+e.titleHeight},r["title_info"]={width:l,height:e.titleHeight,size:e.titleSize}),r["width"]=l,r["x"]=n,r["y"]=parseInt(t.height),r["whichRow"]=i,r["whichBlock"]=o,e.data.contents.push(r),n=n+l+e.dynamicValidateForm.spacing}var s=a.hasTitle?a.height+e.titleHeight:a.height;return t.height=parseInt(t.height)+s+e.dynamicValidateForm.spacing,t},{height:0}),this.lengthwiseIs?this.data.type="Lengthwise":this.data.type="Panel"},changeWidth:function(e,t,a,i){this.dynamicValidateForm.rows[t]},reviewLayout:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.getLayoutData()})},getBlockWidth:function(e){return Math.floor((this.totalWidth-this.dynamicValidateForm.spacing*(e-1))/e)},removeDomain:function(e){var t=this.dynamicValidateForm.rows.indexOf(e);-1!==t&&this.dynamicValidateForm.rows.splice(t,1)},addDomain:function(){4!==this.dynamicValidateForm.rows.length?this.dynamicValidateForm.rows.push({value:"",key:Date.now(),blockNum:null,height:null,hasTitle:!1,blockWidth:[],surplusWidth:0}):this.$message("最多添加4行")},fake_click:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},export_raw:function(){if(""!==this.fileName){var e=window.URL||window.webkitURL||window,t=new Blob([JSON.stringify(this.data)]),a=document.createElementNS("http://www.w3.org/1999/xhtml","a");a.href=e.createObjectURL(t),a.download=this.fileName,this.fake_click(a)}else this.submitForm("download")}}},$r=Fr,Rr=(a("dd7d"),Object(K["a"])($r,xr,Dr,!1,null,"3757c48c",null)),Lr=Rr.exports,Nr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back","list")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"布局名称(中文)",prop:"layoutName"}},[a("div",[e._v(e._s(e.form.layoutName))])]),a("el-form-item",{attrs:{label:"布局类别",prop:"layoutType"}},[a("div",[e._v(e._s(e.form.layoutType))])]),a("el-form-item",{attrs:{label:"状态"}},[a("div",{staticClass:"status"},[e._v(e._s(e.form.layoutStatus))])]),a("el-form-item",{attrs:{label:"布局"}},[a("LayoutBloack",{staticClass:"layoutBloack",attrs:{content:e.content}})],1),a("el-form-item",[a("AuditDetailButton",{attrs:{id:e.id,version:e.version,type:e.type,"not-contain-btn":e.notContainBtn,hasHistory:e.hasHistory,status:e.status,menuElId:e.menuElId},on:{"go-edit-Page":e.goEditPage,"delete-item":e.deleteItem}})],1)],1)],1)],1)],1)},Or=[],Ar={components:{Upload:W["Upload"],LayoutBloack:gr,AuditDetailButton:Gt},props:{reviewData:Object},data:function(){return{title:null,fileInfo:[],content:[],id:null,hasHistory:!1,version:"",type:"layout",status:null,menuElId:"layoutInfo",notContainBtn:["claim","unclaim","copy"],layoutType:[{name:"主页6.0",id:1},{name:"影视V2",id:2}],form:Object(ve["a"])({layoutName:null,layoutType:null,layoutJson:{},layoutStatus:null,layoutModel:null},"layoutStatus",2),actions:{}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){if(0===e.content.length)return void e.$message({type:"error",message:"请上传布局文件或者生成布局"});e.$service.getLayoutInforSave({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("open-list-page")})}})},getlLayoutTypeName:function(e){var t=this.layoutType.filter(function(t){if(parseInt(t.id)===parseInt(e))return t});return t.length>0?t[0].name:""},getEditData:function(){var e=this;Object.keys(this.form).forEach(function(t){e.form[t]="layoutType"===t?e.getlLayoutTypeName(e.reviewData[t]):"layoutStatus"===t?e.$numToAuditStatus(e.reviewData[t]):e.reviewData[t]}),this.getLayoutJson({fileName:this.form.layoutName,content:this.form.layoutJson})},goEditPage:function(){this.$emit("go-edit-Page")},deleteItem:function(){this.$service.getLayoutInforBatchDel({id:this.id},"删除成功"),this.$emit("open-list-page")},getLayoutJson:function(e){var t=JSON.parse(e.content);this.form.layoutModel=t.type,this.form.layoutName=e.fileName.substr(0,45);var a={};this.content=t.contents,"Expander"===t.type?(a={type:t.type,extra:t.extra,contents:t.contents},0==t.extra.orientation&&(this.form.layoutRemark="支持横向扩展"),1==t.extra.orientation&&(this.form.layoutRemark="支持纵向扩展"),this.form.space=t.extra.space,this.form.layoutFlag=t.extra.orientation,this.form.width=t.extra.width,this.form.height=t.extra.height):a={type:t.type,contents:t.contents},this.form.layoutJson=JSON.stringify(a)}},created:function(){"{}"!==JSON.stringify(this.reviewData)&&(this.title="预览",this.getEditData(),this.id=this.reviewData.layoutId,this.status=this.reviewData.layoutStatus)}},Er=Ar,Vr=(a("23c9"),Object(K["a"])(Er,Nr,Or,!1,null,"75809942",null)),Mr=Vr.exports,Br={components:{LayoutInfoAdd:Ir,LayoutInfoList:Pr,LayoutInfoGenerator:Lr,LayoutInfoReview:Mr},data:function(){return{mode:"list",editData:{},reviewData:{},generatorLayoutData:{}}},methods:{openAddPage:function(e){this.editData=e,this.mode="add"},goEditPage:function(){this.editData=this.reviewData,this.mode="add"},openReviewPage:function(e){this.reviewData=e,this.mode="review"},openListPage:function(){this.mode="list",this.generatorLayoutData={},this.$refs.list.fetchData()},goBack:function(e){this.mode=e},openGeneratorPage:function(){this.mode="generator"},generatorLayout:function(e){this.generatorLayoutData=e,this.mode="add"}}},Ur=Br,jr=Object(K["a"])(Ur,sr,cr,!1,null,null,null),Hr=jr.exports,qr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},Wr=[],Gr={},zr=Gr,Jr=Object(K["a"])(zr,qr,Wr,!1,null,"61fb8944",null),Kr=Jr.exports,Xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("CommonPannelUserList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}})],1)},Yr=[],Zr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Qr=[],es={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"]},props:{dataList:{type:Object}},data:function(){var e=this;return{pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],pannelStatus:{},filter:{idPrefix:10},filterSchema:null,pagination:{currentPage:1},businessType:{},table:{props:{},data:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.pannelGroupRemark)}},{label:"布局",prop:"fullLayoutName"},{label:"业务分类",prop:"categoryName"},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var a=t.pannelStatus,i=t.currentVersion;return i+"/"+e.pannelStatusOption.map(function(e){if(a.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate","show-overflow-tooltip":!0},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"userName"},{label:"操作",width:"100",fixed:"right",render:W["utils"].component.createOperationRender(this,{copy:"复制",cancelCollect:"取消收藏"})}],selected:[],selectionType:"multiple"},selected:[]}},watch:{selected:{handler:function(e,t){var a=this.table,i=[];a.data.map(function(t){if(e.indexOf(t.pannelGroupId)>-1){var a={pannelGroupId:t.pannelGroupId,pannelGroupRemark:t.pannelGroupRemark,duplicateVersion:t.duplicateVersion};i.push(a)}}),this.$emit("input",i)}}},methods:{copy:function(){},cancelCollect:function(){},openReview:function(e){this.$emit("open-review-page",e)},fetchData:function(){var e=this,t=this.parseFilter();this.$service.commonPannelUserList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){console.log(this.dataList),this.dataList?(this.filter=Object.assign({},this.dataList.filter),console.log(this.filter)):this.filter={idPrefix:10},this.fetchData()},getBusinessType:function(){var e=this;return this.$service.getBusinessType().then(function(t){t.forEach(function(t){e.businessType[t.dictCnName]=t.dictId})})},handleRowSelectionAdd:function(e){this.selected.push(e.pannelGroupId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.pannelGroupId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pannelGroupId)>-1&&e.push(i),e},[])},addTabInfo:function(){},editData:function(){},batchDel:function(){}},created:function(){var e=this;this.pannelStatus=this.pannelStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=ne.a.map({pannelCategory:ne.a.o.enum(this.businessType).other("form",{placeholder:"业务分类",component:"Select"}),pannelId:ne.a.o.string.other("form",{placeholder:"板块ID",component:"Input"}),pannelName:ne.a.o.string.other("form",{placeholder:"板块名称",component:"Input"}),pannelTitle:ne.a.o.string.other("form",{placeholder:"板块标题",component:"Input"}),tabName:ne.a.o.string.other("form",{placeholder:"引用状态",component:"Input"}),pannelResource:ne.a.o.enum({"腾讯":"o_tencent","爱奇艺":"o_iqiyi","优朋":"o_voole"}).other("form",{placeholder:"内容源",component:"Select"}),pannelStatus:ne.a.o.enum(this.pannelStatus).other("form",{placeholder:"状态",component:"Select"}),pannelType:ne.a.o.enum({"影视推荐板块":6,"定向板块":7,"常规板块":1}).other("form",{placeholder:"板块类别",component:"Select"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getBusinessType().then(function(){e.dataList?e.filterSchema=a.filterSchema:e.filterSchema=t});var a=this.dataList;a&&(this.filter=Object.assign({},a.filter),this.table=a.table),this.fetchData()}},ts=es,as=(a("679e"),Object(K["a"])(ts,Zr,Qr,!1,null,"17511e64",null)),is=as.exports,ns={components:{CommonPannelUserList:is},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}},created:function(){}},os=ns,ls=Object(K["a"])(os,Xr,Yr,!1,null,"70e9b32e",null),rs=ls.exports,ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},cs=[],us={},ds=us,ps=Object(K["a"])(ds,ss,cs,!1,null,"3cba89ea",null),hs=ps.exports,ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")])],1)},fs=[],bs={methods:{editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])}}},gs=bs,vs=Object(K["a"])(gs,ms,fs,!1,null,"1c6e9860",null),ys=vs.exports,ws=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},Is=[],Ts={},Ss=Ts,Cs=Object(K["a"])(Ss,ws,Is,!1,null,"01b347d3",null),ks=Cs.exports,_s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},Ps=[],xs={},Ds=xs,Fs=Object(K["a"])(Ds,_s,Ps,!1,null,"46c3117e",null),$s=Fs.exports,Rs={},Ls=Object(K["a"])(Rs,bi,gi,!1,null,null,null),Ns=Ls.exports,Os=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("HomePageInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{create:e.handleCreate,read:e.handleRead,edit:e.handleEdit,copy:e.handleCopy}}),e.isShowList?e._e():a("HomePageInfo",{attrs:{id:e.id,"init-mode":e.mode,version:e.version},on:{"upsert-end":e.handleUpsertEnd,"go-back":e.goBack}})],1)},As=[],Es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("PageWrapper",[a("PageContentWrapper",{directives:[{name:"show",rawName:"v-show",value:"homepage"==e.activePage,expression:"activePage == 'homepage'"}]},[a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("CommonContent",{attrs:{mode:e.mode,"resource-info":e.resourceInfo},on:{replicate:function(t){e.mode="replicate"},edit:function(t){e.mode="edit"},unaudit:e.fetchData,shelves:e.fetchData,audit:function(t){return e.$emit("upsert-end")},copy:e.handleCopy,"submit-audit":e.handleSubmitAudit,"save-draft":e.handleSaveDraft,"select-version":e.fetchData}},["read"!==e.mode?a("div",{staticClass:"hompage-upsert"},[a("el-form",{ref:"homepageForm",attrs:{model:e.homepage,rules:e.rules,"label-width":"140px"}},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])]),a("el-form-item",{attrs:{label:"首页名称",prop:"homepageName"}},[a("el-input",{attrs:{placeholder:"首页名称"},model:{value:e.homepage.homepageName,callback:function(t){e.$set(e.homepage,"homepageName",t)},expression:"homepage.homepageName"}})],1),a("el-form-item",{attrs:{label:"首页模式",prop:"homepageModel"}},[a("el-radio-group",{model:{value:e.homepage.homepageModel,callback:function(t){e.$set(e.homepage,"homepageModel",t)},expression:"homepage.homepageModel"}},[a("el-radio",{attrs:{label:"normal"}},[e._v("标准模式")]),a("el-radio",{attrs:{label:"child"}},[e._v("儿童模式")]),a("el-radio",{attrs:{label:"old"}},[e._v("老人模式")])],1)],1),a("el-form-item",{attrs:{label:"首页版本号",prop:"homepageVersion"}},[a("el-input",{attrs:{placeholder:"首页版本号"},model:{value:e.homepage.homepageVersion,callback:function(t){e.$set(e.homepage,"homepageVersion",t)},expression:"homepage.homepageVersion"}})],1),a("div",{staticClass:"form-legend-header"},[a("span",[e._v("数据列表配置")])]),a("el-form-item",{attrs:{label:"首页版面"}},[a("TabSelector",{on:{"select-end":e.handleSelectTabEnd}}),a("el-button",{attrs:{type:"warning"},on:{click:e.handleCreateTab}},[e._v("新建版面")]),a("span",{staticClass:"cc-form-annotation"},[e._v("至少选择1个版面")]),a("OrderableTable",{attrs:{header:e.tabGroupTableHeader,"hide-action":!0},model:{value:e.tabGroupList,callback:function(t){e.tabGroupList=t},expression:"tabGroupList"}}),a("div")],1)],1)],1):e._e(),"read"===e.mode?a("div",{staticClass:"homepage-read"},[a("el-form",{attrs:{"label-width":"140px"}},[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])]),a("el-form-item",{attrs:{label:"首页名称",prop:"homepageName"}},[e._v("\n                "+e._s(e.homepage.homepageName)+"\n              ")]),a("el-form-item",{attrs:{label:"首页模式",prop:"homepageModel"}},[e._v("\n                "+e._s(e.HOME_MODE_MAP[e.homepage.homepageModel])+"\n              ")]),a("el-form-item",{attrs:{label:"首页版本号",prop:"homepageVersion"}},[e._v("\n                "+e._s(e.homepage.homepageVersion)+"\n              ")]),a("div",{staticClass:"form-legend-header"},[a("span",[e._v("数据列表配置")])]),a("el-form-item",{attrs:{label:"首页版面"}},[a("OrderableTable",{attrs:{header:e.tabGroupTableHeader,readonly:!0,"hide-action":!0},model:{value:e.tabGroupList,callback:function(t){e.tabGroupList=t},expression:"tabGroupList"}})],1)],1)],1):e._e()])],1)],1),"tab_group_setter"===e.activePage?a("PageContentWrapper",[a("HomePageTabGroupSetter",{attrs:{"title-prefix":e.title,tabs:e.homepage.tabInfos[e.activeTabGroupIndex],readonly:"read"===e.mode},on:{"set-end":e.handleSetTabGroupEnd,"go-back":function(t){e.activePage="homepage"}}})],1):e._e(),"tab"===e.activePage?a("PageContentWrapper",[a("TabInfo",{attrs:{"title-prefix":e.title,id:e.embedTab.id,version:e.embedTab.version,"init-mode":e.embedTab.mode},on:{"upsert-end":e.handleTabEmbedBack,"go-back":e.handleTabEmbedBack}})],1):e._e()],1)},Vs=[],Ms=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-wrapper"},[e._t("default")],2)},Bs=[],Us={},js=Us,Hs=(a("d0fb"),Object(K["a"])(js,Ms,Bs,!1,null,"9270acd6",null)),qs=Hs.exports,Ws=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-content-wrapper"},[e._t("default")],2)},Gs=[],zs={},Js=zs,Ks=(a("3f25"),Object(K["a"])(Js,Ws,Gs,!1,null,"e96527b0",null)),Xs=Ks.exports,Ys=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["read"!==e.mode?["copy"===e.mode?a("div",[a("VersionList",{attrs:{type:"resourceInfo.type",status:e.resourceInfo.status,version:e.resourceInfo.version,"version-list":e.versionList}}),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("copy")}}},[e._v("确认复制")])],1)],1):a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("submit-audit")}}},[e._v("提交审核")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.$emit("save-draft")}}},[e._v("保存草稿")])],1),e.showReleaseTimeSetter?a("ReleaseTimeSetter",{on:{cancel:function(t){e.showReleaseTimeSetter=!1},submit:e.handleSubmitWithReleaseTime}}):e._e(),e._t("default")]:[a("div",[a("VersionList",{attrs:{type:"resourceInfo.type",status:e.resourceInfo.status,version:e.resourceInfo.version,"version-list":e.versionList},on:{"select-version":function(t){return e.$emit("select-version",t)}}}),e.resourceInfo.id?a("ContentButtonGroup",{attrs:{"resource-info":e.resourceInfo,options:e.buttonGroupOptions},on:{copy:function(t){return e.$emit("replicate")},edit:function(t){return e.$emit("edit")},unaudit:e.handleUnAudit,audit:e.handleAuditStart,shelves:e.handleShelves,delete:e.handleDelete}}):e._e()],1),e._t("default"),a("AuditHistory",{attrs:{data:e.auditHistoryList}}),a("el-dialog",{attrs:{title:"审核",visible:e.showAuditDialog},on:{"update:visible":function(t){e.showAuditDialog=t}}},[a("el-form",{ref:"auditForm",attrs:{model:e.auditForm,"status-icon":"",rules:e.auditFormRule,"label-width":"100"}},[a("el-form-item",{attrs:{label:"审核意见",prop:"auditFlag"}},[a("el-radio",{attrs:{label:"4"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("通过")]),a("el-radio",{attrs:{label:"5"},model:{value:e.auditForm.auditFlag,callback:function(t){e.$set(e.auditForm,"auditFlag",t)},expression:"auditForm.auditFlag"}},[e._v("打回")])],1),a("el-form-item",{attrs:{label:"意见说明",prop:"auditDesc"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入意见说明"},model:{value:e.auditForm.auditDesc,callback:function(t){e.$set(e.auditForm,"auditDesc",t)},expression:"auditForm.auditDesc"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showAuditDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAuditEnd}},[e._v("确 定")])],1)],1)]],2)},Zs=[],Qs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticClass:"version-list",attrs:{inline:!0}},[e.versionList&&e.versionList.length>0?a("el-form-item",{attrs:{label:"版本"}},[a("el-select",{staticClass:"version-selector",attrs:{value:e.version,placeholder:"请选择"},on:{input:e.handleSelectVersion}},e._l(e.versionList,function(e){return a("el-option",{key:e.version,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),a("el-form-item",[a("div",{staticClass:"status"},[e._v(" "+e._s(e.$consts.statusText[e.status]))])])],1)},ec=[],tc={props:["version","status","versionList"],methods:{handleSelectVersion:function(e){this.$emit("select-version",e)}}},ac=tc,ic=(a("a193"),Object(K["a"])(ac,Qs,ec,!1,null,"72d0471e",null)),nc=ic.exports,oc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.data.length>0?a("div",[e._m(0),a("table",{staticClass:"audit-history-table"},e._l(e.data,function(t,i){return a("tr",{key:i},[a("td",[e._v("\n        "+e._s(t.lastUpdateDate)+"\n      ")]),a("td",[e._v("\n        "+e._s(t.auditor)+"\n      ")]),a("td",[e._v("\n        "+e._s(e.$consts.statusText[t.auditFlag])+"\n      ")]),a("td",[e._v("\n        "+e._s(t.auditDesc)+"\n      ")])])}),0)]):e._e()},lc=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-legend-header"},[a("span",[e._v("审核者备注")])])}],rc={props:{data:{type:Array,default:function(){return[]}}}},sc=rc,cc=(a("b07c"),Object(K["a"])(sc,oc,lc,!1,null,"b8334094",null)),uc=cc.exports,dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.buttons,function(t,i){return a("el-button",{directives:[{name:"show",rawName:"v-show",value:"copy"!==t.runComm||e.options.isAllowCopy,expression:"item.runComm !== 'copy' || options.isAllowCopy"}],key:i,attrs:{disabled:"claim"===t.runComm||"unclaim"===t.runComm,type:e.warningButtons.indexOf(t.runComm)>-1?"warning":"primary"},on:{click:function(a){return e.$emit(t.runComm)}}},[e._v("\n    "+e._s(t.runName)+"\n  ")])}),e.options.isNeedSecondAudit?a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.$emit("second-audit")}}},[e._v("\n      二次审核\n  ")]):e._e(),e.options.isAllowCancelTiming?a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.$emit("cancel-timing")}}},[e._v("\n      取消定时\n  ")]):e._e()],2)},pc=[],hc={data:function(){return{buttons:[],warningButtons:["delete","unclaim","unaudit","copy"]}},props:["resourceInfo","options"],methods:{getButtons:function(){var e=this,t=this.resourceInfo,a=t.id,i=t.version,n=t.type,o=t.status,l=t.menuElId,r={resourceId:a,version:i,type:n,status:o,menuElId:l};this.$service.getAuditDetailButton(r).then(function(t){e.buttons=t})}},created:function(){this.$watch("resourceInfo",this.getButtons,{immediate:!0})}},mc=hc,fc=Object(K["a"])(mc,dc,pc,!1,null,null,null),bc=fc.exports,gc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[a("el-form",{ref:"submitForm",attrs:{model:e.submitForm,rules:e.submitRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"是否定时"}},[a("el-radio-group",{model:{value:e.submitForm.isTiming,callback:function(t){e.$set(e.submitForm,"isTiming",t)},expression:"submitForm.isTiming"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e.submitForm.isTiming?a("el-form-item",{attrs:{label:"设定时间",prop:"releaseTime"}},[a("el-date-picker",{attrs:{type:"datetime",clearable:!1,"picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd hh:mm:ss"},model:{value:e.submitForm.releaseTime,callback:function(t){e.$set(e.submitForm,"releaseTime",t)},expression:"submitForm.releaseTime"}})],1):e._e()],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.judgeTask}},[e._v("确 定")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.$emit("cancel")}}},[e._v("取 消")])],1)],1)},vc=[],yc={data:function(){return{showDialog:!0,submitForm:{isTiming:0,releaseTime:void 0},pickerOptions:{disabledDate:function(e){var t=864e5,a=15*t;return e.getTime()<=Date.now()-t||e.getTime()>=Date.now()+a}},submitRules:{releaseTime:[{required:!0,message:"请选择时间",trigger:"change"}]}}},methods:{judgeTask:function(){var e=this;this.$refs.submitForm.validate(function(t){if(t){var a=e.submitForm.isTiming;a?e.$service.getTimedTaskLimit().then(e.submitTask):e.submitTask()}})},submitTask:function(){this.$emit("submit",{isTiming:this.submitForm.isTiming,releaseTime:this.submitForm.releaseTime})}}},wc=yc,Ic=Object(K["a"])(wc,gc,vc,!1,null,null,null),Tc=Ic.exports,Sc={components:{VersionList:nc,ContentButtonGroup:bc,AuditHistory:uc,ReleaseTimeSetter:Tc},data:function(){return{showReleaseTimeSetter:!1,showAuditDialog:!1,versionList:[],auditHistoryList:[],auditForm:{auditFlag:"4",auditDesc:""},auditFormRule:{auditDesc:[{required:!0,message:"请输入审核意见",trigger:"blur"}]}}},props:{mode:String,resourceInfo:{type:Object,default:function(){return{}}},validateMethod:{type:Function}},watch:{resourceInfo:"handleResourceChange"},computed:{buttonGroupOptions:function(){var e=this.$consts.status,t=e.draft,a=e.waiting,i=e.rejected,n=e.processing,o=e.waiting2,l=!this.versionList.some(function(e){var n=e.row.status;return n===t||n===a||n===i}),r=(this.resourceInfo.status,status===n),s=status===o;return{isAllowCopy:l,isNeedSecondAudit:s,isAllowCancelTiming:r}}},methods:{handleSubmitWithReleaseTime:function(e){this.showReleaseTimeSetter=!1,this.$emit("submit-audit",e)},handleDelete:function(){var e=this,t=this.resourceInfo,a=t.type,i=t.id,n=t.version;this.$confirm("确认删除该版本吗?","提示").then(function(){e.$service.deleteVersion({type:a,id:i,version:n},"删除成功").then(function(){var t=e.versionList.find(function(e){return e.value!==n}).value;e.$emit("select-version",t)})}).catch(function(){})},handleAuditStart:function(){this.showAuditDialog=!0},handleAuditEnd:function(){var e=this;this.$refs.auditForm.validate(function(t){if(t){var a=e.resourceInfo,i=a.id,n=a.version,o=a.type,l=e.auditForm,r=l.auditFlag,s=l.auditDesc;e.$service.auditTask({id:i,version:n,type:o,auditFlag:r,auditDesc:s},"审核成功").then(function(t){e.auditDialog=!1,e.$emit("audit")})}})},handleUnAudit:function(){var e=this,t=this.resourceInfo,a=t.id,i=t.version,n=t.type;this.$confirm("您确定要撤销审核吗?","提示").then(function(){e.$service.revokeAudit({id:a,version:i,type:n},"撤销审核成功").then(function(){e.$emit("unaudit")})}).catch(function(){})},handleShelves:function(){var e=this,t=this.resourceInfo,a=t.type,i=t.id,n=t.version;this.$service.putOnShelves({id:i,version:n,type:a},"上架成功").then(function(){e.$emit("shelves")})},getHistoryList:function(){var e=this,t=this.resourceInfo,a=t.type,i=t.id;i?this.$service.getVersionList({id:i,type:a}).then(function(t){e.versionList=t}):this.versionList=[]},getAuditHistoryList:function(){var e=this,t=this.resourceInfo,a=t.type,i=t.id,n=t.version;i?this.$service.getAuditHistoryList({id:i,type:a,version:n}).then(function(t){e.auditHistoryList=t}):this.auditHistoryList=[]},handleResourceChange:function(){this.getHistoryList(),this.getAuditHistoryList()}},created:function(){}},Cc=Sc,kc=Object(K["a"])(Cc,Ys,Zs,!1,null,null,null),_c=kc.exports,Pc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("remote-selector-wrapper",{staticClass:"cc-tab-selector",attrs:{title:"选择版面"},on:{"select-start":e.handleSelectStart,"select-end":e.handleSelectEnd}},[a("div",{attrs:{slot:"filter"},slot:"filter"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"版面ID"}},[a("el-input",{model:{value:e.filter.tabId,callback:function(t){e.$set(e.filter,"tabId",t)},expression:"filter.tabId"}})],1),a("el-form-item",{attrs:{label:"版面名称"}},[a("el-input",{model:{value:e.filter.tabName,callback:function(t){e.$set(e.filter,"tabName",t)},expression:"filter.tabName"}})],1),a("el-form-item",{attrs:{label:"版面分类"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.filter.tabCategory,callback:function(t){e.$set(e.filter,"tabCategory",t)},expression:"filter.tabCategory"}},e._l(e.tabCategoryOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.dictId,label:e.dictCnName}})}),1)],1),a("el-form-item",{attrs:{label:"版面属性",clearable:!0}},[a("el-select",{model:{value:e.filter.tabType,callback:function(t){e.$set(e.filter,"tabType",t)},expression:"filter.tabType"}},e._l(e.tabTypeOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1),a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.filter.tabStatusArray,callback:function(t){e.$set(e.filter,"tabStatusArray",t)},expression:"filter.tabStatusArray"}},e._l(e.tabStatusOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1),void 0===e.source?a("el-form-item",{attrs:{label:"内容源"}},[a("SourceSelector",{model:{value:e.filter.tabResource,callback:function(t){e.$set(e.filter,"tabResource",t)},expression:"filter.tabResource"}})],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:10!=e.$consts.idPrefix,expression:"$consts.idPrefix != 10"}],attrs:{label:"数据来源"}},[a("el-select",{model:{value:e.filter.idPrefix,callback:function(t){e.$set(e.filter,"idPrefix",t)},expression:"filter.idPrefix"}},[a("el-option",{attrs:{label:"酷开",value:"10"}}),a("el-option",{attrs:{label:"江苏广电",value:"11"}})],1)],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:e.handleFilterChange}},[e._v("查询")]),a("el-button",{on:{click:e.handleFilterReset}},[e._v("重置")])],1),a("Table",{attrs:{slot:"item-list",data:e.table.data,header:e.table.header,selected:e.table.selected,props:e.table.props,"selection-type":e.selectionType||e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-add":e.handleTableRowSelectionAdd,"row-selection-remove":e.handleTableRowSelectionRemove,"row-selection-change":e.handleTableRowSelectionChange,"all-row-selection-change":e.handleTableAllRowSelectionChange},slot:"item-list"}),a("el-pagination",{attrs:{slot:"pagination","current-page":e.pagination.currentPage,"page-sizes":[15,20,30],"page-size":e.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":function(t){e.pagination.pageSize=t},"current-change":function(t){e.pagination.currentPage=t}},slot:"pagination"})],1)},xc=[],Dc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"remote-selector-wrapper"},[a("div",{on:{click:e.handleSelectStart}},[e._t("default",[a("Button",[e._v("\n        "+e._s(e.title)+"\n      ")])])],2),a("Dialog",{staticClass:"remote-selector-dialog",attrs:{title:e.title,fullscreen:e.fullscreen,visible:e.showDialog,"append-to-body":!0},on:{"update:visible":function(t){e.showDialog=t}}},[a("div",{staticClass:"remote-selector-main"},[a("div",{staticClass:"remote-selector-main__filter"},[e._t("filter",[e.filterSchema?a("GateSchemaForm",{attrs:{schema:e.filterSchema},on:{submit:e.handleFilter,reset:e.handleResetFilterForm},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}):e._e()])],2),a("div",{staticClass:"remote-selector-main__content"},[e._t("item-list")],2),a("div",{staticClass:"remote-selector-main__footer"},[a("div",{staticClass:"remote-selector-main__pagination"},[e._t("pagination",[e.pagination?a("el-pagination",{attrs:{"current-page":e.pagination.page,"page-sizes":[15,20,30],"page-size":e.pagination.rows,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handlePageSizeChange,"current-change":e.handlePageChange}}):e._e()])],2),a("div",{staticClass:"remote-selector-main__actions"},[e._t("actions",[a("Button",{attrs:{type:"primary"},on:{click:e.handleSelectEnd}},[e._v("  \n                确定\n              ")]),a("Button",{on:{click:e.handleSelectCancel}},[e._v("  \n                取消\n              ")])])],2)])])])],1)},Fc=[],$c={components:{Button:$["Button"],Dialog:$["Dialog"],Tag:$["Tag"]},props:{title:{type:String,default:function(){return"选择"}},fullscreen:{type:Boolean,default:function(){return!0}},filter:Object,filterSchema:Object,pagination:Object},data:function(){return{showDialog:!1,showContent:!1}},methods:{handleSelectStart:function(){this.showDialog=!0,this.$emit("select-start")},handleSelectEnd:function(){this.showDialog=!1,this.$emit("select-end")},handleSelectCancel:function(){this.showDialog=!1,this.$emit("select-cancel")},handleFilter:function(e){e&&0!==e.length||this.$emit("filter-change")},handlePageSizeChange:function(e){this.$set(this.pagination,"pageSize",e),this.$emit("pagination-change")},handlePageChange:function(e){this.$set(this.pagination,"currentPage",e),this.$emit("pagination-change")},handleResetFilterForm:function(){this.$emit("filter-reset")},emitFilterChange:function(e){this.$emit("filter-change",e)}},created:function(){}},Rc=$c,Lc=(a("cc20"),Object(K["a"])(Rc,Dc,Fc,!1,null,"06665b6e",null)),Nc=Lc.exports,Oc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{attrs:{value:e.value,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.sourceOptions,function(t,i){return a("el-option",{key:i,attrs:{disabled:e.freeze&&t.value!==e.value,label:t.label,value:t.value}})}),1)},Ac=[],Ec={props:["value","disabled","freeze","allowEmpty"],computed:{sourceOptions:function(){var e=this.$consts;return this.allowEmpty?e.sourceOptionsWidthEmpty:e.sourceOptions}}},Vc=Ec,Mc=Object(K["a"])(Vc,Oc,Ac,!1,null,null,null),Bc=Mc.exports,Uc="tabId",jc={components:{Table:W["Table"],RemoteSelectorWrapper:Nc,SourceSelector:Bc},data:function(){return{tabTypeOptions:[{label:"普通版面",value:"1"},{label:"专题版面",value:"2"}],tabTypeIndexed:{1:"普通版面",2:"专题版面"},tabCategoryOptions:[],tabCategoryOptionsIndexed:{},tabStatusOptions:[{label:"待审核",value:3},{label:"审核通过",value:4}],tabResourceOptions:[{label:"腾讯",value:"o_tencent"},{label:"爱奇艺",value:"o_iqiyi"}],tabStatusOptionsIndexed:{3:"待审核",4:"审核通过"},pagination:{currentPage:1,pageSize:15,total:void 0},filter:this.getDefaultFilter(),table:{data:[],selected:[],header:[{label:"ID",prop:"tabId",width:120},{label:"名称",prop:"tabName","show-overflow-tooltip":!0,width:200},{label:"版面属性",width:120,render:function(e,t){return this.tabTypeIndexed[t.row.tabType]}.bind(this)},{label:"版面分类",width:150,render:function(e,t){return this.tabCategoryOptionsIndexed[t.row.tabCategory]}.bind(this)},{label:"状态",render:function(e,t){return this.tabStatusOptionsIndexed[t.row.tabStatus]}.bind(this)},{prop:"lastUpdateDate",label:"更新时间",width:190},{prop:"userName",label:"更新人",width:120}],selectionType:"multiple",props:{"tooltip-effect":"dark"}},selected:[]}},props:["isLive","initSelected","source","hasSubTab","selectionType"],watch:{initSelected:"setSelected","pagination.currentPage":"fetchData","pagination.pageSize":"fetchData","table.data":"updateTableSelected"},methods:{setSelected:function(){this.selected=this.initSelected||[]},handleSelectStart:function(){this.$emit("select-start"),this.isLive||(this.table.data=[],this.selected=[],this.table.selected=[],this.handleFilterReset())},handleSelectEnd:function(){this.$emit("select-end",this.selected.slice())},getDefaultFilter:function(){return{idPrefix:this.$consts.idPrefix,tabId:void 0,tabName:void 0,tabCategory:void 0,tabType:void 0,tabStatusArray:void 0,tabResource:void 0}},handleFilterChange:function(e){this.pagination.currentPage=1,this.fetchData()},handleFilterReset:function(){this.filter=this.getDefaultFilter(),this.handleFilterChange()},getFilter:function(){var e=JSON.parse(JSON.stringify(this.filter)),t=this.pagination;return e.page=t.currentPage,e.rows=t.pageSize,e.tabStatusArray||(e.tabStatusArray="3,4"),void 0!==this.hasSubTab&&(e.hasSubTab=this.hasSubTab),this.source&&(e.tabResource=this.source),e},fetchData:function(){var e=this;this.$service.tabInfoList(this.getFilter()).then(function(t){e.table.data=t.rows,e.pagination.total=t.total})},handleTableRowSelectionChange:function(e,t){this.selected=[e],this.table.selected=t},handleTableRowSelectionAdd:function(e){this.selected=this.selected.concat(e),this.updateTableSelected()},handleTableRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t[Uc]!==e[Uc]}),this.updateTableSelected()},handleTableAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleTableRowSelectionAdd):this.table.data.forEach(this.handleTableRowSelectionRemove)},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e[Uc]});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a[Uc])>-1&&e.push(i),e},[])}},created:function(){var e=this;this.$service.getBusinessType().then(function(t){e.tabCategoryOptions=t,e.tabCategoryOptionsIndexed=t.reduce(function(e,t){return e[t.dictId]=t.dictCnName,e},{})})}},Hc=jc,qc=(a("8b44"),Object(K["a"])(Hc,Pc,xc,!1,null,null,null)),Wc=qc.exports,Gc=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-input",{on:{change:e.handleOrderChange},model:{value:e.order,callback:function(t){e.order=t},expression:"order"}})},zc=[],Jc={data:function(){return{order:void 0}},watch:{value:"handleInputValue"},props:["value"],methods:{handleInputValue:function(e){this.order=e},handleOrderChange:function(e){/^\d+$/.test(e)&&e>0?this.$emit("input",e):(this.$message({type:"error",message:"请输入正整数"}),this.order=this.value)}},created:function(){this.order=this.value}},Kc=Jc,Xc=Object(K["a"])(Kc,Gc,zc,!1,null,null,null),Yc=Xc.exports,Zc={create:"创建",read:"预览",edit:"编辑",replicate:"",copy:"复制"},Qc={props:["titlePrefix"],computed:{title:function(){var e=this.mode,t=this.resourceName||"",a="replicate"===e?"创建".concat(t,"副本"):(Zc[e]||"")+t,i=this.titlePrefix;return i?"".concat(i," / ").concat(a):a}}},eu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("PageWrapper",[a("PageContentWrapper",{directives:[{name:"show",rawName:"v-show",value:"tab_group_setter"===e.activePage,expression:"activePage === 'tab_group_setter'"}]},[a("ContentCard",{staticClass:"cc-homepage-tab-group-setter",attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.readonly,expression:"!readonly"}],staticClass:"actions"},[a("TabSelector",{ref:"tabSelector",attrs:{title:"添加定向版面"},on:{"select-start":e.handleSelectTabStart,"select-end":e.handleSelectTabEnd}}),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("\n            保存\n          ")])],1),a("OrderableTable",{ref:"tabTable",attrs:{header:e.tabTableHeader,"hide-action":!0,readonly:e.readonly},model:{value:e.tabList,callback:function(t){e.tabList=t},expression:"tabList"}}),e.showCrowdSelector?a("CrowdSelector",{on:{"select-cancel":e.handleSelectCrowdCancel,"select-end":e.handleSelectCrowdEnd}}):e._e()],1)],1),"tab"===e.activePage?a("PageContentWrapper",[a("TabInfo",{attrs:{"title-prefix":e.title,id:e.embedTab.id,version:e.embedTab.version,"init-mode":e.embedTab.mode},on:{"upsert-end":e.handleTabEmbedBack,"go-back":e.handleTabEmbedBack}})],1):e._e()],1)},tu=[],au=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Table",{staticStyle:{"margin-top":"10px"},attrs:{data:e.value,header:e.tableHeader,props:{border:!0},selectionType:"none"}})},iu=[],nu={data:function(){return{table:{props:{border:!0}}}},components:{Table:W["Table"],InputOrder:Yc},computed:{tableHeader:function(){var e=this,t=(this.header||[]).slice(),a={label:"排序",width:100,render:function(t,a){var i=a.$index;return e.readonly?i+1:t(Yc,{key:i+Math.random().toString(),props:{value:i+1},on:{input:function(t){e.handleChangeOrder(i,t)}}})}},i={label:"操作",width:80,render:function(t,a){var i=a.$index;a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handleRemoveRow(i)}}},"删除")}};return t.unshift(a),this.hideAction||t.push(i),t}},props:["value","header","hideAction","readonly"],methods:{handleChangeOrder:function(e,t){var a=this.value;t>a.length&&(t=a.length);var i=t-1,n=e,o=a[n];a.splice(n,1),this.$emit("input",[].concat(a.slice(0,i),o,a.slice(i)))},handleRemoveRow:function(e){var t=this.value.slice();t.splice(e,1),this.$emit("input",t)},handleAppendData:function(e,t){var a=this.value,i=e,n=e.reduce(function(e,a,i){return e[a[t]]=i,e},{}),o=[];a.forEach(function(e){var a=n[e[t]];void 0!==a&&(o.push(e),i[a]=void 0)}),this.$emit("input",o.concat(i.filter(function(e){return e})))}}},ou=nu,lu=Object(K["a"])(ou,au,iu,!1,null,null,null),ru=lu.exports,su=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("PageWrapper",{staticClass:"tab-info-wrapper"},[a("PageContentWrapper",{directives:[{name:"show",rawName:"v-show",value:"tab_info"===e.activePage,expression:"activePage === 'tab_info'"}]},[a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("CommonContent",{ref:"commonContent",attrs:{mode:e.mode,"resource-info":e.resourceInfo},on:{replicate:function(t){e.mode="replicate"},edit:function(t){e.mode="edit"},unaudit:e.fetchData,shelves:e.fetchData,audit:function(t){return e.$emit("upsert-end")},"submit-audit":e.handleSubmitAudit,"save-draft":e.handleSaveDraft,"select-version":e.fetchData}},["read"!==e.mode?[a("el-form",{ref:"tabForm",attrs:{rules:e.rules,model:e.tabInfo,"label-width":"170px"}},[a("div",{staticClass:"form-legend-header",on:{click:function(t){e.isCollapseBase=!e.isCollapseBase}}},[e.isCollapseBase?a("i",{staticClass:"el-icon-arrow-down"}):a("i",{staticClass:"el-icon-arrow-up"}),a("span",[e._v("基本信息")])]),a("div",{style:{display:e.isCollapseBase?"none":"block"}},[a("el-form-item",{attrs:{label:"版面名称",prop:"tabName"}},[a("el-input",{model:{value:e.tabInfo.tabName,callback:function(t){e.$set(e.tabInfo,"tabName","string"===typeof t?t.trim():t)},expression:"tabInfo.tabName"}})],1),a("el-form-item",{attrs:{label:"TAB标题(中文)",prop:"tabCnTitle"}},[a("el-input",{model:{value:e.tabInfo.tabCnTitle,callback:function(t){e.$set(e.tabInfo,"tabCnTitle","string"===typeof t?t.trim():t)},expression:"tabInfo.tabCnTitle"}})],1),a("el-form-item",{attrs:{label:"TAB标题(英文)",prop:"tabEnTitle"}},[a("el-input",{model:{value:e.tabInfo.tabEnTitle,callback:function(t){e.$set(e.tabInfo,"tabEnTitle","string"===typeof t?t.trim():t)},expression:"tabInfo.tabEnTitle"}})],1),a("el-form-item",{attrs:{label:"业务分类",prop:"tabCategory"}},[a("cc-business-type-selector",{attrs:{value:e.tabInfo.tabCategory},on:{input:e.handleChangeTabCategory}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showSystemDefault,expression:"showSystemDefault"}],attrs:{label:"系统默认",prop:"systemDefault"}},[a("el-switch",{attrs:{"on-text":"是","off-text":"否",value:!!e.tabInfo.systemDefault},on:{input:function(t){e.tabInfo.systemDefault=t?1:0}}})],1),a("el-form-item",{attrs:{label:"AppId",prop:"tabAppid"}},[a("cc-appid-selector",{attrs:{disabled:-1!==e.tabInfo.tabAppid},model:{value:e.tabInfo.tabAppid,callback:function(t){e.$set(e.tabInfo,"tabAppid",t)},expression:"tabInfo.tabAppid"}})],1),e.hasSource?a("el-form-item",{attrs:{label:"内容源",prop:"tabResource"}},[a("SourceRadioSelector",{attrs:{value:e.tabInfo.tabResource,disabled:e.isReplicate},on:{input:e.handleChangeSource}})],1):e._e(),a("el-form-item",{attrs:{label:"TAB对应的icon",prop:"pictureName"}},[a("el-button",{on:{click:e.handleSelectIconStart}},[e._v("选择")]),e.tabInfo.iconTypeName?a("span",[e._v("\n                          已选择： "+e._s(e.tabInfo.iconTypeName)+"\n                      ")]):e._e()],1),a("el-form-item",{attrs:{label:"标题图片"}},[a("cc-global-picture-selector",{attrs:{title:"选择素材","picture-resolution":"178*80"},on:{"select-end":function(t){return e.handleSelectTitleIcon("imgOnSelected",t)}}},[a("el-form-item",{staticClass:"tab-title-icon-wrapper",attrs:{prop:"imgOnSelected"}},[e.tabInfo.imgOnSelected?a("img",{attrs:{src:e.tabInfo.imgOnSelected}}):e._e(),a("div",{staticClass:"tab-title-icon__title"},[e._v("\n                                  选中\n                              ")])])],1),a("cc-global-picture-selector",{attrs:{title:"选择素材","picture-resolution":"178*80"},on:{"select-end":function(t){return e.handleSelectTitleIcon("imgOnFocus",t)}}},[a("el-form-item",{staticClass:"tab-title-icon-wrapper",attrs:{prop:"imgOnFocus"}},[e.tabInfo.imgOnFocus?a("img",{attrs:{src:e.tabInfo.imgOnFocus}}):e._e(),a("div",{staticClass:"tab-title-icon__title"},[e._v("\n                                  落焦\n                              ")])])],1),a("cc-global-picture-selector",{attrs:{title:"选择素材","picture-resolution":"178*80"},on:{"select-end":function(t){return e.handleSelectTitleIcon("imgOnBlur",t)}}},[a("el-form-item",{staticClass:"tab-title-icon-wrapper",attrs:{prop:"imgOnBlur"}},[e.tabInfo.imgOnBlur?a("img",{attrs:{src:e.tabInfo.imgOnBlur}}):e._e(),a("div",{staticClass:"tab-title-icon__title"},[e._v("\n                                  非落焦\n                              ")])])],1)],1),a("el-form-item",{attrs:{label:"自动化推荐",prop:"autoPromotion"}},[a("el-radio-group",{model:{value:e.tabInfo.autoPromotion,callback:function(t){e.$set(e.tabInfo,"autoPromotion",t)},expression:"tabInfo.autoPromotion"}},e._l(e.PROMOTIONS,function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),a("el-form-item",{attrs:{label:"固定刷新时间",prop:"timeCycle"}},[a("div",{staticClass:"el-input",staticStyle:{"max-width":"400px"}},[a("cc-time-spinner",{attrs:{options:{min:"00:05",height:32}},model:{value:e.tabInfo.timeCycle,callback:function(t){e.$set(e.tabInfo,"timeCycle",t)},expression:"tabInfo.timeCycle"}})],1)])],1),a("div",{staticClass:"form-legend-header",on:{click:function(t){e.isCollapseExtend=!e.isCollapseExtend}}},[e.isCollapseExtend?a("i",{staticClass:"el-icon-arrow-down"}):a("i",{staticClass:"el-icon-arrow-up"}),a("span",[e._v("扩展参数")])]),a("div",{style:{display:e.isCollapseExtend?"none":"block"}},[a("el-form-item",{attrs:{label:"版面属性",prop:"tabType"}},[a("el-radio-group",{attrs:{disabled:e.isReplicate},model:{value:e.tabInfo.tabType,callback:function(t){e.$set(e.tabInfo,"tabType",t)},expression:"tabInfo.tabType"}},e._l(e.TAB_TYPES,function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v(e._s(t.label))])}),1)],1),1===e.tabInfo.tabType?[a("el-form-item",{attrs:{label:"是否二级版面",prop:"hasSubTab"}},[a("el-switch",{attrs:{disabled:e.isReplicate,value:!!e.tabInfo.hasSubTab,"on-text":"是","off-text":"否"},on:{input:function(t){e.tabInfo.hasSubTab=t?1:0}}})],1),1===e.tabInfo.hasSubTab?a("el-form-item",{attrs:{label:"是否支持记忆",prop:"flagIsRecord"}},[a("el-switch",{attrs:{value:!!e.tabInfo.flagIsRecord,"on-text":"是","off-text":"否"},on:{input:function(t){e.tabInfo.flagIsRecord=t?1:0}}})],1):e._e(),a("el-form-item",{attrs:{label:"活动浮窗",prop:"floatWindow"}},[a("cc-float-window-selector",{attrs:{params:e.floatWindowParams},on:{"select-end":e.handleSelectFloatWindowEnd}}),e.tabInfo.activityFloatWindow?[e._v("\n                              已选择: "+e._s(e.tabInfo.activityFloatWindow.pluginName)+" \n                              "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleRemoveFloatWindow}},[e._v(" 删除 ")])]:e._e()],2),1===e.tabInfo.hasSubTab?a("el-form-item",{attrs:{label:"选择版面"}},[a("cc-tab-selector-el",{ref:"tabSelector",attrs:{source:e.tabInfo.tabResource,"has-sub-tab":0},on:{"select-start":e.handleSelectTabStart,"select-end":e.handleSelectTabEnd}}),a("el-button",{attrs:{type:"warning"},on:{click:e.handleCreateTab}},[e._v("新建版面")]),a("div",[a("OrderableTable",{ref:"subTabTable",attrs:{header:e.subTabTableHeader},model:{value:e.tabInfo.tabList,callback:function(t){e.$set(e.tabInfo,"tabList",t)},expression:"tabInfo.tabList"}})],1)],1):e._e()]:e._e(),2===e.tabInfo.tabType?[a("el-form-item",{attrs:{label:"活动浮窗",prop:"floatWindow"}},[a("cc-float-window-selector",{attrs:{params:e.floatWindowParams},on:{"select-end":e.handleSelectFloatWindowEnd}}),e.tabInfo.activityFloatWindow?[e._v("\n                              已选择: "+e._s(e.tabInfo.activityFloatWindow.pluginName)+" \n                              "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleRemoveFloatWindow}},[e._v(" 删除 ")])]:e._e()],2)]:e._e(),0===e.tabInfo.hasSubTab?a("el-form-item",{attrs:{label:"选择板块"}},[a("div",{staticClass:"tab-info__virtual-tab-menu",style:{visibility:e.isPanelDragging?"hidden":"visible"}},[a("Affix",{staticStyle:{width:"840px",display:"inline-block",background:"#fff","z-index":"1"},attrs:{"relative-element-selector":".tab-info__virtual-tab","scroll-container-selector":".el-main",offset:{top:128,bottom:50}}},[a("cc-panel-selector-el",{ref:"panelSelector",attrs:{source:e.tabInfo.tabResource},on:{"select-end":e.handleSelectPanelEnd}}),a("el-dropdown",[a("el-button",{attrs:{type:"warning"}},[e._v("\n                                      新建"),a("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(t){return e.openPannelWin(1)}}},[e._v("常规版块")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.openPannelWin(3)}}},[e._v("业务专辑")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.openPannelWin(5)}}},[e._v("专属影院")])],1)],1),a("el-button",{on:{click:function(t){return e.handleToggleAllPanel(!1)}}},[e._v("\n                                  展开所有\n                              ")]),a("el-button",{on:{click:function(t){return e.handleToggleAllPanel(!0)}}},[e._v("\n                                  收起所有\n                              ")])],1)],1),a("cc-virtual-tab",{ref:"virtualTab",staticClass:"tab-info__virtual-tab",attrs:{panels:e.tabInfo.pannelList,"panel-data":e.panelListIndexed,width:840,ratio:.4,"show-title":!0},on:{"insert-panel":e.handleInsertPanel,"reorder-panel":e.handleReOrderPanel,"remove-panel":e.handleRemovePanel,"change-crowd":e.handleChangeCrowdOfPanel,"toggle-type":e.handleTogglePanelType,collapse:e.handleChangeCollapseState,uncollapse:e.handleChangeCollapseState,"open-panel":e.handlePreviewPanel,"change-panel-order-start":e.handleChangePanelOrderStart,"change-panel-order-end":e.handleChangePanelOrderEnd,"click-block":e.handleClickBlock,"drag-start":e.handleDragStart,"drag-end":e.handleDragEnd,"show-all-panel":e.handleShowAllPanels}})],1):e._e()],2),2===e.tabInfo.tabType?[a("div",{staticClass:"form-legend-header",on:{click:function(t){e.isCollapseSpec=!e.isCollapseSpec}}},[e.isCollapseSpec?a("i",{staticClass:"el-icon-arrow-down"}):a("i",{staticClass:"el-icon-arrow-up"}),a("span",[e._v("专题配置")])]),a("div",{style:{display:e.isCollapseSpec||e.isPanelDragging?"none":"block"}},[a("el-form-item",{attrs:{label:"是否显示会员",prop:"isShowvip"}},[a("el-switch",{attrs:{value:!!e.tabInfo.isShowvip,"on-text":"是","off-text":"否"},on:{input:function(t){e.tabInfo.isShowvip=!!t}}})],1),a("el-form-item",{attrs:{label:"专题版面大背景",prop:"alumbTabBg"}},[a("cc-global-picture-selector",{attrs:{title:"选择素材","picture-resolution":"1920*1080"},on:{"select-end":e.handleSelectBgEnd}}),e.tabInfo.alumbTabBg?a("div",{staticClass:"image-preview-wrapper"},[a("img",{staticClass:"image-preview",attrs:{src:e.tabInfo.alumbTabBg}})]):e._e()],1),a("el-form-item",{attrs:{label:"专题版面长图背景图",prop:"alumbTabLongBg"}},[a("cc-global-picture-selector",{attrs:{title:"选择长图素材","query-long-poster":1},on:{"select-end":e.handleSelectLongBgEnd}}),e._v("长图下最多支持6个板块\n                          "),e.tabInfo.alumbTabLongBg?a("div",{staticClass:"image-preview-wrapper image-preview-wrapper--long"},[a("img",{staticClass:"image-preview",attrs:{src:e.tabInfo.alumbTabLongBg}}),a("i",{staticClass:"el-icon el-icon-close",attrs:{title:"移除"},on:{click:function(t){e.tabInfo.alumbTabLongBg=void 0}}})]):e._e()],1),a("el-form-item",{attrs:{label:"版面简介显示高"}},[a("el-input-number",{attrs:{min:0,max:880,step:1},model:{value:e.tabInfo.sinkSize,callback:function(t){e.$set(e.tabInfo,"sinkSize",e._n(t))},expression:"tabInfo.sinkSize"}}),e._v(" 注:数值范围0-880\n                      ")],1),a("el-form-item",{attrs:{label:"板块标题颜色"}},[a("el-color-picker",{model:{value:e.tabInfo.pannelTitleColor,callback:function(t){e.$set(e.tabInfo,"pannelTitleColor",t)},expression:"tabInfo.pannelTitleColor"}})],1),a("el-form-item",{attrs:{label:"推荐位字体颜色(落焦)"}},[a("el-color-picker",{model:{value:e.tabInfo.blockTitleFocusColor,callback:function(t){e.$set(e.tabInfo,"blockTitleFocusColor",t)},expression:"tabInfo.blockTitleFocusColor"}})],1),a("el-form-item",{attrs:{label:"推荐位字体颜色(非落焦)"}},[a("el-color-picker",{model:{value:e.tabInfo.blockTitleUnfocusColor,callback:function(t){e.$set(e.tabInfo,"blockTitleUnfocusColor",t)},expression:"tabInfo.blockTitleUnfocusColor"}})],1)],1)]:e._e()],2),e.showIconSelector?a("cc-icon-selector",{on:{"select-cancel":e.handleSelectIconCancel,"select-end":e.handleSelectIconEnd}}):e._e(),e.showCrowdSelector?a("cc-crowd-selector",{on:{"select-cancel":e.handleSelectCrowdCancel,"select-end":e.handleSelectCrowdEnd}}):e._e()]:e._e(),"read"===e.mode?[a("el-form",{ref:"tabForm",attrs:{rules:e.rules,model:e.tabInfo,"label-width":"170px"}},[a("div",{staticClass:"form-legend-header",on:{click:function(t){e.isCollapseBase=!e.isCollapseBase}}},[e.isCollapseBase?a("i",{staticClass:"el-icon-arrow-down"}):a("i",{staticClass:"el-icon-arrow-up"}),a("span",[e._v("基本信息")])]),a("div",{style:{display:e.isCollapseBase?"none":"block"}},[a("el-form-item",{attrs:{label:"版面名称",prop:"tabName"}},[e._v("\n                      "+e._s(e.tabInfo.tabName)+"\n                  ")]),a("el-form-item",{attrs:{label:"TAB标题(中文)",prop:"tabCnTitle"}},[e._v("\n                      "+e._s(e.tabInfo.tabCnTitle)+"\n                  ")]),a("el-form-item",{attrs:{label:"TAB标题(英文)",prop:"tabEnTitle"}},[e._v("\n                      "+e._s(e.tabInfo.tabEnTitle)+"\n                  ")]),a("el-form-item",{attrs:{label:"业务分类",prop:"tabCategory"}},[a("cc-business-type-selector",{attrs:{"is-read":!0},model:{value:e.tabInfo.tabCategory,callback:function(t){e.$set(e.tabInfo,"tabCategory",t)},expression:"tabInfo.tabCategory"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showSystemDefault,expression:"showSystemDefault"}],attrs:{label:"系统默认",prop:"systemDefault"}},[e._v("\n                      "+e._s(e.tabInfo.systemDefault?"是":"否")+"\n                  ")]),a("el-form-item",{attrs:{label:"AppId",prop:"tabAppid"}},[a("cc-appid-selector",{attrs:{"is-read":!0},model:{value:e.tabInfo.tabAppid,callback:function(t){e.$set(e.tabInfo,"tabAppid",t)},expression:"tabInfo.tabAppid"}})],1),e.hasSource?a("el-form-item",{attrs:{label:"内容源",prop:"tabResource"}},[e._v("\n                      "+e._s(e.$consts.sourceText[e.tabInfo.tabResource])+"\n                  ")]):e._e(),a("el-form-item",{attrs:{label:"TAB对应的icon",prop:"pictureName"}},[e.tabInfo.iconTypeName?a("span",[e._v("\n                          "+e._s(e.tabInfo.iconTypeName)+"\n                      ")]):e._e(),e.tabInfo.pictureUrl?a("div",{staticClass:"tab-icon-wrapper",on:{click:e.handleSelectIconStart}},[a("img",{attrs:{src:e.tabInfo.pictureUrl}})]):e._e()]),a("el-form-item",{attrs:{label:"标题图片"}},[a("el-form-item",{staticClass:"tab-title-icon-wrapper",attrs:{prop:"imgOnSelected"}},[e.tabInfo.imgOnSelected?a("img",{attrs:{src:e.tabInfo.imgOnSelected}}):e._e(),a("div",{staticClass:"tab-title-icon__title"},[e._v("\n                              选中\n                          ")])]),a("el-form-item",{staticClass:"tab-title-icon-wrapper",attrs:{prop:"imgOnFocus"}},[e.tabInfo.imgOnFocus?a("img",{attrs:{src:e.tabInfo.imgOnFocus}}):e._e(),a("div",{staticClass:"tab-title-icon__title"},[e._v("\n                              落焦\n                          ")])]),a("el-form-item",{staticClass:"tab-title-icon-wrapper",attrs:{prop:"imgOnBlur"}},[e.tabInfo.imgOnBlur?a("img",{attrs:{src:e.tabInfo.imgOnBlur}}):e._e(),a("div",{staticClass:"tab-title-icon__title"},[e._v("\n                              非落焦\n                          ")])])],1),a("el-form-item",{attrs:{label:"自动化推荐",prop:"autoPromotion"}},[e._v("\n                      "+e._s("movie"===e.tabInfo.autoPromotion?"影视":"无")+"\n                  ")]),a("el-form-item",{attrs:{label:"固定刷新时间",prop:"timeCycle"}},[e._v("\n                      "+e._s(e.parseMinToStr(e.tabInfo.timeCycle))+"\n                  ")])],1),a("div",{staticClass:"form-legend-header",on:{click:function(t){e.isCollapseExtend=!e.isCollapseExtend}}},[e.isCollapseExtend?a("i",{staticClass:"el-icon-arrow-down"}):a("i",{staticClass:"el-icon-arrow-up"}),a("span",[e._v("配置内容")])]),a("div",{style:{display:e.isCollapseExtend?"none":"block"}},[a("el-form-item",{attrs:{label:"版面属性",prop:"tabType"}},[e._v("\n                      "+e._s(1===e.tabInfo.tabType?"普通版面":"专题版面")+"\n                  ")]),1===e.tabInfo.tabType?[a("el-form-item",{attrs:{label:"是否二级版面",prop:"hasSubTab"}},[e._v("\n                          "+e._s(1===e.tabInfo.hasSubTab?"是":"否")+"\n                      ")]),1===e.tabInfo.hasSubTab?a("el-form-item",{attrs:{label:"是否支持记忆",prop:"flagIsRecord"}},[e._v("\n                          "+e._s(1===e.tabInfo.flagIsRecord?"是":"否")+"\n                      ")]):e._e(),a("el-form-item",{attrs:{label:"活动浮窗",prop:"floatWindow"}},[e.tabInfo.activityFloatWindow?[e._v("\n                              "+e._s(e.tabInfo.activityFloatWindow.pluginName)+" \n                          ")]:e._e()],2),1===e.tabInfo.hasSubTab?a("el-form-item",{attrs:{label:"选择版面"}},[a("div",[a("el-table",{staticStyle:{"margin-top":"20px","max-width":"80%"},attrs:{data:e.tabInfo.tabList,border:""}},[a("el-table-column",{attrs:{prop:"",label:"排序",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                          "+e._s(t.$index+1)+"\n                                      ")]}}],null,!1,3691268729)}),a("el-table-column",{attrs:{prop:"tabId",label:"版面ID",width:"180"}}),a("el-table-column",{attrs:{prop:"tabName",label:"版面名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.handlePreviewTab(t.row,t.row.currentVersion,t.$index)}}},[e._v("\n                                          "+e._s(t.row.tabName)+"\n                                      ")])]}}],null,!1,353978914)}),a("el-table-column",{attrs:{prop:"duplicateVersion",label:"待审核副本",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.duplicateVersion?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.handlePreviewTab(t.row,t.row.duplicateVersion,t.$index)}}},[e._v("\n                                          "+e._s(t.row.duplicateVersion)+"\n                                      ")]):e._e()]}}],null,!1,3748695571)})],1)],1)]):e._e()]:e._e(),2===e.tabInfo.tabType?[a("el-form-item",{attrs:{label:"活动浮窗",prop:"floatWindow"}},[e.tabInfo.activityFloatWindow?[e._v("\n                              "+e._s(e.tabInfo.activityFloatWindow.pluginName)+" \n                          ")]:e._e()],2)]:e._e(),0===e.tabInfo.hasSubTab?a("el-form-item",{attrs:{label:"选择板块"}},[a("div",{staticClass:"tab-info__virtual-tab-menu"},[a("affix",{staticStyle:{width:"840px",display:"inline-block",background:"#fff","z-index":"1"},attrs:{"relative-element-selector":".tab-info__virtual-tab","scroll-container-selector":".el-main",offset:{top:128,bottom:50}}},[a("el-button",{on:{click:function(t){return e.handleToggleAllPanel(!1)}}},[e._v("\n                                  展开所有\n                              ")]),a("el-button",{on:{click:function(t){return e.handleToggleAllPanel(!0)}}},[e._v("\n                                  收起所有\n                              ")])],1)],1),a("cc-virtual-tab",{staticClass:"tab-info__virtual-tab",attrs:{panels:e.tabInfo.pannelList,"panel-data":e.panelListIndexed,"read-only":!0,width:840,ratio:.4,"show-title":!0},on:{"open-panel":e.handlePreviewPanel,"click-block":e.handleClickBlock,collapse:e.handleChangeCollapseState,uncollapse:e.handleChangeCollapseState}})],1):e._e(),2===e.tabInfo.tabType?[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("专题配置")])]),a("el-form-item",{attrs:{label:"是否显示会员",prop:"isShowvip"}},[e._v("\n                          "+e._s(e.tabInfo.isShowvip?"是":"否")+"\n                      ")]),a("el-form-item",{attrs:{label:"专题版面大背景",prop:"alumbTabBg"}},[e.tabInfo.alumbTabBg?a("img",{staticClass:"image-preview",attrs:{src:e.tabInfo.alumbTabBg}}):e._e()]),a("el-form-item",{attrs:{label:"专题版面长图背景",prop:"alumbTabLongBg"}},[e.tabInfo.alumbTabLongBg?a("img",{staticClass:"image-preview",attrs:{src:e.tabInfo.alumbTabLongBg}}):e._e()]),a("el-form-item",{attrs:{label:"版面简介显示高"}},[e._v("\n                          "+e._s(e.tabInfo.sinkSize)+"\n                      ")]),a("el-form-item",{attrs:{label:"板块标题颜色"}},[a("input",{attrs:{disabled:"",type:"color"},domProps:{value:e.tabInfo.pannelTitleColor}})]),a("el-form-item",{attrs:{label:"推荐位字体颜色(落焦)"}},[a("input",{attrs:{disabled:"",type:"color"},domProps:{value:e.tabInfo.blockTitleFocusColor}})]),a("el-form-item",{attrs:{label:"推荐位字体颜色(非落焦)"}},[a("input",{attrs:{disabled:"",type:"color"},domProps:{value:e.tabInfo.blockTitleUnfocusColor}})])]:e._e()],2)])]:e._e()],2)],1)],1),"tab"===e.activePage?a("PageContentWrapper",[a("TabInfo",{attrs:{"title-prefix":e.title,id:e.embedTab.id,version:e.embedTab.version,"init-mode":e.embedTab.mode},on:{"upsert-end":e.handleTabEmbedBack,"go-back":function(t){e.activePage="tab_info"}}})],1):e._e()],1)},cu=[],uu={props:["element"],render:function(e){return e(this.element||"div",{class:"cc-var"},this.$scopedSlots.default(this.$vnode.data.attrs))}},du=uu,pu=Object(K["a"])(du,vi,yi,!1,null,null,null),hu=pu.exports,mu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-radio-group",{attrs:{value:e.value,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.$consts.sourceOptions,function(t,i){return a("el-radio",{key:i,attrs:{label:t.value}},[e._v("\n      "+e._s(t.label)+"\n    ")])}),1)},fu=[],bu={props:["value","disabled"]},gu=bu,vu=Object(K["a"])(gu,mu,fu,!1,null,null,null),yu=vu.exports,wu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-card"},[void 0!==e.title?a("div",{staticClass:"content-card__header"},[e._v("\n        "+e._s(e.title)+"\n        "),a("div",{staticClass:"actions"},[e._t("actions",[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.$emit("go-back")}}},[e._v("返回")])])],2)]):e._e(),a("div",{staticClass:"content-card__main"},[e._t("default")],2)])},Iu=[],Tu={props:["title"]},Su=Tu,Cu=(a("886e"),Object(K["a"])(Su,wu,Iu,!1,null,"1399a9d3",null)),ku=Cu.exports,_u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("remote-selector-wrapper",{staticClass:"cc-tab-selector",attrs:{title:"选择板块"},on:{"select-start":e.fetchData,"select-end":e.handleSelectEnd}},[a("div",{attrs:{slot:"filter"},slot:"filter"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-select",{model:{value:e.filter.pannelType,callback:function(t){e.$set(e.filter,"pannelType",t)},expression:"filter.pannelType"}},[a("el-option",{attrs:{value:1,label:"内容板块"}}),a("el-option",{attrs:{value:3,label:"专辑板块"}}),a("el-option",{attrs:{value:5,label:"专属影院板块"}})],1)],1),a("el-form-item",{attrs:{label:"板块ID"}},[a("el-input",{model:{value:e.filter.pannelId,callback:function(t){e.$set(e.filter,"pannelId",t)},expression:"filter.pannelId"}})],1),a("el-form-item",{attrs:{label:"板块名称"}},[a("el-input",{model:{value:e.filter.pannelName,callback:function(t){e.$set(e.filter,"pannelName",t)},expression:"filter.pannelName"}})],1),a("el-form-item",{attrs:{label:"业务分类"}},[a("el-select",{model:{value:e.filter.pannelCategory,callback:function(t){e.$set(e.filter,"pannelCategory",t)},expression:"filter.pannelCategory"}},e._l(e.panelCategoryOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.dictId,label:e.dictCnName}})}),1)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:e.filter.pannelStatus,callback:function(t){e.$set(e.filter,"pannelStatus",t)},expression:"filter.pannelStatus"}},e._l(e.panelStatusOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1),a("el-form-item",{attrs:{label:"板块组类型"}},[a("el-select",{model:{value:e.filter.parentType,callback:function(t){e.$set(e.filter,"parentType",t)},expression:"filter.parentType"}},e._l(e.parentTypeOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1),a("el-form-item",{attrs:{label:"数据来源"}},[a("el-select",{model:{value:e.filter.idPrefix,callback:function(t){e.$set(e.filter,"idPrefix",t)},expression:"filter.idPrefix"}},[a("el-option",{attrs:{label:"酷开",value:"10"}}),a("el-option",{attrs:{label:"江苏广电",value:"11"}})],1)],1)],1),a("div",{staticClass:"filter-form__actions"},[a("el-button",{attrs:{type:"primary"},on:{click:e.fetchData}},[e._v("查询")]),a("el-button",{attrs:{type:"warning"},on:{click:e.handleResetFilter}},[e._v("重置")])],1)],1),a("Table",{attrs:{slot:"item-list",data:e.table.data,header:e.table.header,selected:e.table.selected,props:e.table.props,"selection-type":e.selectionType||e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-add":e.handleTableRowSelectionAdd,"row-selection-remove":e.handleTableRowSelectionRemove,"row-selection-change":e.handleTableRowSelectionChange,"all-row-selection-change":e.handleTableAllRowSelectionChange},slot:"item-list"}),a("el-pagination",{attrs:{slot:"pagination","current-page":e.pagination.page,"page-sizes":[15,20,30],"page-size":e.pagination.rows,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":function(t){e.pagination.rows=t},"current-change":function(t){e.pagination.page=t}},slot:"pagination"})],1)},Pu=[],xu={components:{Table:W["Table"],RemoteSelectorWrapper:Nc},data:function(){var e=this.$consts.statusOptions.filter(function(e){return[3,4,7].indexOf(e.value)>-1}),t=e.reduce(function(e,t){return e[t.value]=t.label,e},{});return{options:[],panelCategoryOptions:[],pannelCategoryOptionsIndexed:{},panelStatusOptions:e,panelStatusOptionsIndexed:t,parentTypeOptions:[{label:"分组板块",value:"group"},{label:"功能板块",value:"function"}],pagination:{page:1,rows:15,total:0},filter:{idPrefix:window.$idPrefix,pannelType:1,panelId:void 0,pannelName:void 0,pannelCategory:void 0,pannelStatus:void 0,parentType:void 0,pannelResource:void 0,resourceIsNull:!0},table:{data:[],selected:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark","show-overflow-tooltip":!0,width:200},{label:"业务分类",width:100,render:function(e,t){return this.pannelCategoryOptionsIndexed[t.row.pannelCategory]}.bind(this)},{label:"布局",width:200,prop:"fullLayoutName","show-overflow-tooltip":!0},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"状态",render:function(e,t){return this.panelStatusOptionsIndexed[t.row.pannelStatus]}.bind(this)},{prop:"lastUpdateDate",label:"更新时间",width:190},{prop:"userName",label:"更新人",width:120}],selectionType:"multiple",props:{"tooltip-effect":"dark"}},selected:[],originSelected:[]}},props:["source","selectionType"],watch:{"pagination.page":"fetchData","pagination.rows":"fetchData"},methods:{handleResetFilter:function(){this.filter={idPrefix:window.$idPrefix,pannelType:1,panelId:void 0,pannelName:void 0,pannelCategory:void 0,pannelStatus:void 0,parentType:void 0,pannelResource:void 0,resourceIsNull:!0},this.fetchData()},handleShadowDragStart:function(){setTimeout(function(){this.isDragging=!0}.bind(this),0)},handleShadowDragEnd:function(){this.isDragging=!1},handleClose:function(){this.selected=this.originSelected.slice(),this.updateTableSelected(),this.$emit("select-cancel")},handleSelectEnd:function(){this.$emit("select-end",this.selected.slice())},fetchData:function(){var e=this,t=JSON.parse(JSON.stringify(this.filter)),a=this.pagination;t.page=a.page,t.rows=a.rows,t.pannelStatus||(t.multiStatus="3,4"),t.pannelResource=this.source,this.$service.panelPageList(t).then(function(t){e.table.data=t.rows,e.pagination.total=t.total})},handleTableRowSelectionChange:function(e,t){this.selected=[{id:e.pannelGroupId,label:e.pannelGroupRemark,data:e}],this.table.selected=t},handleTableRowSelectionAdd:function(e){this.selected=this.selected.concat({id:e.pannelGroupId,label:e.pannelGroupRemark,data:e}),this.updateTableSelected()},handleTableRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t.id!==e.pannelGroupId}),this.updateTableSelected()},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.id});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.pannelGroupId)>-1&&e.push(i),e},[])},handleRemoteSelectClear:function(){this.selected=[],this.table.selected=[]},handleTableAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleTableRowSelectionAdd):this.handleRemoteSelectClear()}},created:function(){var e=this;this.$service.getBusinessType().then(function(t){e.panelCategoryOptions=t,e.pannelCategoryOptionsIndexed=t.reduce(function(e,t){return e[t.dictId]=t.dictCnName,e},{})})}},Du=xu,Fu=(a("6842"),Object(K["a"])(Du,_u,Pu,!1,null,null,null)),$u=Fu.exports,Ru=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isRead?a("span",[e._v("\n    "+e._s(e.valueLabel)+"\n")]):a("el-select",{attrs:{value:e.value},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.options,function(e,t){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)},Lu=[],Nu={data:function(){return{options:[]}},computed:{valueLabel:function(){var e=this.value,t=this.options;if(e&&t){var a=t.find(function(t){return t.value===e});if(a)return a.label}}},props:["value","isRead"],methods:{},created:function(){var e=this;this.$service.getBusinessType().then(function(t){e.options=t.map(function(e){return{label:e.dictCnName,value:e.dictId}})})}},Ou=Nu,Au=Object(K["a"])(Ou,Ru,Lu,!1,null,null,null),Eu=Au.exports,Vu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isRead?a("span",[e._v("\n    "+e._s(e.valueLabel)+"\n")]):a("el-select",{attrs:{value:e.value,disabled:e.disabled},on:{input:function(t){return e.$emit("input",t)}}},e._l(e.options,function(e,t){return a("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)},Mu=[],Bu={data:function(){return{options:[]}},computed:{valueLabel:function(){var e=this.value,t=this.options;if(void 0!==e&&t){var a=t.find(function(t){return t.value===e});if(a)return a.label}}},props:["value","isRead","disabled"],methods:{},created:function(){var e=this;this.$service.getAppIdType().then(function(t){e.options=t.map(function(e){return{label:e.dictCnName,value:+e.dictEnName}})})}},Uu=Bu,ju=Object(K["a"])(Uu,Vu,Mu,!1,null,null,null),Hu=ju.exports,qu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("remote-selector-wrapper",{staticClass:"cc-tab-selector",attrs:{title:"选择版面"},on:{"select-end":e.handleSelectEnd}},[a("div",{attrs:{slot:"filter"},slot:"filter"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"版面ID"}},[a("el-input",{model:{value:e.filter.tabId,callback:function(t){e.$set(e.filter,"tabId",t)},expression:"filter.tabId"}})],1),a("el-form-item",{attrs:{label:"版面名称"}},[a("el-input",{model:{value:e.filter.tabName,callback:function(t){e.$set(e.filter,"tabName",t)},expression:"filter.tabName"}})],1),a("el-form-item",{attrs:{label:"版面分类"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.filter.tabCategory,callback:function(t){e.$set(e.filter,"tabCategory",t)},expression:"filter.tabCategory"}},e._l(e.tabCategoryOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.dictId,label:e.dictCnName}})}),1)],1),a("el-form-item",{attrs:{label:"版面属性",clearable:!0}},[a("el-select",{model:{value:e.filter.tabType,callback:function(t){e.$set(e.filter,"tabType",t)},expression:"filter.tabType"}},e._l(e.tabTypeOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1),a("el-form-item",{attrs:{label:"审核状态"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.filter.tabStatusArray,callback:function(t){e.$set(e.filter,"tabStatusArray",t)},expression:"filter.tabStatusArray"}},e._l(e.tabStatusOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:void 0===e.source,expression:"source === undefined"}],attrs:{label:"内容源"}},[a("el-select",{attrs:{clearable:!0},model:{value:e.filter.tabResource,callback:function(t){e.$set(e.filter,"tabResource",t)},expression:"filter.tabResource"}},e._l(e.tabResourceOptions,function(e,t){return a("el-option",{key:t,attrs:{value:e.value,label:e.label}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:10!=e.idPrefix,expression:"idPrefix != 10"}],attrs:{label:"数据来源"}},[a("el-select",{model:{value:e.filter.idPrefix,callback:function(t){e.$set(e.filter,"idPrefix",t)},expression:"filter.idPrefix"}},[a("el-option",{attrs:{label:"酷开",value:"10"}}),a("el-option",{attrs:{label:"江苏广电",value:"11"}})],1)],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:e.fetchData}},[e._v("查询")])],1),a("Table",{attrs:{slot:"item-list",data:e.table.data,header:e.table.header,selected:e.table.selected,props:e.table.props,"selection-type":e.selectionType||e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-add":e.handleTableRowSelectionAdd,"row-selection-remove":e.handleTableRowSelectionRemove,"row-selection-change":e.handleTableRowSelectionChange,"all-row-selection-change":e.handleTableAllRowSelectionChange},slot:"item-list"}),a("el-pagination",{attrs:{slot:"pagination","current-page":e.pagination.page,"page-sizes":[15,20,30],"page-size":e.pagination.rows,layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":function(t){e.pagination.rows=t},"current-change":function(t){e.pagination.page=t}},slot:"pagination"})],1)},Wu=[],Gu={components:{Table:W["Table"],RemoteSelectorWrapper:Nc},data:function(){return{idPrefix:window.$idPrefix,options:[],visible:!1,tabTypeOptions:[{label:"普通版面",value:"1"},{label:"专题版面",value:"2"}],tabTypeIndexed:{1:"普通版面",2:"专题版面"},tabCategoryOptions:[],tabCategoryOptionsIndexed:{},tabStatusOptions:[{label:"待审核",value:3},{label:"审核通过",value:4}],tabResourceOptions:[{label:"腾讯",value:"o_tencent"},{label:"爱奇艺",value:"o_iqiyi"}],tabStatusOptionsIndexed:{3:"待审核",4:"审核通过"},pagination:{page:1,rows:15,total:0},filter:{idPrefix:window.$idPrefix,tabId:void 0,tabName:void 0,tabCategory:void 0,tabType:void 0,tabStatusArray:void 0,tabResource:void 0},table:{data:[],selected:[],header:[{label:"ID",prop:"tabId",width:120},{label:"名称",prop:"tabName","show-overflow-tooltip":!0,width:200},{label:"版面属性",width:120,render:function(e,t){return this.tabTypeIndexed[t.row.tabType]}.bind(this)},{label:"版面分类",width:150,render:function(e,t){return this.tabCategoryOptionsIndexed[t.row.tabCategory]}.bind(this)},{label:"状态",render:function(e,t){return this.tabStatusOptionsIndexed[t.row.tabStatus]}.bind(this)},{prop:"lastUpdateDate",label:"更新时间",width:190},{prop:"userName",label:"更新人",width:120}],selectionType:"multiple",props:{"tooltip-effect":"dark"}},selected:[],originSelected:[]}},props:["source","hasSubTab","selectionType","isLive"],watch:{"pagination.page":"fetchData","pagination.rows":"fetchData","table.data":"updateTableSelected",visible:"saveOriginSelected"},methods:{saveOriginSelected:function(e){e&&(this.originSelected=this.selected.slice())},handleClose:function(){this.selected=this.originSelected.slice(),this.updateTableSelected(),this.$emit("select-cancel")},handleSelectEnd:function(){this.$emit("select-end",this.selected.slice()),this.selected=[],this.table.selected=[]},fetchData:function(){var e=this,t=JSON.parse(JSON.stringify(this.filter)),a=this.pagination;t.page=a.page,t.rows=a.rows,t.tabStatusArray||(t.tabStatusArray="3,4"),void 0!==this.hasSubTab&&(t.hasSubTab=this.hasSubTab),this.source&&(t.tabResource=this.source),this.$service.tabInfoList(t).then(function(t){e.table.data=t.rows,e.pagination.total=t.total})},handleTableRowSelectionChange:function(e,t){this.selected=[{id:e.tabId,label:e.tabName,data:e}],this.table.selected=t},handleTableRowSelectionAdd:function(e){this.selected=this.selected.concat({id:e.tabId,label:e.tabName,data:e}),this.updateTableSelected()},handleTableRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t.id!==e.tabId}),this.updateTableSelected()},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.id});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.tabId)>-1&&e.push(i),e},[])},handleRemoteSelectClear:function(){this.selected=[],this.table.selected=[]},handleTableAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleTableRowSelectionAdd):this.handleRemoteSelectClear()}},created:function(){var e=this;this.$service.getBusinessType().then(function(t){e.tabCategoryOptions=t,e.tabCategoryOptionsIndexed=t.reduce(function(e,t){return e[t.dictId]=t.dictCnName,e},{})}),this.fetchData(),this.visible=!0}},zu=Gu,Ju=(a("ea41"),Object(K["a"])(zu,qu,Wu,!1,null,null,null)),Ku=Ju.exports,Xu=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("RemoteSelectorWrapper",{attrs:{title:"选择素材",filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset,"select-end":e.handleSelectEnd,"select-start":e.fetchData}},[a("CardList",{attrs:{slot:"item-list",data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-change":e.handleRowSelectionChange},slot:"item-list",scopedSlots:e._u([{key:"row",fn:function(t){var i=t.row;return a("div",{staticClass:"box-list"},[a("p",{staticClass:"list-p"},[a("img",{staticClass:"list-img",attrs:{src:i.pictureUrl}})]),a("p",{staticClass:"list-title"},[e._v(" "+e._s(i.pictureName))]),a("div",[1==i.pictureStatus?a("span",[e._v("审核通过")]):a("span",[e._v("待审核")]),a("span",[e._v(" "+e._s(i.pictureResolution))])])])}}])}),e._t("default")],2)},Yu=[],Zu={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],CardList:W["CardList"],RemoteSelectorWrapper:Nc},props:["pictureResolution"],data:function(){return{materialTypes:{},pictureStatus:{"审核通过":1,"待审核":2},picDialogVisible:!1,auditDialogVisible:!1,reviewPicUrl:null,filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},data:[],selected:void 0,selectionType:"single"}}},methods:{handleRowSelectionChange:function(e,t){this.table.selected=t},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.pictureResolution&&(t.pictureResolution=this.pictureResolution),this.$service.getResourceList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getMaterialTypes:function(){var e=this;return this.$service.getMaterialTypes().then(function(t){t.forEach(function(t){e.materialTypes[t.label]=t.id})})},handleSelectEnd:function(){var e=this.table,t=e.data,a=e.selected;this.$emit("select-end",t[a]),this.table.selected=void 0}},created:function(){var e=this,t=ne.a.map({pictureId:ne.a.o.string.other("form",{component:"Input",placeholder:"素材ID",cols:{item:3,label:0}}),pictureName:ne.a.o.string.other("form",{component:"Input",placeholder:"素材名称",cols:{item:3,label:0}}),pictureCategory:ne.a.o.enum(this.materialTypes).other("form",{component:"Select",placeholder:"素材类别",cols:{item:3,label:0}}),pictureStatus:ne.a.o.enum(this.pictureStatus).other("form",{component:"Select",placeholder:"审核状态",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getMaterialTypes().then(function(){e.filterSchema=t})}},Qu=Zu,ed=(a("c940"),Object(K["a"])(Qu,Xu,Yu,!1,null,"3c2a5377",null)),td=ed.exports,ad=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("RemoteSelectorWrapper",{attrs:{title:"选择浮窗",filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset,"select-end":e.handleSelectEnd,"select-start":e.fetchData}},[a("CardList",{attrs:{slot:"item-list",data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-change":e.handleRowSelectionChange},slot:"item-list",scopedSlots:e._u([{key:"row",fn:function(t){var i=t.row;return a("div",{staticClass:"box-list"},[a("p",{staticClass:"list-p"},[a("img",{staticClass:"list-img",attrs:{src:i.globalPicture.pictureUrl}})]),a("p",{staticClass:"list-title"},[e._v(" "+e._s(i.pluginName))]),a("div",[e._v("\n          "+e._s(i.pluginStatus)+"\n        ")])])}}])}),e._t("default")],2)},id=[],nd={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],CardList:W["CardList"],RemoteSelectorWrapper:Nc},props:{params:{type:Object,default:function(){return{}}}},data:function(){return{filter:{pluginId:void 0,pluginName:void 0},filterSchema:ne.a.map({pluginId:ne.a.o.number.other("form",{label:"功能ID",cols:{item:6,label:{offset:1,span:5},wrapper:18}}),pluginName:ne.a.o.string.other("form",{label:"功能名称",cols:{item:6,label:{offset:1,span:5},wrapper:18}})}).other("form",{layout:"inline",footer:{cols:{item:6,label:1,wrapper:23},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}}),pagination:{currentPage:1,pageSize:15},selected:[],table:{props:{},data:[],selected:void 0,selectionType:"single"}}},methods:{handleRowSelectionChange:function(e,t){this.table.selected=t},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={pluginId:void 0,pluginName:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination,a=this.params,i=a.sourceArray;return t&&(e.page=t.currentPage,e.rows=t.pageSize),i&&(e.sourceArray=i),e},fetchData:function(){var e=this,t=this.parseFilter();this.pictureResolution&&(t.pictureResolution=this.pictureResolution),this.$service.floatWindowList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},handleSelectEnd:function(){var e=this.table,t=e.data,a=e.selected;this.$emit("select-end",t[a]),this.table.selected=void 0}},created:function(){}},od=nd,ld=(a("c1bb"),Object(K["a"])(od,ad,id,!1,null,"4f06bcf0",null)),rd=ld.exports,sd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"选择 ICON",visible:!0,"before-close":e.handleClose}},[a("div",{staticClass:"icon-selector__wrapper"},e._l(e.options,function(t,i){return a("img",{class:e.selected&&e.selected.pictureId===t.pictureId?"active":"",attrs:{src:t.pictureUrl,alt:"图标",title:t.iconTypeName},on:{click:function(a){e.selected=t}}})}),0),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSelectEnd}},[e._v("确 定")])],1)])},cd=[],ud={data:function(){return{selected:void 0,options:[]}},props:["value"],template:"#cc-icon-selector-tpl",methods:{handleClose:function(){this.selected=void 0,this.$nextTick(function(){this.$emit("select-cancel")}.bind(this))},handleSelectEnd:function(){this.$emit("select-end",this.selected)}},created:function(){var e=this;this.$service.tabIconList().then(function(t){e.options=t.rows})}},dd=ud,pd=(a("c896"),Object(K["a"])(dd,sd,cd,!1,null,"fedfc7f8",null)),hd=pd.exports,md=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:10",end:"24:00"},placeholder:"选择时间"},on:{change:e.handle},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})},fd=[],bd={data:function(){return{value1:"",time:""}},methods:{parseStrToMin:function(e){var t=e.split(":"),a=parseInt(t[0]),i=parseInt(t[1]);return 60*a+i},handle:function(){void 0!=this.value1&&(this.time=this.parseStrToMin(this.value1),this.$emit("input",this.time))}}},gd=bd,vd=Object(K["a"])(gd,md,fd,!1,null,null,null),yd=vd.exports,wd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"cc-virtual-tab":!0,"collapse-all":e.isDragging},style:{width:e.width+"px"}},[e.readOnly?e._e():a("div",{staticClass:"panel-placeholder panel-placeholder__normal",on:{dragenter:e.handleDragEnter,dragleave:e.handleDragLeave,dragover:e.handleDragOver,drop:function(t){return e.handleDrop(t,{type:"NORMAL",index:-1})}}}),e._l(e.panels,function(t,i){return[a("div",{directives:[{name:"shadow-drag",rawName:"v-shadow-drag",value:{type:t.type,index:i},expression:"{type: panelItem.type, index: index}"}],class:{"tab-placeholder":!0,"tab-placeholder--normal":"NORMAL"===t.type,collapse:t.isCollapse,"is-dragable":!e.readOnly,"tab-placeholder--dragging":void 0===e.draggingCrowdIndex&&e.draggingIndex===i},on:{"shadow-drag-start":function(t){return e.handleDragStart(t,i)},"shadow-drag-end":e.handleDragEnd}},[a("div",{staticClass:"panel-group-title"},[t.isCollapse?a("i",{staticClass:"el-icon-arrow-down",on:{click:function(t){return e.handleCollapse(!1,i)}}}):a("i",{staticClass:"el-icon-arrow-up",on:{click:function(t){return e.handleCollapse(!0,i)}}}),"SPEC"===t.type?[e._v("\n                        "+e._s(e.getPanelInfo(t.crowdPanels[0]).panelTitle)+" ("+e._s(t.crowdPanels.length)+")\n                ")]:[e._v("\n                        "+e._s(e.getPanelInfo(t.panel).panelTitle)+"\n                ")],a("el-input",{key:Math.random().toString(),staticClass:"tab-placeholder__index",attrs:{size:"small",value:i+1,disabled:e.readOnly,draggable:"true"},on:{input:function(t){return e.$emit("change-panel-order-start",i,t)},blur:function(t){return e.$emit("change-panel-order-end",i)}},nativeOn:{dragstart:function(t){return e.disableDrag(t)}}}),e.readOnly?e._e():a("i",{staticClass:"tab-placeholder__group-remove el-icon-close",attrs:{title:"删除组"},on:{click:function(t){return e.handleRemovePanel(i)}}})],2),a("div",{staticClass:"panel-group-content"},["SPEC"===t.type?a("div",[e.readOnly?e._e():a("div",{staticClass:"panel-placeholder",on:{dragenter:e.handleDragEnter,dragleave:e.handleDragLeave,dragover:e.handleDragOver,drop:function(t){return e.handleDrop(t,{type:"CROWD",index:i,crowdIndex:-1})}}}),e._l(t.crowdPanels,function(n,o){return[a("cc-var",{directives:[{name:"show",rawName:"v-show",value:e.isDragging||t.isShowAll||0===o,expression:"isDragging || panelItem.isShowAll || crowdIndex === 0"},{name:"shadow-drag",rawName:"v-shadow-drag",value:{type:"CROWD",index:i,crowdIndex:o},expression:"{type: 'CROWD', index: index, crowdIndex: crowdIndex}"}],class:{"tab-placeholder__panel-wrapper":!0,"panel-duplicate":n.isDuplicate,"tab-placeholder__panel-wrapper--dragging":e.draggingCrowdIndex===o&&e.draggingIndex===i},attrs:{panel:e.getPanelInfo(n)},nativeOn:{"shadow-drag-start":function(t){return e.handleDragStart(t,i,o)},"shadow-drag-end":function(t){return e.handleDragEnd(t)}},scopedSlots:e._u([e.readOnly?null:{key:"default",fn:function(l){var r=l.panel;return[a("i",{staticClass:"tab-placeholder__panel-remove el-icon-close",attrs:{title:"删除"},on:{click:function(t){return e.handleRemovePanel(i,o)}}}),1===t.crowdPanels.length?a("a",{staticClass:"btn-crowd btn-crowd--unset",on:{click:function(t){return e.$emit("toggle-type",i)}}},[e._v("\n                                        取消定向\n                                    ")]):a("a",{staticClass:"btn-crowd btn-crowd--disabled",attrs:{title:"请将板块移出板块组，再取消定向"}},[e._v("\n                                        取消定向\n                                    ")]),a("div",{staticClass:"tab-plcacholder-info"},[a("div",{staticClass:"tab-placeholder-info__link",on:{click:function(t){return e.handleOpenPanel(r)}}},[e._v("\n                                            "+e._s(r.panelId)+"\n                                            "),a("span",{directives:[{name:"show",rawName:"v-show",value:4!==r.status,expression:"panel.status !== 4"}],staticClass:"panel-status--waiting"},[e._v("("+e._s(e.STATUS_TEXT[r.status])+")")])]),a("div",{staticClass:"tab-placeholder-info__link",on:{click:function(t){return e.handleOpenPanel(r)}}},[e._v("\n                                            "+e._s(r.panelName)+"\n                                        ")]),n.dmpInfo?a("div",{staticClass:"tab-placeholder-info__link",on:{click:function(t){return e.$emit("change-crowd",i,o)}}},[e._v("\n                                            人群: "+e._s(n.dmpInfo.crowdName)+"\n                                        ")]):e._e()]),a("div",{staticClass:"tab-placeholder__panel"},[a("div",{staticClass:"tab-placeholder__panel-title",on:{click:function(t){return e.handleOpenPanel(r)}}},[e._v("\n                                            "+e._s(r.panelTitle)+"\n                                        ")]),a("cc-virtual-panel-group",{key:o,attrs:{panel:e.panelData[n.id],ratio:e.ratio,active:n.activeIndex,"show-title":e.showTitle},on:{activate:function(t){return e.handleActivate(n,t)},"click-block":function(t){return e.handleClickBlock({index:i,crowdIndex:o,activeIndex:arguments[0],blockIndex:arguments[1]})}}})],1)]}}],null,!0)}),e.readOnly?e._e():a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging||t.isShowAll||0===o,expression:"isDragging || panelItem.isShowAll || crowdIndex === 0"}],staticClass:"panel-placeholder",on:{dragenter:e.handleDragEnter,dragleave:e.handleDragLeave,dragover:e.handleDragOver,drop:function(t){return e.handleDrop(t,{type:"CROWD",index:i,crowdIndex:o})}}})]}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isDragging&&!t.isShowAll&&t.crowdPanels.length>1,expression:"!isDragging && !panelItem.isShowAll && panelItem.crowdPanels.length > 1"}],staticClass:"btn-show-all"},[a("a",{attrs:{title:"显示所有板块"},on:{click:function(t){return e.handleShowAllPanels(i)}}},[a("i",{staticClass:"el-icon-arrow-down"}),e._v("共 "+e._s(t.crowdPanels.length)+" 个板块\n                        ")])])],2):a("div",{staticClass:"tab-placeholder__normal-panel"},[a("cc-var",{class:{"tab-placeholder__panel-wrapper":!0,"panel-duplicate":t.panel.isDuplicate},attrs:{panel:e.getPanelInfo(t.panel)},scopedSlots:e._u([{key:"default",fn:function(n){var o=n.panel;return[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.readOnly,expression:"!readOnly"}],staticClass:"tab-placeholder__panel-remove el-icon-close",attrs:{title:"删除"},on:{click:function(t){return e.handleRemovePanel(i)}}}),a("a",{staticClass:"btn-crowd btn-crowd--set",on:{click:function(t){return e.$emit("toggle-type",i)}}},[e._v("设置定向")]),a("div",{staticClass:"tab-plcacholder-info"},[a("div",{staticClass:"tab-placeholder-info__link",on:{click:function(t){return e.handleOpenPanel(o)}}},[e._v("\n                                        "+e._s(o.panelId)),a("span",{directives:[{name:"show",rawName:"v-show",value:4!==o.status,expression:"panel.status !== 4"}],staticClass:"panel-status--waiting"},[e._v("("+e._s(e.STATUS_TEXT[o.status])+")")])]),a("div",{staticClass:"tab-placeholder-info__link",on:{click:function(t){return e.handleOpenPanel(o)}}},[e._v("\n                                        "+e._s(o.panelName)+"\n                                    ")])]),a("div",{staticClass:"tab-placeholder__panel"},[a("div",{staticClass:"tab-placeholder__panel-title",on:{click:function(t){return e.handleOpenPanel(o)}}},[e._v("\n                                        "+e._s(o.panelTitle)+"\n                                    ")]),a("cc-virtual-panel-group",{attrs:{panel:e.panelData[t.panel.id],active:t.panel.activeIndex,ratio:e.ratio,"show-title":e.showTitle},on:{activate:function(a){return e.handleActivate(t,a)},"click-block":function(t){return e.handleClickBlock({index:i,activeIndex:arguments[0],blockIndex:arguments[1]})}}})],1)]}}],null,!0)})],1)])]),e.readOnly?e._e():a("div",{staticClass:"panel-placeholder panel-placeholder__normal",on:{dragenter:e.handleDragEnter,dragleave:e.handleDragLeave,dragover:e.handleDragOver,drop:function(t){return e.handleDrop(t,{type:"NORMAL",index:i})}}})]})],2)},Id=[],Td=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{"cc-virtual-pannel":!0,"cc-virtual-pannel--show-title":e.showTitle},style:e.pannelStyle},[a("transition-group",e._l(e.blockItems,function(t,i){return a("div",{key:i},[a("div",{class:{"cc-virtual-pannel__block":!0,"cc-virtual-pannel__block--duplicated":t.duplicated},style:t.style,attrs:{draggable:e.draggable},on:{dragstart:function(t){return e.handleDragStart(i,t)},dragover:function(t){return e.handleDragOver(i,t)},drop:e.handleDrop,click:function(t){return e.handleClickBlock(i)}}},[t.img?a("img",{staticClass:"cc-virtual-pannel__block-post",attrs:{src:t.img}}):e._e(),a("div",{staticClass:"cc-virtual-pannel__block-base-info"},[a("span",{staticClass:"seq-num"},[e._v(e._s(t.content.vContentId||i+1))]),a("span",{staticClass:"size-mark"},[e._v(e._s(t.width)+"*"+e._s(t.height))])]),e._l(t.cornerList,function(t,i){return t.imgUrl?a("div",{key:i,staticClass:"corner-img",style:{position:"absolute",top:0===t.position||1===t.position?0:void 0,buttom:2===t.position||3===t.position?0:void 0,left:0===t.position||3===t.position?0:void 0,right:1===t.position||2===t.position?0:void 0,"background-image":"url("+t.imgUrl+")"}}):e._e()}),t.isExtra?a("span",{staticClass:"cc-virtual-pannel__block-remove",on:{click:function(t){return t.stopPropagation(),e.handleRemoveBlock(i)}}},[e._v("\n                x\n            ")]):e._e(),t.content?[t.content.secKillPrice>0?a("div",{staticClass:"specialSamll  cc-virtual-pannel__block-price",attrs:{name:"smallPrice"}},[a("span",{staticClass:"sec-kill-price"},[e._v("￥"+e._s(e.fixPrice(t.content.secKillPrice)))]),a("span",[e._v("￥"+e._s(e.fixPrice(t.content.price)))])]):t.content.price>0?a("div",{staticClass:"specialSamll cc-virtual-pannel__block-price",attrs:{name:"smallPrice"}},[a("span",[e._v("￥"+e._s(e.fixPrice(t.content.price)))])]):e._e(),e.showTitle?a("div",{staticClass:"cc-virtual-pannel__title",attrs:{title:t.content.title}},[e._v("\n                    "+e._s(t.content.title)+"\n                ")]):e._e()]:e._e()],2),t.titleStyle?a("div",{staticClass:"cc-virtual-pannel__block-title",style:t.titleStyle,attrs:{title:t.content.title}},[e._v("\n            "+e._s(t.content.title||"title")+"\n        ")]):e._e()])}),0)],1)},Sd=[],Cd={template:"#cc-virtual-panel",data:function(){return{blockItems:[],pannelStyle:{},dragIndex:void 0,dropIndex:void 0}},props:["blocks","ratio","draggable","showTitle"],watch:{blocks:"computeBlockItems"},methods:{handleDragStart:function(e){this.dragIndex=e},handleDragOver:function(e,t){this.dropIndex=e,t.preventDefault()},handleDrop:function(){var e=this.dragIndex,t=this.dropIndex;void 0!==e&&void 0!==t&&(this.$emit("drag",e,t),this.dragIndex=this.dropIndex=void 0)},handleRemoveBlock:function(e){this.$emit("remove-block",e)},handleClickBlock:function(e){this.$emit("click-block",e)},fixPrice:function(e){return Number((e/100).toFixed(2))},computeBlockItems:function(){this.showTitle;var e=this.blocks||[];if(0==e.length)return this.blockItems=[],void(this.pannelStyle={height:0});var t=this.ratio||.5,a=this.blocks.map(function(e){var a={title:e.title,isExtra:e.isExtra,duplicated:e.duplicated},i=e.contentPosition,n=e.resize||{},o=e.videoContentList||[],l=o[0]||{},r=e.titleInfo,s=n.y||i.y,c=n.x||i.x,u=i.height,d=i.width;if(a.top=s,a.left=c,a.height=u,a.width=d,a.style={top:s*t+"px",left:c*t+"px",height:u*t+"px",width:d*t+"px"},l.pictureUrl&&(a.img=l.pictureUrl),r){var p=r.width,h=r.height;a.titleStyle={top:(s+u)*t+"px",left:c*t+"px",width:p*t+"px",height:h*t+"px","line-height":h*t+"px"}}return a.content=l,a.cornerList=a.content.cornerList||[],a}),i=a[a.length-1],n=i.style,o=i.titleStyle||{},l=parseFloat(n.top)+parseFloat(n.height)+parseFloat(o.height||0)+"px";this.pannelStyle={height:l},this.blockItems=a}},created:function(){this.computeBlockItems()}},kd=Cd,_d=(a("d5e1"),Object(K["a"])(kd,Td,Sd,!1,null,"3f375877",null)),Pd=_d.exports,xd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cc-virtual-panel-group"},[e.panel.panelList?["group"===e.panel.parentType?[a("el-tabs",{attrs:{type:"card",value:e.active+""},on:{input:function(t){return e.$emit("activate",t)}}},e._l(e.panel.panelList,function(t,i){return a("el-tab-pane",{key:i,attrs:{name:i+""}},[a("span",{attrs:{slot:"label"},slot:"label"},[e._v(e._s(t.panelTitle))]),a("cc-virtual-panel",{attrs:{blocks:t.blocks,ratio:e.ratio,"show-title":e.showTitle},on:{"click-block":function(t){return e.handleClickBlock(i,t)}}})],1)}),1)]:a("cc-virtual-panel",{attrs:{blocks:e.panel.panelList[0].blocks,ratio:e.ratio,"show-title":e.showTitle},on:{"click-block":function(t){return e.handleClickBlock(0,t)}}})]:e._e()],2)},Dd=[],Fd={components:{"cc-virtual-panel":Pd},props:["panel","ratio","active","showTitle"],methods:{handleClickBlock:function(e,t){this.$emit("click-block",e,t)}}},$d=Fd,Rd=(a("a76b3"),Object(K["a"])($d,xd,Dd,!1,null,"b4c42a7c",null)),Ld=Rd.exports,Nd={components:{"cc-var":hu,"cc-virtual-panel":Pd,"cc-virtual-panel-group":Ld},data:function(){return{isDragging:!1,draggingIndex:void 0,draggingCrowdIndex:void 0,STATUS_TEXT:this.$consts.statusText}},props:["panels","ratio","width","panelData","showTitle","readOnly"],methods:{disableDrag:function(e){e.stopPropagation(),e.preventDefault()},getPanelInfo:function(e){var t=this.panelData[e.id],a={duplicateVersion:t.duplicateVersion,dmpInfo:e.dmpInfo,panelId:t.pannelGroupId,status:t.pannelStatus};if(t.parentType){var i=t.pannelList[e.activeIndex||0];a.panelTitle=t.groupTitle||i.pannelTitle,a.panelName=i.pannelName}return a},hasDuplicateVersion:function(e){var t=e.duplicateVersion;if(t&&"no"!==t)return t},handleActivate:function(e,t){this.$set(e,"activeIndex",+t)},handleDragStart:function(e,t,a){if(this.readOnly)return e.preventDefault(),void e.stopPropagation();this.$emit("drag-start"),setTimeout(function(){this.isDragging=!0,this.draggingIndex=t,this.draggingCrowdIndex=a}.bind(this),0)},handleDragEnd:function(){this.isDragging=!1,this.draggingIndex=void 0,this.draggingCrowdIndex=void 0,this.$emit("drag-end")},handleCollapse:function(e,t){this.$emit(e?"collapse":"uncollapse",t)},handleDragEnter:function(e){e.currentTarget.classList.add("active")},handleDragLeave:function(e){e.currentTarget.classList.remove("active")},handleAddPanel:function(e,t,a){this.$emit("add-panel",{type:e,index:t,crowdIndex:a})},handleDrop:function(e,t){this.handleDragLeave(e);var a=JSON.parse(e.dataTransfer.getData("text/plain"));setTimeout(function(){a.pannelGroupId?this.$emit("insert-panel",a,t):this.$emit("reorder-panel",a,t)}.bind(this),20)},handleDragOver:function(e){e.preventDefault()},handleOpenPanel:function(e){this.$emit("open-panel",e)},handleInsertPanel:function(){},handleRemovePanel:function(e,t){this.$emit("remove-panel",e,t)},handleClickBlock:function(e){this.$emit("click-block",e)},handleShowAllPanels:function(e){this.$emit("show-all-panel",e)}}},Od=Nd,Ad=(a("e96a"),Object(K["a"])(Od,wd,Id,!1,null,null,null)),Ed=Ad.exports,Vd=a("9ead"),Md={name:"TabInfo",mixins:[Qc],components:{"cc-var":hu,"cc-table-el":W["Table"],"cc-tab-selector-el":Wc,"cc-panel-selector-el":$u,"cc-business-type-selector":Eu,"cc-appid-selector":Hu,"cc-post-selector":Ku,"cc-global-picture-selector":td,"cc-float-window-selector":rd,"cc-icon-selector":hd,"cc-time-spinner":yd,"cc-virtual-tab":Ed,Table:W["Table"],CommonContent:_c,Affix:Vd["Affix"],ContentCard:ku,SourceRadioSelector:yu,InputOrder:Yc,OrderableTable:ru,PageWrapper:qs,PageContentWrapper:Xs},data:function(){var e=this,t={draft:2,waiting:3,accepted:4,reject:5,processing:7},a={0:"下架",2:"草稿",3:"待审核",4:"审核通过",5:"审核不通过",7:"审核通过未上线"};return{mode:"create",activePage:"tab_info",resourceName:"版面",embedTab:void 0,isCollapseBase:!1,isCollapseExtend:!1,isCollapseSpec:!1,isPanelDragging:!1,STATUS:t,STATUS_TEXT:a,urls:{save:"/tab/save.html",historyList:"/v1/hvi/historyList.html"},showIconSelector:!1,showFloatWindowSelector:!1,showBgSelector:!1,showLongBgSelector:!1,showPanelSelector:!1,showCrowdSelector:!1,SOURCE:[{label:"腾讯",value:"o_tencent"},{label:"爱奇艺",value:"o_iqiyi"},{label:"优酷",value:"o_youku"}],TAB_TYPES:[{label:"普通版面",value:1},{label:"专题版面",value:2}],PROMOTIONS:[{label:"无",value:"none"},{label:"影视",value:"movie"}],panelListIndexed:{},tabInfo:{tabId:void 0,currentVersion:void 0,tabParentType:"home",tabType:1,hasSubTab:0,tabName:void 0,tabCnTitle:void 0,tabEnTitle:void 0,tabCategory:67,tabAppid:-1,tabResource:"o_tencent",iconTypeName:void 0,pictureName:void 0,tabParams:{},tabStatus:void 0,tabOnclick:void 0,systemDefault:0,timeCycle:120,cornerIconName:void 0,flagIsRecord:0,isTiming:0,releaseTime:void 0,tabExtArr:{},pannelList:[],tabList:[],sinkSize:0,isShowvip:1,alumbTabBg:void 0,alumbTabLongBg:void 0,pannelTitleColor:void 0,blockTitleFocusColor:void 0,blockTitleUnfocusColor:void 0,autoPromotion:"none",activityFloatWindow:void 0,imgOnBlur:void 0,imgOnFocus:void 0,imgOnSelected:void 0},versionList:[],panelNormalDuplicates:{},panelSpecDuplicates:{},subTabTableHeader:[{label:"版面ID",prop:"tabId",width:180},{label:"版面名称",prop:"tabName",render:function(t,a){var i=a.$index,n=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handlePreviewTab(n,n.currentVersion,i)}}},n.tabName)}},{label:"待审核副本",width:120,render:function(t,a){var i=a.$index,n=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handlePreviewTab(n,n.duplicateVersion,i)}}},n.duplicateVersion)}}]}},props:["id","version","init-mode"],computed:{resourceInfo:function(){var e=this.tabInfo;if(e.tabId)return{id:e.tabId,version:e.currentVersion,status:e.tabStatus,type:"tab",menuElId:"tabInfo"}},floatWindowParams:function(){var e={o_tencent:"0,1",o_iqiyi:"0,2",o_youku:"0,3"};return{sourceArray:e[this.tabInfo.tabResource]||"0"}},isReplicate:function(){return"replicate"===this.mode},rules:function(){return{tabName:[{required:!0,message:"请输入版面名称",trigger:"blur"}],tabCnTitle:[{required:!0,message:"请输入中文标题",trigger:"blur"}],tabEnTitle:[{required:!0,message:"请输入英文标题",trigger:"blur"}],pictureName:[{required:!0,message:"请选择Tab对应的icon",trigger:"blur"}],alumbTabBg:[{required:!0,message:"请设置大背景",trigger:"blur"}]}},showSystemDefault:function(){var e=this.tabInfo.tabCategory;return 60==e||61==e||66==e},hasSource:function(){var e=this.tabInfo.tabCategory;return 67==e||31==e}},watch:{},methods:(wi={parseMinToStr:function(e){var t=Math.floor(e/60),a=e%60,i=t>9?""+t:"0"+t,n=a>9?""+a:"0"+a;return i+":"+n},openPannelWin:function(e){var t=this.FastDevTool,a=basicFn.numToPannelTypeUrl(e)+"/add.html";t.createDialogWin("add-view",{confirmInfo:!0,fit:!0,iconCls:"icon-edit",minimizable:!1,maximizable:!0,title:"版块页面",content:t.createIframe(a)})},handleDragStart:function(){setTimeout(function(){this.isPanelDragging=!0}.bind(this))},handleDragEnd:function(){setTimeout(function(){this.isPanelDragging=!1}.bind(this))},handleCreateTab:function(){this.embedTab={mode:"create"}},handleOpenPanel:function(){console.log(arguments)},handleShowAllPanels:function(e){this.$set(this.tabInfo.pannelList[e],"isShowAll",!0)},handleTogglePanelType:function(e){var t=this.tabInfo.pannelList,a=t[e];if("SPEC"===a.type){var i=a.crowdPanels[0];i.dmpInfo=void 0,this.$set(t,e,{type:"NORMAL",panel:i,isCollapse:a.isCollapse}),this.updateDuplicates()}else this.selectCrowdCallback=function(i){a.panel.dmpInfo=i,this.$set(t,e,{type:"SPEC",crowdPanels:[a.panel],isShowAll:!1,isCollapse:a.isCollapse}),this.updateDuplicates()},this.selectCrowdForIndex=e,this.handleSelectCrowdStart()},handleToggleAllPanel:function(e){this.tabInfo.pannelList.forEach(function(t){this.$set(t,"isCollapse",e)}.bind(this))},handleChangeTabCategory:function(e){var t=this.tabInfo,a=t.tabCategory,i=[67,31].indexOf(a)>-1,n=[67,31].indexOf(e)>-1,o=!i&&n,l=function(){n?""===t.tabResource&&(t.tabResource="o_tencent"):t.tabResource="",60!=e&&61!=e&&66!=e&&(t.systemDefault=0),t.tabAppid=+this.FastDevTool.getAppIDByTabCategory(e),t.tabCategory=e,o&&this.clearContents()}.bind(this);o?this.$confirm("是否要切换业务分类，从不分源分类切换到分源分类之后所选择的版块或二级版面数据将会清除掉?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(l).catch(function(){}):l()}},Object(ve["a"])(wi,"openPannelWin",function(e){var t=this.basicFn.numToPannelTypeUrl(e)+"/add.html";this.FastDevTool.createDialogWin("add-view",{confirmInfo:!0,fit:!0,iconCls:"icon-edit",minimizable:!1,maximizable:!0,title:"版块页面",content:this.FastDevTool.createIframe(t)})}),Object(ve["a"])(wi,"handlePreviewPanel",function(e){var t=this.panelListIndexed[e.panelId],a=t.duplicateVersion||t.currentVersion,i=this.basicFn.numToPannelTypeUrl(t.pannelType)+"/preview.html?id="+t.pannelGroupId+"&version="+a;this.FastDevTool.createDialogWin("edit-view",{confirmInfo:!1,fit:!0,iconCls:"icon-edit",minimizable:!1,maximizable:!0,title:"预览页面",content:this.FastDevTool.createIframe(i),onClose:function(){this.updatePanelVersion(t,function(){this.loadPanelDetail(t)}.bind(this))}.bind(this)})}),Object(ve["a"])(wi,"handleClickBlock",function(e){var t,a=e.index,i=e.crowdIndex,n=e.activeIndex,o=e.blockIndex,l=this.getPanelByIndex(a,i),r=this.panelListIndexed[l.id],s=r.pannelStatus,c=this.STATUS,u=r.duplicateVersion||r.currentVersion,d="11"===$idPrefix;switch(!0){case d&&0===r.pannelGroupId.toString().indexOf(10):t=this.basicFn.numToPannelTypeUrl(r.pannelType)+"/preview.html?id="+r.pannelGroupId+"&version="+u;break;case s===c.draft:t=this.basicFn.numToPannelTypeUrl(r.pannelType)+"/edit.html?id="+r.pannelGroupId+"&version="+u,t+="&clickActiveIndex="+n+"&clickBlockIndex="+o;break;case s===c.accepted:t=this.basicFn.numToPannelTypeUrl(r.pannelType)+"/editHistory.html?id="+r.pannelGroupId+"&version="+u,t+="&clickActiveIndex="+n+"&clickBlockIndex="+o;break;case s===c.waiting:t=this.basicFn.numToPannelTypeUrl(r.pannelType)+"/preview.html?id="+r.pannelGroupId+"&version="+u;break}this.FastDevTool.createDialogWin("edit-view",{confirmInfo:!1,fit:!0,iconCls:"icon-edit",minimizable:!1,maximizable:!0,title:"预览页面",content:this.FastDevTool.createIframe(t),onClose:function(){this.updatePanelVersion(r,function(){this.loadPanelDetail(r)}.bind(this))}.bind(this)})}),Object(ve["a"])(wi,"handleChangeSource",function(e){this.$confirm("是否要切换内容源，切换内容源之后所选择的版块或二级版面数据将会清除掉！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){this.tabInfo.tabResource=e,this.clearContents()}.bind(this)).catch(function(e){throw e})}),Object(ve["a"])(wi,"clearContents",function(){var e=this.$refs.tabSelector;this.tabInfo.tabList=[],e&&e.handleRemoteSelectClear(),this.tabInfo.pannelList=[]}),Object(ve["a"])(wi,"handleClose",function(){}),Object(ve["a"])(wi,"handleSelectTitleIcon",function(e,t){this.tabInfo[e]=t.pictureUrl}),Object(ve["a"])(wi,"handleSelectIconStart",function(){this.showIconSelector=!0}),Object(ve["a"])(wi,"handleSelectIconCancel",function(){this.showIconSelector=!1}),Object(ve["a"])(wi,"handleSelectIconEnd",function(e){this.showIconSelector=!1,this.tabInfo.pictureName=e.pictureName,this.tabInfo.iconTypeName=e.iconTypeName,this.tabInfo.pictureUrl=e.pictureUrl}),Object(ve["a"])(wi,"handleSelectFloatWindowEnd",function(e){this.showFloatWindowSelector=!1,this.tabInfo.activityFloatWindow={pluginId:e.pluginId,pluginName:e.pluginName,pluginType:e.pluginType}}),Object(ve["a"])(wi,"handleRemoveFloatWindow",function(){this.tabInfo.activityFloatWindow=void 0}),Object(ve["a"])(wi,"handleSelectBgStart",function(){this.showBgSelector=!0}),Object(ve["a"])(wi,"handleSelectBgCancel",function(){this.showBgSelector=!1}),Object(ve["a"])(wi,"handleSelectBgEnd",function(e){this.showBgSelector=!1,this.tabInfo.alumbTabBg=e.pictureUrl}),Object(ve["a"])(wi,"handleSelectLongBgStart",function(){this.showLongBgSelector=!0}),Object(ve["a"])(wi,"handleSelectLongBgCancel",function(){this.showLongBgSelector=!1}),Object(ve["a"])(wi,"handleSelectLongBgEnd",function(e){this.showLongBgSelector=!1,this.tabInfo.alumbTabLongBg=e.pictureUrl}),Object(ve["a"])(wi,"handleSelectCrowdStart",function(){this.showCrowdSelector=!0}),Object(ve["a"])(wi,"handleSelectCrowdCancel",function(){this.showCrowdSelector=!1}),Object(ve["a"])(wi,"handleSelectCrowdEnd",function(e,t){var a={crowdId:t.value,crowdName:t.label,policyId:e.value,policyName:e.label},i=this.selectCrowdForIndex,n=this.tabInfo.pannelList[i];if(void 0!==i&&"SPEC"===n.type){var o=n.crowdPanels,l=o.length;while(--l>=0)if(o[l].dmpInfo.crowdId===a.crowdId)break;if(l>=0)return this.$message({type:"error",message:"该定向板块组第"+(l+1)+"个板块已选择该人群"})}this.selectCrowdCallback(a),this.showCrowdSelector=!1,this.selectCrowdCallback=void 0}),Object(ve["a"])(wi,"handleChangeCrowdOfPanel",function(e,t){this.selectCrowdCallback=function(a){this.tabInfo.pannelList[e].crowdPanels[t].dmpInfo=a},this.selectCrowdForIndex=e,this.handleSelectCrowdStart()}),Object(ve["a"])(wi,"handleSelectPanelEnd",function(e){console.log(e);var t=this.tabInfo.pannelList,a=t.length-1;e.forEach(function(e,t){this.doInsertPanel(e.data,{index:a+t,type:"NORMAL"})}.bind(this)),this.showPanelSelector=!1,this.$refs.virtualTab.isDragging=!1}),Object(ve["a"])(wi,"handleInsertPanel",function(e,t){"NORMAL"===t.type||e.dmpInfo?this.doInsertPanel(e,t):(this.selectCrowdCallback=function(a){e.dmpInfo=a,this.doInsertPanel(e,t)},this.selectCrowdForIndex=t.index,this.handleSelectCrowdStart())}),Object(ve["a"])(wi,"handleChangeCollapseState",function(e){var t=this.tabInfo.pannelList[e];this.$set(t,"isCollapse",!t.isCollapse)}),Object(ve["a"])(wi,"doInsertPanel",function(e,t){var a=e.pannelGroupId,i=e.dmpInfo,n=t.type,o=t.index,l=t.crowdIndex,r=this.tabInfo.pannelList;if("NORMAL"===n){var s={type:n,panel:{id:a,isDuplicate:!1,activeIndex:0,dmpInfo:void 0},isCollapse:!1};r.splice(o+1,0,s)}else{var c=r[o];c.crowdPanels.splice(l+1,0,{id:a,isDuplicate:!1,activeIndex:0,dmpInfo:i})}this.loadPanelDetail(e),this.updateDuplicates()}),Object(ve["a"])(wi,"loadPanelDetail",function(e,t){var a=this;this.$set(this.panelListIndexed,e.pannelGroupId,e);var i=e.pannelGroupId,n=e.duplicateVersion||e.currentVersion;this.$service.panelGetDetail({id:i,version:n}).then(function(t){if(t.pannelGroupId){var i=t.pannelList||[],n=i.map(function(e){return{panelTitle:e.pannelTitle,blocks:"function"===t.parentType?[]:this.getPanelBlocks(e)}}.bind(a));delete t.currentVersion,delete t.duplicateVersion,a.panelListIndexed[e.pannelGroupId]=Object.assign({},e,t,{panelList:n,pannelStatus:t.pannelList[0].pannelStatus})}})}),Object(ve["a"])(wi,"updatePanelVersion",function(e,t){var a="panelPageList";[5,9,10].indexOf(e.pannelType)>-1&&(a="privatePanelPageList"),this.$service[a]({pannelId:e.pannelGroupId}).then(function(a){var i=a.rows[0];e.currentVersion=i.currentVersion,e.duplicateVersion=i.duplicateVersion,t()})}),Object(ve["a"])(wi,"handleReOrderPanel",function(e,t){var a=e.type,i=e.index,n=e.crowdIndex,o=t.type,l=t.index,r=t.crowdIndex,s=this.tabInfo.pannelList,c=s[i];switch(!0){case"SPEC"===a&&"NORMAL"===o:this.doRemovePanel(i);var u=i<=l?l:l+1;s.splice(u,0,c);break;case"SPEC"===a&&"CROWD"===o:this.$message({type:"error",message:"定向板块组不能拖到别的定向板块组里边"});break;case"CROWD"===a&&"NORMAL"===o:var d={type:"SPEC",crowdPanels:[c.crowdPanels[n]]};1===c.crowdPanels.length?(this.doRemovePanel(i,n),s.splice(i<=l?Math.max(l,0):l+1,0,d)):(this.doRemovePanel(i,n),s.splice(l+1,0,d));break;case"CROWD"===a&&"CROWD"===o:var p=s[i].crowdPanels,h=s[l].crowdPanels,m=p[n];if(i===l)h.splice(n,1),h.splice(n<=r?r:r+1,0,m);else{var f=h.length;while(--f>=0)if(h[f].dmpInfo.crowdId===m.dmpInfo.crowdId)break;if(f>=0)return this.$message({type:"error",message:"该定向板块组第"+(f+1)+"个板块已选择该人群"});h.splice(r+1,0,m),this.doRemovePanel(i,n)}break;case"NORMAL"===a&&"NORMAL"===o:this.doRemovePanel(i),s.splice(i<=l?l:l+1,0,c);break;case"NORMAL"===a&&"CROWD"===o:this.selectCrowdCallback=function(e){this.$set(c.panel,"dmpInfo",e),s[l].crowdPanels.splice(r+1,0,c.panel),this.doRemovePanel(i),this.updateDuplicates()},this.selectCrowdForIndex=l,this.handleSelectCrowdStart();break}}),Object(ve["a"])(wi,"getPanelIdByIndex",function(e,t){return this.getPanelByIndex(e,t).id}),Object(ve["a"])(wi,"getPanelByIndex",function(e,t){var a,i=this.tabInfo.pannelList;return a=void 0!==t?i[e].crowdPanels[t]:i[e].panel,a}),Object(ve["a"])(wi,"handleRemovePanel",function(e,t){var a,i=this.tabInfo.pannelList,n=i[e];if(void 0===t&&"SPEC"===n.type){var o=this.getPanelIdByIndex(e,0),l=this.panelListIndexed[o];a="是否确定删除板块组 "+l.pannelGroupRemark}else{var r=this.getPanelIdByIndex(e,t),s=this.panelListIndexed[r];a="是否确定删除板块 "+s.pannelGroupRemark}this.$confirm(a).then(function(){this.doRemovePanel(e,t),this.updateDuplicates()}.bind(this)).catch(function(){})}),Object(ve["a"])(wi,"doRemovePanel",function(e,t){var a=this.tabInfo.pannelList;if(void 0!==t){var i=a[e].crowdPanels;i.splice(t,1),0===i.length&&a.splice(e,1)}else a.splice(e,1)}),Object(ve["a"])(wi,"getPanelBlocks",function(e){var t=e.parentType,a=(e.contentList,JSON.parse(e.layoutInfo.layoutJson)),i=a.type,n=a.contents,o=n.length,l=n.length,r=e.contentList,s=n[o-1],c=s.x+s.width,u=s.resize||{},d=s.y+(u.height||s.height),p=function(){if("Expander"===i&&2===o){var e=a.extra.space;return function(t){var a=n[1],i=a.resize,o=a.title_info,l=c+(t-2)*e+(t-3)*a.width,r=a.y,s={height:a.height,width:a.width,x:l,y:r,isExtra:!0,title_info:o,loop:a.loop,type:a.type};return o&&i&&(s.resize={height:i.height,width:i.width,x:l,y:r}),s}}if("Expander"===i){var t=a.extra.space;return function(e){var a=Math.floor(e/o)-1,i=e%o,l=n[i],r=l.resize,s=l.title_info,u=l.x+a*c+a*t,d=l.y,p={height:l.height,width:l.width,x:u,y:d,isExtra:!0,title_info:s,loop:l.loop,type:l.type};return s&&r&&(p.resize={height:r.height,width:r.width,x:u,y:d}),p}}if("Lengthwise"===i){var l=0;return function(e){var t=Math.ceil(e/o)-1,a=e-o*t-1,i=n[a],r=i.resize,s=i.title_info,c=i.x,u=i.y+t*d+t*l,p={height:i.height,width:i.width,x:c,y:u,isExtra:!0,title_info:s};return s&&r&&(p.resize={height:r.height,width:r.width,x:c,y:u}),p}}};if("Expander"===i||"Lengthwise"===i){var h=p(),m="group"===t?l:Math.max(l,r.length),f=n.length;while(f++<m)n.push(h(f))}var b={},g=n.map(function(e,t){var a=r[t]||{},i=a.videoContentList||[],n=i[0];if(n&&n.extraValue1){var o=n.extraValue1+(n.extraValue5||""),l=b[o];l?(l.duplicated=!0,a.duplicated=!0):(a.duplicated=!1,b[o]=a)}else a.duplicated=!1;return a.videoContentList=i,a.contentPosition=Object.assign({},e,{resize:void 0}),a.titleInfo=e.title_info,a.resize=e.resize,a.isExtra=e.isExtra,a});return g}),Object(ve["a"])(wi,"updateDuplicates",function(){var e=this.tabInfo.pannelList,t={},a={},i={},n={};e.forEach(function(e,o){if("NORMAL"===e.type){var l=e.panel,r=l.id;i[r]?t[r]=!0:i[r]=!0,n[r]&&(n[r].forEach(function(e){a[e]=a[e]||{},a[e][r]=!0}),t[r]=!0)}else{var s=e.crowdPanels,c={},u=a[o]||{};s.forEach(function(e,a){var o=e,l=o.id;c[l]?u[l]=!0:c[l]=!0,n[l]=n[l]||[],n[l].push(a),i[l]&&(u[l]=!0,t[l]=!0)}),a[o]=u}}),console.log(t),console.log(a),e.forEach(function(e,i){if("NORMAL"===e.type)t[e.panel.id+""]?e.panel.isDuplicate=!0:e.panel.isDuplicate=!1;else{var n=a[i]||{};e.crowdPanels.forEach(function(e){n[e.id+""]?e.isDuplicate=!0:e.isDuplicate=!1})}}),console.log(e)}),Object(ve["a"])(wi,"handleSelectTabStart",function(){this.$nextTick(function(){var e=this.$refs.tabSelector;this.tabInfo.tabList.forEach(function(t){e.handleTableRowSelectionAdd(t)})}.bind(this))}),Object(ve["a"])(wi,"handleSelectTabEnd",function(e){this.$refs.subTabTable.handleAppendData(e,"tabId")}),Object(ve["a"])(wi,"handleChangePanelOrderStart",function(e,t){if(""!==t){t=parseInt(t);var a=this.tabInfo.pannelList;isNaN(t)||t>a.length||t<=0?(this.currentPanelIndex=void 0,this.tabInfo.pannelList=a.slice(),this.$message({type:"error",message:"序号必须大于 0 且不能大于总数量"})):(this.currentPanelIndex=e,this.currentPanelOrder=t)}}),Object(ve["a"])(wi,"handleChangePanelOrderEnd",function(e){if(this.currentPanelIndex===e){var t=this.currentPanelOrder-1,a=e,i=this.tabInfo.pannelList,n=i[a];i.splice(a,1),this.tabInfo.pannelList=[].concat(i.slice(0,t),n,i.slice(t)),this.currentTabIndex=void 0,this.currentTabOrder=void 0}}),Object(ve["a"])(wi,"openTabWin",function(e){var t=this.basicFn.numToPannelTypeUrl(e)+"/add.html";this.FastDevTool.createDialogWin("add-view",{confirmInfo:!0,fit:!0,iconCls:"icon-edit",minimizable:!1,maximizable:!0,title:"版块页面",content:this.FastDevTool.createIframe(t)})}),Object(ve["a"])(wi,"handleTabEmbedBack",function(){var e=this;this.activePage="tab_info";var t=this.embedTab,a=t.index,i=t.id;t.version,t.mode;void 0!==a&&this.$service.tabInfoList({tabId:i}).then(function(t){Object.assign(e.tabInfo.tabList[a],t.rows[0])}),this.embedTab=void 0}),Object(ve["a"])(wi,"handlePreviewTab",function(e,t,a){this.activePage="tab",this.embedTab={index:a,id:e.tabId,version:t,mode:"read"}}),Object(ve["a"])(wi,"handleShowTimeShelf",function(){var e=this.getFormData();e.tabStatus=this.STATUS.waiting,this.validateFormData(e,function(){this.showTimeShelf=!0}.bind(this))}),Object(ve["a"])(wi,"handleCopy",function(){var e=this.getFormData();this.validateFormData(e,function(){this.upsertTabInfo(e)}.bind(this))}),Object(ve["a"])(wi,"handleSaveDraft",function(){var e=this.getFormData();e.isTiming=void 0,e.releaseTime=void 0,e.tabStatus=this.$consts.status.draft,this.upsertTabInfo(e)}),Object(ve["a"])(wi,"handleSubmitAudit",function(e){var t=this.getFormData();t.tabStatus=this.$consts.status.waiting,e?(t.isTiming=e.isTiming,t.releaseTime=e.releaseTime,this.upsertTabInfo(t)):this.$refs.commonContent.showReleaseTimeSetter=!0}),Object(ve["a"])(wi,"getFormData",function(){var e=JSON.parse(JSON.stringify(this.tabInfo)),t=this.mode;return"replicate"===t&&(e.currentVersion=""),"copy"===t&&(e.tabId=void 0,e.currentVersion=""),e}),Object(ve["a"])(wi,"validateFormData",function(e,t){var a,i=this.STATUS,n=e.tabStatus,o=function(e){this.$message({type:"error",message:e})}.bind(this);n===i.draft?(e.tabName||(a="请填写版面名称"),a?o(a):t()):this.$refs.tabForm.validate(function(i){if(i){if(1==e.tabType&&1===e.hasSubTab)0===e.tabList.length&&(a="请选择二级版面");else if(0===e.pannelList.length)a="请选择板块";else{var n=e.pannelList;e:for(var l=0,r=n.length;l<r;l++){var s=n[l];if("NORMAL"===s.type){if(s.panel.isDuplicate){a="含有重复板块";break e}}else for(var c=s.crowdPanels,u=0,d=c.length;u<d;u++)if(c[u].isDuplicate){a="含有重复板块";break e}}}2===e.tabType&&e.alumbTabLongBg&&e.pannelList.length>6&&(a="长图专题版块不能超过6个"),a?o(a):t()}else o("请把表单填写完整")})}),Object(ve["a"])(wi,"parseTabInfo",function(e){for(var t=[],a=e.pannelList,i=0,n=a.length;i<n;i++){var o=a[i],l=void 0;"NORMAL"===o.type?l={pannelGroupId:o.panel.id,pannelSequence:i,isDmpPanel:0}:(l={pannelSequence:i,isDmpPanel:1},l.dmpPanelList=o.crowdPanels.map(function(e,t){return{pannelGroupId:e.id,pannelSequence:t,dmpPolicyId:e.dmpInfo.policyId,dmpPolicyName:e.dmpInfo.policyName,dmpCrowdId:e.dmpInfo.crowdId,dmpCrowdName:e.dmpInfo.crowdName}})),t.push(l)}var r={selected_img_url:e.imgOnSelected,focus_img_url:e.imgOnFocus,unfocus_img_url:e.imgOnBlur};r=JSON.stringify(r);var s={isShowvip:e.isShowvip,alumbTabBg:e.alumbTabBg,alumbTabLongBg:e.alumbTabLongBg,sinkSize:e.sinkSize,pannelTitleColor:e.pannelTitleColor,blockTitleFocusColor:e.blockTitleFocusColor,blockTitleUnfocusColor:e.blockTitleUnfocusColor},c={};"none"!==e.autoPromotion&&(c.autodata=e.autoPromotion),c=JSON.stringify(c);var u,d=[],p=e.activityFloatWindow;p&&d.push({pluginId:p.pluginId,pluginType:p.pluginType}),e.hasSubTab&&e.tabList.length>0&&(u=e.tabList.map(function(e,t){return{subTabId:e.tabId,subSequence:t}}),u=JSON.stringify(u));var h={cornerIconName:e.cornerIconName,currentVersion:e.currentVersion,flagIsRecord:e.flagIsRecord,hasSubTab:e.hasSubTab,isTiming:e.isTiming,panelInfoList:t,pictureName:e.pictureName,releaseTime:e.releaseTime,systemDefault:e.systemDefault||0,systemPluginList:d,tabAppid:e.tabAppid,tabCategory:e.tabCategory,tabCnTitle:e.tabCnTitle,tabEnTitle:e.tabEnTitle,tabExtArr:s,tabId:e.tabId,tabJson:u,tabName:e.tabName,tabOnclick:e.tabOnclick,tabParams:c,tabParentType:e.tabParentType,tabResource:e.tabResource,tabStatus:e.tabStatus,tabTitleIcons:r,tabType:e.tabType,timeCycle:e.timeCycle};return h}),Object(ve["a"])(wi,"setTabInfo",function(e){var t,a=JSON.parse(e.tabTitleIcons||"{}"),i=e.tabExtArr||e.tabExtArrEntity||{},n=JSON.parse(e.tabParams||"{}"),o=e.systemPluginList||[],l=o[0];l&&(t={pluginId:l.pluginId,pluginName:l.pluginName,pluginType:l.pluginType});var r=[];if(e.panelInfoList){var s=[];r=e.panelInfoList.map(function(e){return e.isDmpPanel?{type:"SPEC",isCollapse:!1,isShowAll:!1,crowdPanels:e.dmpPanelList.map(function(e){return this.$set(this.panelListIndexed,e.pannelGroupId,e),s.push(e),{id:e.pannelGroupId,isDuplicate:!1,activeIndex:0,dmpInfo:{crowdId:e.dmpCrowdId,policyId:e.dmpPolicyId,crowdName:e.dmpCrowdName,policyName:e.dmpPolicyName}}}.bind(this))}:(this.$set(this.panelListIndexed,e.pannelGroupId,e),s.push(e),{type:"NORMAL",isCollapse:!1,panel:{id:e.pannelGroupId,isDuplicate:!1,activeIndex:0,dmpInfo:void 0}})}.bind(this)),setTimeout(function(){s.forEach(this.loadPanelDetail.bind(this))}.bind(this),50)}this.tabInfo=Object.assign({},this.tabInfo,{tabId:e.tabId,currentVersion:e.currentVersion,tabParentType:e.tabParentType,tabType:e.tabType,hasSubTab:e.hasSubTab,tabName:e.tabName,tabCnTitle:e.tabCnTitle,tabEnTitle:e.tabEnTitle,tabCategory:e.tabCategory,tabAppid:e.tabAppid,tabResource:e.tabResource,iconTypeName:e.iconTypeName,pictureName:e.pictureName,tabStatus:e.tabStatus,tabOnclick:void 0,systemDefault:e.systemDefault,timeCycle:e.timeCycle,cornerIconName:e.cornerIconName,flagIsRecord:e.flagIsRecord,isTiming:e.isTiming,releaseTime:e.releaseTime,pannelList:r,tabList:e.tabList,alumbTabBg:i.alumbTabBg,alumbTabLongBg:i.alumbTabLongBg,isShowvip:i.isShowvip,pannelTitleColor:i.pannelTitleColor,blockTitleFocusColor:i.blockTitleFocusColor,blockTitleUnfocusColor:i.blockTitleUnfocusColor,sinkSize:i.sinkSize,autoPromotion:n.autodata||"none",activityFloatWindow:t,imgOnBlur:a.unfocus_img_url,imgOnFocus:a.focus_img_url,imgOnSelected:a.selected_img_url}),this.updateDuplicates()}),Object(ve["a"])(wi,"upsertTabInfo",function(e){var t=this,a=this.parseTabInfo(e);this.$service.tabInfoUpsert(a,"操作成功").then(function(){t.$emit("upsert-end")})}),Object(ve["a"])(wi,"handleSelectVersion",function(e){var t=this.tabInfo,a=location.pathname+"?id="+t.tabId+"&version="+e;"copy"===this.mode&&(a+="&typePage=copy"),location.href=a}),Object(ve["a"])(wi,"fetchData",function(e){var t=this;this.$service.tabInfoGet({id:this.id,version:e}).then(function(e){t.setTabInfo(e)})}),wi),created:function(){var e=this.initMode;this.mode=e,"edit"!==e&&"copy"!==e&&"replicate"!==e||(this.isCollapseBase=!0),this.id&&this.fetchData(this.version)}},Bd=Md,Ud=(a("f879"),a("63b1"),Object(K["a"])(Bd,su,cu,!1,null,"52fa1e77",null)),jd=Ud.exports,Hd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"crowd-selector"},[a("el-dialog",{attrs:{title:"选择策略",visible:e.showPolicySelector,"append-to-body":"","before-close":e.handleClose}},[a("div",{staticClass:"name-list"},e._l(e.policy.items,function(t){return a("div",{key:t.value,staticClass:"name-list__item",attrs:{title:t.label},on:{click:function(a){return e.handleSelectPolicy(t)}}},[e._v("\n                "+e._s(t.label)+"\n            ")])}),0)]),a("el-dialog",{attrs:{title:"选择人群","append-to-body":"",visible:e.showCrowdSelector,"before-close":e.handleSelectCrowdCancel}},[e.hasCascadeTag?a("div",[a("el-cascader",{attrs:{options:e.crowd.cascadeItems,"change-on-select":""},model:{value:e.selectedCascaderCrowd,callback:function(t){e.selectedCascaderCrowd=t},expression:"selectedCascaderCrowd"}}),a("el-button",{staticClass:"marginL",attrs:{disabled:!e.selectedCascaderCrowd,type:"primary"},on:{click:e.handleSelectCascadeCrowd}},[e._v("\n                确定\n            ")])],1):a("div",{staticClass:"name-list"},e._l(e.crowd.items,function(t){return a("div",{key:t.value,staticClass:"name-list__item",attrs:{title:t.label},on:{click:function(a){return e.handleSelectCrowd(t)}}},[e._v("\n                "+e._s(t.label)+"\n            ")])}),0)])],1)},qd=[],Wd={data:function(){return{hasCascadeTag:!1,showPolicySelector:!0,showCrowdSelector:!1,selectedPolicy:void 0,selectedCrowd:void 0,selectedCascaderCrowd:void 0,policy:{pagination:{},items:[]},crowd:{pagination:{},items:[],cascadeItems:[]}}},props:["selectedPolicyId","selectedCrowdId"],methods:{handleClose:function(){this.showCrowdSelector=!1,this.showPolicySelector=!1,setTimeout(function(){this.$emit("select-cancel")}.bind(this),20)},handleSelectPolicy:function(e){this.selectedPolicy=e,this.$service.crowdRelGet({id:e.value}).then(function(t){t.hasCascadeTag?(this.hasCascadeTag=!0,this.crowd.items=t.crowdRelationship.items,this.crowd.cascadeItems=this.listToTree(t.crowdRelationship.items),this.showCrowdSelector=!0):this.$service.getCrowdOfPolicyWithCache(e.value).then(function(e){this.hasCascadeTag=!1,this.crowd.items=e,this.showCrowdSelector=!0}.bind(this))}.bind(this))},handleSelectCrowd:function(e){this.selectedCrowd=e,this.selectEnd()},handleSelectCascadeCrowd:function(){var e=this.selectedCascaderCrowd.slice(-1)[0];this.selectedCrowd=this.crowd.items.find(function(t){return t.value===e}),this.selectEnd()},handleSelectCrowdCancel:function(){this.showCrowdSelector=!1},selectEnd:function(){this.$emit("select-end",this.selectedPolicy,this.selectedCrowd)},listToTree:function(e,t){e=JSON.parse(JSON.stringify(e)),t=t||{};for(var a,i,n,o=t.idKey||"value",l=t.parentKey||"parentValue",r=t.childrenKey||"children",s=[],c={},u=0,d=e.length;u<d;u++)a=e[u],i=a[o],n=a[l]||0,c[i]=c[i]||[],a[r]=c[i],0!=n?(c[n]=c[n]||[],c[n].push(a)):s.push(a);return e.forEach(function(e){0===e.children.length&&(e.children=void 0)}),s}},created:function(){this.$service.getCrowdPolicy().then(function(e){this.policy.items=e,console.log(e)}.bind(this))}},Gd=Wd,zd=(a("f387"),Object(K["a"])(Gd,Hd,qd,!1,null,"2ba5e344",null)),Jd=zd.exports,Kd={mixins:[Qc],components:{PageWrapper:qs,PageContentWrapper:Xs,TabSelector:Wc,OrderableTable:ru,TabInfo:jd,CrowdSelector:Jd},data:function(){return{activePage:"tab_group_setter",resourceName:"版面管理",showCrowdSelector:!1,tabList:[],embedTab:void 0,activeTabIndex:void 0}},computed:{tabTableHeader:function(){var e=this,t=[{label:"版面ID",prop:"tabId",width:120},{label:"版面名称",render:function(t,a){var i=a.$index,n=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handlePreviewTab(n,i)}}},n.tabName)}},{label:"TAB标题(中文)",prop:"tabCnTitle"},{label:"TAB标题(英文)",prop:"tabEnTitle"},{label:"默认版面",align:"center",width:100,render:function(t,a){var i=a.$index,n=a.row;return e.readonly?n.isDefaultTab?"是":"否":t("el-radio",{attrs:{title:n.dmpInfo?"若要设置该版面为默认版面，请先取消版面定向":""},props:{label:!!n.isDefaultTab,disabled:!!n.dmpInfo,value:!0},on:{input:function(t){e.handleSetDefaultTab(i)}}},"")}},{label:"人群",render:function(t,a){var i=a.$index,n=a.row;return e.readonly?n.dmpInfo&&dmpInfo.dmpCrowdName:n.dmpInfo?t("el-button",{props:{type:"text"},on:{click:function(t){e.handleSelectCrowdStart(i)}}},n.dmpInfo.dmpCrowdName):void 0}}];return this.readonly||t.push({label:"操作",width:180,render:function(t,a){var i=a.$index,n=a.row,o=[t("el-button",{on:{click:function(){e.handleRemoveTab(i)}}},"删除")];return n.dmpInfo?o.unshift(t("el-button",{on:{click:function(){e.handleRemoveCrowd(i)}}},"取消定向")):o.unshift(t("el-button",{props:{disabled:n.isDefaultTab},on:{click:function(){e.handleSelectCrowdStart(i)}}},"选择人群")),o}}),t}},props:{tabs:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:function(){return!1}}},methods:{handleSave:function(){this.tabList.length>0?this.$emit("set-end",this.tabList):this.$message({type:"error",message:"请至少选择一个版面"})},handlePreviewTab:function(e,t){this.activePage="tab",this.embedTab={index:t,id:e.tabId,version:e.currentVersion,mode:"read"}},handleTabEmbedBack:function(){var e=this.embedTab,t=e.index,a=e.id,i=this.tabList[t];this.activePage="tab_group_setter",this.$service.tabInfoGet({id:a}).then(function(e){Object.assign(i,e)})},handleSetDefaultTab:function(e){var t=this;this.tabList.forEach(function(a,i){i===e?t.$set(a,"isDefaultTab",!0):t.$set(a,"isDefaultTab",!1)})},handleRemoveTab:function(e){this.tabList.splice(e,1)},handleSelectTabStart:function(){var e=this;this.$nextTick(function(){var t=e.$refs.tabSelector;e.tabList.forEach(t.handleTableRowSelectionAdd)})},handleSelectTabEnd:function(e){this.$refs.tabTable.handleAppendData(e,"tabId")},handleSelectCrowdStart:function(e){this.showCrowdSelector=!0,this.activeTabIndex=e},handleSelectCrowdCancel:function(){this.showCrowdSelector=!1},handleSelectCrowdEnd:function(e,t){var a=this.tabList,i=a.findIndex(function(a){var i=a.dmpInfo;if(i&&i.dmpPolicyId===e.value&&i.dmpCrowdId===t.value)return!0});if(-1===i){this.showCrowdSelector=!1;var n=this.tabList[this.activeTabIndex];this.$set(n,"dmpInfo",{dmpPolicyId:e.value,dmpCrowdId:t.value,dmpPolicyName:e.label,dmpCrowdName:t.label})}else this.$message({type:"error",message:"第"+(i+1)+"个版面已选择该人群"})},handleRemoveCrowd:function(e){var t=this.tabList;t[e].dmpInfo=void 0}},created:function(){this.tabList=this.tabs.slice()}},Xd=Kd,Yd=Object(K["a"])(Xd,eu,tu,!1,null,null,null),Zd=Yd.exports,Qd={mixins:[Qc],components:{PageWrapper:qs,PageContentWrapper:Xs,CommonContent:_c,TabSelector:Wc,InputOrder:Yc,HomePageTabGroupSetter:Zd,OrderableTable:ru,TabInfo:jd},data:function(){return{mode:"create",resourceName:"首页方案",activePage:"homepage",showTabGroupSetter:!1,showCrowdSelector:!1,showAuditDialog:!1,embedTab:void 0,selectedTabList:[],selectedTabListIndexed:{},activeTabGroupIndex:void 0,auditHistories:[],auditForm:{auditFlag:4,auditDesc:""},urls:{preview:"/homepageInfo/preview.html",edit:"/homepageInfo/edit.html",tools:"/buttonManage/getAuditDetailButton.html",edit_history_view:"/homepageInfo/editHistory.html"},versionList:[],homepage:{homepageId:void 0,homepageName:void 0,homepageModel:"normal",homepageVersion:void 0,homepageStatus:void 0,currentVersion:void 0,defaultFocusIndex:void 0,tabInfos:[]},HOME_MODE_MAP:{normal:"普通模式",child:"儿童模式",old:"老人模式"},rules:{homepageName:[{required:!0,message:"请输入首页名称"}],homepageModel:[{required:!0,message:"请选择首页模式"}],homepageVersion:[{required:!0,message:"请输入首页版本号"}]}}},computed:{resourceInfo:function(){var e=this.homepage;if(e.homepageId)return{id:e.homepageId,type:"homepage",menuElId:"homepageInfo",version:e.currentVersion,status:e.homepageStatus}},tabGroupList:{get:function(){var e=this.homepage,t=e.defaultFocusIndex,a=e.tabInfos||[],i=[];return a.forEach(function(e){var t=e.findIndex(function(e){return e.isDefaultTab}),a={tabCount:e.length,canBeDefaultFocusTab:!1,tabList:e},n=e[t>-1?t:0];(t>-1||1===a.tabCount&&void 0===n.dmpInfo)&&(a.canBeDefaultFocusTab=!0),Object.assign(a,n),i.push(a)}),void 0===t||i[t].canBeDefaultFocusTab||(e.defaultFocusIndex=void 0),console.log("tabGroupList="+i),i},set:function(e){this.homepage.tabInfos=e.map(function(e){return e.tabList})}},tabGroupTableHeader:function(){var e=this,t=[{label:"版面ID",prop:"tabId"},{label:"版面名称",width:180,render:function(t,a){var i=a.$index,n=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handleShowTabGroup(i)}}},n.tabName)}},{prop:"tabCnTitle",label:"TAB标题(中文)",width:180},{label:"默认落焦",width:80,align:"center",render:function(t,a){var i=a.$index,n=a.row,o=e.homepage.defaultFocusIndex;return"read"===e.mode?i===o?"是":"否":t("el-radio",{attrs:{title:n.canBeDefaultFocusTab?"":"只有普通版面或设了默认版面的定向版面组才能设为默认落焦"},props:{disabled:!n.canBeDefaultFocusTab,value:o,label:i},on:{input:function(t){e.homepage.defaultFocusIndex=t}}},"")}},{label:"版面数",prop:"tabCount",width:80},{label:"默认版面",width:80,render:function(e,t){t.$index;var a=t.row;return a.isDefaultTab?"有":"否"}}];return"read"!==this.mode&&t.push({label:"操作",width:80,render:function(t,a){var i=a.$index;a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handleRemoveTab(i)}}},"删除")}}),t}},props:["id","initMode","version"],methods:{handleShowTabGroup:function(e){this.activeTabGroupIndex=e,this.activePage="tab_group_setter"},handleSetTabGroupEnd:function(e){this.activePage="homepage",this.$set(this.homepage.tabInfos,this.activeTabGroupIndex,e)},handleSaveDraft:function(){var e=JSON.parse(JSON.stringify(this.homepage));e.homepageStatus=2,"replicate"===this.mode&&(e.currentVersion=void 0),this.submit(e)},handleSubmitAudit:function(){var e=JSON.parse(JSON.stringify(this.homepage));e.homepageStatus=3,"replicate"===this.mode&&(e.currentVersion=void 0),this.submit(e)},validate:function(e,t){this.$refs.homepageForm.validate(function(a){if(a){var i=e.tabInfos;if(3===e.homepageStatus){if(0===e.tabInfos.length)return t("请至少选择一个版面");if(void 0===e.defaultFocusIndex)return t("请选择默认落焦版面");for(var n={},o=0,l=i.length;o<l;o++){var r=i[o],s=void 0;if(1===r.length&&void 0===r[0].dmpInfo?(!0,s=r[0]):(!1,s=r.find(function(e){return e.isDefaultTab})),s){var c=n[s.tabId];if(void 0!==c)return t("第 "+(o+1)+" 个版面与第 "+(c+1)+" 个版面或默认版面重复");n[s.tabId]=o}}for(var u=0,d=i.length;u<d;u++){var p=i[u];if(1!==p.length||void 0!==p[0].dmpInfo)for(var h=0,m=p.length;h<m;h++){var f=n[p[h].tabId],b=p[h].dmpInfo||{};if(!p[h].isDefaultTab){if(void 0===b.dmpCrowdId)return t("请设置第 "+(u+1)+" 个组第 "+(h+1)+" 个版面的人群");if(void 0!==f)return t("第 "+(u+1)+" 个版面组里的第"+(h+1)+"个版面与第 "+(f+1)+" 个版面组的版面重复")}}}}t()}else t("请把表单填写完整")})},submit:function(e){this.validate(e,function(t){var a=this;t?this.$message({type:"error",message:t}):this.$service.homePageInfoSave(this.parseDataToApi(e),"保存成功").then(function(e){a.$emit("upsert-end")})}.bind(this))},parseApiToData:function(e){var t=JSON.parse(JSON.stringify(e)),a=t.tabInfos.findIndex(function(e){return 1===e.tabIsFocus});t.defaultFocusIndex=a>-1?a:void 0;var i=[];return(t.tabInfos||[]).forEach(function(e,t){var a=[];e.tabId&&a.push({tabId:e.tabId,tabName:e.tabName,tabCnTitle:e.tabCnTitle,tabEnTitle:e.tabEnTitle,currentVersion:e.currentVersion,isDefaultTab:!1}),e.dmpTabList&&e.dmpTabList.forEach(function(e){var t={isDefaultTab:!1,tabId:e.tabId,tabName:e.tabName,tabCnTitle:e.tabCnTitle,tabEnTitle:e.tabEnTitle,currentVersion:e.currentVersion};-1===e.dmpCrowdId?t.isDefaultTab=!0:void 0!==e.dmpCrowdId&&(t.dmpInfo={dmpPolicyId:e.dmpPolicyId,dmpPolicyName:e.dmpPolicyName,dmpCrowdName:e.dmpCrowdName,dmpCrowdId:e.dmpCrowdId}),a.push(t)}),i.push(a)}),t.tabInfos=i,t},parseDataToApi:function(e){var t=JSON.parse(JSON.stringify(e)),a=t.defaultFocusIndex,i=[];return t.tabInfos.forEach(function(e,t){var n={isDmpTab:0,tabIsFocus:t===a?1:0},o=[],l=0;e.length;e.forEach(function(a){if(void 0===a.dmpInfo&&1===e.length)n.tabId=a.tabId,n.tabSequence=t;else if(a.isDefaultTab)n.tabId=a.tabId,n.tabSequence=t;else{var i=a.dmpInfo||{};o.push({tabId:a.tabId,tabSequence:l++,dmpPolicyId:i.dmpPolicyId,dmpCrowdId:i.dmpCrowdId,dmpPolicyName:i.dmpPolicyName,dmpCrowdName:i.dmpCrowdName})}}),o.length>0&&(n.tabId&&(o.push({tabId:n.tabId,tabSequence:l++,dmpPolicyName:"不限",dmpCrowdName:"不限",dmpPolicyId:-1,dmpCrowdId:-1}),n.tabId=void 0),n.isDmpTab=1,n.dmpTabList=o),i.push(n)}),t.tabInfos=i,delete t.defaultFocusIndex,t},setHomepage:function(e){e=this.parseApiToData(e),Object.assign(this.homepage,e),this.selectedTabList=e.tabInfos.map(function(e){return{id:e.tabId,label:e.tabName,data:e}})},handleSelectTabEnd:function(e){var t=this.homepage.tabInfos;e.forEach(function(e){t.push([Object.assign({},e)])})},handleTabEmbedBack:function(){this.activePage="homepage"},handleCreateTab:function(){this.activePage="tab",this.embedTab={mode:"create"}},handleRemoveTab:function(e){var t=this.homepage,a=t.defaultFocusIndex;this.homepage.tabInfos.splice(e,1),t.defaultFocusIndex=e<a?a-1:e===a?void 0:a},handleCopy:function(){var e=JSON.parse(JSON.stringify(this.homepage));e.homepageId=void 0,e.currentVersion="",this.submit(e)},fetchData:function(e){var t=this;this.$service.homePageGetDetail({id:this.id,version:e}).then(function(e){t.setHomepage(e)})}},created:function(){this.mode=this.initMode||"create",this.id&&this.fetchData(this.version)}},ep=Qd,tp=Object(K["a"])(ep,Es,Vs,!1,null,"6ee843e8",null),ap=tp.exports,ip=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),a("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.deleteData}},[e._v("删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},np=[],op={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},setDialogVisible:!1,selected:[],buttonList:[],table:{props:{"row-key":"homepageId"},header:[{label:"ID",prop:"homepageId"},{label:"首页名称",prop:"homepageName",align:"center",render:function(t,a){var i=a.row;return t($["Button"],{props:{type:"text"},on:{click:function(){e.handleRead(i)}}},i.homepageName)}},{label:"关联策略",prop:"relationPolicyName",width:300,render:function(e,t){var a=t.row,i=a.relationPolicyName;return i.length>20?i.slice(0,20)+"...":i}},{label:"版本/状态",prop:"homepageStatus",align:"center",render:function(t,a){var i=a.row,n=e.$consts.statusText;return t("span","".concat(i.currentVersion,"/").concat(n[i.homepageStatus]))}},{label:"待审核副本",prop:"duplicateVersion",align:"center",render:function(t,a){var i=a.row;return""===i.duplicateVersion?"":t($["Button"],{props:{type:"text"},on:{click:function(t){e.handleRead(i,i.duplicateVersion)}}},i.duplicateVersion)}},{label:"更新时间",prop:"lastUpdateDate"},{label:"更新人",prop:"modiferName"},{label:"操作",width:"100",fixed:"right",render:W["utils"].component.createOperationRender(this,{handleCopy:"复制"})}],data:[],selected:[],selectionType:"multiple"}}},computed:{},methods:{handleCopy:function(e){var t=e.row;this.$emit("copy",t)},addData:function(){this.$emit("create")},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("edit",this.selected[0])},handleRead:function(e,t){this.$emit("read",e,t)},deleteData:function(){this.$isAllowDelete(this.selected)&&window.confirm("确定要删除吗")&&this.$service.homePageInfoDelete({id:this.selected.map(function(e){return e.homepageId}).join(",")},"删除成功").then(this.fetchData)},openPolicyDialog:function(e){console.log(e[0])},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.homepageId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e="homepageId",t=this.table,a=this.selected.reduce(function(t,a){return t[a[e]]=!0,t},{});t.selected=t.data.reduce(function(t,i,n){return a[i[e]]&&t.push(n),t},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getHomePageInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,e.updateTableSelected()})},getSysMenuInfo:function(){var e=this;return this.$service.getHomePageInfoMenu().then(function(t){e.buttonList=t})}},created:function(){var e=ne.a.map({homepageId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),homepageName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"}),homepageStatus:ne.a.o.enum({"下架":"0","上架":"1","草稿":"2","待审核":"3","审核通过":"4","审核不通过":"5"}).other("form",{component:"Select",placeholder:"状态"}),chipModel:ne.a.o.string.other("form",{component:"Input",placeholder:"机型/机芯"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData(),this.getSysMenuInfo()}},lp=op,rp=(a("4f42"),Object(K["a"])(lp,ip,np,!1,null,"32f550d6",null)),sp=rp.exports,cp={components:{HomePageInfo:ap,HomePageInfoList:sp},data:function(){return{isShowList:!0,id:void 0,mode:"create",version:void 0}},methods:{handleCreate:function(){this.id=void 0,this.mode="create",this.isShowList=!1},handleEdit:function(e){this.id=e.homepageId,this.mode="edit",this.isShowList=!1},handleRead:function(e,t){this.id=e.homepageId,this.mode="read",this.version=t,this.isShowList=!1},handleCopy:function(e){this.id=e.homepageId,this.mode="copy",this.isShowList=!1},handleUpsertEnd:function(){this.isShowList=!0,this.$refs.list.fetchData(),this.mode="list",this.version=void 0},goBack:function(){this.isShowList=!0,this.mode="list",this.version=void 0}}},up=cp,dp=Object(K["a"])(up,Os,As,!1,null,null,null),pp=dp.exports,hp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["preview"===e.mode?a("PolicyManagePreview",{attrs:{editId:e.editId,version:e.version},on:{"upsert-end":e.handleUpsertEnd,"open-add-page":e.openAddPage,"go-back":e.goBack}}):e._e(),a("PolicyManageList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-preview-page":e.openPreviewPage}}),"add"===e.mode?a("PolicyManageAdd",{attrs:{isReplicate:e.isReplicate,editId:e.editId},on:{"add-home-page":e.addHomePage,"go-edit-Page":function(t){return e.openListPage(e.editData,!1)},"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},mp=[],fp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"policyConf"},on:{add:e.addData,edit:e.editData,delete:e.batchDel}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},bp=[],gp={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{pageSize:5},selected:[],selectedItems:[],table:{props:{rowKey:"policyId"},header:[{label:"ID",prop:"policyId",width:70},{label:"策略名称",prop:"policyName",width:150,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.policyName)}},{label:"策略优先级",prop:"priority"},{label:"关联首页方案",width:150,prop:"relationHomepageName"},{label:"机型",prop:"model"},{label:"机芯",prop:"chip"},{label:"版本",prop:"currentVersion"},{label:"状态",prop:"policyStatus",render:function(t,a){var i=a.row;return e.$numToAuditStatus(i.policyStatus)}},{label:"待审核副本",prop:"duplicateVersion",align:"center",render:function(t,a){var i=a.row;return""===i.duplicateVersion?"":t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i,i.duplicateVersion)}}},i.duplicateVersion)}},{label:"更新时间",prop:"lastUpdateDate"},{label:"更新人",prop:"modifierName"}],data:[],selected:[],selectionType:"multiple"}}},methods:{openReview:function(e,t){this.$emit("open-preview-page",e.policyId,t)},addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&(2===parseInt(this.selectedItems[0].policyStatus)?this.$emit("open-add-page",this.selected[0]):this.$message({type:"error",message:"只有草稿状态才能编辑"}))},batchDel:function(){var e=this;this.$isAllowDelete(this.selected)&&window.confirm("确定要删除吗")&&this.$service.policyConfRemove({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()})},handleRowSelectionAdd:function(e){var t=this.getIDs(e);this.selected=this.selected.concat(t.ids),this.selectedItems=this.selectedItems.concat(t.items),this.updateTableSelected()},getIDs:function(e){var t=[],a=[];return"undefined"!==typeof e.children&&e.children.forEach(function(e){t.push(e.policyId),a.push(e)}),t.push(e.policyId),a.push(e),{ids:t,items:a}},handleRowSelectionRemove:function(e){var t=this.getIDs(e),a=this.selected;this.selected=this.selected.filter(function(e,a){return!1===t.ids.includes(e)}),this.selectedItems=this.selectedItems.filter(function(e,i){return!1===t.ids.includes(a[i])}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.selectedItems=[],this.table.selected=[]},updateTableSelected:function(){var e=this,t=this.table,a=this.selected,i=t.data.reduce(function(t,a,i){return t=t.concat(e.getIDs(a).ids),t},[]);t.selected=i.reduce(function(e,t,i){return a.indexOf(t)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getPolicyManagePageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({policyId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),policyName:ne.a.o.string.other("form",{component:"Input",placeholder:"策略名称"}),policyStatus:ne.a.o.enum({"请选择":"","下架":"0","上架":"1","草稿":"2","待审核":"3","审核通过":"4","审核不通过":"5"}).other("form",{component:"Select",placeholder:"状态"}),chipModel:ne.a.o.string.other("form",{component:"Input",placeholder:"机型/机芯"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},vp=gp,yp=(a("364d"),Object(K["a"])(vp,fp,bp,!1,null,"65fcc8e0",null)),wp=yp.exports,Ip=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"策略名称",prop:"policyName"}},[a("el-input",{attrs:{placeholder:"策略名称"},model:{value:e.form.policyName,callback:function(t){e.$set(e.form,"policyName",t)},expression:"form.policyName"}})],1),a("el-form-item",{attrs:{label:"机型机芯",prop:"chipModel"}},[0===e.form.deviceInfos.length?a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.selectChipModel}},[e._v("选择机型机芯")]):e._e(),e.form.deviceInfos.length>0?a("SelectedTag",[a("ul",[e._l(e.form.deviceInfos,function(t,i){return a("li",{key:i},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.modelChipSelectedRemove(t)}}},[e._v(e._s(t.model)+"_"+e._s(t.chip))])],1)}),a("li",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.selectChipModel}},[e._v("选择机型机芯")])],1)],2)]):e._e()],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"首页版本号",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerStart"}},[a("el-input-number",{attrs:{min:1e6,max:9999999},model:{value:e.form.homePageVerStart,callback:function(t){e.$set(e.form,"homePageVerStart",t)},expression:"form.homePageVerStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerEnd"}},[a("el-input-number",{attrs:{min:1e6,max:9999999},model:{value:e.form.homePageVerEnd,callback:function(t){e.$set(e.form,"homePageVerEnd",t)},expression:"form.homePageVerEnd"}})],1)],1)],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"Mac地址",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macStart"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址起始"},model:{value:e.form.macStart,callback:function(t){e.$set(e.form,"macStart",t)},expression:"form.macStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macEnd"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址结尾"},model:{value:e.form.macEnd,callback:function(t){e.$set(e.form,"macEnd",t)},expression:"form.macEnd"}})],1)],1)],1),a("el-form-item",{attrs:{label:"策略优先级",prop:"priority"}},[a("el-input-number",{attrs:{placeholder:"策略优先级"},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}}),a("span",{staticClass:"tip"},[e._v("注：数值越大优先级越高，数值越小优先级越低")])],1),a("el-form-item",{attrs:{label:"关联首页方案"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.selectHomePageModel("normal")}}},[e._v("选择标准模式首页")]),"undefined"!==typeof e.form.homepageInfoListObj["normal"]?a("span",{staticClass:"tip"},[e._v("\n            已选首页：\n            "),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["normal"].homepageName))])],1):e._e()],1),a("el-form-item",{attrs:{label:"关联首页方案"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.selectHomePageModel("child")}}},[e._v("选择儿童模式首页")]),"undefined"!==typeof e.form.homepageInfoListObj["child"]?a("span",{staticClass:"tip"},[e._v("\n            已选首页：\n            "),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["child"].homepageName))])],1):e._e()],1),a("el-form-item",{attrs:{label:"定向首页方案"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.addHomePage("normal")}}},[e._v("添加标准模式")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.addHomePage("child")}}},[e._v("添加儿童模式")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.cancel}},[e._v("解绑所有方案")]),e.form.specialNormalHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialNormalHp,title:"标准模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e(),e.form.specialChildHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialChildHp,title:"儿童模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitBtn(3)}}},[e._v("提交审核")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.submitBtn(2)}}},[e._v("保存草稿")])],1)],1)],1)],1),a("el-dialog",{attrs:{dialogTitle:e.dialogTitle,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},["modelChip"===e.mode?a("ChipModel",{ref:"chipModelSelected",attrs:{selectionType:e.selectionType},on:{"row-click":e.ChipModelRowClick}}):e._e(),"HomePageModel"===e.mode?a("HomePageModel",{attrs:{homepageModel:e.model,homepageResource:e.platform,homepageStatusArray:"4"},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick}}):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.mode=""}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("确 定")])],1)],1),e.addHomePageDialogVisible?a("PolicyManageAddHomePage",{attrs:{itemType:e.model,editHomePageData:e.editHomePageData},on:{"add-home-page-close":e.addHomePageClose,"create-home-page":e.createHomePage}}):e._e()],1)},Tp=[],Sp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("el-form",{staticClass:"search",attrs:{inline:!0,model:e.formSearch}},[a("el-form-item",[a("el-select",{attrs:{placeholder:"内容源"},on:{change:e.changePlatform},model:{value:e.formSearch.platform,callback:function(t){e.$set(e.formSearch,"platform",t)},expression:"formSearch.platform"}},[a("el-option",{attrs:{label:"爱奇艺",value:"yinhe"}}),a("el-option",{attrs:{label:"腾讯",value:"tencent"}}),a("el-option",{attrs:{label:"优朋",value:"voole"}}),a("el-option",{attrs:{label:"优酷",value:"youku"}})],1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"机型"},model:{value:e.formSearch.model,callback:function(t){e.$set(e.formSearch,"model",t)},expression:"formSearch.model"}},[e._v(">")])],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"机芯"},model:{value:e.formSearch.chip,callback:function(t){e.$set(e.formSearch,"chip",t)},expression:"formSearch.chip"}},[e._v(">")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleFilterChange}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleFilterReset}},[e._v("重置")])],1)],1),a("el-collapse",[a("el-collapse-item",{attrs:{title:"新增"}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"内容源",prop:"platform"}},[a("el-select",{attrs:{placeholder:"内容源"},model:{value:e.form.platform,callback:function(t){e.$set(e.form,"platform",t)},expression:"form.platform"}},[a("el-option",{attrs:{label:"爱奇艺",value:"yinhe"}}),a("el-option",{attrs:{label:"腾讯",value:"tencent"}}),a("el-option",{attrs:{label:"优朋",value:"voole"}}),a("el-option",{attrs:{label:"优酷",value:"youku"}})],1)],1),a("el-form-item",{attrs:{label:"机型",prop:"model"}},[a("el-input",{attrs:{placeholder:"机型"},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}},[e._v(">")])],1),a("el-form-item",{attrs:{label:"机芯",prop:"chip"}},[a("el-input",{attrs:{placeholder:"机芯"},model:{value:e.form.chip,callback:function(t){e.$set(e.form,"chip",t)},expression:"form.chip"}},[e._v(">")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addModelChip}},[e._v("添加")])],1)],1)],1),a("el-collapse-item",{attrs:{title:"选中的机型机芯"}},[a("SelectedTag",[a("ul",e._l(e.selected,function(t){return a("li",{key:t.devParId},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.handleRowSelectionRemove(t)}}},[e._v(e._s(t.model)+"_"+e._s(t.chip))])],1)}),0)])],1)],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick,"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Cp=[],kp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selectedItem",style:{maxHeight:e.maxHeight}},[e._t("default")],2)},_p=[],Pp={props:{maxHeight:String},data:function(){return{}}},xp=Pp,Dp=(a("16f7"),Object(K["a"])(xp,kp,_p,!1,null,"c172bb06",null)),Fp=Dp.exports,$p={props:{selectionType:{type:String,default:function(){return"multiple"}}},components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],SelectedTag:Fp},data:function(){var e=this;return{platform:"tencent",form:{platform:null,model:null,chip:null},formRules:{platform:[{required:!0,message:"请选择",trigger:"blur"}],model:[{required:!0,message:"请输入机型",trigger:"blur"}],chip:[{required:!0,message:"请输入机芯",trigger:"blur"}]},formSearch:{sort:void 0,order:void 0,platform:"tencent",chip:void 0,model:void 0},pagination:{pageSize:5},selected:[],table:{props:{},header:[{label:"ID",prop:"devParId"},{label:"内容源",prop:"platform",render:function(t,a){var i=a.row;return e.$platform(i.platform)}},{label:"机芯",prop:"chip"},{label:"机型",prop:"model"}],data:[],selected:[],selectionType:this.selectionType}}},methods:{rowClick:function(e){this.$emit("row-click",e)},changePlatform:function(e){window.confirm("是否要切换内容源，切换内容源之后，首页方案数据将会清除掉")?(this.platform=e,this.fetchData()):this.formSearch.platform=this.platform},addModelChip:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.addChipAndModel(e.form,"添加成功").then(function(t){e.fetchData()})})},handleRowSelectionAdd:function(e){this.selected.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t.devParId!==e.devParId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){var t=this;e?this.table.data.forEach(this.handleRowSelectionAdd):(this.unselectedIds=this.table.data.map(function(e){return e.devParId}),this.selected=this.selected.filter(function(e){if(t.unselectedIds.indexOf(e.devParId)<0)return e}),this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected.map(function(e){return e.devParId});e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.devParId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.formSearch={sort:void 0,order:void 0,platform:"tencent",chip:void 0,model:void 0},this.fetchData()},parseFilter:function(){var e=this.formSearch,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this;this.table.selected=[];var t=this.parseFilter();this.$service.getChipAndModelPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){this.fetchData()}},Rp=$p,Lp=(a("49e3"),Object(K["a"])(Rp,Sp,Cp,!1,null,"95c9e268",null)),Np=Lp.exports,Op=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick}})],1)],1)},Ap=[],Ep={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ContentEllipsis:W["ContentEllipsis"]},props:{homepageModel:String,homepageResource:String,homepageStatusArray:String},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{pageSize:5},selected:[],table:{props:{},header:[{label:"ID",prop:"homepageId",width:"100"},{label:"名称",width:"130",prop:"homepageName",sortable:!0},{label:"关联版面名称",prop:"relationTabName",render:function(e,t){var a=t.row,i=a.relationTabName;return i.length>40&&(i=i.substring(0,40)+"..."),e("div",{attrs:{title:a.relationTabName}},i)}},{label:"首页模式",prop:"homepageModel",render:function(e,t){var a=t.row;return"child"===a.homepageModel?"儿童模式":"标准模式"}},{label:"更新时间",prop:"lastUpdateDate",width:150,sortable:!0}],data:[],selected:[],selectionType:"single"}}},watch:{homepageModel:function(){this.fetchData()}},methods:{rowClick:function(e){this.$emit("row-click",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();t.homepageModel=this.homepageModel,t.homepageResource=this.homepageResource,t.homepageStatusArray=this.homepageStatusArray,this.$service.getHomePageModelPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({homepageId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),homepageName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"})}).other("form",{cols:{item:6,label:0,wrapper:22},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Vp=Ep,Mp=Object(K["a"])(Vp,Op,Ap,!1,null,null,null),Bp=Mp.exports,Up=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"添加定向首页方案",visible:e.dialogVisible,width:"80%","before-close":e.addHomePageClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{"label-width":"120px"}},[a("el-form-item",{attrs:{label:"模式"}},[e._v(e._s("normal"===e.itemType?"标准模式":"儿童模式"))]),a("el-form-item",{attrs:{label:"人群"}},[a("el-button",{on:{click:e.handleSelectCrowdStart}},[e._v("选择人群")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.form.attribute&&e.form.attribute.crowdIds,expression:"form.attribute && form.attribute.crowdIds"}],staticClass:"marginL"},[e._v("已选择: "+e._s(e.form.attribute.crowdName)+"\n       ")])],1),a("el-form-item",{attrs:{label:"首页方案"}},[a("el-button",{on:{click:function(t){return e.handleSelectHomePageStart()}}},[e._v("选择首页")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.form.homepageName,expression:"form.homepageName"}],staticClass:"marginL"},[e._v("已选择: "+e._s(e.form.homepageName))])],1),a("el-form-item",{attrs:{label:"AB测试"}},[a("el-switch",{attrs:{"on-text":"开启","off-text":"关闭"},model:{value:e.form.useABTest,callback:function(t){e.$set(e.form,"useABTest",t)},expression:"form.useABTest"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.form.useABTest,expression:"form.useABTest"}],attrs:{label:"测试组"}},[e._l(e.form.testHomeList,function(t,i){return a("el-form",{key:i,staticClass:"test-group",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"编号"}},[a("el-select",{model:{value:t.distributeModel,callback:function(a){e.$set(t,"distributeModel",a)},expression:"testItem.distributeModel"}},[a("el-option",{attrs:{label:"A",value:"A"}}),a("el-option",{attrs:{label:"B",value:"B"}}),a("el-option",{attrs:{label:"C",value:"C"}}),a("el-option",{attrs:{label:"D",value:"D"}})],1)],1),a("el-form-item",{attrs:{label:"首页方案"}},[a("el-button",{on:{click:function(a){return e.handleSelectHomePageStart(t)}}},[e._v("选择首页")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.homepageName,expression:"testItem.homepageName"}],staticClass:"marginL"},[e._v("已选择: "+e._s(t.homepageName))])],1),a("el-button",{staticClass:"test-group__remove",attrs:{type:"text"},on:{click:function(a){return e.handleRemoveTestItem(t)}}},[a("i",{staticClass:"el-icon-close"})])],1)}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.form.testHomeList&&e.form.testHomeList.length<4,expression:"form.testHomeList && form.testHomeList.length < 4"}],attrs:{type:"primary"},on:{click:e.handleAddTestItem}},[e._v("添加组")])],2)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.addHomePageClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addHomePageSubmit}},[e._v("确 定")])],1)],1),e.showSelectCrowdDialog?a("CrowdSelector",{on:{"select-cancel":e.handleSelectCrowdCancel,"select-end":e.handleSelectCrowdEnd}}):e._e(),a("el-dialog",{attrs:{title:"选择首页",visible:e.showHomePageDialogVisible,width:"80%","append-to-body":""},on:{"update:visible":function(t){e.showHomePageDialogVisible=t}}},[a("HomePageModel",{attrs:{homepageModel:e.itemType},on:{"row-click":e.rowClick}})],1)],1)},jp=[],Hp={components:{CrowdSelector:Jd,HomePageModel:Bp},props:{itemType:String,editHomePageData:Object},watch:{"form.useABTest":"handleToggleABTest"},data:function(){return{form:{},dialogVisible:!0,showSelectCrowdDialog:!1,showHomePageDialogVisible:!1,specialNormalHp:[],specialChildHp:[],crowdsIndexed:{},useABTestHomePage:void 0,activeItem:void 0,activeGroup:void 0}},methods:{addHomePageClose:function(){this.$emit("add-home-page-close")},addHomePageSubmit:function(){var e=this.form,t=e.attribute.crowdIds;if(!t||0===t.length)return this.$message("请选择人群");if(!e.homepageId)return this.$message("请选择首页");if(e.useABTest){for(var a,i,n,o,l,r=e.testHomeList,s=[],c=[],u=0,d=r.length;u<d;u++){l=r[u];var p=l.distributeModel,h=l.homepageId;if(s.indexOf(p)>-1){n=p;break}if(!p){a=u;break}if(s.push(p),c.indexOf(h)>-1){o=l.homepageName;break}if(!h){i=p;break}c.push(h)}if(void 0!==a)return this.$message("请选择第"+(a+1)+"测试组的编号");if(i)return this.$message("请选择测试组"+i+"的首页");if(o)return this.$message("测试组含有重复首页: "+o);if(n)return this.$message("含有重复测试组编号: "+n)}e.testHomeList=e.useABTest?e.testHomeList:[],this.$emit("create-home-page",this.form)},handleRemoveItem:function(e,t){var a="child"===e?this.specialChildHp:this.specialNormalHp;a.splice(a.indexOf(t),1)},handleEditItem:function(e,t){var a;t?(a=JSON.parse(JSON.stringify(t)),this.activeItem=t):(a="child"===e?this.getInitSpecialChild():this.getInitSpecialNormal(),this.activeItem=void 0),a.useABTest=a.testHomeList.length>0,this.form=a,this.itemType=e},rowClick:function(e){void 0!==this.useABTestHomePage?(this.useABTestHomePage.homepageId=e.homepageId,this.useABTestHomePage.homepageStatus=e.homepageStatus,this.useABTestHomePage.homepageName=e.homepageName):(this.form.homepageId=e.homepageId,this.form.homepageVersion=e.homepageVersion,this.form.homepageStatus=e.homepageStatus,this.form.homepageName=e.homepageName),this.showHomePageDialogVisible=!1},handleSelectCrowdStart:function(){var e=JSON.parse(JSON.stringify(this.form.attribute||{}));this.selectedPolicyIds=e.crowdPolicyIds||[],this.selectedCrowdIds=e.crowdIds||[],this.showSelectCrowdDialog=!0},handleSelectHomePageStart:function(e){this.useABTestHomePage=e,this.showHomePageDialogVisible=!0},handleSelectCrowdCancel:function(){},handleSelectCrowdEnd:function(e,t){var a,i,n,o=this.specialNormalHp,l=this.specialChildHp;a=o.length;while(--a>=0)if(o[a].attribute.crowdIds[0]===t.value){i="首页模式",n=a;break}a=l.length;while(--a>=0)if(l[a].attribute.crowdIds[0]===t.value){i="儿童模式",n=a;break}if(i)return this.$message({type:"error",message:i+" 第"+(n+1)+"个方案已选择该人群"});this.$set(this.crowdsIndexed,t.value,t),this.form.attribute={crowdIds:[t.value],crowdName:t.label,crowdPolicyName:e.label,crowdPolicyIds:[e.value]},this.showSelectCrowdDialog=!1},getSelectedCrowdNames:function(e){console.log(e);var t=e.attribute||{},a=this.crowdsIndexed,i=t.crowdIds;if(i)return i.map(function(e){return a[e]?a[e].label:"加载中..."})},handleRemoveTestItem:function(e){var t=this.form.testHomeList;t.splice(t.indexOf(e),1)},handleAddTestItem:function(){this.form.testHomeList.push(this.getInitTestItem())},getInitTestItem:function(){return{distributeModel:void 0,homepageId:void 0,homepageName:void 0,homepageStatus:void 0}},handleToggleABTest:function(e){e&&0===this.form.testHomeList.length&&this.handleAddTestItem()},getInitSpecialNormal:function(){return{homepageId:void 0,homepageVersion:"",homepageModel:"normal",homepageStatus:void 0,distributeModel:"default",attribute:{},useABTest:!1,testHomeList:[]}},getInitSpecialChild:function(){return{homepageId:void 0,homepageVersion:"",homepageModel:"child",homepageStatus:void 0,distributeModel:"default",attribute:{},useABTest:!1,testHomeList:[]}}},created:function(){this.form="child"===this.itemType?this.getInitSpecialChild():this.getInitSpecialNormal(),"{}"!==JSON.stringify(this.editHomePageData)&&(this.form=this.editHomePageData)}},qp=Hp,Wp=(a("b5f8"),Object(K["a"])(qp,Up,jp,!1,null,"cdee7754",null)),Gp=Wp.exports,zp=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v(e._s(e.title))]),a("section",{staticClass:"content"},e._l(e.dataArr,function(t,i){return a("div",{key:i,staticClass:"homePageView"},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"人群"}},[a("el-tag",{attrs:{type:"success",size:"medium"}})],1),a("el-form-item",{attrs:{label:"首页方案"}},[a("el-tag",{attrs:{type:"success",size:"medium"}},[e._v(e._s(t.homepageName))])],1),a("el-form-item",{attrs:{label:"AB测试"}},[a("el-table",{attrs:{data:t.testHomeList,border:""}},[a("el-table-column",{attrs:{prop:"distributeModel",label:"编号"}}),a("el-table-column",{attrs:{prop:"homepageName",label:"首页方案"}})],1)],1)],1),a("div",{staticClass:"homePageView__action"},[a("i",{staticClass:"el-icon-edit",on:{click:function(a){return e.edit(t.homepageModel,i)}}}),a("i",{staticClass:"el-icon-close",on:{click:function(a){return e.remove(t.homepageModel,i)}}})])],1)}),0)])},Jp=[],Kp={props:{dataArr:Array,title:String},data:function(){return{}},methods:{edit:function(e,t){this.$emit("edit-item",e,t)},remove:function(e,t){this.$emit("remove-item",e,t)}},created:function(){this.$service.getCrowdOfPolicy("254").then(function(e){})}},Xp=Kp,Yp=(a("11f6"),Object(K["a"])(Xp,zp,Jp,!1,null,"010ad3a7",null)),Zp=Yp.exports,Qp={components:{ChipModel:Np,SelectedTag:Fp,HomePageModel:Bp,PolicyManageAddHomePage:Gp,SelectedHomePage:Zp},props:{editId:Number,isReplicate:Boolean},data:function(){return{title:null,selectionType:"multiple",dialogTitle:null,mode:null,dialogVisible:!1,addHomePageDialogVisible:!1,model:"normal",platform:"tencent",editHomePageData:{},form:{policyId:null,policyName:null,macStart:null,macEnd:null,homePageVerEnd:"",homePageVerStart:"",priority:null,policyStatus:3,deviceInfos:[],homepageInfoList:[],homepageInfoListObj:{},schemeFilterEntity:{partner:"tencent"},regionCityPairs:[],specialNormalHp:[],specialChildHp:[]},formRules:{policyName:[{required:!0,message:"请输入策略名称",trigger:"blur"}],macStart:[{required:!0,message:"请输入MAC起始地址",trigger:"blur"},{validator:this.$checkMacType,message:"请输入12位以字母数字组成的MAC地址",trigger:"blur"}],macEnd:[{required:!0,message:"请输入MAC结束地址",trigger:"blur"},{validator:this.$checkMacType,message:"请输入12位以字母数字组成的MAC地址",trigger:"blur"}],homePageVerStart:[{required:!0,message:"请输入首页版本起始值",trigger:"blur"}],homePageVerEnd:[{required:!0,message:"请输入首页版本结束值",trigger:"blur"}]}}},watch:{platform:function(e){this.form.homepageInfoList=[],this.form.homepageInfoListObj={},this.form.specialNormalHp=[],this.form.specialChildHp=[],this.form.schemeFilterEntity.partner=e}},methods:{ChipModelRowClick:function(e){this.dialogVisible=!1,this.form.deviceInfos=[{chip:e.chip,model:e.model}]},cancel:function(){this.form.homepageInfoList=[],this.form.homepageInfoListObj={},this.form.specialNormalHp=[],this.form.specialChildHp=[],this.form.schemeFilterEntity={}},rowClick:function(e){this.dialogVisible=!1,this.form.homepageInfoListObj[this.model]={homepageId:e.homepageId,homepageModel:e.homepageModel,homepageName:e.homepageName,homepageVersion:e.homepageVersion}},addHomePageClose:function(){this.addHomePageDialogVisible=!1},editHomePage:function(e,t){this.addHomePageDialogVisible=!0,this.editHomePageData="normal"===e?this.form.specialNormalHp[t]:this.form.specialChildHp[t]},removeHomePage:function(e,t){this.editHomePageData="normal"===e?this.form.specialNormalHp.splice(t,1):this.form.specialChildHp.splice(t,1)},createHomePage:function(e){this.addHomePageDialogVisible=!1,"normal"===this.model?this.form.specialNormalHp.push(e):this.form.specialChildHp.push(e)},addHomePage:function(e){this.addHomePageDialogVisible=!0,this.model=e,this.editHomePageData={}},modelChipSelectedRemove:function(e){this.form.deviceInfos.splice(e,1)},dialogSubmit:function(){switch(this.dialogVisible=!1,this.mode){case"modelChip":var e=this.$refs.chipModelSelected.platform;e!==this.platform&&(this.platform=e),this.form.deviceInfos=this.$refs.chipModelSelected.selected.map(function(e){return{chip:e.chip,model:e.model}});break}},selectChipModel:function(){this.dialogVisible=!0,this.dialogTitle="选择机型机芯",this.mode="modelChip"},selectHomePageModel:function(e){this.dialogVisible=!0,this.dialogTitle="选择首页方案模式",this.mode="HomePageModel",this.model=e},submitBtn:function(e){var t=this;this.$refs.form.validate(function(a){var i=t.form.homepageInfoListObj;Object.keys(i).forEach(function(e){t.form.homepageInfoList.push(i[e])}),t.form.policyStatus=e,a&&t.$service.policyConfSave({jsonStr:JSON.stringify(t.form)},"保存成功").then(function(e){t.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.getPolicyConfDetail({id:this.editId}).then(function(t){e.form={currentVersion:e.isReplicate?"":t.currentVersion,policyId:t.policyId,policyName:t.policyName,macStart:t.macStart,macEnd:t.macEnd,homePageVerEnd:t.homePageVerEnd,homePageVerStart:t.homepageVerStart,priority:t.priority,policyStatus:t.policyStatus,deviceInfos:[{chip:t.chip,model:t.model}],homepageInfoList:t.homepageInfoList,homepageInfoListObj:{normal:t.homepageInfoList.length>0?t.homepageInfoList[0]:{},child:2===t.homepageInfoList.length?t.homepageInfoList[1]:{}},schemeFilterEntity:{partner:t.platform},regionCityPairs:[],specialNormalHp:t.specialNormalHp,specialChildHp:t.specialChildHp}})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.isReplicate?this.title="创建副本":this.title="编辑",this.selectionType="single",this.getEditData()):this.title="新增"}},eh=Qp,th=(a("f746"),Object(K["a"])(eh,Ip,Tp,!1,null,"c8cb6efe",null)),ah=th.exports,ih=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("CommonContent",{attrs:{mode:"read","resource-info":e.resourceInfo},on:{replicate:e.replicate,edit:e.edit,unaudit:e.fetchData,shelves:e.fetchData,audit:function(t){return e.$emit("upsert-end")},"select-version":e.fetchData}},[a("div",[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])])]),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"策略名称",prop:"policyName"}},[e._v(e._s(e.form.policyName))]),a("el-form-item",{attrs:{label:"机型机芯",prop:"chipModel"}},[e.form.deviceInfos.length>0?a("SelectedTag",[a("ul",e._l(e.form.deviceInfos,function(t,i){return a("li",{key:i},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.modelChipSelectedRemove(t)}}},[e._v(e._s(t.model)+"_"+e._s(t.chip))])],1)}),0)]):e._e()],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"首页版本号",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerStart"}},[a("el-input-number",{attrs:{disabled:"disabled",min:1e6,max:9999999},model:{value:e.form.homePageVerStart,callback:function(t){e.$set(e.form,"homePageVerStart",t)},expression:"form.homePageVerStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerEnd"}},[a("el-input-number",{attrs:{disabled:"disabled",min:1e6,max:9999999},model:{value:e.form.homePageVerEnd,callback:function(t){e.$set(e.form,"homePageVerEnd",t)},expression:"form.homePageVerEnd"}})],1)],1)],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"Mac地址",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macStart"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址起始",disabled:"disabled"},model:{value:e.form.macStart,callback:function(t){e.$set(e.form,"macStart",t)},expression:"form.macStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macEnd"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址起始",disabled:"disabled"},model:{value:e.form.macEnd,callback:function(t){e.$set(e.form,"macEnd",t)},expression:"form.macEnd"}})],1)],1)],1),a("el-form-item",{attrs:{label:"策略优先级",prop:"priority"}},[e._v("\n            "+e._s(e.form.priority)+"\n            "),a("span",{staticClass:"tip"},[e._v("注：数值越大优先级越高，数值越小优先级越低")])]),a("el-form-item",{attrs:{label:"关联首页方案"}},["undefined"!==typeof e.form.homepageInfoListObj["normal"]?a("span",{staticClass:"tip"},[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["normal"].homepageName))])],1):e._e()]),a("el-form-item",{attrs:{label:"关联首页方案"}},["undefined"!==typeof e.form.homepageInfoListObj["child"]?a("span",{staticClass:"tip"},[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["child"].homepageName))])],1):e._e()]),a("el-form-item",{attrs:{label:"定向首页方案"}},[e.form.specialNormalHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialNormalHp,title:"标准模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e(),e.form.specialChildHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialChildHp,title:"儿童模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e()],1)],1)],1)],1)],1)],1)},nh=[],oh={components:{SelectedTag:Fp,SelectedHomePage:Zp,CommonContent:_c},props:{editId:Number,version:String},data:function(){return{title:null,dialogTitle:null,mode:null,dialogVisible:!1,addHomePageDialogVisible:!1,model:"normal",platform:"tencent",editHomePageData:{},status:null,form:{policyId:null,policyName:null,macStart:null,macEnd:null,homePageVerEnd:"",homePageVerStart:"",priority:null,policyStatus:3,deviceInfos:[],homepageInfoList:[],homepageInfoListObj:{},schemeFilterEntity:{partner:"tencent"},regionCityPairs:[],specialNormalHp:[],specialChildHp:[]}}},computed:{resourceInfo:function(){var e=this.form;if(e.policyId)return{id:e.policyId,type:"policy",menuElId:"policyConf",version:e.currentVersion,status:e.policyStatus}}},methods:{replicate:function(e){this.$emit("open-add-page",this.editId,!0)},edit:function(){this.$emit("open-add-page",this.editId)},handleSubmitAudit:function(){},handleSaveDraft:function(){},audit:function(){},unaudit:function(){},shelves:function(){},selectVersion:function(e){this.getEditData(e)},editHomePage:function(e,t){this.addHomePageDialogVisible=!0,this.editHomePageData="normal"===e?this.form.specialNormalHp[t]:this.form.specialChildHp[t]},removeHomePage:function(e,t){this.editHomePageData="normal"===e?this.form.specialNormalHp.splice(t,1):this.form.specialChildHp.splice(t,1)},fetchData:function(e){var t=this;this.$service.getTestPolicyConfDetail({id:this.editId,version:e}).then(function(e){t.status=e.policyStatus,t.form={currentVersion:e.currentVersion,policyId:e.policyId,policyName:e.policyName,macStart:e.macStart,macEnd:e.macEnd,homePageVerEnd:e.homePageVerEnd,homePageVerStart:e.homepageVerStart,priority:e.priority,policyStatus:e.policyStatus,deviceInfos:[{chip:e.chip,model:e.model}],homepageInfoList:e.homepageInfoList,homepageInfoListObj:{normal:e.homepageInfoList.length>0?e.homepageInfoList[0]:{},child:2===e.homepageInfoList.length?e.homepageInfoList[1]:{}},schemeFilterEntity:{partner:e.platform},regionCityPairs:[],specialNormalHp:e.specialNormalHp,specialChildHp:e.specialChildHp}})}},created:function(){this.title="预览",this.fetchData(this.version)}},lh=oh,rh=(a("2cdf"),Object(K["a"])(lh,ih,nh,!1,null,"3f20cbd0",null)),sh=rh.exports,ch={components:{PolicyManageList:wp,PolicyManageAdd:ah,PolicyManagePreview:sh},data:function(){return{mode:"list",editId:void 0,isReplicate:!1,version:void 0}},methods:{addHomePage:function(){this.mode="addHomePage"},openPreviewPage:function(e,t){this.mode="preview",this.editId=e,this.version=t},handleUpsertEnd:function(){this.$refs.list.fetchData(),this.mode="list"},openAddPage:function(e,t){this.editId=e,this.isReplicate=t,this.mode="add"},openListPage:function(){this.mode="list",this.editId=null,this.$refs.list.fetchData()},goBack:function(){this.mode="list",this.editId=null}}},uh=ch,dh=Object(K["a"])(uh,hp,mp,!1,null,"fe467c3a",null),ph=dh.exports,hh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["preview"===e.mode?a("PolicyManagePreview",{attrs:{editId:e.editId,version:e.version},on:{"upsert-end":e.handleUpsertEnd,"open-add-page":e.openAddPage,"go-back":e.goBack}}):e._e(),a("PolicyManageList",{directives:[{name:"show",rawName:"v-show",value:"list"===e.mode,expression:"mode==='list'"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-preview-page":e.openPreviewPage}}),"add"===e.mode?a("PolicyManageAdd",{attrs:{isReplicate:e.isReplicate,editId:e.editId},on:{"add-home-page":e.addHomePage,"go-edit-Page":function(t){return e.openListPage(e.editData,!1)},"open-list-page":e.openListPage,"go-back":e.goBack}}):e._e()],1)},mh=[],fh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"testPolicyConf"},on:{add:e.addData,edit:e.editData,delete:e.batchDel}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},bh=[],gh={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{pageSize:5},selected:[],selectedItems:[],table:{props:{rowKey:"policyId"},header:[{label:"ID",prop:"policyId",width:70},{label:"策略名称",prop:"policyName",width:150,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.policyName)}},{label:"策略优先级",prop:"priority"},{label:"关联首页方案",width:150,prop:"relationHomepageName"},{label:"机型",prop:"model"},{label:"机芯",prop:"chip"},{label:"版本",prop:"currentVersion"},{label:"状态",prop:"policyStatus",render:function(t,a){var i=a.row;return e.$numToAuditStatus(i.policyStatus)}},{label:"待审核副本",prop:"duplicateVersion",align:"center",render:function(t,a){var i=a.row;return""===i.duplicateVersion?"":t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i,i.duplicateVersion)}}},i.duplicateVersion)}},{label:"更新时间",prop:"lastUpdateDate"},{label:"更新人",prop:"modifierName"}],data:[],selected:[],selectionType:"multiple"}}},methods:{openReview:function(e,t){this.$emit("open-preview-page",e.policyId,t)},addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&(2===parseInt(this.selectedItems[0].policyStatus)?this.$emit("open-add-page",this.selected[0]):this.$message({type:"error",message:"只有草稿状态才能编辑"}))},batchDel:function(){var e=this;this.$isAllowDelete(this.selected)&&window.confirm("确定要删除吗")&&this.$service.testPolicyConfRemove({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()})},handleRowSelectionAdd:function(e){var t=this.getIDs(e);this.selected=this.selected.concat(t.ids),this.selectedItems=this.selectedItems.concat(t.items),this.updateTableSelected()},getIDs:function(e){var t=[],a=[];return"undefined"!==typeof e.children&&e.children.forEach(function(e){t.push(e.policyId),a.push(e)}),t.push(e.policyId),a.push(e),{ids:t,items:a}},handleRowSelectionRemove:function(e){var t=this.getIDs(e),a=this.selected;this.selected=this.selected.filter(function(e,a){return!1===t.ids.includes(e)}),this.selectedItems=this.selectedItems.filter(function(e,i){return!1===t.ids.includes(a[i])}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.selectedItems=[],this.table.selected=[]},updateTableSelected:function(){var e=this,t=this.table,a=this.selected,i=t.data.reduce(function(t,a,i){return t=t.concat(e.getIDs(a).ids),t},[]);t.selected=i.reduce(function(e,t,i){return a.indexOf(t)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getTestPolicyManagePageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({policyId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),policyName:ne.a.o.string.other("form",{component:"Input",placeholder:"策略名称"}),policyStatus:ne.a.o.enum({"请选择":"","下架":"0","上架":"1","草稿":"2","待审核":"3","审核通过":"4","审核不通过":"5"}).other("form",{component:"Select",placeholder:"状态"}),chipModel:ne.a.o.string.other("form",{component:"Input",placeholder:"机型/机芯"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},vh=gh,yh=(a("e70b"),Object(K["a"])(vh,fh,bh,!1,null,"1328719d",null)),wh=yh.exports,Ih=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"策略名称",prop:"policyName"}},[a("el-input",{attrs:{placeholder:"策略名称"},model:{value:e.form.policyName,callback:function(t){e.$set(e.form,"policyName",t)},expression:"form.policyName"}})],1),a("el-form-item",{attrs:{label:"机型机芯",prop:"chipModel"}},[0===e.form.deviceInfos.length?a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.selectChipModel}},[e._v("选择机型机芯")]):e._e(),e.form.deviceInfos.length>0?a("SelectedTag",[a("ul",[e._l(e.form.deviceInfos,function(t,i){return a("li",{key:i},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.modelChipSelectedRemove(t)}}},[e._v(e._s(t.model)+"_"+e._s(t.chip))])],1)}),a("li",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.selectChipModel}},[e._v("选择机型机芯")])],1)],2)]):e._e()],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"首页版本号",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerStart"}},[a("el-input-number",{attrs:{min:1e6,max:9999999},model:{value:e.form.homePageVerStart,callback:function(t){e.$set(e.form,"homePageVerStart",t)},expression:"form.homePageVerStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerEnd"}},[a("el-input-number",{attrs:{min:1e6,max:9999999},model:{value:e.form.homePageVerEnd,callback:function(t){e.$set(e.form,"homePageVerEnd",t)},expression:"form.homePageVerEnd"}})],1)],1)],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"Mac地址",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macStart"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址起始"},model:{value:e.form.macStart,callback:function(t){e.$set(e.form,"macStart",t)},expression:"form.macStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macEnd"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址结尾"},model:{value:e.form.macEnd,callback:function(t){e.$set(e.form,"macEnd",t)},expression:"form.macEnd"}})],1)],1)],1),a("el-form-item",{attrs:{label:"策略优先级",prop:"priority"}},[a("el-input-number",{attrs:{placeholder:"策略优先级"},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}}),a("span",{staticClass:"tip"},[e._v("注：数值越大优先级越高，数值越小优先级越低")])],1),a("el-form-item",{attrs:{label:"关联首页方案"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.selectHomePageModel("normal")}}},[e._v("选择标准模式首页")]),"undefined"!==typeof e.form.homepageInfoListObj["normal"]?a("span",{staticClass:"tip"},[e._v("\n            已选首页：\n            "),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["normal"].homepageName))])],1):e._e()],1),a("el-form-item",{attrs:{label:"关联首页方案"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.selectHomePageModel("child")}}},[e._v("选择儿童模式首页")]),"undefined"!==typeof e.form.homepageInfoListObj["child"]?a("span",{staticClass:"tip"},[e._v("\n            已选首页：\n            "),a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["child"].homepageName))])],1):e._e()],1),a("el-form-item",{attrs:{label:"定向首页方案"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.addHomePage("normal")}}},[e._v("添加标准模式")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.addHomePage("child")}}},[e._v("添加儿童模式")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.cancel}},[e._v("解绑所有方案")]),e.form.specialNormalHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialNormalHp,title:"标准模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e(),e.form.specialChildHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialChildHp,title:"儿童模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e()],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitBtn(3)}}},[e._v("提交审核")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.submitBtn(2)}}},[e._v("保存草稿")])],1)],1)],1)],1),a("el-dialog",{attrs:{dialogTitle:e.dialogTitle,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},["modelChip"===e.mode?a("ChipModel",{ref:"chipModelSelected",attrs:{selectionType:e.selectionType},on:{"row-click":e.ChipModelRowClick}}):e._e(),"HomePageModel"===e.mode?a("HomePageModel",{attrs:{homepageModel:e.model,homepageResource:e.platform,homepageStatusArray:"4"},on:{"row-click":e.rowClick,"row-selection-change":e.rowClick}}):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1,e.mode=""}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogSubmit}},[e._v("确 定")])],1)],1),e.addHomePageDialogVisible?a("PolicyManageAddHomePage",{attrs:{itemType:e.model,editHomePageData:e.editHomePageData},on:{"add-home-page-close":e.addHomePageClose,"create-home-page":e.createHomePage}}):e._e()],1)},Th=[],Sh={components:{ChipModel:Np,SelectedTag:Fp,HomePageModel:Bp,PolicyManageAddHomePage:Gp,SelectedHomePage:Zp},props:{editId:Number,isReplicate:Boolean},data:function(){return{title:null,selectionType:"multiple",dialogTitle:null,mode:null,dialogVisible:!1,addHomePageDialogVisible:!1,model:"normal",platform:"tencent",editHomePageData:{},form:{policyId:null,policyName:null,macStart:null,macEnd:null,homePageVerEnd:"",homePageVerStart:"",priority:null,policyStatus:3,deviceInfos:[],homepageInfoList:[],homepageInfoListObj:{},schemeFilterEntity:{partner:"tencent"},regionCityPairs:[],specialNormalHp:[],specialChildHp:[]},formRules:{policyName:[{required:!0,message:"请输入策略名称",trigger:"blur"}],macStart:[{required:!0,message:"请输入MAC起始地址",trigger:"blur"},{validator:this.$checkMacType,message:"请输入12位以字母数字组成的MAC地址",trigger:"blur"}],macEnd:[{required:!0,message:"请输入MAC结束地址",trigger:"blur"},{validator:this.$checkMacType,message:"请输入12位以字母数字组成的MAC地址",trigger:"blur"}],homePageVerStart:[{required:!0,message:"请输入首页版本起始值",trigger:"blur"}],homePageVerEnd:[{required:!0,message:"请输入首页版本结束值",trigger:"blur"}]}}},watch:{platform:function(e){this.form.homepageInfoList=[],this.form.homepageInfoListObj={},this.form.specialNormalHp=[],this.form.specialChildHp=[],this.form.schemeFilterEntity.partner=e}},methods:{ChipModelRowClick:function(e){this.dialogVisible=!1,this.form.deviceInfos=[{chip:e.chip,model:e.model}]},cancel:function(){this.form.homepageInfoList=[],this.form.homepageInfoListObj={},this.form.specialNormalHp=[],this.form.specialChildHp=[],this.form.schemeFilterEntity={}},rowClick:function(e){this.dialogVisible=!1,this.form.homepageInfoListObj[this.model]={homepageId:e.homepageId,homepageModel:e.homepageModel,homepageName:e.homepageName,homepageVersion:e.homepageVersion}},addHomePageClose:function(){this.addHomePageDialogVisible=!1},editHomePage:function(e,t){this.addHomePageDialogVisible=!0,this.editHomePageData="normal"===e?this.form.specialNormalHp[t]:this.form.specialChildHp[t]},removeHomePage:function(e,t){this.editHomePageData="normal"===e?this.form.specialNormalHp.splice(t,1):this.form.specialChildHp.splice(t,1)},createHomePage:function(e){this.addHomePageDialogVisible=!1,"normal"===this.model?this.form.specialNormalHp.push(e):this.form.specialChildHp.push(e)},addHomePage:function(e){this.addHomePageDialogVisible=!0,this.model=e,this.editHomePageData={}},modelChipSelectedRemove:function(e){this.form.deviceInfos.splice(e,1)},dialogSubmit:function(){switch(this.dialogVisible=!1,this.mode){case"modelChip":var e=this.$refs.chipModelSelected.platform;e!==this.platform&&(this.platform=e),this.form.deviceInfos=this.$refs.chipModelSelected.selected.map(function(e){return{chip:e.chip,model:e.model}});break}},selectChipModel:function(){this.dialogVisible=!0,this.dialogTitle="选择机型机芯",this.mode="modelChip"},selectHomePageModel:function(e){this.dialogVisible=!0,this.dialogTitle="选择首页方案模式",this.mode="HomePageModel",this.model=e},submitBtn:function(e){var t=this;this.$refs.form.validate(function(a){var i=t.form.homepageInfoListObj;Object.keys(i).forEach(function(e){t.form.homepageInfoList.push(i[e])}),t.form.policyStatus=e,a&&t.$service.testPolicyConfSave({jsonStr:JSON.stringify(t.form)},"保存成功").then(function(e){t.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.getTestPolicyConfDetail({id:this.editId}).then(function(t){e.form={currentVersion:e.isReplicate?"":t.currentVersion,policyId:t.policyId,policyName:t.policyName,macStart:t.macStart,macEnd:t.macEnd,homePageVerEnd:t.homePageVerEnd,homePageVerStart:t.homepageVerStart,priority:t.priority,policyStatus:t.policyStatus,deviceInfos:[{chip:t.chip,model:t.model}],homepageInfoList:t.homepageInfoList,homepageInfoListObj:{normal:t.homepageInfoList.length>0?t.homepageInfoList[0]:{},child:2===t.homepageInfoList.length?t.homepageInfoList[1]:{}},schemeFilterEntity:{partner:t.platform},regionCityPairs:[],specialNormalHp:t.specialNormalHp,specialChildHp:t.specialChildHp}})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.isReplicate?this.title="创建副本":this.title="编辑",this.selectionType="single",this.getEditData()):this.title="新增"}},Ch=Sh,kh=(a("8f0a"),Object(K["a"])(Ch,Ih,Th,!1,null,"41846362",null)),_h=kh.exports,Ph=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("CommonContent",{attrs:{mode:"read","resource-info":e.resourceInfo},on:{replicate:e.replicate,edit:e.edit,unaudit:e.fetchData,shelves:e.fetchData,audit:function(t){return e.$emit("upsert-end")},"select-version":e.fetchData}},[a("div",[a("div",{staticClass:"form-legend-header"},[a("span",[e._v("基本信息")])])]),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"策略名称",prop:"policyName"}},[e._v(e._s(e.form.policyName))]),a("el-form-item",{attrs:{label:"机型机芯",prop:"chipModel"}},[e.form.deviceInfos.length>0?a("SelectedTag",[a("ul",e._l(e.form.deviceInfos,function(t,i){return a("li",{key:i},[a("el-tag",{attrs:{type:"success",closable:""},on:{close:function(a){return e.modelChipSelectedRemove(t)}}},[e._v(e._s(t.model)+"_"+e._s(t.chip))])],1)}),0)]):e._e()],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"首页版本号",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerStart"}},[a("el-input-number",{attrs:{disabled:"disabled",min:1e6,max:9999999},model:{value:e.form.homePageVerStart,callback:function(t){e.$set(e.form,"homePageVerStart",t)},expression:"form.homePageVerStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"homePageVerEnd"}},[a("el-input-number",{attrs:{disabled:"disabled",min:1e6,max:9999999},model:{value:e.form.homePageVerEnd,callback:function(t){e.$set(e.form,"homePageVerEnd",t)},expression:"form.homePageVerEnd"}})],1)],1)],1),a("el-form-item",{staticClass:"linkwork",attrs:{label:"Mac地址",required:""}},[a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macStart"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址起始",disabled:"disabled"},model:{value:e.form.macStart,callback:function(t){e.$set(e.form,"macStart",t)},expression:"form.macStart"}})],1)],1),a("el-col",{staticClass:"line",staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:2}},[e._v("-")]),a("el-col",{staticStyle:{"padding-left":"0px","padding-right":"0px"},attrs:{span:11}},[a("el-form-item",{attrs:{prop:"macEnd"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Mac地址起始",disabled:"disabled"},model:{value:e.form.macEnd,callback:function(t){e.$set(e.form,"macEnd",t)},expression:"form.macEnd"}})],1)],1)],1),a("el-form-item",{attrs:{label:"策略优先级",prop:"priority"}},[e._v("\n            "+e._s(e.form.priority)+"\n            "),a("span",{staticClass:"tip"},[e._v("注：数值越大优先级越高，数值越小优先级越低")])]),a("el-form-item",{attrs:{label:"关联首页方案"}},["undefined"!==typeof e.form.homepageInfoListObj["normal"]?a("span",{staticClass:"tip"},[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["normal"].homepageName))])],1):e._e()]),a("el-form-item",{attrs:{label:"关联首页方案"}},["undefined"!==typeof e.form.homepageInfoListObj["child"]?a("span",{staticClass:"tip"},[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(e.form.homepageInfoListObj["child"].homepageName))])],1):e._e()]),a("el-form-item",{attrs:{label:"定向首页方案"}},[e.form.specialNormalHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialNormalHp,title:"标准模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e(),e.form.specialChildHp.length>0?a("SelectedHomePage",{attrs:{dataArr:e.form.specialChildHp,title:"儿童模式"},on:{"edit-item":e.editHomePage,"remove-item":e.removeHomePage}}):e._e()],1)],1)],1)],1)],1)],1)},xh=[],Dh={components:{SelectedTag:Fp,SelectedHomePage:Zp,CommonContent:_c},props:{editId:Number,version:String},data:function(){return{title:null,dialogTitle:null,mode:null,dialogVisible:!1,addHomePageDialogVisible:!1,model:"normal",platform:"tencent",editHomePageData:{},status:null,form:{policyId:null,policyName:null,macStart:null,macEnd:null,homePageVerEnd:"",homePageVerStart:"",priority:null,policyStatus:3,deviceInfos:[],homepageInfoList:[],homepageInfoListObj:{},schemeFilterEntity:{partner:"tencent"},regionCityPairs:[],specialNormalHp:[],specialChildHp:[]}}},computed:{resourceInfo:function(){var e=this.form;if(e.policyId)return{id:this.editId,type:"policy",menuElId:"policyConf",version:e.currentVersion,status:e.policyStatus}}},methods:{replicate:function(e){this.$emit("open-add-page",this.editId,!0)},edit:function(){this.$emit("open-add-page",this.editId)},handleSubmitAudit:function(){},handleSaveDraft:function(){},audit:function(){},unaudit:function(){},shelves:function(){},selectVersion:function(e){this.getEditData(e)},editHomePage:function(e,t){this.addHomePageDialogVisible=!0,this.editHomePageData="normal"===e?this.form.specialNormalHp[t]:this.form.specialChildHp[t]},removeHomePage:function(e,t){this.editHomePageData="normal"===e?this.form.specialNormalHp.splice(t,1):this.form.specialChildHp.splice(t,1)},fetchData:function(e){var t=this;this.$service.getTestPolicyConfDetail({id:this.editId,version:e}).then(function(e){t.status=e.policyStatus,t.form={currentVersion:e.currentVersion,policyId:e.policyId,policyName:e.policyName,macStart:e.macStart,macEnd:e.macEnd,homePageVerEnd:e.homePageVerEnd,homePageVerStart:e.homepageVerStart,priority:e.priority,policyStatus:e.policyStatus,deviceInfos:[{chip:e.chip,model:e.model}],homepageInfoList:e.homepageInfoList,homepageInfoListObj:{normal:e.homepageInfoList.length>0?e.homepageInfoList[0]:{},child:2===e.homepageInfoList.length?e.homepageInfoList[1]:{}},schemeFilterEntity:{partner:e.platform},regionCityPairs:[],specialNormalHp:e.specialNormalHp,specialChildHp:e.specialChildHp}})}},created:function(){this.title="预览",this.fetchData()}},Fh=Dh,$h=(a("9e3e"),Object(K["a"])(Fh,Ph,xh,!1,null,"0c17ad68",null)),Rh=$h.exports,Lh={components:{PolicyManageList:wh,PolicyManageAdd:_h,PolicyManagePreview:Rh},data:function(){return{mode:"list",editId:null,isReplicate:!1,version:void 0}},methods:{addHomePage:function(){this.mode="addHomePage"},openPreviewPage:function(e,t){this.mode="preview",this.editId=e,this.version=t},handleUpsertEnd:function(){this.$refs.list.fetchData(),this.mode="list"},openAddPage:function(e,t){this.editId=e,this.isReplicate=t,this.mode="add"},openListPage:function(){this.mode="list",this.editId=null,this.$refs.list.fetchData()},goBack:function(){this.mode="list",this.editId=null}}},Nh=Lh,Oh=Object(K["a"])(Nh,hh,mh,!1,null,"bf2d4df4",null),Ah=Oh.exports,Eh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("BusinessTabList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{create:e.handleCreate,read:e.handleRead,edit:e.handleEdit,copy:e.handleCopy}}),e.isShowList?e._e():a("BusinessTabInfo",{attrs:{id:e.id,"init-mode":e.mode,version:e.version},on:{"upsert-end":e.handleUpsertEnd,"go-back":e.goBack}})],1)},Vh=[],Mh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addData}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Bh=[],Uh={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"],ButtonGroupForListPage:ue},data:function(){var e=this;return{tabTypeOption:[{label:"第三方版面",value:"4"},{label:"专题版面",value:"2"},{label:"普通版面",value:"1"}],tabStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],tabStatus:{},filter:{tabParentType:"biz",idPrefix:10},filterSchema:null,pagination:{currentPage:1},appIdType:[],businessType:[],tabType:{},tabTypeReverse:{},selected:[],selectedItems:[],table:{props:{},data:[],header:[{label:"ID",prop:"tabId"},{label:"名称",prop:"tabName",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.handleRead(i)}}},i.tabName)}},{label:"版面属性",prop:"tabType",render:function(t,a){var i=a.row;return e.tabTypeReverse[i.tabType]}},{label:"业务分类",prop:"businessCategoryName"},{label:"内容源",prop:"tabResource",render:function(t,a){var i=a.row;return e.$sourceName(i.tabResource)}},{label:"AppId",prop:"tabAppid",formatter:function(t){return e.appIdType.map(function(e){if(t.tabAppid.toString()===e.dictEnName)return e.dictCnName})}},{label:"版本/状态",prop:"tabStatus",formatter:function(t){var a=t.tabStatus,i=t.currentVersion;return i+"/"+e.tabStatusOption.map(function(e){if(a.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.handleRead(i,i.duplicateVersion)}}},i.duplicateVersion)}},{label:"更新时间",prop:"lastUpdateDate"},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"modifierName"},{label:"操作",prop:"oper",width:100,render:this.createOperationRender(this)}],selected:[],selectionType:"multiple"}}},methods:{createOperationRender:function(e){return function(t,a){var i=a.row,n=t("el-button",{props:{type:"text"},on:{click:function(){e.handleCopy(i)}}},"复制"),o=null;return o=i.collected?t("el-button",{props:{type:"text"},on:{click:function(){e.cancalCollect(i)}}},"取消"):t("el-button",{props:{type:"text"},on:{click:function(){e.collect(i)}}},"收藏"),[n,o]}},handleCopy:function(e){this.$emit("copy",e.tabId)},collect:function(e){var t=this;this.$service.businessTabCollect({resourceId:e.tabId},"收藏成功").then(function(){t.fetchData()})},cancalCollect:function(e){var t=this;this.$service.businessTabCancelCollect({resourceId:e.tabId},"取消成功").then(function(){t.fetchData()})},handleRead:function(e,t){this.$emit("read",e.tabId,t)},addData:function(){this.$emit("create")},editData:function(){this.$isAllowEdit(this.selected)&&(2===parseInt(this.selectedItems[0].tabStatus)?this.$emit("edit",this.selected[0]):this.$message({type:"error",message:"只有草稿状态才能编辑"}))},batchDel:function(){var e=this;this.$isAllowDelete(this.selected)&&window.confirm("确定要删除吗")&&this.$service.testPolicyConfRemove({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()})},fetchData:function(){var e=this,t=this.parseFilter();this.$service.tabInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={tabParentType:"biz",idPrefix:10},this.fetchData()},getTabType:function(){var e=this;return this.$service.getTabType().then(function(t){t.forEach(function(t){e.tabType[t.label]=t.value,e.tabTypeReverse[t.value]=t.label})})},handleRowSelectionAdd:function(e){this.selected.push(e.tabId),this.selectedItems.push(e),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.tabId}),this.targetItem=this.targetItem.filter(function(t){return t.tabId!==e.tabId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.selectedItems=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.tabId)>-1&&e.push(i),e},[])},getBusinessType:function(){var e=this;this.$service.getBusinessType().then(function(t){e.businessType=t})}},created:function(){var e=this;this.tabStatus=this.tabStatusOption.reduce(function(e,t){return e[t.label]=t.value,e},{});var t=ne.a.map({tabId:ne.a.o.string.other("form",{placeholder:"版面Id"}),tabName:ne.a.o.string.other("form",{placeholder:"版面标题"}),tabType:ne.a.o.enum(this.tabType).other("form",{component:"Select",placeholder:"版面属性"}),tabStatus:ne.a.o.enum(this.tabStatus).other("form",{component:"Select",placeholder:"状态"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getTabType().then(function(){e.filterSchema=t}),this.$service.getAppIdType().then(function(t){e.appIdType=t,e.fetchData()}),this.getBusinessType()}},jh=Uh,Hh=(a("6646"),Object(K["a"])(jh,Mh,Bh,!1,null,"717c87be",null)),qh=Hh.exports,Wh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["read"!==e.initMode?a("div",{staticClass:"hompage-upsert"},[a("ContentCard",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"tabForm",staticClass:"el-form-add",attrs:{rules:e.rules,model:e.tab,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版面名称",prop:"tabName"}},[a("el-input",{model:{value:e.tab.tabName,callback:function(t){e.$set(e.tab,"tabName","string"===typeof t?t.trim():t)},expression:"tab.tabName"}})],1),a("el-form-item",{attrs:{label:"标题(中文)",prop:"tabCnTitle"}},[a("el-input",{model:{value:e.tab.tabCnTitle,callback:function(t){e.$set(e.tab,"tabCnTitle","string"===typeof t?t.trim():t)},expression:"tab.tabCnTitle"}})],1),a("el-form-item",{attrs:{label:"标题(英文)",prop:"tabEnTitle"}},[a("el-input",{model:{value:e.tab.tabEnTitle,callback:function(t){e.$set(e.tab,"tabEnTitle","string"===typeof t?t.trim():t)},expression:"tab.tabEnTitle"}})],1),a("el-form-item",{attrs:{label:"内容源",prop:"tabResource"}},[a("el-radio-group",{attrs:{value:e.tab.tabResource},on:{input:e.handleChangeTabResource}},[a("el-radio",{attrs:{label:""}},[e._v("不限")]),a("el-radio",{attrs:{label:"o_tencent"}},[e._v("腾讯")]),a("el-radio",{attrs:{label:"o_iqiyi"}},[e._v("爱奇艺")]),a("el-radio",{attrs:{label:"o_youku"}},[e._v("优酷")])],1)],1),a("el-form-item",{attrs:{label:"刷新时间间隔",prop:"interval"}},[a("SelectHourAndMinute",{staticClass:"selectHourAndMinute",attrs:{"hour-option":e.hourOption,"minute-option":e.minuteOption,initSumTime:e.initSumTime,min:"5",max:"360"},model:{value:e.tab.timeCycle,callback:function(t){e.$set(e.tab,"timeCycle",t)},expression:"tab.timeCycle"}},[e._v(e._s(e.initSumTime))]),a("span",{staticClass:"hint"},[e._v("设置范围:5分钟-6小时")])],1),a("el-form-item",{attrs:{label:"类型",prop:"tabType"}},[a("el-select",{attrs:{placeholder:"请选择类型",disabled:e.isDisableTabType},model:{value:e.tab.tabType,callback:function(t){e.$set(e.tab,"tabType",t)},expression:"tab.tabType"}},e._l(e.tabTypes,function(e,t){return a("el-option",{key:"tabTypes"+t,attrs:{value:e.value,label:e.label,disabled:e.disabled}})}),1)],1),a("el-form-item",{attrs:{label:"选择板块",prop:"tags"}},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handleSlectPannelStart}},[e._v("选择板块")]),a("OrderableTable",{staticClass:"orderableTable",attrs:{header:e.tabGroupTableHeader,"hide-action":!0},model:{value:e.tab.pannelList,callback:function(t){e.$set(e.tab,"pannelList",t)},expression:"tab.pannelList"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleShowTimeShelf()}}},[e._v("提交审核")]),a("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.handleSaveDraft()}}},[e._v("保存草稿")])],1)],1)],1)],1)],1),"selectBlockResource"===e.mode?a("AddBlockFilter",{attrs:{parentPannelResource:e.tab.tabResource},on:{"go-back":function(t){e.isShowPannelInfoList=!1},"add-block":e.addBlock}}):e._e()],1):e._e(),"read"===e.initMode?a("div",[a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("CommonContent",{attrs:{mode:e.mode,"resource-info":e.resourceInfo},on:{replicate:function(t){e.mode="replicate"},edit:function(t){e.mode="edit"},unaudit:e.fetchData,shelves:e.fetchData,audit:function(t){return e.$emit("upsert-end")},copy:e.handleCopy,"select-version":e.fetchData}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"tabForm",staticClass:"el-form-add",attrs:{rules:e.rules,model:e.tab,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"版面名称",prop:"tabName"}},[e._v(e._s(e.tab.tabName))]),a("el-form-item",{attrs:{label:"标题(中文)",prop:"tabCnTitle"}},[e._v(e._s(e.tab.tabCnTitle))]),a("el-form-item",{attrs:{label:"标题(英文)",prop:"tabEnTitle"}},[e._v(e._s(e.tab.tabEnTitle))]),a("el-form-item",{attrs:{label:"内容源",prop:"tabResource"}},[a("el-radio-group",{attrs:{value:e.tab.tabResource,disabed:!0}},[a("el-radio",{attrs:{label:""}},[e._v("不限")]),a("el-radio",{attrs:{label:"o_tencent"}},[e._v("腾讯")]),a("el-radio",{attrs:{label:"o_iqiyi"}},[e._v("爱奇艺")]),a("el-radio",{attrs:{label:"o_youku"}},[e._v("优酷")])],1)],1),a("el-form-item",{attrs:{label:"刷新时间间隔",prop:"interval"}},[a("SelectHourAndMinute",{staticClass:"selectHourAndMinute",attrs:{"hour-option":e.hourOption,"minute-option":e.minuteOption,initSumTime:e.initSumTime,disabled:!0,min:5,max:360},model:{value:e.tab.timeCycle,callback:function(t){e.$set(e.tab,"timeCycle",t)},expression:"tab.timeCycle"}})],1),a("el-form-item",{attrs:{label:"类型",prop:"tabType"}},[a("el-select",{attrs:{placeholder:"请选择类型",disabled:!e.isDisableTabType},model:{value:e.tab.tabType,callback:function(t){e.$set(e.tab,"tabType",t)},expression:"tab.tabType"}},e._l(e.tabTypes,function(e,t){return a("el-option",{key:"tabTypes"+t,attrs:{value:e.value,label:e.label,disabled:e.disabled}})}),1)],1),a("el-form-item",{attrs:{label:"选择的板块",prop:"tags"}},[a("OrderableTable",{staticClass:"orderableTable",attrs:{header:e.tabGroupTableHeader,"hide-action":!0,readonly:!0},model:{value:e.tab.pannelList,callback:function(t){e.$set(e.tab,"pannelList",t)},expression:"tab.pannelList"}})],1)],1)],1)],1)],1)],1)],1):e._e(),"PrivatePannelInfo"===e.mode?a("PrivatePannelInfoView",{attrs:{viewData:e.viewData,version:e.duplicateVersion},on:{"go-back":e.goBack}}):e._e(),e.showTimeShelf?a("ReleaseTimeSetter",{on:{cancel:function(t){e.showTimeShelf=!1},submit:e.handleSubmitAudit}}):e._e()],1)},Gh=[],zh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-time-select",{attrs:{disabled:e.disabled,"picker-options":e.hourOption,placeholder:"选择小时"},model:{value:e.hour,callback:function(t){e.hour=t},expression:"hour"}})],1),a("el-col",{staticClass:"marginL",attrs:{span:2}},[e._v("小时")]),a("el-col",{attrs:{span:7}},[a("el-time-select",{attrs:{disabled:e.disabled,"picker-options":e.minuteOption,placeholder:"选择分钟"},model:{value:e.minute,callback:function(t){e.minute=t},expression:"minute"}})],1),a("el-col",{staticClass:"marginL",attrs:{span:1}},[e._v("分")]),a("el-col",{staticClass:"marginL",attrs:{span:5}},[e._v("总共："+e._s(e.sumTime)+"分")])],1)],1)},Jh=[],Kh={props:["hourOption","minuteOption","initSumTime","min","max","disabled"],data:function(){return{hour:null,minute:null}},computed:{sumTime:function(){return 60*parseInt(null===this.hour?0:this.hour)+parseInt(null===this.minute?0:this.minute.toString().replace("00:",""))}},methods:{limit:function(){return this.sumTime>this.max?(this.$message({type:"error",message:"不能超过"+this.max+"分钟"}),!1):!(this.sumTime<this.min)||(this.$message({type:"error",message:"不能小于"+this.min+"分钟"}),!1)},setHourAndMinute:function(){var e=Math.floor(this.initSumTime/60),t=this.initSumTime-60*e;this.hour="0"+e+":00",this.hour=e>9?e+":00":"0"+e+":00",this.minute=t>9?"00:"+t:"00:0"+t}},watch:{hour:function(e,t){this.limit()?this.$emit("input",this.sumTime):this.hour=t},minute:function(e,t){this.limit()?this.$emit("input",this.sumTime):this.minute=t},initSumTime:function(e){this.setHourAndMinute()}},created:function(){this.setHourAndMinute()}},Xh=Kh,Yh=Object(K["a"])(Xh,zh,Jh,!1,null,"3e167e46",null),Zh=Yh.exports,Qh=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:"选择板块"},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-tabs",{attrs:{type:"card"}},[a("el-tab-pane",{attrs:{label:"内容板块"}},[a("PannelInfoList",{ref:"pannel",attrs:{dataList:e.contentBlock},model:{value:e.pannelData,callback:function(t){e.pannelData=t},expression:"pannelData"}})],1),a("el-tab-pane",{attrs:{label:"专属板块"}},[a("AlbumPannelInfoList",{ref:"albumPannel",attrs:{dataList:e.albumBlock},model:{value:e.albumPannelData,callback:function(t){e.albumPannelData=t},expression:"albumPannelData"}})],1),a("el-tab-pane",{attrs:{label:"专属影院板块"}},[a("PrivatePannelInfoList",{attrs:{dataList:e.privateBlock},model:{value:e.privatePannelData,callback:function(t){e.privatePannelData=t},expression:"privatePannelData"}})],1)],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.clickAdd}},[e._v("确定")]),a("el-button",{on:{click:function(t){return e.$emit("go-back")}}},[e._v("取消")])],1)],1)},em=[],tm={components:{PannelInfoList:En,AlbumPannelInfoList:Wi,PrivatePannelInfoList:to},props:{parentPannelResource:String},data:function(){var e=this;return{pannelData:[],albumPannelData:[],privatePannelData:[],selected:[],contentBlock:{filter:{pannelType:1,resourceIsNull:!0,pannelResource:"qq",multiStatus:"3,4"},filterSchema:{},table:{}},albumBlock:{filter:{pannelType:3,resourceIsNull:!0,pannelResource:"qq",multiStatus:"3,4"},filterSchema:{},table:{}},privateBlock:{filter:{pannelType:4,resourceIsNull:!0,pannelResource:"qq",multiStatus:"3,4"},filterSchema:{},table:{}},table:{props:{},data:[],header:[{label:"ID",prop:"pannelGroupId"},{label:"名称",prop:"pannelGroupRemark"},{label:"业务分类",prop:"categoryName"},{label:"布局",prop:"fullLayoutName"},{label:"引用状态",prop:"fullTabName","show-overflow-tooltip":!0},{label:"版本/状态",prop:"pannelStatus",formatter:function(t){var a=t.pannelStatus,i=t.currentVersion;return i+"/"+e.pannelStatusOption.map(function(e){if(a.toString()===e.value)return e.label}).join("")}},{label:"更新时间",prop:"lastUpdateDate","show-overflow-tooltip":!0},{label:"更新人",prop:"userName"}],selected:[],selectionType:"multiple"},pannelStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}]}},watch:{},methods:{clickAdd:function(){var e=this.pannelData,t=this.albumPannelData,a=this.privatePannelData,i=[].concat(e).concat(t).concat(a);this.$emit("add-block",i),this.$emit("go-back")}},created:function(){var e=ne.a.map({pannelId:ne.a.o.string.other("form",{placeholder:"板块ID",component:"Input"}),pannelName:ne.a.o.string.other("form",{placeholder:"板块名称",component:"Input"}),tabName:ne.a.o.string.other("form",{placeholder:"引用状态",component:"Input"}),pannelStatus:ne.a.o.enum({"待审核":"3","审核通过":"4"}).other("form",{placeholder:"审核状态",component:"Select"})}).other("form",{cols:{item:3,label:0,wrapper:23},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.contentBlock.filter.pannelResource=this.parentPannelResource,this.albumBlock.filter.pannelResource=this.parentPannelResource,this.privateBlock.filter.pannelResource=this.parentPannelResource,this.contentBlock.filterSchema=e,this.contentBlock.table=Object.assign({},this.table),this.albumBlock.filterSchema=e,this.albumBlock.table=Object.assign({},this.table),this.privateBlock.filterSchema=e,this.privateBlock.table=Object.assign({},this.table)}},am=tm,im=(a("f53a"),Object(K["a"])(am,Qh,em,!1,null,"06e71cf3",null)),nm=im.exports,om={components:{AddBlockFilter:nm,Table:W["Table"],PrivatePannelInfoView:mo,OrderableTable:ru,ReleaseTimeSetter:Tc,SelectHourAndMinute:Zh,CommonContent:_c},props:{id:Number,initMode:String,version:{type:String,default:function(){return""}}},data:function(){var e={draft:2,waiting:3,accepted:4,reject:5,processing:7},t={0:"下架",2:"草稿",3:"待审核",4:"审核通过",5:"审核不通过",7:"审核通过未上线"};return{hourOption:{start:"00:00",step:"1:00",end:"06:00"},minuteOption:{start:"00:00",step:"00:01",end:"00:59"},initSumTime:120,STATUS:e,STATUS_TEXT:t,showTimeShelf:!1,title:"",tabTypes:[],status:void 0,mode:"create",preMode:"create",isReplica:!1,tab:{tabId:void 0,currentVersion:void 0,tabParentType:"biz",tabType:"6",hasSubTab:0,tabName:void 0,tabCnTitle:void 0,tabEnTitle:void 0,tabCategory:67,tabAppid:-1,tabResource:"",pictureName:void 0,tabTitleIcons:void 0,tabParams:{},tabStatus:void 0,tabOnclick:void 0,systemDefault:0,timeCycle:120,cornerIconName:void 0,flagIsRecord:0,isTiming:0,releaseTime:void 0,tabExtArr:void 0,pannelList:[],specificPannelList:void 0,tabList:void 0},rules:{tabName:[{required:!0,message:"请输入版面名称",trigger:"blur"}],tabCnTitle:[{required:!0,message:"请输入中文标题",trigger:"blur"}],tabEnTitle:[{required:!0,message:"请输入英文标题",trigger:"blur"}]}}},computed:{resourceInfo:function(){var e=this.tab;if(e.tabId)return{id:e.tabId,type:"tab",menuElId:"tabInfo",version:e.currentVersion,status:e.tabStatus}},isDisableTabType:function(){var e=this.mode;return"edit"===e||"replica"===e||"copy"===e},isShow:function(){var e=this.mode;return"edit"===e||"replica"===e||"copy"===e||"create"===e},tabGroupTableHeader:function(){var e=this,t=[{label:"板块ID",prop:"pannelGroupId"},{label:"板块名称",width:180,render:function(t,a){a.$index;var i=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handlePreviewPannel(i)}}},i.pannelGroupRemark)}},{prop:"duplicateVersion",label:"待审核副本",width:180,render:function(t,a){a.$index;var i=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handlePreviewPannel(i,i.duplicateVersion)}}},i.duplicateVersion)}}];return"read"!==this.mode&&t.push({label:"操作",width:80,render:function(t,a){var i=a.$index;a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.handleRemovePannel(i)}}},"删除")}}),t}},methods:{handleCopy:function(){var e=this.getFormData();e.tabStatus=this.STATUS.waiting,e.tabId=void 0,e.currentVersion="",this.validateFormData(e,function(){this.showTimeShelf=!0}.bind(this))},validateFormData:function(e,t){var a,i=this.STATUS,n=e.tabStatus,o=function(e){this.$message({type:"error",message:e})}.bind(this);n===i.draft?(e.tabName||(a="请填写版面名称"),a?o(a):t()):this.$refs.tabForm.validate(function(i){i&&(0===e.pannelList.length&&(a="请选择板块"),a?o(a):t())})},handleShowTimeShelf:function(){var e=this.getFormData();e.tabStatus=this.STATUS.waiting,this.validateFormData(e,function(){this.showTimeShelf=!0}.bind(this))},handleSubmitAudit:function(e){var t=this.getFormData();t.isTiming=e.isTiming,t.releaseTime=e.releaseTime,t.tabStatus=this.STATUS.waiting,this.showTimeShelf=!0,this.submit(t)},handleSaveDraft:function(){var e=this.getFormData();e.isTiming=void 0,e.releaseTime=void 0,e.tabStatus=this.STATUS.draft,this.validateFormData(e,function(){this.submit(e)}.bind(this))},submit:function(e){var t=this;e=this.parseFormData(e),this.$service.businessTabSave({jsonStr:JSON.stringify(e)},"保存成功").then(function(e){t.showTimeShelf=!1,t.$emit("upsert-end")})},parseFormData:function(e){return e.tabParams&&(e.tabParams=JSON.stringify(e.tabParams)),e.pannelList&&(e.panelInfoList=e.pannelList.map(function(e,t){return{pannelGroupId:e.pannelGroupId,pannelSequence:t,isDmpPanel:!1}}),e.pannelList=void 0),e.tabList&&(e.tabJson=JSON.stringify(e.tabList),e.tabList=void 0),e},getFormData:function(){var e=JSON.parse(JSON.stringify(this.tab)),t=this.mode;return"replica"===t&&(e.currentVersion=""),"copy"===t&&(e.tabId=void 0,e.currentVersion=""),e},goBack:function(){this.mode=this.preMode},addBlock:function(e){this.mode=this.preMode,this.tab.pannelList=e},handlePreviewPannel:function(e,t){this.preMode=this.mode,this.viewData=e,this.mode=e.type,this.duplicateVersion=t},handleSlectPannelStart:function(){this.preMode=this.mode,this.mode="selectBlockResource"},handleRemovePannel:function(e){this.tab.pannelList.splice(e,1)},handleChangeTabResource:function(e){this.$confirm("是否要切换内容源，切换内容源之后所选择的版块数据将会清除掉！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){this.tab.tabResource=e,this.tab.pannelList=[]}.bind(this)).catch(function(){})},getTabType:function(){var e=this;return this.$service.getTabType().then(function(t){e.tabTypes=t.reduce(function(e,t){return e.push({label:t.label,value:t.value,disabled:"6"!==t.value}),e},[])})},handleChangePannelOrderStart:function(e,t){if(console.log("order="+t),""!==t){t=parseInt(t);var a=this.tab.pannelList;isNaN(t)||t>a.length||t<=0?(this.currentPannelIndex=void 0,this.$message({type:"error",message:"序号必须大于0且不能大于总数量"}),this.tab.pannelList=a.slice()):(this.currentPannelIndex=e,this.currentPannelOrder=t)}},handleChangePannelOrderEnd:function(e){if(this.currentPannelIndex===e){var t=this.currentPannelOrder-1,a=e,i=this.tab.pannelList,n=i[a];i.splice(a,1),this.tab.pannelList=[].concat(i.slice(0,t),n,i.slice(t)),this.currentPannelIndex=void 0,this.currentPannelOrder=void 0}},fetchData:function(e){var t=this;this.$service.businessTabEdit({id:this.id,version:this.version}).then(function(e){t.tab.pannelList=e.panelInfoList.map(function(e){return e.pannelGroupRemark=e.pannelName,e}),t.status?e.currentVersion:t.status,e.tabType=e.tabType.toString(),t.initSumTime=e.timeCycle,t.tab=Object.assign({},t.tab,e)})}},created:function(){switch(this.getTabType(),this.mode=this.initMode||"create",this.mode){case"create":this.title="新增";break;case"copy":this.title="复制";break;case"edit":this.title="编辑";break;case"replica":this.title="创建副本";case"read":this.title="预览";break}this.id&&this.fetchData(this.version)}},lm=om,rm=(a("760a"),Object(K["a"])(lm,Wh,Gh,!1,null,"311cf47a",null)),sm=rm.exports,cm={components:{BusinessTabList:qh,BusinessTabInfo:sm},data:function(){return{isShowList:!0,id:void 0,mode:"create",version:void 0}},methods:{handleUpsertEnd:function(){this.isShowList=!0,this.$refs.list.fetchData(),this.mode="list",this.version=void 0},handleCreate:function(){this.id=void 0,this.mode="create",this.isShowList=!1},handleEdit:function(e){this.id=e,this.mode="edit",this.isShowList=!1},handleRead:function(e,t){this.id=e,this.mode="read",this.version=t,this.isShowList=!1},handleCopy:function(e){this.id=e,this.mode="copy",this.isShowList=!1},goBack:function(){this.isShowList=!0,this.mode="list",this.version=void 0}}},um=cm,dm=Object(K["a"])(um,Eh,Vh,!1,null,"781cf09f",null),pm=dm.exports,hm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("FilmDetailPageList",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShow?e._e():a("FilmDetailPageAdd",{attrs:{editId:e.editId,initMode:e.mode,duplicateVersionVersion:e.duplicateVersionVersion},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},mm=[],fm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.handleFilterChange}},[a("div",{staticClass:"el-row"},[a("el-form",{attrs:{model:e.filter,inline:"","label-width":"90px"}},[a("el-form-item",{staticClass:"el-col el-col-6"},[a("div",{staticClass:"el-col-20"},[a("el-input",{attrs:{placeholder:"板面ID"},model:{value:e.filter.tabId,callback:function(t){e.$set(e.filter,"tabId",t)},expression:"filter.tabId"}})],1)]),a("el-form-item",{staticClass:"el-col el-col-6"},[a("div",{staticClass:"el-col-20"},[a("el-input",{attrs:{placeholder:"版面标题"},model:{value:e.filter.tabName,callback:function(t){e.$set(e.filter,"tabName",t)},expression:"filter.tabName"}})],1)]),a("el-form-item",{staticClass:"el-col el-col-6"},[a("div",{staticClass:"el-col-20"},[a("el-select",{attrs:{placeholder:"内容源",clearable:""},on:{change:function(t){e.pannelValue=[],e.filter.channel=""}},model:{value:e.filter.source,callback:function(t){e.$set(e.filter,"source",t)},expression:"filter.source"}},[a("el-option",{attrs:{value:"qq",label:"腾讯"}}),a("el-option",{attrs:{value:"iqiyi",label:"爱奇艺"}}),a("el-option",{attrs:{value:"youku",label:"优酷"}})],1)],1)]),a("el-form-item",{staticClass:"el-col el-col-6"},[a("div",{staticClass:"el-col-20"},[a("el-select",{attrs:{clearable:"",placeholder:"状态"},model:{value:e.filter.tabStatus,callback:function(t){e.$set(e.filter,"tabStatus",t)},expression:"filter.tabStatus"}},e._l(e.tabStatusOption,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1)]),a("el-form-item",{staticClass:"el-col el-col-6"},[a("div",{staticClass:"el-col-20"},[a("el-select",{attrs:{clearable:"",placeholder:"业务分类"},model:{value:e.filter.category,callback:function(t){e.$set(e.filter,"category",t)},expression:"filter.category"}},[a("el-option",{attrs:{value:"0",label:"影视"}}),a("el-option",{attrs:{value:"1",label:"教育"}})],1)],1)]),a("el-form-item",{staticClass:"el-col el-col-6"},[a("div",{staticClass:"el-col-20"},[a("el-cascader",{attrs:{placeholder:"频道",value:e.pannelValue,options:e.channelOptions,"expand-trigger":"hover",clearable:""},on:{change:e.handleChannelChange}})],1)]),a("el-form-item",{staticClass:"el-col el-col-6"},[a("div",{staticClass:"el-col-20"},[a("el-select",{attrs:{clearable:"",placeholder:"产品包"},model:{value:e.filter.product,callback:function(t){e.$set(e.filter,"product",t)},expression:"filter.product"}},e._l(e.productOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.source_name,value:e.source_sign}})}),1)],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleFilterChange}},[e._v("查询")]),a("el-button",{on:{click:e.handleFilterReset}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addFilmDetail}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},bm=[],gm={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"]},data:function(){var e=this;return{pannelValue:[],filter:{},pagination:{currentPage:1},tabStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],productOptions:[],channelOptions:[],table:{props:{},data:[],header:[{prop:"tabId",label:"ID",sortable:!0},{prop:"tabName",label:"版面名称",render:function(t,a){var i=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.openReview(i)}}},i.tabName)}},{prop:"priority",label:"优先级",sortable:!0},{prop:"category",label:"业务分类",sortable:!0,formatter:function(e){return"0"===e.category?"影视":"1"===e.category?"教育":""}},{prop:"source",label:"内容源",sortable:!0,formatter:function(e){if(0!=e.category)return"";switch(e.source){case"qq":return"腾讯";case"iqiyi":return"爱奇艺";case"youku":return"优酷"}}},{prop:"tabStatus",label:"版本/状态",sortable:!0,formatter:function(e){return e.currentVersion+"/"+["下架","上架","草稿","待审核","审核通过","审核不通过"][e.currentStatus]}},{prop:"duplicateVersion",label:"待审核副本",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{props:{type:"text"},on:{click:function(){e.openReviewWithVersion(i)}}},i.duplicateVersion)}},{prop:"lastUpdateDate",label:"更新时间",sortable:!0},{prop:"currentOperator",label:"更新人",sortable:!0},{prop:"auditor",label:"审核人",sortable:!0}],selected:[],selectionType:"multiple"},selected:[]}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.filmDetailPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows,e.table.selected=[],e.selected=[]})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={},this.pannelValue=[],this.fetchData()},addFilmDetail:function(){this.$emit("open-add-page")},editData:function(){var e=this,t=this.selected;if(1!==t.length)return this.$message("只能选择一条数据"),!1;this.$service.filmDetailPageList({tabId:t.join()}).then(function(a){var i=a.rows[0];if(2!==i.currentStatus)return e.$alert("该状态不允许编辑！","操作提示",{confirmButtonText:"确定"}),!1;e.$emit("open-add-page",t[0],"edit")})},batchDel:function(){var e=this;if(0!==this.selected.length){if(window.confirm("确定要删除吗")){var t=this.selected.join(",");this.$service.removeFilmDetailPage({id:t},"删除成功").then(function(){e.fetchData()})}}else this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.tabId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.tabId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.tabId)>-1&&e.push(i),e},[])},getMediaResourceInfo:function(){var e=this;return this.$service.getMediaResourceInfo().then(function(t){var a=JSON.parse(decodeURI(t.slice(5,-1))),i=a.videoItemModels,n=i.reduce(function(e,t){return e.push(t.productList),e},[]),o=[].concat.apply([],n);e.productOptions=o;var l={label:"爱奇艺",value:"iqiyi",children:[]};l.children=i[0].categoryList.reduce(function(e,t){return e.concat({label:t.category_name,value:t.cc_category_id})},[]);var r={label:"腾讯",value:"qq",children:[]};r.children=i[1].categoryList.reduce(function(e,t){return e.concat({label:t.category_name,value:t.cc_category_id})},[]);var s={label:"优酷",value:"youku",children:[]};s.children=i[2].categoryList.reduce(function(e,t){return e.concat({label:t.category_name,value:t.cc_category_id})},[]),e.channelOptions.push(l),e.channelOptions.push(r),e.channelOptions.push(s)})},handleChannelChange:function(e){this.filter.source="",this.filter.source=e[0],this.filter.channel=e[1]},openReview:function(e){this.$emit("open-add-page",e.tabId,"read")},openReviewWithVersion:function(e){this.$emit("open-add-page",e.tabId,"read",e.duplicateVersion)}},created:function(){this.getMediaResourceInfo().then(function(){}),this.fetchData()}},vm=gm,ym=(a("14d6"),Object(K["a"])(vm,fm,bm,!1,null,"2e5d0c28",null)),wm=ym.exports,Im=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("div",[a("CommonContent",{ref:"commonContent",attrs:{mode:e.mode,"resource-info":e.resourceInfo},on:{edit:function(t){e.mode="edit"},replicate:function(t){e.mode="replicate"},"submit-audit":e.btnAudit,"save-draft":e.btnSave,"select-version":e.fetchData,unaudit:e.fetchData,shelves:e.fetchData,audit:function(t){return e.$emit("upsert-end")}}},[a("div",{staticClass:"split-bar"},[a("i",{staticClass:"el-icon-edit"},[e._v("基本信息")])]),"read"!==e.mode?[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"版面名称",prop:"tabName"}},[a("el-input",{staticStyle:{width:"240px"},model:{value:e.form.tabName,callback:function(t){e.$set(e.form,"tabName",t)},expression:"form.tabName"}})],1),a("el-form-item",{attrs:{label:"业务分类"}},[a("el-select",{attrs:{disabled:e.categoryEdit},model:{value:e.form.tabCategory,callback:function(t){e.$set(e.form,"tabCategory",t)},expression:"form.tabCategory"}},[a("el-option",{attrs:{label:"影视",value:"0"}}),a("el-option",{attrs:{label:"教育",value:"1"}})],1)],1),"0"===e.form.tabCategory?a("el-form-item",{attrs:{label:"内容源"}},[a("el-radio-group",{nativeOn:{change:function(t){return t.preventDefault(),e.changeResource(t)}},model:{value:e.form.tabResource,callback:function(t){e.$set(e.form,"tabResource",t)},expression:"form.tabResource"}},[a("el-radio",{attrs:{label:"qq"}},[e._v("腾讯")]),a("el-radio",{attrs:{label:"iqiyi"}},[e._v("爱奇艺")]),a("el-radio",{attrs:{label:"youku"}},[e._v("优朋")])],1)],1):e._e(),a("el-form-item",{attrs:{label:"频道"}},[a("el-select",{model:{value:e.pannel,callback:function(t){e.pannel=t},expression:"pannel"}},[a("el-option",{attrs:{value:"0",label:"不限"}}),e._l(e.pannelItems,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-form-item",{attrs:{label:"产品包"}},[a("el-select",{model:{value:e.product,callback:function(t){e.product=t},expression:"product"}},[a("el-option",{attrs:{value:"0",label:"不限"}}),e._l(e.productItems,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-form-item",{attrs:{label:"选择板块"}},[a("cc-panel-selector-el",{ref:"panelSelector",attrs:{source:e.form.tabResource},on:{"select-end":e.handleSelectPanelEnd}})],1),a("el-form-item",{attrs:{label:"优先级"}},[a("el-input-number",{attrs:{min:1},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}}),a("span",[e._v("注：数值越大优先级越高，数值越小优先级越低")])],1)],1)]:e._e(),"read"===e.mode?[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"版面名称",prop:"tabName"}},[e._v("\n              "+e._s(e.form.tabName)+"\n            ")]),a("el-form-item",{attrs:{label:"业务分类",prop:"tabCategory"}},[e._v("\n                "+e._s(0==e.form.tabCategory?"影视":"教育")+"\n            ")]),"0"===e.form.tabCategory?a("el-form-item",{attrs:{label:"内容源",prop:"tabResource"}},[e._v("\n              "+e._s(e.sourceText[e.form.tabResource])+"\n            ")]):e._e(),a("el-form-item",{attrs:{label:"频道"}},[a("el-select",{attrs:{disabled:!0},model:{value:e.pannel,callback:function(t){e.pannel=t},expression:"pannel"}},[a("el-option",{attrs:{value:"0",label:"不限"}}),e._l(e.pannelItems,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-form-item",{attrs:{label:"产品包"}},[a("el-select",{attrs:{disabled:!0},model:{value:e.product,callback:function(t){e.product=t},expression:"product"}},[a("el-option",{attrs:{value:"0",label:"不限"}}),e._l(e.productItems,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-form-item",{attrs:{label:"选择板块"}}),a("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[e._v("\n              "+e._s(e.form.priority)+"\n            ")])],1)]:e._e(),a("div",{staticClass:"table"},[a("Table",{attrs:{props:e.table.props,header:e.tableHeader,data:e.table.data}})],1)],2)],1)])],1)},Tm=[],Sm={components:{Table:W["Table"],CommonContent:_c,"cc-panel-selector-el":$u},props:["editId","initMode","duplicateVersionVersion"],watch:{"form.tabCategory":{deep:!0,handler:function(e,t){"1"===e?(this.pannelItems=this.eduProductItems.categoryList,this.productItems=this.eduProductItems.productList,0===this.eduProductItems.categoryList.length&&(this.pannel="不限"),0===this.tabResourceFlag?this.tabResourceFlag=1:(this.pannel="",this.product="")):"0"===e&&this.handleTabResourceChange(this.form.tabResource)}},"form.tabResource":function(e,t){this.handleTabResourceChange(e)}},computed:{tableHeader:function(){var e=this,t=this.table.header,a=[{label:"状态",prop:"pannelStatus",formatter:function(e){if(!(e.pannelGroupId>0))return"";switch(e.pannelStatus){case 0:return"下架";case 1:return"上架";case 2:return"草稿";case 3:return"待审核";case 4:return"审核通过";case 5:return"审核不通过";case 6:return"审核中";case 7:return"审核通过未上线";case 9:return"待二次审核"}}},{label:"审核人",prop:"auditor"}],i={label:"操作",render:function(t,a){var i=a.row;return t($["Button"],{props:{type:"warning"},on:{click:function(){var t=e.table.data.indexOf(i);e.table.data.splice(t,1),e.table.data.forEach(function(e,t){e.pannelSequence=t+1})}}},"删除")}},n=[];return n="read"===this.mode?t.concat(a):t.concat(i),n},resourceInfo:function(){var e=this.form;if(this.editId)return{id:this.editId,version:e.currentVersion,status:e.currentStatus,type:"tab",menuElId:"tabInfo"}}},data:function(){var e=this;return{title:"",rules:{tabName:[{required:!0,message:"请输入主题名称",trigger:"blur"}]},tabStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],sourceText:{qq:"腾讯",iqiyi:"爱奇艺",youku:"优酷"},form:{tabName:"",tabCategory:"0",tabResource:"",priority:1,currentVersion:"",currentStatus:""},globalTabResource:"",parentResource:"",tabResourceFlag:1,iqiyiSource:[],qqSource:[],youkuSource:[],pannel:"",pannelItems:[],product:"",productItems:[],eduProductItems:[],blockTable:[],table:{props:{},data:[],header:[{label:"排序",prop:"pannelSequence",render:function(t,a){var i=a.row;return t("el-input",{props:{value:i.pannelSequence},on:{input:function(e){i.pannelSequence=e},blur:function(){var t=e.table.data,a=t.length,n=parseInt(i.pannelSequence),o=Number.isInteger(n),l=t.indexOf(i)+1;if(o&&n>0&&n<a){if(i.pannelSequence=n,n!==l){var r=t[l-1];t[n-1].pannelSequence=l,t[l-1]=t[n-1],t[n-1]=r}}else i.pannelSequence=e.table.data.indexOf(i)+1}}})}},{label:"板块ID",prop:"pannelGroupId"},{label:"板块名称",prop:"pannelGroupRemark"},{label:"待审核副本",prop:"duplicateVersion"}],selected:[],selectionType:"single"},mode:"",categoryEdit:!1}},methods:{btnAudit:function(){this.save(3)},btnSave:function(){this.save(2)},save:function(e){var t=this;if(0===this.table.data.length)return this.$message("请添加版块"),!1;var a=this.form;this.$refs.form.validate(function(i){if(i){var n={tabInfo:{tabId:t.editId,systemDefault:"",tabName:a.tabName,tabType:3,tabStatus:e,tabResource:"0"===a.tabCategory?a.tabResource:"",currentVersion:a.currentVersion},filmDetail:{source:"0"===a.tabCategory?a.tabResource:"",product:t.product||"0",channel:t.pannel||"0",category:a.tabCategory,priority:a.priority},pannelJson:t.table.data};t.$service.saveFilmDetailPage({jsonStr:JSON.stringify(n)},"保存成功").then(function(e){t.$emit("open-list-page")})}else t.$message("请将表单填写完整")})},changeResource:function(e){var t=this;this.$confirm("是否要切换内容源，切换内容源之后所选择的版块数据将会清除掉！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$message({type:"success",message:"内容源切换成功!"}),t.clearResource()}).catch(function(){t.$message({type:"info",message:"已取消切换"})})},clearResource:function(){this.table.data=[]},getMediaResourceInfos:function(){var e=this;return this.$service.getMediaResourceInfo().then(function(t){var a=JSON.parse(decodeURI(t.slice(5,-1))),i=a.videoItemModels,n={categoryList:[],productList:[]};n.categoryList=e._arrayingOption(i[0].categoryList,"category_name","cc_category_id"),n.productList=e._arrayingOption(i[0].productList,"source_name","source_sign"),e.iqiyiSource=n;var o={categoryList:[],productList:[]};o.categoryList=e._arrayingOption(i[1].categoryList,"category_name","cc_category_id"),o.productList=e._arrayingOption(i[1].productList,"source_name","source_sign"),e.qqSource=o;var l={categoryList:[],productList:[]};l.categoryList=e._arrayingOption(i[2].categoryList,"category_name","cc_category_id"),l.productList=e._arrayingOption(i[2].productList,"source_name","source_sign"),e.youkuSource=l;var r={categoryList:[],productList:[]};r.categoryList=e._arrayingOption(i[3].categoryList,"category_name","cc_category_id"),r.productList=e._arrayingOption(i[3].productList,"source_name","source_sign"),e.eduProductItems=r})},_arrayingOption:function(e,t,a){return e.reduce(function(e,i){return e.concat({label:i[t],value:i[a]})},[])},handleTabResourceChange:function(e){var t=this.qqSource,a=this.iqiyiSource,i=this.youkuSource;switch(0===this.tabResourceFlag&&this.globalTabResource===e?this.tabResourceFlag=1:(this.pannel="",this.product=""),e){case"qq":this.pannelItems=t.categoryList,this.productItems=t.productList;break;case"iqiyi":this.pannelItems=a.categoryList,this.productItems=a.productList;break;case"youku":this.pannelItems=i.categoryList,this.productItems=i.productList;break;default:this.pannelItems=[],this.productItems=[]}},handleSelectPanelEnd:function(e){var t=this,a=this.table;a.data=[];var i=[{pannelGroupId:"-1002",pannelGroupRemark:"花絮"},{pannelGroupId:"-1001",pannelGroupRemark:"相关推荐"},{pannelGroupId:"-1003",pannelGroupRemark:"相关明星"}];a.data=a.data.concat(i),e.forEach(function(e,t){a.data.push(e.data)}),a.data.forEach(function(e,a){t.$set(e,"pannelSequence",a+1)})},setFormInfo:function(e){this.form.tabName=e.filmDetail.tabName,this.form.tabCategory=e.filmDetail.category,this.form.priority=e.filmDetail.priority,this.form.tabResource=e.filmDetail.source,this.form.currentVersion=e.filmDetail.currentVersion,this.form.currentStatus=e.filmDetail.currentStatus,this.globalTabResource=e.filmDetail.source,this.pannel=e.filmDetail.channel,this.product=e.filmDetail.product,this.table.data=e.pannelList;var t=[];e.pannelList.forEach(function(e){t.push(e.pannelName)}),this.table.data.forEach(function(e,a){e.pannelGroupRemark=t[a],e.pannelSequence=a+1}),this.tabResourceFlag=0},fetchData:function(e){var t=this;void 0!==e&&(this.form.currentVersion=e),this.$service.reviewFilmDetailPage({id:this.editId,version:e}).then(function(e){t.setFormInfo(e)})}},created:function(){var e=this;this.getMediaResourceInfos().then(function(){e.mode=e.initMode,e.editId?(e.form.tabResource="","edit"===e.mode?(e.title="编辑页面",e.$service.editFilmDetailPage({id:e.editId}).then(function(t){e.setFormInfo(t),e.categoryEdit=!0})):"read"===e.mode&&(e.title="预览页面",e.fetchData(e.duplicateVersionVersion))):(e.title="新增页面",e.form.tabResource="qq")})}},Cm=Sm,km=(a("566c"),Object(K["a"])(Cm,Im,Tm,!1,null,"971ae318",null)),_m=km.exports,Pm={components:{FilmDetailPageList:wm,FilmDetailPageAdd:_m},data:function(){return{isShow:!0,editId:"",mode:"",duplicateVersionVersion:""}},methods:{openAddPage:function(e,t,a){this.editId=e,this.isShow=!1,this.mode=t,this.duplicateVersionVersion=a},goBack:function(){this.isShow=!0},openListPage:function(){this.isShow=!0,this.$refs.list.fetchData()}}},xm=Pm,Dm=Object(K["a"])(xm,hm,mm,!1,null,"a7eb4f24",null),Fm=Dm.exports,$m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("TabInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{create:e.handleCreate,read:e.handleRead,edit:e.handleEdit,copy:e.handleCopy}}),e.isShowList?e._e():a("TabInfo",{attrs:{id:e.id,"init-mode":e.mode},on:{"upsert-end":e.handleUpsertEnd,"go-back":e.goBack}})],1)},Rm=[],Lm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.handleFilterChange}},[a("el-form",{ref:"form",attrs:{inline:"","label-width":"90px",size:"mini"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[a("el-form-item",{attrs:{label:"版面ID"}},[a("el-input",{model:{value:e.filter.tabId,callback:function(t){e.$set(e.filter,"tabId",t)},expression:"filter.tabId"}})],1),a("el-form-item",{attrs:{label:"版面标题"}},[a("el-input",{model:{value:e.filter.tabName,callback:function(t){e.$set(e.filter,"tabName",t)},expression:"filter.tabName"}})],1),a("el-form-item",{attrs:{label:"版面属性"}},[a("el-select",{model:{value:e.filter.tabType,callback:function(t){e.$set(e.filter,"tabType",t)},expression:"filter.tabType"}},[a("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.tabTypeOption,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-form-item",{attrs:{label:"是否二级tab"}},[a("el-select",{model:{value:e.filter.hasSubTab,callback:function(t){e.$set(e.filter,"hasSubTab",t)},expression:"filter.hasSubTab"}},[a("el-option",{attrs:{value:""}},[e._v("请选择")]),a("el-option",{attrs:{value:"1"}},[e._v("是")]),a("el-option",{attrs:{value:"0"}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{label:"业务分类"}},[a("el-select",{model:{value:e.filter.tabCategory,callback:function(t){e.$set(e.filter,"tabCategory",t)},expression:"filter.tabCategory"}},[a("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.businessType,function(e,t){return a("el-option",{key:t,attrs:{label:e.dictCnName,value:e.dictId}})})],2)],1),a("el-form-item",{attrs:{label:"AppId"}},[a("el-select",{model:{value:e.filter.tabAppid,callback:function(t){e.$set(e.filter,"tabAppid",t)},expression:"filter.tabAppid"}},[a("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.appIdType,function(e){return a("el-option",{key:e.dictEnName,attrs:{label:e.dictCnName,value:e.dictEnName}})})],2)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:e.filter.tabStatus,callback:function(t){e.$set(e.filter,"tabStatus",t)},expression:"filter.tabStatus"}},[a("el-option",{attrs:{value:""}},[e._v("请选择")]),e._l(e.tabStatusOption,function(e){return a("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})})],2)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilterChange}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-delete"},on:{click:e.handleFilterReset}},[e._v("重置")])],1)],1),a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addTabInfo}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Nm=[],Om={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"]},data:function(){var e=this;return{selected:[],tabTypeOption:[{label:"信号源版面",value:"5"},{label:"第三方版面",value:"4"},{label:"专题版面",value:"2"},{label:"普通版面",value:"1"}],tabStatusOption:[{label:"下架",value:"0"},{label:"上架",value:"1"},{label:"草稿",value:"2"},{label:"待审核",value:"3"},{label:"审核通过",value:"4"},{label:"审核不通过",value:"5"}],businessType:[],filter:{idPrefix:10},appIdType:[],filterSchema:null,pagination:{currentPage:1},table:{props:{},data:[],header:[{label:"ID",prop:"tabId"},{label:"名称",prop:"tabName",render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.handleRead(i)}}},i.tabName)}},{label:"版面属性",prop:"tabType",formatter:function(e){var t=e.tabType;return{1:"普通版面",2:"专题版面",4:"第三方版面",5:"信号源版面"}[t+""]||"未知版面"}},{label:"业务分类",prop:"businessCategoryName"},{label:"内容源",prop:"tabResource",formatter:function(e){var t=e.tabResource;return{o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_voole:"优朋"}[t+""]||""}},{label:"AppId",prop:"tabAppid",formatter:function(t){return e.appIdType.map(function(e){if(t.tabAppid.toString()===e.dictEnName)return e.dictCnName})}},{label:"版本/状态",prop:"tabStatus",formatter:function(t){var a=t.tabStatus,i=t.currentVersion;return i+"/"+e.tabStatusOption.map(function(e){if(a.toString()===e.value)return e.label}).join("")}},{label:"待审核副本",prop:"duplicateVersion"},{label:"更新时间",prop:"lastUpdateDate"},{label:"审核人",prop:"auditor"},{label:"更新人",prop:"modifierName"},{label:"操作",prop:"oper"}],selected:[],selectionType:"multiple"}}},methods:{handleRead:function(e){this.$emit("read",e)},fetchData:function(){var e=this,t=this.parseFilter();this.$service.tabInfoList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={idPrefix:this.$consts.idPrefix},this.fetchData()},addTabInfo:function(){this.$emit("create")},editData:function(){var e=this.table,t=this.table.selected,a=e.data[t[0]];this.$emit("edit",a)},batchDel:function(){},handleRowSelectionAdd:function(e){this.selected.push(e.tabId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.tabId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.tabId)>-1&&e.push(i),e},[])},getBusinessType:function(){var e=this;this.$service.getBusinessType().then(function(t){e.businessType=t})}},created:function(){var e=this;this.$service.getAppIdType().then(function(t){e.appIdType=t,e.fetchData()}),this.getBusinessType()}},Am=Om,Em=(a("e852"),Object(K["a"])(Am,Lm,Nm,!1,null,"82ac8e08",null)),Vm=Em.exports,Mm={components:{TabInfoList:Vm,TabInfo:jd},data:function(){return{isShowList:!0,id:null,mode:"create",version:void 0}},methods:{handleCreate:function(){this.id=void 0,this.mode="create",this.isShowList=!1},handleEdit:function(e){this.id=e.tabId,this.mode="edit",this.isShowList=!1},handleRead:function(e){this.id=e.tabId,this.mode="read",this.isShowList=!1},handleCopy:function(e){this.id=e.tabId,this.mode="copy",this.isShowList=!1},handleUpsertEnd:function(){this.isShowList=!0,this.$refs.list.fetchData(),this.mode="list"},goBack:function(){this.isShowList=!0,this.mode="list"}}},Bm=Mm,Um=Object(K["a"])(Bm,$m,Rm,!1,null,null,null),jm=Um.exports,Hm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"cc-movie-filter"},[a("div",{staticClass:"cc-search"},[a("el-collapse",{attrs:{value:"1"}},[a("el-collapse-item",{attrs:{title:"查询条件",name:"1"}},[a("el-form",{staticClass:"search-form-inline",attrs:{inline:!0,model:e.searchForm,"label-width":"72px"}},[a("el-form-item",{attrs:{label:"渠道"}},[a("el-select",{attrs:{size:"small"},model:{value:e.partner,callback:function(t){e.partner=t},expression:"partner"}},e._l(e.partnerList,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"内容源"}},[a("el-select",{attrs:{size:"small"},on:{change:e.sourceSelectChange},model:{value:e.searchForm.sources,callback:function(t){e.$set(e.searchForm,"sources",t)},expression:"searchForm.sources"}},e._l(e.source,function(e){return a("el-option",{key:e.source_code,attrs:{label:e.source_title,value:e.source_code}})}),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"tencent"===e.searchForm.sources,expression:"searchForm.sources === 'tencent'"}],attrs:{label:"牌照"}},[a("el-select",{attrs:{size:"small",clearable:""},model:{value:e.searchForm.licensee,callback:function(t){e.$set(e.searchForm,"licensee",t)},expression:"searchForm.licensee"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.licensee,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),a("el-form-item",{attrs:{label:"频道类型"}},[a("el-select",{attrs:{filterable:"",size:"small"},on:{change:e.categorySelectChange},model:{value:e.searchForm.category,callback:function(t){e.$set(e.searchForm,"category",t)},expression:"searchForm.category"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.categories,function(e){return a("el-option",{key:e.categoryId,attrs:{label:e.categoryName,value:e.categoryId}})})],2)],1),a("el-form-item",{attrs:{label:"影片类型"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.videoTypes,callback:function(t){e.$set(e.searchForm,"videoTypes",t)},expression:"searchForm.videoTypes"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.videoTypes,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagName,value:e.tagName}})})],2)],1),a("el-form-item",{attrs:{label:"付费类型"}},[a("el-select",{attrs:{filterable:"",size:"small"},model:{value:e.searchForm.payTypes,callback:function(t){e.$set(e.searchForm,"payTypes",t)},expression:"searchForm.payTypes"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.payTypes,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{size:"small"},model:{value:e.searchForm.title,callback:function(t){e.$set(e.searchForm,"title",t)},expression:"searchForm.title"}})],1),a("el-form-item",{attrs:{label:"素材类型"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTypes,callback:function(t){e.$set(e.searchForm,"contentTypes",t)},expression:"searchForm.contentTypes"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTypes,function(e){return a("el-option",{key:e.contentTypeId,attrs:{label:e.contentType,value:e.contentTypeId}})})],2)],1),a("el-form-item",{attrs:{label:"年代"}},[a("el-input",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{blur:e.yearStartListen},model:{value:e.searchForm.yearStart,callback:function(t){e.$set(e.searchForm,"yearStart",t)},expression:"searchForm.yearStart"}}),e._v("-\n                "),a("el-input",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{blur:e.yearEndListen},model:{value:e.searchForm.yearEnd,callback:function(t){e.$set(e.searchForm,"yearEnd",t)},expression:"searchForm.yearEnd"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:e.isMore,expression:"isMore"}]},[a("el-form-item",{attrs:{label:"影片格式"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.videoFormat,callback:function(t){e.$set(e.searchForm,"videoFormat",t)},expression:"searchForm.videoFormat"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.videoFormat,function(e){return a("el-option",{key:e.tagEnName,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2)],1),a("el-form-item",{attrs:{label:"内容标签"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.contentTag,callback:function(t){e.$set(e.searchForm,"contentTag",t)},expression:"searchForm.contentTag"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.contentTag,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"排序方式"}},[a("el-select",{attrs:{size:"small"},model:{value:e.searchForm.orderBy,callback:function(t){e.$set(e.searchForm,"orderBy",t)},expression:"searchForm.orderBy"}},[a("el-option",{attrs:{label:"请选择",value:""}}),e._l(e.conditionList.orderBy,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagEnName}})})],2),a("el-tooltip",{attrs:{content:e.orderTip}},[a("el-button",{attrs:{icon:"asc"===e.searchForm.order?"el-icon-arrow-up":"el-icon-arrow-down",size:"mini"},on:{click:function(t){return e.changeSort()}}})],1)],1),a("el-form-item",{attrs:{label:"导演"}},[a("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.directors,callback:function(t){e.$set(e.searchForm,"directors",t)},expression:"searchForm.directors"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.directors,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"主演"}},[a("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.actors,callback:function(t){e.$set(e.searchForm,"actors",t)},expression:"searchForm.actors"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._v("'\n                    "),e._l(e.conditionList.actors,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1),a("el-form-item",{attrs:{label:"地区"}},[a("el-select",{attrs:{filterable:"","allow-create":"",size:"small"},model:{value:e.searchForm.areas,callback:function(t){e.$set(e.searchForm,"areas",t)},expression:"searchForm.areas"}},[a("el-option",{attrs:{label:"请选择/输入",value:""}}),e._l(e.conditionList.areas,function(e){return a("el-option",{key:e.tagId,attrs:{label:e.tagCnName,value:e.tagCnName}})})],2)],1)],1),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{icon:e.isMore?"arrow-up":"arrow-down",size:"small"},on:{click:function(t){return e.showMore()}}},[e._v(e._s(e.isMore?"收起":"展开"))]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.search}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.reset}},[e._v("重置")])],1)],1)],1)],1)],1)]),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"1200px"},on:{"update:visible":function(t){e.dialogTableVisible=t},close:e.closeDialog}},[a("selectSingle",{attrs:{singleId:e.singleId},on:{single:e.singleSearch}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")])],1)],1)],1)},qm=[],Wm=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-change":e.handleRowSelectionChange}})],1)],1)},Gm=[],zm={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"]},props:{singleId:null},data:function(){return{urlIsTrailers:{"腾讯":1,"正片":0},filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:void 0,table:{props:{},header:[{label:"集数名",prop:"urlCollection"},{label:"单集ID",prop:"coocaaMId"},{label:"单集名称",prop:"urlTitle"},{label:"图片",prop:"thumb",width:"130",render:function(e,t){var a=t.row;return e("img",{attrs:{src:a.thumb,width:"50px",height:"50px",class:"imgs"}})}},{label:"素材类型",prop:"urlType",formatter:function(e,t){return 1===e?"预告":"正片"}}],data:[],selected:[],selectionType:"single"}}},watch:{singleId:function(e,t){this.singleId=e,this.fetchData()}},methods:{fetchData:function(){var e=this,t=this.parseFilter();t.id=this.singleId,this.$service.getSegmentList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})},handleRowSelectionAdd:function(e){this.selected.push(e.commonOnclickId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.commonOnclickId}),this.updateTableSelected()},handleRowSelectionChange:function(e,t){this.table.selected=t,this.$emit("single",e)},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.commonOnclickId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize,e.callbackparam="result",e.source="tencent"),e}},created:function(){var e=ne.a.map({urlIsTrailer:ne.a.o.enum(this.urlIsTrailers).other("form",{component:"Select",placeholder:"素材类型",cols:{item:3,label:0}}),urlTitle:ne.a.o.string.other("form",{component:"Input",placeholder:"单集名称",cols:{item:3,label:0}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Jm=zm,Km=(a("6182"),Object(K["a"])(Jm,Wm,Gm,!1,null,"a15e5722",null)),Xm=Km.exports,Ym={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],selectSingle:Xm},data:function(){return{dialogTableVisible:!1,singleId:null,searchForm:{sources:"tencent",category:"",videoTypes:"",licensee:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStsearchFormart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},partner:"tencent",conditionList:{},searchParams:{},partnerList:[{label:"腾讯",value:"tencent"},{label:"爱奇艺",value:"yinhe"}],source:[],categories:[],videoTypes:[],isMore:!1,orderTip:"降序排列",filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"coocaaVId"},{label:"标题",prop:"title",sortable:!0},{label:"副标题",prop:"subTitle",width:"110",sortable:!0},{label:"内容源",prop:"ccVideoSourceEntities","min-width":"90",render:function(e,t){for(var a=t.row,i=0;i<a.ccVideoSourceEntities.length;i++){if("tencent"===a.ccVideoSourceEntities[i].thirdSource)return"腾讯";if("4KGarden"===a.ccVideoSourceEntities[i].thirdSource)return"4k花园";if("yinhe"===a.ccVideoSourceEntities[i].thirdSource)return"爱奇艺"}}},{label:"状态",prop:"videoStatus","min-width":"160",render:function(e,t){var a=t.row;switch(a.videoStatus){case 0:return"失效";case 1:return"有效";case 2:return"待审核";case 3:return"审核不通过";case 4:return"草稿"}}},{label:"图片",prop:"thumb",width:"130",render:function(e,t){var a=t.row;return e("img",{attrs:{src:a.thumb,width:"50px",height:"50px",class:"imgs"}})}},{label:"影片类型",prop:"videoType"},{label:"内容类型",prop:"contentType",width:"170"},{label:"期数",prop:"season"},{label:"导演",prop:"directors",width:"170",sortable:!0},{label:"演员",prop:"actors",width:"170",sortable:!0},{label:"地区",prop:"publishArea","min-width":"170"},{label:"年代",prop:"year"},{label:"已选集数",prop:"segment",fixed:"right"},{label:"操作",fixed:"right",render:W["utils"].component.createOperationRender(this,{operatSingle:"选择单集"})}],data:[],selected:[],selectionType:"multiple"}}},watch:{selected:function(e){this.$emit("input",e)},tableData:function(e,t){console.log(e)},"searchForm.sources":{deep:!0,handler:function(e,t){this.pannelResource=e}},partner:"getSources","searchForm.ccSearchReset":{deep:!0,handler:function(e,t){this.searchForm.ccSearchReset=e}}},methods:{showMore:function(){this.isMore=!this.isMore},search:function(){this.searchForm.ccSearchReset=!1,this.searchParams=this.deepClone(this.searchForm),this.fetchData();var e=Object.assign({},this.singleObj);e.data=[],e.selectId="",e.index=void 0,e.singleIdArr=[],e.singleIndexArr=[],e.titleArr=[],e.titleArrData=[]},reset:function(){this.searchForm={sources:"tencent",category:"",videoTypes:"",payTypes:"",provider:"",title:"",contentTypes:"",yearStart:null,yearEnd:null,videoFormat:"",contentTag:"",orderBy:"",order:"desc",directors:"",actors:"",areas:""},this.searchForm.ccSearchReset=!0,this.searchParams=this.deepClone(this.searchForm),"tencent"!==this.partner&&(this.partner="tencent"),this.$nextTick(this.getSources),this.fetchData()},yearStartListen:function(){if(this.searchForm.yearStart&&!+this.searchForm.yearStart)return this.$message("年代必须为数字"),void(this.searchForm.yearStart=null)},yearEndListen:function(){if(this.searchForm.yearEnd&&!+this.searchForm.yearEnd)return this.$message("年代必须为数字"),void(this.searchForm.yearEnd=null)},categorySelectChange:function(e){this.searchForm.videoTypes="";var t=this.categories,a=t.findIndex(function(t){return t.categoryId===e});this.videoTypes=t[a]?t[a].child[0].tagEntities:[]},sourceSelectChange:function(e){"tencent"!==e&&(this.searchForm.licensee="")},changeSort:function(){"asc"===this.searchForm.order?(this.searchForm.order="desc",this.orderTip="降序排列"):(this.searchForm.order="asc",this.orderTip="升序排列")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.coocaaVId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.coocaaVId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.coocaaVId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize,e.resType="vod",e.callbackparam="result"),e},fetchData:function(){var e=this,t=this.parseFilter(),a=Object.assign({},t);(this.searchForm.ccSearchReset=!0)?a.sources=this.searchForm.sources:this.searchForm.sources&&(a.sources=this.searchForm.sources),this.searchForm.category?a.category=this.searchForm.category:delete a.category,this.searchForm.videoTypes?a.videoTypes=this.searchForm.videoTypes:delete a.videoTypes,this.searchForm.licensee?a.licensee=this.searchForm.licensee:delete a.licensee,this.searchForm.payTypes?a.payTypes=this.searchForm.payTypes:delete a.payTypes,this.searchForm.yearStart?a.yearStart=this.searchForm.yearStart:delete a.yearStart,this.searchForm.yearEnd?a.yearEnd=this.searchForm.yearEnd:a.yearEnd,this.searchForm.title?a.title=this.searchForm.title:delete a.title,this.searchForm.contentTypes?a.contentTypes=this.searchForm.contentTypes:delete a.contentTypes,this.searchForm.videoFormat?a.videoFormat=this.searchForm.videoFormat:delete a.videoFormat,this.searchForm.contentTag?a.contentTag=this.searchForm.contentTag:delete a.contentTag,this.searchForm.orderBy?a.orderBy=this.searchForm.orderBy:delete matchMedia.orderBy,this.searchForm.directors?a.directors=this.searchForm.directors:delete a.directors,this.searchForm.actors?a.actors=this.searchForm.actors:delete a.actors,this.searchForm.areas?a.areas=this.searchForm.areas:delete a.areas,this.$service.getMediaVideoInfos(a).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getSources:function(){var e=this,t=this.partner;this.$service.getPartnerSource({partnerName:t}).then(function(a){var i=a.rows.reduce(function(e,t){return t.source_List&&(e=e.concat(t.source_List)),e},[]);e.source=i;var n=i.find(function(e){return e.source_code===t})||i[0];n&&(e.searchForm.sources=n.source_code)})},getCondition:function(){var e=this;this.$service.getCondition().then(function(t){e.categories=t.vod.sources[0].child,e.conditionList=t.vod})},operatSingle:function(e){this.dialogTableVisible=!0,this.singleId=e.row.coocaaVId},closeDialog:function(){this.singleId=null},singleSearch:function(e){this.dialogTableVisible=!1,console.log(e)}},created:function(){this.fetchData(),this.getSources(),this.getCondition()}},Zm=Ym,Qm=(a("45bc"),Object(K["a"])(Zm,Hm,qm,!1,null,"58ee7350",null)),ef=Qm.exports,tf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("div",[a("el-form",{ref:"form",staticClass:"admin-control-content",attrs:{model:e.form,rules:e.rules,"label-width":"200px"}},[a("el-form-item",{attrs:{label:"是否开启管理后台缓存",prop:"openCache"}},[a("el-select",{model:{value:e.form.openCache,callback:function(t){e.$set(e.form,"openCache",t)},expression:"form.openCache"}},e._l(e.cacheItems,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"缓存版本",prop:"cacheVersion"}},[a("el-input",{model:{value:e.form.cacheVersion,callback:function(t){e.$set(e.form,"cacheVersion",t)},expression:"form.cacheVersion"}})],1),a("el-form-item",{attrs:{label:"媒资回溯策略",prop:"mediaRecallPolicy"}},[a("el-select",{model:{value:e.form.mediaRecallPolicy,callback:function(t){e.$set(e.form,"mediaRecallPolicy",t)},expression:"form.mediaRecallPolicy"}},e._l(e.callBackItems,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存修改")])],1)],1)],1)])},af=[],nf={data:function(){return{form:{openCache:"",cacheVersion:"",mediaRecallPolicy:""},id:1,cacheItems:[{label:"开启缓存",value:1},{label:"关闭缓存",value:0}],callBackItems:[{label:"推送",value:"push"},{label:"定时",value:"polling"},{label:"不回溯",value:"none"}],rules:{openCache:[{required:!0,message:"请选择是否开启缓存",trigger:"blur"}],cacheVersion:[{required:!0,message:"请输入缓存版本",trigger:"blur"}],mediaRecallPolicy:[{required:!0,message:"请选择媒资回溯策略",trigger:"blur"}]}}},methods:{fetchData:function(){var e=this;this.$service.getAdminMasterControllInfo({id:this.id}).then(function(t){console.log(t),e.form=t})},submitForm:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.saveAdminMasterControll({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(e){console.log(e)})})}},created:function(){this.fetchData()}},of=nf,lf=(a("54ff"),Object(K["a"])(of,tf,af,!1,null,"55b71f7d",null)),rf=lf.exports,sf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DataDictionaryList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("DataDictionaryAdd",{attrs:{editData:e.editData},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},cf=[],uf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addDict}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("新增字典分类")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}}),a("el-dialog",{attrs:{title:"添加字典分类",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px","label-position":e.labelPosition}},[a("el-form-item",{attrs:{label:"字典分类名称",prop:"dictCategoryCnName"}},[a("el-input",{model:{value:e.ruleForm.dictCategoryCnName,callback:function(t){e.$set(e.ruleForm,"dictCategoryCnName",t)},expression:"ruleForm.dictCategoryCnName"}})],1),a("el-form-item",{attrs:{label:"字典分类值",prop:"dictCategoryEnName"}},[a("el-input",{model:{value:e.ruleForm.dictCategoryEnName,callback:function(t){e.$set(e.ruleForm,"dictCategoryEnName",t)},expression:"ruleForm.dictCategoryEnName"}})],1),a("el-form-item",[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确定")]),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1)],1)],1)},df=[],pf={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){return{dialogFormVisible:!1,labelPosition:"right",ruleForm:{dictCategoryEnName:"",dictCategoryCnName:""},rules:{dictCategoryCnName:[{required:!0,message:"请输入字典分类名称",trigger:"blur"}],dictCategoryEnName:[{required:!0,message:"请输入字典分类值",trigger:"blur"}]},formLabelWidth:"120px",filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],selectedRows:{},dictCategories:{},table:{props:{},header:[{label:"ID",prop:"dictId",width:"70"},{label:"字典名称","min-width":"90",prop:"dictCnName",sortable:!0},{label:"字典值",prop:"dictEnName",width:"110",sortable:!0},{label:"字典分类",prop:"dictCategory","min-width":"160"}],data:[],selected:[],selectionType:"multiple"}}},methods:{addDict:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selectedRows[this.selected[0]])},batchDel:function(){var e=this;0==this.selected.length&&this.$message("请选择一条数据"),1==this.selected.length&&window.confirm("确定要删除吗")&&this.$service.DeleteDict({id:this.selected[0]},"删除成功").then(function(t){e.fetchData()}),this.selected.length>1&&this.$message("只能选择一条数据")},getDictCategoryList:function(){var e=this;return this.$service.getDictCategoryList().then(function(t){t.forEach(function(t){e.dictCategories[t.label]=t.value})})},submitForm:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;var i={dictCategoryCnName:t.ruleForm.dictCategoryCnName,dictCategoryEnName:t.ruleForm.dictCategoryEnName};console.log(i),t.$service.SaveDictCategory(i,"保存成功").then(function(a){t.dialogFormVisible=!1,t.$refs[e].resetFields()})})},resetForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.dictId);var t=e.dictId;this.selectedRows[t]=e,this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.dictId}),delete this.selectedRows[e.dictId],this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.dictId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getDictList(t).then(function(t){console.log(t),e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=this,t=ne.a.map({dictId:ne.a.o.string.other("form",{component:"Input",placeholder:"字典ID"}),dictCnName:ne.a.o.string.other("form",{component:"Input",placeholder:"字典名称"}),dictEnName:ne.a.o.string.other("form",{component:"Input",placeholder:"字典值"}),dictCategory:ne.a.o.enum(this.dictCategories).other("form",{component:"Select",placeholder:"字典分类"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getDictCategoryList().then(function(){e.filterSchema=t}),this.fetchData()}},hf=pf,mf=(a("5552"),Object(K["a"])(hf,uf,df,!1,null,"ce23e700",null)),ff=mf.exports,bf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"字典名称",prop:"dictCnName"}},[a("el-input",{attrs:{placeholder:"字典名称"},model:{value:e.form.dictCnName,callback:function(t){e.$set(e.form,"dictCnName",t)},expression:"form.dictCnName"}})],1),a("el-form-item",{attrs:{label:"字典值",prop:"dictEnName"}},[a("el-input",{attrs:{placeholder:"字典值"},model:{value:e.form.dictEnName,callback:function(t){e.$set(e.form,"dictEnName",t)},expression:"form.dictEnName"}})],1),a("el-form-item",{attrs:{label:"字典分类",prop:"dictCategory"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择字典分类"},model:{value:e.form.dictCategory,callback:function(t){e.$set(e.form,"dictCategory",t)},expression:"form.dictCategory"}},e._l(e.dictCategoryStr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},gf=[],vf={props:{editData:{type:Object}},data:function(){return{title:null,form:{dictId:null,dictCnName:null,dictEnName:null,dictCategory:null,checked:null,createdDate:null,creater:null,dictStatus:null,flag:null,id:null,keyword:null,lastUpdateDate:null,modifier:null},dictCategoryStr:[],formRules:{dictCnName:[{required:!0,message:"请输入字典名称",trigger:"blur"}],dictEnName:[{required:!0,message:"请输入字典值",trigger:"blur"}],dictCategory:[{required:!0,message:"请选择字典分类",trigger:"blur"}]}}},methods:{getDictCategoryList:function(){var e=this;this.$service.getDictCategoryList().then(function(t){e.dictCategoryStr=t})},submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a={dictId:e.form.dictId,dictCategory:e.form.dictCategory,dictCnName:e.form.dictCnName,dictEnName:e.form.dictEnName};e.$service.SaveDictionary(a,"保存成功").then(function(t){e.$emit("open-list-page")})}})}},created:function(){null!==this.editData&&void 0!==this.editData?(this.title="编辑",this.form=this.editData):this.title="新增",this.getDictCategoryList()}},yf=vf,wf=Object(K["a"])(yf,bf,gf,!1,null,null,null),If=wf.exports,Tf={components:{DataDictionaryList:ff,DataDictionaryAdd:If},data:function(){return{isShowList:!0,editData:null}},methods:{openAddPage:function(e){this.editData=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Sf=Tf,Cf=Object(K["a"])(Sf,sf,cf,!1,null,null,null),kf=Cf.exports,_f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("DepartmentManageList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("DepartmentManageAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Pf=[],xf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addDep}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},Df=[],Ff={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"],ButtonGroupForListPage:ue},data:function(){var e=this;return{filterSchema:null,filter:{sort:void 0,order:void 0},pagination:{currentPage:1,pageSize:15},selected:[],table:{props:{},header:[{label:"部门名称",prop:"deptName",fit:!0,sortable:!0},{label:"部门电话",prop:"deptTel",fit:!0,sortable:!0},{label:"部门传真",prop:"deptFax",fit:!0,sortable:!0},{label:"是否禁用",prop:"disabled",fit:!0,sortable:!0,render:function(e,t){var a=t.row;return e("div",{style:{color:["red","green"][a.disabled]}},["否","是"][a.disabled])}},{label:"备注",prop:"remark",fit:!0,sortable:!0},{label:"排序",prop:"seq",width:100,sortable:!0,render:function(t,a){var i=a.row;return t($["Input"],{ref:"input",props:{value:i.seq},on:{input:function(e){i.seq=e},blur:function(t){e.$service.sysDeptUpdateSeq({id:i.deptId,seq:i.seq})}}})}},{label:"部门父编号",prop:"pid",fit:!0,sortable:!0}],data:[],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.sysDeptPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},addDep:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.sysDeptRemove({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData(),e.table.selected=[]}):this.$message("请选择再删除")},handleRowSelectionAdd:function(e){this.selected.push(e.deptId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.deptId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.deptId)>-1&&e.push(i),e},[])}},created:function(){var e=ne.a.map({deptName:ne.a.o.string.other("form",{placeholder:"部门名称"}),deptTel:ne.a.o.string.other("form",{placeholder:"部门电话"}),deptFax:ne.a.o.string.other("form",{placeholder:"部门传真"}),remark:ne.a.o.string.other("form",{placeholder:"备注"}),pid:ne.a.o.number.other("form",{placeholder:"部门父编号"}),disabled:ne.a.o.enum({"否":0,"是":1}).other("form",{component:"Select",placeholder:"是否禁用"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},$f=Ff,Rf=(a("e82f"),Object(K["a"])($f,xf,Df,!1,null,"88116a62",null)),Lf=Rf.exports,Nf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"部门名称",prop:"deptName"}},[a("el-input",{attrs:{placeholder:"部门名称"},model:{value:e.formData.deptName,callback:function(t){e.$set(e.formData,"deptName",t)},expression:"formData.deptName"}})],1),a("el-form-item",{attrs:{label:"部门电话",prop:"deptTel"}},[a("el-input",{attrs:{placeholder:"部门电话"},model:{value:e.formData.deptTel,callback:function(t){e.$set(e.formData,"deptTel",t)},expression:"formData.deptTel"}})],1),a("el-form-item",{attrs:{label:"部门传真",prop:"deptFax"}},[a("el-input",{attrs:{placeholder:"部门传真"},model:{value:e.formData.deptFax,callback:function(t){e.$set(e.formData,"deptFax",t)},expression:"formData.deptFax"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.formData.remark,callback:function(t){e.$set(e.formData,"remark",t)},expression:"formData.remark"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"seq"}},[a("el-input",{attrs:{placeholder:"排序"},model:{value:e.formData.seq,callback:function(t){e.$set(e.formData,"seq",t)},expression:"formData.seq"}})],1),a("el-form-item",{attrs:{label:"上级部门",prop:"pid"}},[a("el-select",{attrs:{placeholder:"所在部门"},model:{value:e.formData.pid,callback:function(t){e.$set(e.formData,"pid",t)},expression:"formData.pid"}},[a("el-option",{attrs:{label:"无",value:"0"}}),e._l(e.pidList,function(e){return a("el-option",{key:e.deptId+"",attrs:{label:e.deptName,value:e.deptId}})})],2)],1),a("el-form-item",{attrs:{label:"是否禁用",prop:"disabled"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.formData.disabled,callback:function(t){e.$set(e.formData,"disabled",t)},expression:"formData.disabled"}},[e._v("否")]),a("el-radio",{attrs:{label:"1"},model:{value:e.formData.disabled,callback:function(t){e.$set(e.formData,"disabled",t)},expression:"formData.disabled"}},[e._v("是")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){return e.$emit("go-back")}}},[e._v("取消")])],1)],1)],1)],1)],1)},Of=[];ne.a.addMsgs({required:"不能为空",enum:"请选择一项",enumList:"请选择一项",number:"请填写数字"});ne.a;var Af,Ef={props:{editId:Number,default:null},data:function(){return{title:null,pidList:[],formData:{deptName:"",deptTel:"",deptFax:"",remark:"",seq:null,disabled:"0",pid:"0"},formRules:{deptName:[{required:!0,message:"请输入部门名称",trigger:"blur"}],deptTel:[{required:!0,message:"请输入部门电话",trigger:"blur"}],deptFax:[{required:!0,message:"请输入部门传真",trigger:"blur"}],remark:[{required:!0,message:"请输入备注",trigger:"blur"}],seq:[{required:!0,message:"请输入序号",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){if(t){var a=e.formData;e.editId&&(a.deptId=e.editId),e.$service.sysDeptSave(a,"保存成功").then(function(){e.$emit("open-list-page")})}})},getDepts:function(){var e=this;return this.$service.getDepts().then(function(t){e.pidList=t})},getEditData:function(){var e=this;this.$service.sysDeptDetailInfo({id:this.editId}).then(function(t){Object.keys(e.formData).forEach(function(a){e.formData[a]="disabled"===a?t[a]+"":t[a]})})}},created:function(){this.getDepts(),this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},Vf=Ef,Mf=(a("af0a"),Object(K["a"])(Vf,Nf,Of,!1,null,"391bb3ca",null)),Bf=Mf.exports,Uf={components:{DepartmentManageList:Lf,DepartmentManageAdd:Bf},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},jf=Uf,Hf=Object(K["a"])(jf,_f,Pf,!1,null,"1c827294",null),qf=Hf.exports,Wf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("RoleConfigList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("RoleConfigAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Gf=[],zf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[a("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.formData.roleName,callback:function(t){e.$set(e.formData,"roleName",t)},expression:"formData.roleName"}})],1),a("el-form-item",{attrs:{label:"排序号",prop:"seq"}},[a("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.formData.seq,callback:function(t){e.$set(e.formData,"seq",t)},expression:"formData.seq"}})],1),a("el-form-item",{attrs:{label:"说明",prop:"roleDesc"}},[a("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.formData.roleDesc,callback:function(t){e.$set(e.formData,"roleDesc",t)},expression:"formData.roleDesc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("保存")])],1)],1)],1)},Jf=[],Kf={name:"RoleConfigAdd",props:{editId:void 0,index:void 0},data:function(){return{title:"",formData:{roleName:"",seq:"",roleDesc:""},formRules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}],seq:[{required:!0,message:"请输入排序号",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入角色说明",trigger:"blur"}]}}},methods:{saveRoleInfo:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.saveRoleData(e.formData,"保存成功").then(function(t){e.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.getRoleDetailById({id:this.editId}).then(function(t){Object.keys(e.formData).forEach(function(a){e.formData[a]=t[a]})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.formData.roleId=this.editId,this.getEditData()):this.title="新增"}},Xf=Kf,Yf=Object(K["a"])(Xf,zf,Jf,!1,null,"543bd0ca",null),Zf=Yf.exports,Qf=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"sysRole"},on:{add:e.handleCreate,edit:e.editData,delete:e.handleBatchDelete}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{title:"查看用户",visible:e.viewUserDialogVisible},on:{"update:visible":function(t){e.viewUserDialogVisible=t}}},[a("el-table",{attrs:{data:e.userRoleData,border:""}},[a("el-table-column",{attrs:{label:"用户ID",property:"userId"}}),a("el-table-column",{attrs:{label:"用户名",property:"userName"}}),a("el-table-column",{attrs:{label:"公司部门",property:"deptName"}}),a("el-table-column",{attrs:{label:"电子邮箱",property:"email"}})],1)],1),a("el-dialog",{staticClass:"auth-set-window",attrs:{title:"权限设置",visible:e.setAuthDialogVisible},on:{"update:visible":function(t){e.setAuthDialogVisible=t}}},[a("div",{staticClass:"auth-set-window__buttons"},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAllValue,callback:function(t){e.checkAllValue=t},expression:"checkAllValue"}},[e._v("全选")]),a("el-button",{staticClass:"button--position",attrs:{type:"primary"},on:{click:function(t){return e.updateAuth()}}},[e._v("保存修改")]),a("el-button",{attrs:{type:"info"},on:{click:function(t){e.setAuthDialogVisible=!1}}},[e._v("关闭")])],1),a("div",{staticClass:"auth-set-window__header"},e._l(e.headerItems,function(t,i){return a("span",{key:i,staticClass:"auth-set-window__header-item"},[e._v("\n           "+e._s(t)+"\n        ")])}),0),a("div",{staticClass:"auth-set-window__content"},[a("el-tree",{attrs:{data:e.AuthList,"node-key":"menuId","default-expand-all":"","expand-on-click-node":""},scopedSlots:e._u([{key:"default",fn:function(t){t.node;var i=t.data;return a("span",{},[a("span",{staticClass:"tree-data tree-data--big-size"},[e._v(e._s(i.title))]),e._l(e.dataItems,function(e,t){return a("span",{key:t,staticClass:"tree-data",on:{click:function(e){e.stopPropagation()}}},[a("el-checkbox",{key:i.menuId+t+Math.random(),attrs:{value:1==i[e],disabled:-1==i[e],runId:t+1},on:{input:function(t){i[e]=t?"1":"0"}}})],1)})],2)}}])})],1)]),a("el-dialog",{attrs:{title:"数据权限设置",visible:e.showAuthOfCrowdDialog},on:{"update:visible":function(t){e.showAuthOfCrowdDialog=t}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.policies.length,expression:"policies.length === 0"}]},[e._v("\n      加载中...\n    ")]),e._l(e.policies,function(t){return a("div",{key:t.value,staticClass:"crowd-selector"},[a("span",{staticClass:"crowd-selector__policy ellipsis",attrs:{title:t.label}},[e._v("\n        "+e._s(t.label)+"\n      ")]),a("div",{staticClass:"crowd-selector__crowd-list"},e._l(t.crowds,function(t,i){return a("el-tag",{key:i,class:{ellipsis:!0,"crowd-selector__crowd":!0,"crowd-selector__crowd--disabled":1==t.disable},attrs:{type:"info",title:t.label},nativeOn:{click:function(a){return e.handleSelectCrowd(t)}}},[e._v("\n          "+e._s(t.label)+"\n        ")])}),1)])}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showAuthOfCrowdDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSaveAuth}},[e._v("确 定")])],1)],2)],1)},eb=[],tb={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){var e=this;return{filter:{},filterSchema:ne.a.map({roleName:ne.a.o.string.other("form",{label:"角色名称",placeholder:"请输入角色名称",cols:{item:6,label:0,wrapper:18}})}).other("form",{layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}}),pagination:{},selected:[],table:{props:{},header:[{label:"角色名称",prop:"roleName"},{label:"排序号",prop:"seq",sortable:!0,render:function(t,a){var i=a.row;return t("el-input",{props:{value:i.seq,type:"text"},on:{input:function(e){i.seq=e},blur:function(){e.$service.updateSeq({id:i.roleId,seq:i.seq})}}})}},{label:"说明",prop:"roleDesc"},{label:"创建人",prop:"createUid"},{label:"创建时间",width:"180",sortable:!0,prop:"createDate"},{label:"修改人",prop:"modifyUid"},{label:"修改时间",width:"180",sortable:!0,prop:"modifyDate"},{label:"操作",fixed:"right",width:"350",render:W["utils"].component.createOperationRender(this,{setAuth:"设置权限",handleSetAuthOfCrowd:"设置人群权限",sysRoleView:"查看用户"})}],data:[],selected:[],selectionType:"multiple"},viewUserDialogVisible:!1,userRoleData:[],showAuthOfCrowdDialog:!1,policies:[],roleId:void 0,setAuthDialogVisible:!1,AuthList:[],isIndeterminate:!0,checkAllValue:!1,headerItems:["菜单名称","浏览","新增","编辑","删除","搜索","刷新","打印","导入","导出","审核","认领","撤销认领","撤销审核","上架","创建副本","批量审核"],dataItems:["browser","add","edit","delete","search","refresh","print","inport","export","audit","claim","unclaim","unaudit","shelves","copy","batchAudit"]}},methods:{parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleCreate:function(){this.$emit("open-add-page",null)},handleBatchDelete:function(){var e=this;0!==this.selected.length?this.$confirm("确定删除此活动吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$service.deleteRole({id:e.selected.join(",")},"删除成功").then(function(t){e.handleAllRowSelectionRemove(),e.fetchData()})}):this.$message("请选择再删除")},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={roleName:void 0},this.fetchData()},handleRowSelectionAdd:function(e){this.selected.push(e.roleId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.roleId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.roleId)>-1&&e.push(i),e},[])},handleCheckAllChange:function(e){this.checkAllValue=e,this.isIndeterminate=!1;var t=this.dataItems;function a(i){i.forEach(function(i){t.forEach(function(t){"-1"!==i[t]&&(i[t]=e?"1":"0")}),i.children&&a(i.children)})}a(this.AuthList)},updateAuth:function(){var e=this,t=this.roleId,a=this.dataItems,i=[];function n(e){e.forEach(function(e){a.forEach(function(t,a){"1"===e[t]&&i.push({menuId:e["menuId"],runId:(a+1).toString()})}),e.children&&n(e.children)})}n(this.AuthList),this.$service.saveAuthOfRole({roleId:t,mrs:JSON.stringify(i)},"设置成功").then(function(){e.setAuthDialogVisible=!1})},setAuth:function(e){var t=this,a=e.row;this.$service.getAuthList({roleId:a.roleId}).then(function(e){console.log(e),t.setAuthDialogVisible=!0,t.AuthList=e,t.roleId=a.roleId})},fetchPolicies:function(e){var t=this;this.$service.getPoliciesAndCrowds({roleId:e}).then(function(a){t.policies=a,a.forEach(function(a){t.$service.rolePageGetCrowdOfPolicy({id:a.value,roleId:e}).then(function(e){console.log(e),t.$set(a,"crowds",e)})})})},handleSelectCrowd:function(e){e.disable=1===e.disable?0:1},handleSetAuthOfCrowd:function(e){var t=e.row;this.showAuthOfCrowdDialog=!0,this.policies=[],this.roleId=t.roleId,this.fetchPolicies(t.roleId)},handleSaveAuth:function(){var e=this,t=this.roleId,a=[],i=[],n=this.policies;n.forEach(function(e){var t=!0;e.crowds.forEach(function(e){1===e.disable?a.push(e.value):t=!1}),!1!==t&&e.crowds.length>0&&i.push(e.value)}),this.$service.setCrowdAuthOfRole({roleId:t,disableTagInfoList:[{type:"crowd",tagIds:a},{type:"crowdPolicy",tagIds:i}]},"设置成功").then(function(){e.showAuthOfCrowdDialog=!1})},sysRoleView:function(e){var t=this,a=e.row;this.viewUserDialogVisible=!0;var i=a.roleId;this.$service.userRoleList({roleId:i}).then(function(e){t.userRoleData=e})},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getRoleList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){this.fetchData()}},ab=tb,ib=(a("e86b"),Object(K["a"])(ab,Qf,eb,!1,null,"14884120",null)),nb=ib.exports,ob={components:{RoleConfigAdd:Zf,RoleConfigList:nb},data:function(){return{isShowList:!0,editId:void 0,index:void 0}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},lb=ob,rb=Object(K["a"])(lb,Wf,Gf,!1,null,null,null),sb=rb.exports,cb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)},ub=[],db={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"id",width:"70"},{label:"用户名",width:"130",prop:"userName"},{label:"用户编号",prop:"userId",width:"90"},{label:"登录时间",prop:"loginTime",width:"150"},{label:"用户IP",prop:"loginIp",width:"150"},{label:"用户浏览器信息",prop:"userAgent","min-width":"100"},{label:"登录类型",prop:"loginType",width:"100"},{label:"说明",prop:"remark",width:"100"}],data:[],selected:[],selectionType:"multiple"}}},methods:{handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.id),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.id}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.id)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getLoginLogList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({userName:ne.a.o.string.other("form",{component:"Input",placeholder:"用户名  "}),id:ne.a.o.string.other("form",{component:"Input",placeholder:"用户ID  "}),loginIp:ne.a.o.string.other("form",{component:"Input",placeholder:"用户登陆IP"}),loginType:ne.a.o.string.other("form",{component:"Input",placeholder:"登陆类型"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},pb=db,hb=(a("f8e3"),Object(K["a"])(pb,cb,ub,!1,null,"47ed4dec",null)),mb=hb.exports,fb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data}})],1)],1)},bb=[],gb={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"自增ID",prop:"id",width:"70",sortable:!0},{label:"操作者ID",prop:"userId",width:"60",sortable:!0},{label:"操作名称",prop:"userName"},{label:"菜单名称",prop:"menuName"},{label:"菜单Elid",prop:"menuElid"},{label:"执行的方法",prop:"execMethod"},{label:"操作的数据",prop:"opData",render:function(e,t){var a=t.row;return e($["Tooltip"],{props:{content:a.opData,placement:"top"}},[e("div",{class:"operatiton-data"},[a.opData])])}},{label:"操作耗时",prop:"elapsedTime",fit:!0,sortable:!0},{label:"操作时间",prop:"createTime",fit:!0},{label:"操作",width:"90",fixed:"right",render:function(t,a){var i=a.row;return t($["Button"],{props:{type:"success",icon:"el-icon-plus"},on:{click:e.handleCopy.bind(e,i)}},["复制"])}}],data:[],selected:[],selectionType:"multiple"}}},methods:{handleCopy:function(e){var t=e.opData,a=document.createElement("textarea");a.style.position="fixed",a.style.top="0",a.style.left="0",a.style.width="2em",a.style.height="2em",a.style.padding="0",a.style.border="none",a.style.outline="none",a.style.boxShadow="none",a.style.background="transparent",a.value=t,document.body.appendChild(a),a.select();try{var i=document.execCommand("copy");i&&this.$message({showClose:!0,message:"复制成功",type:"success"})}catch(n){this.$message({showClose:!0,message:"复制失败",type:"warning"})}document.body.removeChild(a)},handleFilterChange:function(e){"filter"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.sysLogOpPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({id:ne.a.o.string.other("form",{component:"Input",placeholder:"ID  "}),userId:ne.a.o.string.other("form",{component:"Input",placeholder:"操作者ID  "}),userName:ne.a.o.string.other("form",{component:"Input",placeholder:"操作者名称"}),menuName:ne.a.o.string.other("form",{component:"Input",placeholder:"菜单名称"}),menuElid:ne.a.o.string.other("form",{component:"Input",placeholder:"菜单Elid  "}),execMethod:ne.a.o.string.other("form",{component:"Input",placeholder:"执行的方法  "}),elapsedTime:ne.a.o.string.other("form",{component:"Input",placeholder:"操作耗时"}),createTime:ne.a.o.string.other("form",{component:"Input",placeholder:"操作耗时"}),opData:ne.a.o.string.other("form",{component:"Input",type:"textarea",placeholder:"操作的数据"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},vb=gb,yb=(a("e593"),Object(K["a"])(vb,fb,bb,!1,null,"855426a4",null)),wb=yb.exports,Ib=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("SysMenuList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("SysMenuAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Tb=[],Sb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"menuName"}},[a("el-input",{attrs:{placeholder:"菜单名称"},model:{value:e.form.menuName,callback:function(t){e.$set(e.form,"menuName",t)},expression:"form.menuName"}})],1),a("el-form-item",{attrs:{label:"元素ID",prop:"elid"}},[a("el-input",{attrs:{placeholder:"元素ID"},model:{value:e.form.elid,callback:function(t){e.$set(e.form,"elid",t)},expression:"form.elid"}})],1),a("el-form-item",{attrs:{label:"图标样式",prop:"iconClass"}},[a("el-input",{attrs:{placeholder:"图标样式"},model:{value:e.form.iconClass,callback:function(t){e.$set(e.form,"iconClass",t)},expression:"form.iconClass"}})],1),a("el-form-item",{attrs:{label:"标签ID",prop:"tabId"}},[a("el-input",{attrs:{placeholder:"标签ID"},model:{value:e.form.tabId,callback:function(t){e.$set(e.form,"tabId",t)},expression:"form.tabId"}})],1),a("el-form-item",{attrs:{label:"标签名称",prop:"tabTitle"}},[a("el-input",{attrs:{placeholder:"标签名称"},model:{value:e.form.tabTitle,callback:function(t){e.$set(e.form,"tabTitle",t)},expression:"form.tabTitle"}})],1),a("el-form-item",{attrs:{label:"标签图标",prop:"tabIcon"}},[a("el-input",{attrs:{placeholder:"标签图标"},model:{value:e.form.tabIcon,callback:function(t){e.$set(e.form,"tabIcon",t)},expression:"form.tabIcon"}})],1),a("el-form-item",{attrs:{label:"跳转地址URL",prop:"iframeUrl"}},[a("el-input",{attrs:{placeholder:"跳转地址URL"},model:{value:e.form.iframeUrl,callback:function(t){e.$set(e.form,"iframeUrl",t)},expression:"form.iframeUrl"}})],1),a("el-form-item",{attrs:{label:"排序",prop:"seq"}},[a("el-input",{attrs:{placeholder:"排序"},model:{value:e.form.seq,callback:function(t){e.$set(e.form,"seq",t)},expression:"form.seq"}})],1),a("el-form-item",{attrs:{label:"菜单目录",prop:"modle"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.modle,callback:function(t){e.$set(e.form,"modle",t)},expression:"form.modle"}},[e._v("收起")]),a("el-radio",{attrs:{label:"1"},model:{value:e.form.modle,callback:function(t){e.$set(e.form,"modle",t)},expression:"form.modle"}},[e._v("展开")]),a("el-radio",{attrs:{label:"3"},model:{value:e.form.modle,callback:function(t){e.$set(e.form,"modle",t)},expression:"form.modle"}},[e._v("媒资菜单")])],1),a("el-form-item",{attrs:{label:"是否禁用",prop:"disabled"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("否")]),a("el-radio",{attrs:{label:"1"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("是")])],1),a("el-form-item",{attrs:{label:"菜单父ID",prop:"pmid"}},[a("el-input",{attrs:{placeholder:"菜单父ID"},model:{value:e.form.pmid,callback:function(t){e.$set(e.form,"pmid",t)},expression:"form.pmid"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},Cb=[],kb={props:{editId:Number,default:null},data:function(){return{title:null,form:{menuName:null,elid:null,iconClass:null,tabId:null,tabTitle:null,tabIcon:null,iframeUrl:null,seq:null,modle:null,disabled:null,pmid:null},formRules:{menuName:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],elid:[{required:!0,message:"请输入元素ID",trigger:"blur"}],iconClass:[{required:!0,message:"请输入图标样式",trigger:"blur"}],tabId:[{required:!0,message:"请输入标签ID",trigger:"blur"}],tabTitle:[{required:!0,message:"请输入标签名称",trigger:"blur"}],tabIcon:[{required:!0,message:"请输入标签图标样式",trigger:"blur"}],iframeUrl:[{required:!0,message:"跳转地址URL",trigger:"blur"}],disabled:[{required:!0,message:"禁用",trigger:"blur"}],seq:[{required:!0,message:"请输入排序",trigger:"blur"}],modle:[{required:!0,message:"请选择菜单目录",trigger:"blur"}],pmid:[{required:!0,message:"请输入父菜单ID",trigger:"blur"}]}}},methods:{submitBtn:function(){var e=this;this.$refs.form.validate(function(t){t&&(console.log(e.form),e.$service.saveSysMenu({jsonStr:JSON.stringify(e.form)},"保存成功").then(function(t){e.$emit("open-list-page")}))})},getEditData:function(){var e=this;this.$service.editSysMenu({id:this.editId}).then(function(t){Object.keys(e.form).forEach(function(a){e.form[a]="disabled"===a?t[a]+"":t[a]})})}},created:function(){null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.getEditData()):this.title="新增"}},_b=kb,Pb=Object(K["a"])(_b,Sb,Cb,!1,null,null,null),xb=Pb.exports,Db=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("ButtonGroupForListPage",{attrs:{pageName:"sysMenu"},on:{add:e.addData,edit:e.editData,delete:e.deleteData}}),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}}),e.setDialogVisible?a("el-dialog",{attrs:{title:"设置操作",visible:e.setDialogVisible},on:{"update:visible":function(t){e.setDialogVisible=t}}},[a("span",[a("el-transfer",{attrs:{data:e.sdata,titles:["待选操作","已选操作"]},on:{change:e.handleChange},model:{value:e.svalue,callback:function(t){e.svalue=t},expression:"svalue"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.setDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.setDialogVisible=!1,e.setSave()}}},[e._v("确 定")])],1)]):e._e()],1)],1)},Fb=[],$b={components:{ActionList:W["ActionList"],Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},setDialogVisible:!1,svalue:[],sdata:[],allData:[],setMenu:[],selectMenu:[],data1:[],data2:[],selected:[],buttonList:[],table:{props:{},header:[{label:"菜单ID",prop:"menuId"},{label:"菜单名称",prop:"menuName"},{label:"元素ID",prop:"elid"},{label:"图标样式",prop:"iconClass"},{label:"标签ID",prop:"tabId"},{label:"标签名称",prop:"tabTitle"},{label:"标签图标",prop:"tabIcon"},{label:"跳转地址URL",prop:"iframeUrl"},{label:"排序",prop:"seq"},{label:"菜单目录",prop:"modle"},{label:"禁用",prop:"disabled"},{label:"父菜单ID",prop:"pmid"},{label:"操作",fixed:"right",render:W["utils"].component.createOperationRender(this,{setData:"设置操作"})}],data:[],selected:[],selectionType:"multiple"}}},methods:{addData:function(){this.$emit("open-add-page",null)},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},deleteData:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.deleteMenuById({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.menuId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.menuId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.menuId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.getSysMenuList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getSysMenuInfo:function(){var e=this;return this.$service.getMenuInfo().then(function(t){e.buttonList=t})},setData:function(e){var t=this,a=e.row;this.setDialogVisible=!0;var i={menuId:a.menuId},n=[],o=[],l=[];this.setMenu.push(["menuId",a.menuId]),this.$service.getNotMenuByRunId(i).then(function(e){t.data1=e,t.$service.getMenuByRunId(i).then(function(e){t.data2=e,t.allData=t.data1.concat(t.data2);var a={};t.allData=t.allData.reduce(function(e,t){return!a[t.runId]&&(a[t.runId]=e.push(t)),e},[]);for(var i=0;i<t.allData.length;i++)n.push({key:t.allData[i].runId,label:t.allData[i].runName});for(var r=0;r<t.data2.length;r++)o.push(t.data2[r].runId);for(var s=0;s<o.length;s++)-1==l.indexOf(o[s])&&l.push(o[s]);t.sdata=n,t.svalue=l,console.log(n),console.log(l)})})},handleChange:function(e,t,a){for(var i=[],n=[],o=0;o<e.length;o++)-1==i.indexOf(e[o])&&i.push(e[o]);for(var l=0;l<i.length;l++)n.push(["runIds",i[l]]);this.selectMenu=this.setMenu.concat(n)},setSave:function(){var e=this.selectMenu;this.$service.saveMenuRun(e,"保存成功")}},created:function(){var e=ne.a.map({menuName:ne.a.o.string.other("form",{component:"Input",placeholder:"菜单名称"}),elid:ne.a.o.string.other("form",{component:"Input",placeholder:"元素ID"}),tabId:ne.a.o.string.other("form",{component:"Input",placeholder:"标签ID"}),iframeUrl:ne.a.o.string.other("form",{component:"Input",placeholder:"跳转地址URL"}),modle:ne.a.o.string.other("form",{component:"Input",placeholder:"菜单目录"}),pmid:ne.a.o.string.other("form",{component:"Input",placeholder:"菜单父ID"}),disabled:ne.a.o.enum({"否":"0","是":"1"}).other("form",{component:"Select",placeholder:"是否禁用"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData(),this.getSysMenuInfo()}},Rb=$b,Lb=(a("b723"),Object(K["a"])(Rb,Db,Fb,!1,null,"6e02676e",null)),Nb=Lb.exports,Ob={components:{SysMenuAdd:xb,SysMenuList:Nb},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},Ab=Ob,Eb=Object(K["a"])(Ab,Ib,Tb,!1,null,null,null),Vb=Eb.exports,Mb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("UserConfigList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage}}),e.isShowList?e._e():a("UserConfigAdd",{attrs:{editId:e.editId},on:{"open-list-page":e.openListPage,"go-back":e.goBack}})],1)},Bb=[],Ub=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[a("el-input",{attrs:{placeholder:"用户名称"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),a("el-form-item",{attrs:{label:"所在部门",prop:"deptId"}},[a("el-select",{attrs:{placeholder:"所在部门"},model:{value:e.form.deptId,callback:function(t){e.$set(e.form,"deptId",t)},expression:"form.deptId"}},e._l(e.departmentList,function(e){return a("el-option",{key:e.deptId+"",attrs:{label:e.deptName,value:e.deptId}})}),1)],1),a("el-form-item",{attrs:{label:"登录账号",prop:"loginName"}},[a("el-input",{attrs:{placeholder:"登录账号"},model:{value:e.form.loginName,callback:function(t){e.$set(e.form,"loginName",t)},expression:"form.loginName"}})],1),e.isShowloginPwd?a("el-form-item",{attrs:{label:"密码",prop:"loginPwd"}},[a("el-input",{attrs:{placeholder:"密码"},model:{value:e.form.loginPwd,callback:function(t){e.$set(e.form,"loginPwd",t)},expression:"form.loginPwd"}})],1):e._e(),a("el-form-item",{attrs:{label:"邮件地址",prop:"email"}},[a("el-input",{attrs:{type:"email",placeholder:"邮件地址"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"是否可用",prop:"disabled"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("是")]),a("el-radio",{attrs:{label:"1"},model:{value:e.form.disabled,callback:function(t){e.$set(e.form,"disabled",t)},expression:"form.disabled"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),a("el-form-item",{attrs:{label:"数据权限",prop:"dicts"}},[a("el-form-item",[a("el-checkbox-group",{model:{value:e.form.dicts,callback:function(t){e.$set(e.form,"dicts",t)},expression:"form.dicts"}},e._l(e.dictEnNameList,function(t){return a("el-checkbox",{key:t.dictId,attrs:{label:t.dictId}},[e._v(e._s(t.dictCnName))])}),1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitBtn}},[e._v("保存")])],1)],1)],1)],1)],1)},jb=[],Hb={props:{editId:Number,default:null},data:function(){return{title:null,dictEnNameList:null,departmentList:[],isShowloginPwd:!0,form:{userName:null,deptId:null,loginName:null,loginPwd:null,email:null,disabled:null,remark:null,dicts:[]},formRules:{userName:[{required:!0,message:"请输入用户名称",trigger:"blur"}],loginName:[{required:!0,message:"请输入登录账号",trigger:"blur"}],loginPwd:[{required:!0,message:"请输入密码",trigger:"blur"}],email:[{required:!0,message:"请输入邮件地址",trigger:"blur"},{type:"email",message:"邮件地址格式不正确",trigger:"blur"}]}}},methods:{userConfigBusinessType:function(){var e=this;this.$service.userConfigBusinessType().then(function(t){e.dictEnNameList=t})},submitBtn:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.userConfigSave(e.form,"保存成功").then(function(t){e.$emit("open-list-page")})})},getEditData:function(){var e=this;this.$service.userConfigEdit({id:this.editId}).then(function(t){Object.keys(e.form).forEach(function(a){e.form[a]="disabled"===a?t[a]+"":t[a]})})},getDepts:function(){var e=this;return this.$service.getDepts().then(function(t){e.departmentList=t})}},created:function(){this.userConfigBusinessType(),this.getDepts(),null!==this.editId&&void 0!==this.editId?(this.title="编辑",this.isShowloginPwd=!1,this.form.userId=this.editId,this.getEditData()):this.title="新增"}},qb=Hb,Wb=Object(K["a"])(qb,Ub,jb,!1,null,null,null),Gb=Wb.exports,zb=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{title:"设置用户角色",visible:e.roleDialogVisible},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[a("span",[a("el-transfer",{attrs:{data:e.roleData,titles:["待选角色","已选角色"]},on:{change:e.handleChange},model:{value:e.roleValue,callback:function(t){e.roleValue=t},expression:"roleValue"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.roleDialogVisible=!1,e.add()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"数据权限设置",width:"30%",visible:e.dataPermissionWinVisible},on:{"update:visible":function(t){e.dataPermissionWinVisible=t}}},[a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],model:{value:e.checkedDictItems,callback:function(t){e.checkedDictItems=t},expression:"checkedDictItems"}},e._l(e.DataPermissionItems,function(t){var i=t.dictId,n=t.dictCnName;return a("el-checkbox",{key:i,staticClass:"checkItemStyle",attrs:{label:i}},[e._v("\n        "+e._s(n)+"\n      ")])}),1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dataPermissionWinVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveProfession}},[e._v("确 定")])],1)],1)],1)},Jb=[],Kb={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"],ButtonGroupForListPage:ue},data:function(){return{depts:{},roleData:[],roleValue:[],data1:[],user:[],roleDataSelected:null,roleDialogVisible:!1,currentUserId:null,dataPermissionWinVisible:!1,DataPermissionItems:{},checkedDictItems:[],isLoading:!1,selectedRole:[],filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"userId",width:"70"},{label:"用户名称","min-width":"120",prop:"userName",sortable:!0},{label:"登录账号",prop:"loginName",width:"110",sortable:!0},{label:"所在部门",prop:"deptName","min-width":"90"},{label:"电子邮箱",prop:"email","min-width":"160"},{label:"登录IP",prop:"loginIp",width:"130"},{label:"登录次数",prop:"loginCount"},{label:"最后登录时间",prop:"loginTime",width:"170"},{label:"是否禁用",prop:"disabled"},{label:"创建时间",prop:"dateCreate",width:"170",sortable:!0},{label:"修改时间",prop:"dateModify",width:"170",sortable:!0},{label:"备注",prop:"remark","min-width":"170"},{label:"操作",width:"200",fixed:"right",render:W["utils"].component.createOperationRender(this,{setRole:"设置角色",setData:"数据权限"})}],data:[],selected:[],selectionType:"multiple"}}},methods:(Af={addUser:function(){this.$emit("open-add-page",null)},handleRead:function(e){e.row},setRole:function(e){var t=this,a=e.row,i=a.userId,n={userId:i},o=[],l=[];this.roleDialogVisible=!0,this.user.push(["userId",i]),this.$service.getNotRolesByUserId(n).then(function(e){t.data1=e,t.$service.getRolesByUserId(n).then(function(e){null!=e&&(t.data1=t.data1.concat(e));for(var a=0;a<t.data1.length;a++)o.push({key:t.data1[a].roleId,label:t.data1[a].roleName});for(var i=0;i<e.length;i++)l.push(e[i].roleId);t.roleData=o,t.roleValue=l})})},handleChange:function(e,t,a){for(var i=[],n=0;n<e.length;n++)i.push(["roleIds",e[n]]);this.selectedRole=this.user.concat(i)},add:function(){var e=this.selectedRole;this.$service.saveUserRoles(e,"保存成功")},setData:function(e){e.row},editData:function(){this.$isAllowEdit(this.selected)&&this.$emit("open-add-page",this.selected[0])},batchDel:function(){var e=this;0!==this.selected.length?window.confirm("确定要删除吗")&&this.$service.userConfigDelete({id:this.selected.join(",")},"删除成功").then(function(t){e.fetchData()}):this.$message("请选择再删除")},handleCreate:function(){this.$router.push({name:"prize-create"})},handleRowSelectionAdd:function(e){this.selected.push(e.userId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.userId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},handleAllRowSelectionRemove:function(){this.selected=[],this.table.selected=[]},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.userId)>-1&&e.push(i),e},[])},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();this.$service.userConfigPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},getDepts:function(){var e=this;return this.$service.getDepts().then(function(t){t.forEach(function(t){e.depts[t.deptName]=t.deptId})})},getNotRolesByUserId:function(e){var t=this;this.$service.getNotRolesByUserId({userId:e}).then(function(e){e.forEach(function(e){t.depts[e.deptName]=e.deptId})})}},Object(ve["a"])(Af,"setData",function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.row,this.currentUserId=a.userId,e.next=4,this.userConfigBusinessType(a.userId);case 4:return this.checkedDictItems=[],this.isLoading=!0,e.next=8,this.getDictCheckedByUserId(a.userId);case 8:this.isLoading=!1,this.dataPermissionWinVisible=!0;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()),Object(ve["a"])(Af,"getDictCheckedByUserId",function(e){var t=this;return this.$service.getDictCheckedByUserId({userId:e}).then(function(e){t.checkedDictItems=e})}),Object(ve["a"])(Af,"userConfigBusinessType",function(e){var t=this;return this.$service.userConfigBusinessType({userId:e}).then(function(e){t.DataPermissionItems=e})}),Object(ve["a"])(Af,"saveProfession",function(){var e=this.checkedDictItems.join(",");this.$service.saveProfession({userId:this.currentUserId,dicts:e},"保存成功"),this.dataPermissionWinVisible=!1}),Af),created:function(){var e=this,t=ne.a.map({userName:ne.a.o.string.other("form",{component:"Input",placeholder:"用户名称"}),deptId:ne.a.o.enum(this.depts).other("form",{component:"Select",placeholder:"所在部门"}),loginName:ne.a.o.string.format("email").other("form",{component:"Input",placeholder:"登录账号"}),email:ne.a.o.string.other("form",{component:"Input",placeholder:"电子邮箱"}),loginIp:ne.a.o.string.other("form",{component:"Input",placeholder:"最后登录IP"}),disabled:ne.a.o.enum({"否":"0","是":"1"}).other("form",{component:"Select",placeholder:"是否禁用"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.getDepts().then(function(){e.filterSchema=t}),this.fetchData()}},Xb=Kb,Yb=(a("0d52"),Object(K["a"])(Xb,zb,Jb,!1,null,"0b811d44",null)),Zb=Yb.exports,Qb={components:{UserConfigAdd:Gb,UserConfigList:Zb},data:function(){return{isShowList:!0,editId:null}},methods:{openAddPage:function(e){this.editId=e,this.isShowList=!1},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0}}},eg=Qb,tg=Object(K["a"])(eg,Mb,Bb,!1,null,null,null),ag=tg.exports,ig=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ThemeInfoList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",on:{"open-add-page":e.openAddPage,"open-preview-page":e.openPreviewPage}}),e.isShowList||e.isShowPreview?e._e():a("ThemeInfoAdd",{attrs:{editId:e.editId,version:e.version},on:{"open-list-page":e.openListPage,"go-back":e.goBack}}),!e.isShowList&&e.isShowPreview?a("ThemeInfoPreview",{attrs:{themeInfo:e.themeInfo},on:{"go-back":e.preGoBack,"open-list-page":e.openListPage,"open-add-page":e.openAddPage}}):e._e()],1)},ng=[],og=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("div",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("新增")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editData}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.batchDel}},[e._v("批量删除")])],1),a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1),a("el-dialog",{attrs:{title:"大图预览",visible:e.onclickPictureVisible,width:"70%"},on:{"update:visible":function(t){e.onclickPictureVisible=t}}},[a("img",{attrs:{src:e.URL,width:"100%"}})])],1)},lg=[],rg={components:{ContentWrapper:W["ContentWrapper"],Table:W["Table"],ButtonGroupForListPage:ue},data:function(){var e=this;return{URL:"",onclickPictureVisible:!1,filterSchema:null,filter:{sort:void 0,order:void 0},pagination:{currentPage:1,pageSize:10},selected:[],table:{props:{},data:[],header:[{label:"ID",prop:"themeId",sortable:!0},{label:"主题名称",prop:"themeName",sortable:!0,render:function(t,a){var i=a.row;return t($["Button"],{props:{type:"text"},on:{click:function(){return e.themeInfoPreview(i.themeId)}}},i.themeName)}},{label:"主题品牌",prop:"themeBrand",sortable:!0,formatter:function(e){return"Coocaa"===e.themeBrand?"创维酷开":"Other"===e.themeBrand?"全部":void 0}},{label:"系统默认",prop:"systemDefault",sortable:!0,formatter:function(e){var t=["否","是"];return t[e.systemDefault]}},{label:"状态",prop:"themeStatus",sortable:!0,formatter:function(e){var t=["下架","上架","草稿","待审核","审核通过","审核不通过"];return t[e.themeStatus]}},{label:"主题当前版本",prop:"currentVersion",sortable:!0},{label:"主题预览图",prop:"previewImgUrl",sortable:!0,render:function(t,a){var i=a.row;if(i.previewImgUrl)return t("img",{attrs:{src:i.previewImgUrl,width:"100px",height:"45px",class:"imgs"},on:{click:function(){e.URL=i.previewImgUrl,e.onclickPictureVisible=!0}}})}},{label:"待审核副本",prop:"duplicateVersion",sortable:!0,render:function(t,a){var i=a.row;if(i.duplicateVersion)return t($["Button"],{props:{type:"success"},on:{click:function(){return e.duplicatePreview(i.themeId,i.duplicateVersion)}}},i.duplicateVersion)}},{label:"原价(元)",prop:"price",sortable:!0,formatter:function(e){return e.chargeType?e.price:"免费"}},{label:"折扣价(元)",prop:"discountPrice",sortable:!0,formatter:function(e){return e.chargeType?e.discountPrice:"免费"}},{label:"更新时间",prop:"lastUpdateDate",sortable:!0},{label:"更新人",prop:"modifierName",sortable:!0}],selected:[],selectionType:"multiple"}}},methods:{fetchData:function(){var e=this,t=this.parseFilter();this.$service.themeInfoPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},handleFilterChange:function(e){"pagination"!==e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={},this.fetchData()},addUser:function(){this.$emit("open-add-page")},editData:function(){var e=this.selected;if(1!==e.length)return this.$message("只能选择一条数据"),!1;var t=this.table.data,a=t.find(function(t){return t.themeId===e[0]}).themeStatus;if(4===a)return this.$alert("审核通过的数据无法编辑！","操作提示"),!1;this.$emit("open-add-page",e[0])},batchDel:function(){var e=this;if(0!==this.selected.length){if(window.confirm("确定要删除吗")){var t=this.selected.join(",");this.$service.themeInfoRemove({id:t}).then(function(){e.selected=[],e.fetchData()})}}else this.$message("请选择数据后进行操作")},handleRowSelectionAdd:function(e){this.selected.push(e.themeId),this.updateTableSelected()},handleRowSelectionRemove:function(e){this.selected=this.selected.filter(function(t){return t!==e.themeId}),this.updateTableSelected()},handleAllRowSelectionChange:function(e){e?this.table.data.forEach(this.handleRowSelectionAdd):(this.selected=[],this.table.selected=[])},updateTableSelected:function(){var e=this.table,t=this.selected;e.selected=e.data.reduce(function(e,a,i){return t.indexOf(a.themeId)>-1&&e.push(i),e},[])},themeInfoPreview:function(e){var t=this;this.$service.themeInfoDetail({id:e}).then(function(e){t.$emit("open-preview-page",e)})},duplicatePreview:function(e,t){var a=this;this.$service.themeInfoDetail({id:e,version:t}).then(function(e){a.$emit("open-preview-page",e)})}},created:function(){var e=ne.a.map({themeId:ne.a.o.string.other("form",{component:"Input",placeholder:"主题ID"}),themeName:ne.a.o.string.other("form",{component:"Input",placeholder:"主题名称"}),currentVersion:ne.a.o.string.other("form",{component:"Input",placeholder:"当前版本"}),themeStatus:ne.a.o.enum({"待审核":"3","审核通过":"4","审核不通过":"5"}).other("form",{component:"Select",placeholder:"状态"})}).other("form",{cols:{item:5,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},sg=rg,cg=(a("5160"),Object(K["a"])(sg,og,lg,!1,null,"5a09facc",null)),ug=cg.exports,dg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{attrs:{title:e.title},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("el-form",{ref:"form",staticClass:"el-form-add",attrs:{rules:e.rules,model:e.form,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"主题名称",prop:"themeName"}},[a("el-input",{model:{value:e.form.themeName,callback:function(t){e.$set(e.form,"themeName",t)},expression:"form.themeName"}})],1),a("el-form-item",{attrs:{label:"收费类型"}},[a("el-radio-group",{model:{value:e.form.chargeType,callback:function(t){e.$set(e.form,"chargeType",t)},expression:"form.chargeType"}},[a("el-radio",{attrs:{label:"0"}},[e._v("免费")]),a("el-radio",{attrs:{label:"1"}},[e._v("付费")]),a("el-radio",{attrs:{label:"2"}},[e._v("VIP免费")])],1)],1),"0"!==e.form.chargeType?a("div",{staticClass:"priceInput"},[a("el-form-item",{attrs:{label:"价格"}},[a("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v("元\n      ")],1),a("el-form-item",{attrs:{label:"折扣价"}},[a("el-input",{model:{value:e.form.discountPrice,callback:function(t){e.$set(e.form,"discountPrice",t)},expression:"form.discountPrice"}}),e._v("元\n      ")],1)],1):e._e(),a("el-form-item",{attrs:{label:"主题品牌"}},[a("el-radio-group",{model:{value:e.form.themeBrand,callback:function(t){e.$set(e.form,"themeBrand",t)},expression:"form.themeBrand"}},[a("el-radio",{attrs:{label:"Coocaa"}},[e._v("创维酷开")]),a("el-radio",{attrs:{label:"Other"}},[e._v("全部")])],1)],1),a("el-form-item",{attrs:{label:"皮肤APK"}},[a("ThemeFileUpload",{ref:"apk",attrs:{accept:"application/vnd.android.package-archive",fileCount:"1"},on:{"pic-data":e.handleApk,handleRemove:function(t){e.form.themeDownUrl="",e.form.themeMd5=""}}})],1),a("el-form-item",{attrs:{label:"主题预览图"}},[a("ThemeFileUpload",{ref:"preview",attrs:{accept:"image/*",fileCount:"1"},on:{"pic-data":e.handlePreviewImg,handleRemove:function(t){e.form.previewImgUrl=""}}})],1),a("el-form-item",{attrs:{label:"主题缩略图"}},[a("ThemeFileUpload",{ref:"thumbImg",attrs:{accept:"image/*",fileCount:"1"},on:{"pic-data":e.handleThumbImg,handleRemove:function(t){e.form.thumbImgUrl=""}}})],1),a("el-form-item",{attrs:{label:"图标库"}},[a("ThemeFileUpload",{ref:"pictureEntitys",attrs:{accept:"application/zip",fileCount:"1",zipType:"icon"},on:{"pic-data":e.handlePictureEntitys,handleRemove:function(t){e.form.pictureEntitys=[]}}})],1),a("div",{staticClass:"icon-list"},e._l(e.form.pictureEntitys,function(t,i){return a("div",{key:i,staticClass:"icon-list__item"},[a("img",{staticClass:"icon-list__item-img--pictureEntitys",attrs:{src:t.pictureUrl}}),a("span",{staticClass:"icon-list__item-text"},[e._v(e._s(i+1))])])}),0),a("el-form-item",{attrs:{label:"指定背景图片"}},[a("ThemeFileUpload",{ref:"tabBgEntitys",attrs:{accept:"application/zip",fileCount:"1",zipType:"tabBg"},on:{"pic-data":e.handleTabBgEntitys,handleRemove:function(t){e.form.tabBgEntitys=[]}}})],1),a("div",{staticClass:"icon-list"},e._l(e.form.tabBgEntitys,function(t,i){return a("div",{key:i,staticClass:"icon-list__item"},[a("img",{staticClass:"icon-list__item-img--tabBgEntitys",attrs:{src:t.pictureUrl}}),a("span",{staticClass:"icon-list__item-text"},[e._v(e._s(i+1))])])}),0),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.btnSave}},[e._v("提交审核")]),a("el-button",{on:{click:function(t){return e.$emit("go-back")}}},[e._v("关闭")])],1)],1)],1)},pg=[],hg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Upload",{ref:"upload",attrs:{multiple:!0,accept:e.accept},on:{upload:e.handleUpload},scopedSlots:e._u([{key:"preview",fn:function(t){var i=t.fileList;return a("div",{staticClass:"upload-pic-list"},[a("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){return e.$refs.upload.handleSelectFile()}}},[e._v("点击选择文件")]),e._l(i,function(t){return a("div",{key:t.id,staticClass:"upload-pic-list__item"},["error"===t.status?a("div",{staticClass:"upload-pic-list__error"},[e._v("上传失败: "+e._s(t.message))]):e._e(),"uploading"===t.status?a("div",{staticClass:"upload-pic-list__progress"},[a("el-progress",{attrs:{width:100,type:"circle",percentage:t.percentage}})],1):a("div",{staticClass:"upload-pic-list__success"},[a("img",{staticClass:"upload-pic-list__success__img",attrs:{src:t.dataUrl}}),"uploading"!==t.status?a("i",{staticClass:"upload-pic-list__remove el-icon el-icon-error",attrs:{title:"移除"},on:{click:function(a){return e.handleRemove(t)}}}):e._e(),a("div",{staticClass:"diy-file-name"},[e._v(e._s(t.name))]),"success"===t.status?a("div",{staticClass:"diy-bar"},[a("span",{staticClass:"diy-bar__text"},[e._v("上传完成")])]):e._e()])])})],2)}}])})},mg=[],fg={components:{Upload:W["Upload"]},props:{accept:{type:String},fileCount:{type:String},zipType:{type:String,default:function(){return"none"}}},data:function(){return{fileNum:0,picData:{}}},methods:{handleUpload:function(e,t){var a=this,i=this.$refs.upload.fileList,n=!1;if(i.map(function(t){t.name===e.name&&(n=!0)}),n)return this.$message("该资源已存在"),void i.pop();if(i[i.length-1].name=e.name,this.fileNum>=parseInt(this.fileCount))return this.$message("上传文件数量超过限制,最大上传文件个数为"+this.fileCount),void i.pop();this.fileNum++,this.fileName=e.name;var o=this.accept;if(/image/.test(o))this.$service.uploadImage({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){0==e.code?(t.status="success",a.picData.url=e.data[0].url,a.$emit("pic-data",a.picData)):(t.status="error",t.message=e.msg)}).catch(function(){t.status="error",t.message="网络错误"});else if(/vnd.android.package-archive/.test(o))this.$service.uploadApk({file:e,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){0==e.code?(t.status="success",a.picData.url=e.data.url,a.picData.fileMd5=e.data.fileMd5,a.$emit("pic-data",a.picData)):(t.status="error",t.message=e.msg)}).catch(function(){t.status="error",t.message="网络错误"});else if(/zip/.test(o)){var l=this.zipType;this.$service.uploadZip({file:e,type:l,onUploadProgerss:function(e){e.lengthComputable&&(t.percentage=e.loaded/e.total)}}).then(function(e){0==e.code?(t.status="success",a.picData=e.data,a.$emit("pic-data",a.picData)):(t.status="error",t.message=e.msg)}).catch(function(){t.status="error",t.message="网络错误"})}},handleRemove:function(e){this.$refs.upload.handleRemove(e),this.fileNum--,this.$emit("handleRemove")}},created:function(){}},bg=fg,gg=(a("ded3"),Object(K["a"])(bg,hg,mg,!1,null,"cc73ffca",null)),vg=gg.exports,yg={props:{editId:Number,version:String,default:null},components:{ThemeFileUpload:vg},data:function(){return{form:{themeName:"",chargeType:"0",price:"",discountPrice:"",themeBrand:"Coocaa",themeDownUrl:"",previewImgUrl:"",thumbImgUrl:"",systemDefault:"0",themeCode:"",themeVersion:"",themeMd5:"",pictureEntitys:[],tabBgEntitys:[],themeStatus:3},rules:{themeName:[{required:!0,message:"请输入主题名称",trigger:"blur"}]},editForm:{}}},methods:{btnSave:function(){var e=this,t=this.form;"0"===t.chargeType&&(t.price="0",t.discountPrice="0");var a=this.editForm,i=Object.assign({},t,a);console.log("formData",i),this.$service.savethemeInfo({jsonStr:JSON.stringify(i)},"保存成功").then(function(){e.$emit("open-list-page")})},handleApk:function(e){var t=this;this.$service.checkThemeMd5({themeMd5:e.fileMd5},"该主题可用").then(function(){t.form.themeDownUrl=e.url,t.form.themeMd5=e.fileMd5})},handlePreviewImg:function(e){this.form.previewImgUrl=e.url},handleThumbImg:function(e){this.form.thumbImgUrl=e.url},handlePictureEntitys:function(e){this.form.pictureEntitys=this.EntitysPicUp(e)},handleTabBgEntitys:function(e){this.form.tabBgEntitys=this.EntitysPicUp(e)},EntitysPicUp:function(e){return e.reduce(function(e,t){var a={pictureName:t.originFileName,pictureUrl:t.url,pictureResolution:t.resolution};return e.push(a),e},[])}},created:function(){var e=this;this.editId?(this.title="编辑页面",this.$service.themeInfoDetail({id:this.editId,version:this.version}).then(function(t){var a=e.form;a.themeName=t.themeName,a.chargeType=t.chargeType.toString(),a.price=t.price,a.discountPrice=t.discountPrice,a.themeBrand=t.themeBrand,a.themeDownUrl=t.themeDownUrl,a.themeMd5=t.themeMd5;var i={name:"file"},n=e.$refs.apk.$refs.upload.fileList;n.push(i),e.$refs.apk.fileNum++,a.previewImgUrl=t.previewImgUrl;var o={name:"img",dataUrl:t.previewImgUrl},l=e.$refs.preview.$refs.upload.fileList;l.push(o),e.$refs.preview.fileNum++,a.thumbImgUrl=t.thumbImgUrl;var r={name:"img",dataUrl:t.thumbImgUrl},s=e.$refs.thumbImg.$refs.upload.fileList;s.push(r),e.$refs.thumbImg.fileNum++,a.pictureEntitys=t.pictureEntitys.map(function(e){return{pictureName:e.pictureName,pictureResolution:e.pictureResolution,pictureUrl:e.pictureUrl}});var c={name:"file"},u=e.$refs.pictureEntitys.$refs.upload.fileList;u.push(c),e.$refs.pictureEntitys.fileNum++,a.tabBgEntitys=t.tabBgEntitys.map(function(e){return{pictureName:e.pictureName,pictureResolution:e.pictureResolution,pictureUrl:e.pictureUrl}});var d={name:"file"},p=e.$refs.tabBgEntitys.$refs.upload.fileList;p.push(d),e.$refs.tabBgEntitys.fileNum++,a.systemDefault=t.systemDefault,a.themeStatus=3,a.cornerIconEntities=a.cornerIconEntities,e.editForm={themeId:t.themeId,currentVersion:e.version?void 0:t.currentVersion}})):this.title="新增页面"}},wg=yg,Ig=(a("983d"),Object(K["a"])(wg,dg,pg,!1,null,"1ad34630",null)),Tg=Ig.exports,Sg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content",attrs:{title:"预览页面"},on:{"go-back":function(t){return e.$emit("go-back")}}},[a("HistoryTool",{attrs:{type:"theme",id:e.themeInfo.themeId,initialStatus:e.themeStatus},on:{change:e.changeVersion,getHistoryList:e.getHistoryList}}),e.hackReset?a("AuditDetailButton",{attrs:{type:"theme",menuElId:"themeInfo",version:e.currentVersion,id:e.themeInfo.themeId,status:e.themeStatus,notContainBtn:e.notContainBtn},on:{"open-list-page":function(t){return e.$emit("open-list-page")},copy:e.copy}}):e._e(),a("div",{staticClass:"split-bar"},[a("i",{staticClass:"el-icon-edit"},[e._v("基本信息")])]),a("el-form",[a("el-form-item",{staticClass:"label",attrs:{label:"主题名称"}},[a("span",{attrs:{title:"themeName"}},[e._v(e._s(e.form.themeName))])]),a("el-form-item",{staticClass:"label",attrs:{label:"价格"}},[a("span",{attrs:{title:"price"}},[e._v(e._s(e.form.price)+"元")]),a("span",{attrs:{title:"discountPrice"}},[e._v("(折扣:"+e._s(e.form.discountPrice)+"元)")])]),a("el-form-item",{staticClass:"label",attrs:{label:"主题品牌"}},[a("span",{attrs:{title:"themeBrand"}},[e._v(e._s(e.form.themeBrand))])]),a("el-form-item",{staticClass:"label",attrs:{label:"主题预览图"}},[a("div",{staticClass:"img-box",attrs:{title:"previewImgUrl"}},[a("img",{staticClass:"img",attrs:{src:e.form.previewImgUrl}})])]),a("el-form-item",{staticClass:"label",attrs:{label:"主题缩略图"}},[a("div",{staticClass:"img-box",attrs:{title:"thumbImgUrl"}},[a("img",{staticClass:"img",attrs:{src:e.form.thumbImgUrl}})])]),a("el-form-item",{staticClass:"label",attrs:{label:"图标库"}},[a("div",{staticClass:"icon-list",attrs:{title:"pictureEntitys"}},e._l(e.form.pictureEntitys,function(t,i){return a("div",{key:i,staticClass:"icon-list__item"},[a("img",{staticClass:"icon-list__item-img--pictureEntitys",attrs:{src:t.pictureUrl}}),a("span",{staticClass:"icon-list__item-text"},[e._v(e._s(t.iconTypeName))])])}),0)]),a("el-form-item",{staticClass:"label",attrs:{label:"指定背景图"}},[a("div",{staticClass:"icon-list",attrs:{title:"tabBgEntitys"}},e._l(e.form.tabBgEntitys,function(t,i){return a("div",{key:i,staticClass:"icon-list__item"},[a("img",{staticClass:"icon-list__item-img--tabBgEntitys",attrs:{src:t.pictureUrl}}),a("span",{staticClass:"icon-list__item-text"},[e._v(e._s(i+1))])])}),0)])],1)],1)},Cg=[],kg={components:{HistoryTool:In,AuditDetailButton:Gt},props:{themeInfo:Object},data:function(){return{form:{themeName:"",price:"",discountPrice:"",themeBrand:"",previewImgUrl:"",thumbImgUrl:"",pictureEntitys:[],tabBgEntitys:[]},themeStatus:void 0,hackReset:!0,notContainBtn:["claim","unclaim"],currentVersion:void 0}},methods:{changeVersion:function(e){var t=this;this.themeStatus=e.status,this.currentVersion=e.version,this.$service.themeInfoDetail({id:this.themeInfo.themeId,version:version}).then(function(e){t.themeStatus=e.themeStatus;var a=t.form;Object.keys(a).map(function(t){a[t]=e[t]}),a.themeBrand="Coocaa"===a.themeBrand?"创维酷开":"其他",t.hackReset=!1,t.$nextTick(function(){t.hackReset=!0})})},getHistoryList:function(e){var t=this;e.map(function(e){/待审核/.test(e.label)&&t.notContainBtn.push("copy")})},copy:function(){this.$emit("open-add-page",this.themeInfo.themeId,this.currentVersion)}},created:function(){var e=this.themeInfo,t=this.form;t.themeName=e.themeName,t.price=e.price,t.discountPrice=e.discountPrice,t.themeBrand="Coocaa"===e.themeBrand?"创维酷开":"其他",t.previewImgUrl=e.previewImgUrl,t.thumbImgUrl=e.thumbImgUrl,t.pictureEntitys=e.pictureEntitys,t.tabBgEntitys=e.tabBgEntitys,this.themeStatus=e.themeStatus,this.currentVersion=e.currentVersion}},_g=kg,Pg=(a("7a89"),Object(K["a"])(_g,Sg,Cg,!1,null,"d874b142",null)),xg=Pg.exports,Dg={components:{ThemeInfoList:ug,ThemeInfoAdd:Tg,ThemeInfoPreview:xg},data:function(){return{isShowList:!0,isShowPreview:!1,editId:null,themeInfo:null,version:null}},methods:{openAddPage:function(e,t){this.editId=e,this.version=t,this.isShowPreview=!1,this.isShowList=!1},openPreviewPage:function(e){this.themeInfo=e,this.isShowList=!1,this.isShowPreview=!0},openListPage:function(){this.isShowList=!0,this.$refs.list.fetchData()},goBack:function(){this.isShowList=!0},preGoBack:function(){this.isShowList=!0,this.isShowPreview=!1}}},Fg=Dg,$g=Object(K["a"])(Fg,ig,ng,!1,null,"25ac917b",null),Rg=$g.exports,Lg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},Ng=[],Og={},Ag=Og,Eg=Object(K["a"])(Ag,Lg,Ng,!1,null,"0792af46",null),Vg=Eg.exports,Mg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"版面",name:"first"}},[a("MyDraftsTab")],1),a("el-tab-pane",{attrs:{label:"版块",name:"second"}},[a("MyDraftsPanel")],1),a("el-tab-pane",{attrs:{label:"首页",name:"third"}},[a("MyDraftsHomePage")],1),a("el-tab-pane",{attrs:{label:"策略",name:"fourth"}},[a("MyDraftsPolicy")],1)],1)},Bg=[],Ug=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data}})],1)],1)},jg=[],Hg={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"tabId",width:"70"},{label:"名称",width:"170",prop:"tabName",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.tabName)}},{label:"标题",prop:"tabCnTitle"},{label:"待处理的版本",prop:"currentVersion"},{label:"更新时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"none"}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();t.resourceType="tab",this.$service.myDraftsPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({taskId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),taskName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},qg=Hg,Wg=Object(K["a"])(qg,Ug,jg,!1,null,null,null),Gg=Wg.exports,zg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data}})],1)],1)},Jg=[],Kg={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"homepageId",width:"70"},{label:"名称",width:"170",prop:"homepageName",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.homepageName)}},{label:"待处理的版本",prop:"currentVersion"},{label:"更新时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"none"}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();t.resourceType="homepage",this.$service.myDraftsPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({taskId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),taskName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Xg=Kg,Yg=Object(K["a"])(Xg,zg,Jg,!1,null,null,null),Zg=Yg.exports,Qg=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data}})],1)],1)},ev=[],tv={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"policyId",width:"70"},{label:"名称",width:"170",prop:"policyName",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.policyName)}},{label:"更新时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"none"}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();t.resourceType="policy",this.$service.myDraftsPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({taskId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),taskName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},av=tv,iv=Object(K["a"])(av,Qg,ev,!1,null,null,null),nv=iv.exports,ov=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data}})],1)],1)},lv=[],rv={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"]},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"pannelGroupId",width:"70"},{label:"名称",width:"170",prop:"pannelGroupRemark",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.pannelGroupRemark)}},{label:"标题",prop:"pannelTitle"},{label:"业务类型",prop:"categoryName"},{label:"更新时间",prop:"lastUpdateDate",sortable:!0}],data:[],selected:[],selectionType:"none"}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();t.resourceType="panel",this.$service.myDraftsPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({taskId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),taskName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},sv=rv,cv=Object(K["a"])(sv,ov,lv,!1,null,null,null),uv=cv.exports,dv={components:{MyDraftsTab:Gg,MyDraftsHomePage:Zg,MyDraftsPolicy:nv,MyDraftsPanel:uv},data:function(){return{activeName:"first"}},methods:{handleClick:function(){}}},pv=dv,hv=Object(K["a"])(pv,Mg,Bg,!1,null,"419db35b",null),mv=hv.exports,fv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"版面",name:"first"}},[a("MyReviewTasksList",{attrs:{resourceType:"tab"}})],1),a("el-tab-pane",{attrs:{label:"版块",name:"second"}},[a("MyReviewTasksList",{attrs:{resourceType:"pannel"}})],1),a("el-tab-pane",{attrs:{label:"素材",name:"third"}},[a("MyReviewTasksList",{attrs:{resourceType:"material"}})],1),a("el-tab-pane",{attrs:{label:"布局",name:"fourth"}},[a("MyReviewTasksList",{attrs:{resourceType:"layout"}})],1),a("el-tab-pane",{attrs:{label:"首页",name:"five"}},[a("MyReviewTasksList",{attrs:{resourceType:"homepage"}})],1),a("el-tab-pane",{attrs:{label:"策略",name:"six"}},[a("MyReviewTasksList",{attrs:{resourceType:"policy"}})],1),a("el-tab-pane",{attrs:{label:"主题",name:"seven"}},[a("MyReviewTasksList",{attrs:{resourceType:"theme"}})],1),a("el-tab-pane",{attrs:{label:"角标",name:"eight"}},[a("MyReviewTasksList",{attrs:{resourceType:"icon"}})],1),a("el-tab-pane",{attrs:{label:"系统功能",name:"night"}},[a("MyReviewTasksList",{attrs:{resourceType:"sysPlugin"}})],1)],1)},bv=[],gv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data}})],1)],1)},vv=[],yv={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"]},props:{resourceType:String},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"taskId",width:"100"},{label:"名称",width:"130",prop:"taskName",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.taskName)}},{label:"待处理的版本",prop:"resourceVersion"},{label:"内容源",prop:"source"},{label:"优先级",prop:"priority",render:function(t,a){var i=a.row;return e.$numToReviewPriority(i.priority)}},{label:"任务状态",prop:"taskFlag",render:function(t,a){var i=a.row;return e.$numToTaskStatus(i.taskFlag)}},{label:"审核状态",prop:"auditFlag",render:function(t,a){var i=a.row;return e.$numToAuditStatus(i.auditFlag)}},{label:"审核人",prop:"currentOperatorName"},{label:"审核意见",prop:"auditDesc"},{label:"更新时间",prop:"lastUpdateDate",width:150,sortable:!0}],data:[],selected:[],selectionType:"none"}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();t.resourceType=this.resourceType,this.$service.myReviewTasksPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({taskId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),taskName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"}),auditFlag:ne.a.o.enum({"审核中":6,"待审核":3,"审核通过":4,"审核不通过":5}).other("form",{component:"Select",placeholder:"审核状态"}),currentOperator:ne.a.o.enum({"不限":"","仅自己":0,"仅他人":1}).other("form",{component:"Select",placeholder:"审核人"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},wv=yv,Iv=Object(K["a"])(wv,gv,vv,!1,null,null,null),Tv=Iv.exports,Sv={components:{MyReviewTasksList:Tv},data:function(){return{activeName:"first"}},methods:{handleClick:function(){}}},Cv=Sv,kv=Object(K["a"])(Cv,fv,bv,!1,null,"965ba81a",null),_v=kv.exports,Pv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"版面",name:"first"}},[a("MySubmitTasksList",{attrs:{resourceType:"tab"}})],1),a("el-tab-pane",{attrs:{label:"版块",name:"second"}},[a("MySubmitTasksList",{attrs:{resourceType:"pannel"}})],1),a("el-tab-pane",{attrs:{label:"素材",name:"third"}},[a("MySubmitTasksList",{attrs:{resourceType:"material"}})],1),a("el-tab-pane",{attrs:{label:"布局",name:"fourth"}},[a("MySubmitTasksList",{attrs:{resourceType:"layout"}})],1),a("el-tab-pane",{attrs:{label:"首页",name:"five"}},[a("MySubmitTasksList",{attrs:{resourceType:"homepage"}})],1),a("el-tab-pane",{attrs:{label:"策略",name:"six"}},[a("MySubmitTasksList",{attrs:{resourceType:"policy"}})],1),a("el-tab-pane",{attrs:{label:"主题",name:"seven"}},[a("MySubmitTasksList",{attrs:{resourceType:"theme"}})],1),a("el-tab-pane",{attrs:{label:"角标",name:"eight"}},[a("MySubmitTasksList",{attrs:{resourceType:"icon"}})],1),a("el-tab-pane",{attrs:{label:"系统功能",name:"night"}},[a("MySubmitTasksList",{attrs:{resourceType:"sysPlugin"}})],1)],1)},xv=[],Dv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentCard",{staticClass:"content"},[a("ContentWrapper",{attrs:{filter:e.filter,filterSchema:e.filterSchema,pagination:e.pagination},on:{"filter-change":e.handleFilterChange,"filter-reset":e.handleFilterReset}},[a("Table",{attrs:{props:e.table.props,header:e.table.header,data:e.table.data}})],1)],1)},Fv=[],$v={components:{Table:W["Table"],ContentWrapper:W["ContentWrapper"]},props:{resourceType:String},data:function(){var e=this;return{filter:{sort:void 0,order:void 0},filterSchema:null,pagination:{},selected:[],table:{props:{},header:[{label:"ID",prop:"taskId",width:"100"},{label:"名称",width:"130",prop:"taskName",sortable:!0,render:function(t,a){var i=a.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.openReview(i)}}},i.taskName)}},{label:"待处理的版本",prop:"resourceVersion"},{label:"内容源",prop:"source"},{label:"优先级",prop:"priority",render:function(t,a){var i=a.row;return e.$numToReviewPriority(i.priority)}},{label:"任务状态",prop:"taskFlag",render:function(t,a){var i=a.row;return e.$numToTaskStatus(i.taskFlag)}},{label:"审核状态",prop:"auditFlag",render:function(t,a){var i=a.row;return e.$numToAuditStatus(i.auditFlag)}},{label:"审核人",prop:"currentOperatorName"},{label:"审核意见",prop:"auditDesc"},{label:"更新时间",prop:"lastUpdateDate",width:150,sortable:!0}],data:[],selected:[],selectionType:"none"}}},methods:{openReview:function(e){this.$emit("open-review-page",e)},handleFilterChange:function(e){"query"===e&&this.pagination&&(this.pagination.currentPage=1),this.fetchData()},handleFilterReset:function(){this.filter={sort:void 0,order:void 0},this.fetchData()},parseFilter:function(){var e=this.filter,t=this.pagination;return t&&(e.page=t.currentPage,e.rows=t.pageSize),e},fetchData:function(){var e=this,t=this.parseFilter();t.resourceType=this.resourceType,this.$service.mySubmitTasksPageList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})}},created:function(){var e=ne.a.map({taskId:ne.a.o.string.other("form",{component:"Input",placeholder:"ID"}),taskName:ne.a.o.string.other("form",{component:"Input",placeholder:"名称"}),auditFlag:ne.a.o.enum({"审核中":6,"待审核":3,"审核通过":4,"审核不通过":5}).other("form",{component:"Select",placeholder:"内容源"})}).other("form",{cols:{item:6,label:0,wrapper:20},layout:"inline",footer:{cols:{label:0,wrapper:24},showSubmit:!0,submitText:"查询",showReset:!0,resetText:"重置"}});this.filterSchema=e,this.fetchData()}},Rv=$v,Lv=Object(K["a"])(Rv,Dv,Fv,!1,null,null,null),Nv=Lv.exports,Ov={components:{MySubmitTasksList:Nv},data:function(){return{activeName:"first"}},methods:{handleClick:function(){}}},Av=Ov,Ev=Object(K["a"])(Av,Pv,xv,!1,null,"79c826f3",null),Vv=Ev.exports,Mv=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentCard",[i("div",{staticClass:"ad-upsert"},[i("el-tabs",{model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[i("el-tab-pane",{staticClass:"detail-ad-wrapper",attrs:{label:"详情页广告位",name:"detail"}},[i("img",{staticClass:"detail-ad-1-2",attrs:{src:a("58c5")}}),i("img",{staticClass:"detail-ad-3",attrs:{src:a("580c")}}),i("el-form",{ref:"form",staticClass:"detail-form",attrs:{"label-width":"150px"}},[e.adSwitches.middle?i("cc-var",{attrs:{ad:e.adSwitches.middle},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{staticClass:"detail-ad__1",attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,4110040685)}):e._e(),e.adSwitches.bottom_serial?i("cc-var",{attrs:{ad:e.adSwitches.bottom_serial},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{staticClass:"detail-ad__2",attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3558405422)}):e._e(),e.adSwitches.bottom_movie?i("cc-var",{attrs:{ad:e.adSwitches.bottom_movie},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{staticClass:"detail-ad__3",attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,4197844207)}):e._e()],1)],1),i("el-tab-pane",{attrs:{label:"视频播放广告",name:"video"}},[i("div",{staticClass:"video-ad-wrapper"},[i("p",{staticClass:"ad-title"},[e._v("前贴广告A"),i("span",[e._v("(加在腾讯、爱奇艺前贴广告之前的，酷开前贴广告)")])]),i("el-form",{attrs:{inline:!0,"label-width":"150px","label-position":"left"}},[e.adSwitches.front_detail_a?i("cc-var",{attrs:{ad:e.adSwitches.front_detail_a},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_loop_a?i("cc-var",{attrs:{ad:e.adSwitches.front_loop_a},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_topic_a?i("cc-var",{attrs:{ad:e.adSwitches.front_topic_a},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e()],1)],1),i("div",{staticClass:"video-ad-wrapper"},[i("p",{staticClass:"ad-title"},[e._v("前贴广告B"),i("span",[e._v("(仅针对腾讯、爱奇艺不播前贴广告的场景，才播放我们自己的前贴广告B)")])]),i("el-form",{attrs:{inline:!0,"label-width":"150px","label-position":"left"}},[e.adSwitches.front_detail_b?i("cc-var",{attrs:{ad:e.adSwitches.front_detail_b},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_loop_b?i("cc-var",{attrs:{ad:e.adSwitches.front_loop_b},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.front_topic_b?i("cc-var",{attrs:{ad:e.adSwitches.front_topic_b},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e()],1)],1),i("div",{staticClass:"video-ad-wrapper"},[i("p",{staticClass:"ad-title"},[e._v("中插广告")]),i("el-form",{attrs:{inline:!0,"label-width":"150px","label-position":"left"}},[e.adSwitches.middle_detail?i("cc-var",{attrs:{ad:e.adSwitches.middle_detail},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.middle_loop?i("cc-var",{attrs:{ad:e.adSwitches.middle_loop},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e(),e.adSwitches.middle_topic?i("cc-var",{attrs:{ad:e.adSwitches.middle_topic},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.ad;return[i("el-form-item",{attrs:{label:a.label}},[i("el-switch",{attrs:{"active-text":"开","inactive-text":"关",value:a.value},on:{input:function(t){return e.handleToggleSwitch(a)}}})],1)]}}],null,!1,3495716613)}):e._e()],1)],1)])],1)],1)])},Bv=[],Uv={components:{"cc-var":hu},data:function(){return{adSwitches:{},activeTab:"detail"}},methods:{handleToggleSwitch:function(e){var t=this;this.$confirm("确定"+(e.value?"关闭":"开启")+"【"+e.label+"】的广告投放权限吗？").then(function(){t.$service.advertisementUpsert({id:e.id,status:e.value?0:1},"操作成功").then(function(t){e.value=!e.value})}).catch(function(){})},getLabel:function(e,t){return this.adSwitches[e+t].label},getSwitches:function(){var e=this;this.$service.advertisementList().then(function(t){var a={};t.rows.forEach(function(e){a[e.remark]={id:e.id,label:e.name,key:e.remark,value:!!e.status}}.bind(e)),e.$set(e,"adSwitches",a)})}},created:function(){this.getSwitches()}},jv=Uv,Hv=(a("561d"),Object(K["a"])(jv,Mv,Bv,!1,null,null,null)),qv=Hv.exports,Wv=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"layout"},[a("div",{class:e.isCollapseMenu?"aside__menu aside__menu_collapse":"aside__menu"},[a("div",{staticClass:"left-aside"},[a("el-button",{staticClass:"collpase-btn",attrs:{type:"text",icon:e.isCollapseMenu?"el-icon-cc-indent":"el-icon-cc-outdent"},on:{click:e.toggleMenu}}),a("Menu",{attrs:{"default-active":e.$route.name,items:e.defaultMenu,isCollapse:e.isCollapseMenu}})],1)]),a("el-container",{attrs:{direction:"vertical"}},[a("el-header",{staticClass:"header"},[a("div",{staticClass:"logo",attrs:{direction:"vertical"}},[a("div",{staticClass:"logo__img"},[a("i",{staticClass:"el-icon-location"}),e._v(" 内容运营平台\n        ")])]),a("span",[e._v("  /")]),a("Breadcrumb",{staticClass:"breadcrumb",attrs:{items:e.breadcrumb}}),a("div",{staticClass:"user-info"},[a("el-dropdown",{attrs:{"hide-on-click":!1},on:{command:e.handleDropdownCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-cc-user"}),e._v("\n            "+e._s(e.$appState.user.name)+"\n            "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1),a("div",{staticClass:"system-setting",on:{click:function(t){e.isShowSetting=!e.isShowSetting}}},[a("i",{staticClass:"el-icon-setting"})])],1),a("TagNav",{directives:[{name:"show",rawName:"v-show",value:e.isShowTagNav,expression:"isShowTagNav"}],ref:"tag",attrs:{"init-tags":e.initTags}}),a("el-main",[a("keep-alive",[e.isKeepAlive?a("router-view"):e._e()],1),e.isKeepAlive?e._e():a("router-view")],1)],1),a("transition",{attrs:{name:"el-zoom-in-right"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowSetting,expression:"isShowSetting"}],staticClass:"setting_side transition-box"},[a("div",{staticClass:"tagnav_switch"},[e._v("\n        标签导航\n        "),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.isShowTagNav,callback:function(t){e.isShowTagNav=t},expression:"isShowTagNav"}}),a("br"),a("el-button",{staticClass:"modifyPwd",attrs:{type:"primary"},on:{click:e.modifyPwd}},[e._v("修改密码")])],1)])]),a("el-dialog",{attrs:{title:"修改密码",visible:e.modifyDialogVisible},on:{"update:visible":function(t){e.modifyDialogVisible=t}}},[a("span",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"oldpwd"}},[a("el-input",{attrs:{placeholder:"旧密码"},model:{value:e.form.oldpwd,callback:function(t){e.$set(e.form,"oldpwd",t)},expression:"form.oldpwd"}})],1),a("el-form-item",{attrs:{label:"新密码",prop:"newpwd"}},[a("el-input",{attrs:{placeholder:"旧密码"},model:{value:e.form.newpwd,callback:function(t){e.$set(e.form,"newpwd",t)},expression:"form.newpwd"}})],1),a("el-form-item",{attrs:{label:"确认新密码",prop:"newpwd2"}},[a("el-input",{attrs:{placeholder:"旧密码"},model:{value:e.form.newpwd2,callback:function(t){e.$set(e.form,"newpwd2",t)},expression:"form.newpwd2"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.modifyDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.modifyPwdSave}},[e._v("确 定")])],1)])],1)},Gv=[],zv=(a("5118"),{components:{Menu:W["Menu"],Breadcrumb:W["Breadcrumb"],TagNav:W["TagNav"]},data:function(){return{breadcrumb:[],isCollapseMenu:!1,isShowSetting:!1,isShowTagNav:!0,modifyDialogVisible:!1,form:{oldpwd:null,newpwd:null,newpwd2:null},formRules:{oldpwd:[{required:!0,message:"请输入原始密码",trigger:"blur"}],newpwd:[{required:!0,message:"请输入新密码",trigger:"blur"}],newpwd2:[{required:!0,validator:this.validatePass2,trigger:"blur"}]}}},computed:{isKeepAlive:function(){var e=this.$route.meta;return e&&!1!==e.isCache},initTags:function(){return this.$appState.$get("tags")||[]},defaultMenu:function(){var e=this.$router.options.routes.find(function(e){return"/"===e.path});function t(e){var a=e.name,i=e.meta,n=void 0===i?{}:i,o=e.children;if(!n.hideInMenu){var l={title:n.title,icon:n.icon,route:a};return o&&(l.children=o.reduce(function(e,a){var i=t(a);return i&&e.push(i),e},[])),l}}var a=t(e).children;return a}},methods:{modifyPwd:function(){this.modifyDialogVisible=!0},modifyPwdSave:function(){var e=this;this.$refs.form.validate(function(t){t&&e.$service.modifyPwd(e.form,"修改成功").then(function(t){e.modifyDialogVisible=!1,e.$logout().then(function(){e.$router.push({name:"login"})})})})},validatePass2:function(e,t,a){""===t?a(new Error("请再次输入密码")):t!=this.form.newpwd?a(new Error("两次输入密码不一致！")):a()},handleDropdownCommand:function(e){var t=this;"logout"===e&&this.$logout().then(function(){t.$router.push({name:"login"})})},toggleMenu:function(){var e=!this.isCollapseMenu;this.$appState.$set("isCollapseMenu",e),this.isCollapseMenu=e},saveTags:function(){var e=this.$refs.tag.tags;this.$appState.$set("tags",e)}},created:function(){var e=this;this.isCollapseMenu=!!this.$appState.$get("isCollapseMenu"),this.$bus.$on("breadcrumb-change",function(t){e.breadcrumb=t})},mounted:function(){window.addEventListener("beforeunload",this.saveTags)},destroyed:function(){window.removeEventListener("beforeunload",this.saveTags)}}),Jv=zv,Kv=(a("38b6"),Object(K["a"])(Jv,Wv,Gv,!1,null,null,null)),Xv=Kv.exports,Yv={broadcastBlock:ea,multiFunctionBlock:ei,sysPlugin:Ei,albumPannelInfo:Zi,markPanel:Dn,pannelInfo:zn,privatePannelInfo:vo,commonOnclickInfo:Ao,globalCornerIcon:kl,globalCornerIconType:Hl,globalPicture:rr,layoutInfo:Hr,commonAlbumPanneleUser:Kr,commonPannelUser:rs,commonTabUser:hs,dataSync:ys,slaveBizErrLog:ks,slaveSecondAudit:$s,actDmpGroupInfo:Ns,homepageInfo:pp,policyConf:ph,testPolicyConf:Ah,businessTab:pm,filmDetailPage:Fm,tabInfo:jm,videoContent:ef,adminMasterControl:rf,dict:kf,baDept:qf,roleConfig:sb,sysLogLogin:mb,sysLogOp:wb,sysMenu:Vb,userConfig:ag,themeInfo:Rg,msn:Vg,myDrafts:mv,myReviewTasks:_v,mySubmitTasks:Vv,filmDetailAdBit:qv};function Zv(e){return e.$service.getMenu().then(function(t){0===t.length&&e.$logout().then(function(){e.$router.push({name:"login"})});var a=[];t.forEach(function(e){var t={};t.name=t.path=e.id,t.component=Z,t.meta={title:e.title,icon:e.icon},t.children=[],"undefined"!==typeof e.children&&e.children.forEach(function(e){t.children.push({name:e.id,path:e.attributes.iframeUrl,component:Yv[e.id],meta:{title:e.text,icon:e.iconCls,tagId:e.id}})}),a.push(t)});var i=[];i.push({path:"/",component:Xv,children:a}),e.$router.options.routes=i,e.$router.addRoutes(i)})}F["default"].prototype.$isLoggedIn=Object(G["a"])(regeneratorRuntime.mark(function e(){var t,a,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$appState,!t.user){e.next=3;break}return e.abrupt("return");case 3:if(a=t.$get("user"),!a){e.next=7;break}return this.$service.service.state=a,e.abrupt("return",Zv(this).then(function(e){i.$appState.user=a}));case 7:throw{};case 8:case"end":return e.stop()}},e,this)})),F["default"].prototype.$login=function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.$service.login(t).then(function(e){var i={name:t.username,password:t.password};return a.$service.service.state=i,a.$appState.user=i,a.$appState.$set("user",i),Zv(a).then(function(e){})}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),F["default"].prototype.$logout=Object(G["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$appState.user=void 0,this.$appState.$remove("user");case 2:case"end":return e.stop()}},e,this)}));var Qv=a("7618");a("4917");F["default"].prototype.$isAllowEdit=function(e){return 1===e.length||(this.$message("请选择一条数据进行编辑"),!1)},F["default"].prototype.$isAllowDelete=function(e){return 0!==e.length||(this.$message("请选择数据后进行操作"),!1)},F["default"].prototype.$numToAuditStatus=function(e){var t="";if("number"===typeof e)switch(e){case 0:t="下架";break;case 1:t="上架";break;case 2:t="草稿";break;case 3:t="待审核";break;case 4:t="审核通过";break;case 5:t="审核不通过";break;case 6:t="审核中";break;case 7:t="审核通过未上线";break;case 9:t="待二次审核";break;default:t="未知"}return t},F["default"].prototype.$regParenthesesContent=function(e){return e.match(/([^\(\)]+)(?=\))/g)},F["default"].prototype.deepClone=function(e){var t,a=this;switch(Object(Qv["a"])(e)){case"undefined":break;case"string":t=e+"";break;case"number":t=e-0;break;case"boolean":t=e;break;case"object":if(null===e)t=null;else if(e instanceof Array){t=[];for(var i=0,n=e.length;i<n;i++)t.push(a.deepClone(e[i]))}else for(var o in t={},e)t[o]=a.deepClone(e[o]);break;default:t=e;break}return t},F["default"].prototype.$numToReviewPriority=function(e){var t;if("number"===typeof e)switch(e){case 1:t="一般";break;case 2:t="重要";break;case 3:t="紧急";break;default:t="未知"}return t},F["default"].prototype.$numToTaskStatus=function(e){var t;if("number"===typeof e)switch(e){case 1:t="进行中";break;case 2:t="终止";break;case 3:t="结束";break;case 4:t="失效";break;default:t="未知"}return t},F["default"].prototype.$platform=function(e){switch(e){case"yinhe":return"爱奇艺";case"tencent":return"腾讯";case"voole":return"优朋"}},F["default"].prototype.$checkMacType=function(e,t,a){t=t.replace(/(^\s*)|(\s*$)/g,"");var i=/^[a-zA-Z0-9]{12}$/;i.test(t)?a():a(new Error("请输入12位的MAC地址"))},F["default"].prototype.$getFilterSelectField=function(e,t,a){return e.reduce(function(e,i){return e[i[t]]=i[a],e},{})},F["default"].prototype.$sourceName=function(e){var t={yinhe:"爱奇艺",o_iqiyi:"爱奇艺",qq:"腾讯",o_tencent:"腾讯",o_youku:"优酷",tencent:"腾讯",o_voole:"优朋",voole:"优朋",voolesohu:"优朋搜狐"};return t[e]};var ey={offShelves:0,onShelves:1,draft:2,waiting:3,accepted:4,reject:5,auditing:6,processing:7,waiting2:9},ty={0:"下架",1:"上架",2:"草稿",3:"待审核",4:"审核通过",5:"审核不通过",6:"审核中",7:"审核通过未上线",9:"待二次审核"},ay=Object.keys(ty).map(function(e){return{label:ty[e],value:e}}),iy=[{label:"腾讯",value:"o_tencent"},{label:"爱奇艺",value:"o_iqiyi"},{label:"优酷",value:"o_youku"}],ny=[{label:"无",value:""}].concat(iy),oy={o_tencent:"腾讯",o_iqiyi:"爱奇艺",o_youku:"优酷"},ly="10",ry={status:ey,statusText:ty,statusOptions:ay,sourceOptions:iy,sourceOptionsWithEmpty:ny,sourceText:oy,idPrefix:ly};F["default"].use(R.a,{size:"small",zIndex:3e3}),F["default"].use(N.a),F["default"].use(R.a),F["default"].use(q.a),F["default"].component("GateSchemaForm",W["GateSchemaForm"]),F["default"].component("ContentCard",ku),F["default"].directive("shadow-drag",j),F["default"].prototype.$consts=ry;var sy=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},cy=[],uy={name:"app"},dy=uy,py=Object(K["a"])(dy,sy,cy,!1,null,null,null),hy=py.exports,my=a("8c4f"),fy=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticStyle:{margin:"auto"}},[i("el-col",{staticClass:"login-form",attrs:{span:6,offset:9}},[i("el-col",{staticClass:"login-logo"},[i("img",{attrs:{src:a("cf05")}})]),i("div",{attrs:{id:"accout"}},[i("el-row",[i("el-col",{attrs:{span:10}},[i("el-button",{class:{active:e.isNormalActive},on:{click:function(t){return e.changAccoutType("normal")}}},[e._v("普通账号")])],1),i("el-col",{attrs:{span:10,offset:4}},[i("el-button",{class:{active:e.isDomainActive},on:{click:function(t){return e.changAccoutType("domain")}}},[e._v("域账号")])],1)],1)],1),i("GateSchemaForm",{ref:"loginForm",attrs:{schema:e.formSchema},on:{submit:e.handleLogin},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}}),i("div",{attrs:{id:"verifyCode"}},[i("el-input",{attrs:{placeholder:"验证码"},model:{value:e.user.valicode,callback:function(t){e.$set(e.user,"valicode",t)},expression:"user.valicode"}}),i("img",{attrs:{src:e.codeUrl,alt:"验证码"},on:{click:e.updateValicode}})],1),i("el-button",{staticClass:"login-form__btn",attrs:{type:"primary"},on:{click:function(t){return e.$refs.loginForm.handleSubmit()}}},[e._v("登 录")])],1),i("div",{staticStyle:{width:"100%",height:"700px"},attrs:{id:"container"}},[i("div",{attrs:{id:"anitOut"}})])],1)},by=[],gy=(a("8449"),a("1157")),vy=a.n(gy),yy=(a("6c7b"),a("63d9"),window.CAV={FRONT:0,BACK:1,DOUBLE:2,SVGNS:"http://www.w3.org/2000/svg"});function wy(){vy()("body").css("overflow","hidden"),vy()(function(){if(vy()("#container").css({width:vy()(window).width(),height:vy()(window).height()}),vy()(window).bind("resize",function(){vy()("#container").css({width:vy()(window).width(),height:vy()(window).height()})}),!window.ActiveXObject&&document.createElement("canvas").getContext){var e,t,a,i,n,o,l,r=function(){s(),u(),d(),p(),g(),h(_.offsetWidth,_.offsetHeight),m()},s=function(){l=new CAV.CanvasRenderer,c(T.renderer)},c=function(e){switch(t&&P.removeChild(t.element),e){case I:t=l;break}t.setSize(_.offsetWidth,_.offsetHeight),P.appendChild(t.element)},u=function(){a=new CAV.Scene},d=function(){var e,l;for(a.remove(i),t.clear(),n=new CAV.Plane(y.width*t.width,y.height*t.height,y.segments,y.slices),o=new CAV.Material(y.ambient,y.diffuse),i=new CAV.Mesh(n,o),a.add(i),e=n.vertices.length-1;e>=0;e--)l=n.vertices[e],l.anchor=CAV.Vector3.clone(l.position),l.step=CAV.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1)),l.time=Math.randomInRange(0,Math.PIM2)},p=function(){var e,i;for(e=a.lights.length-1;e>=0;e--)i=a.lights[e],a.remove(i);for(t.clear(),e=0;e<w.count;e++)i=new CAV.Light(w.ambient,w.diffuse),i.ambientHex=i.ambient.format(),i.diffuseHex=i.diffuse.format(),a.add(i),i.mass=Math.randomInRange(10,100),i.velocity=CAV.Vector3.create(),i.acceleration=CAV.Vector3.create(),i.force=CAV.Vector3.create()},h=function(e,a){t.setSize(e,a),CAV.Vector3.set(C,t.halfWidth,t.halfHeight),d()},m=function t(){e=Date.now()-S,f(),b(),requestAnimationFrame(t)},f=function(){var t,i,o,l,r,s,c,u=y.depth/2;for(CAV.Vector3.copy(w.bounds,C),CAV.Vector3.multiplyScalar(w.bounds,w.xyScalar),CAV.Vector3.setZ(k,w.zOffset),l=a.lights.length-1;l>=0;l--){r=a.lights[l],CAV.Vector3.setZ(r.position,w.zOffset);var d=Math.clamp(CAV.Vector3.distanceSquared(r.position,k),w.minDistance,w.maxDistance),p=w.gravity*r.mass/d;CAV.Vector3.subtractVectors(r.force,k,r.position),CAV.Vector3.normalise(r.force),CAV.Vector3.multiplyScalar(r.force,p),CAV.Vector3.set(r.acceleration),CAV.Vector3.add(r.acceleration,r.force),CAV.Vector3.add(r.velocity,r.acceleration),CAV.Vector3.multiplyScalar(r.velocity,w.dampening),CAV.Vector3.limit(r.velocity,w.minLimit,w.maxLimit),CAV.Vector3.add(r.position,r.velocity)}for(s=n.vertices.length-1;s>=0;s--)c=n.vertices[s],t=Math.sin(c.time+c.step[0]*e*y.speed),i=Math.cos(c.time+c.step[1]*e*y.speed),o=Math.sin(c.time+c.step[2]*e*y.speed),CAV.Vector3.set(c.position,y.xRange*n.segmentWidth*t,y.yRange*n.sliceHeight*i,y.zRange*u*o-u),CAV.Vector3.add(c.position,c.anchor);n.dirty=!0},b=function(){t.render(a)},g=function(){window.addEventListener("resize",v)},v=function(e){h(_.offsetWidth,_.offsetHeight),b()},y={width:1.5,height:1.5,depth:10,segments:12,slices:6,xRange:.8,yRange:.1,zRange:1,ambient:"#481906",diffuse:"#FFFFFF",speed:2e-4},w={count:2,xyScalar:1,zOffset:100,ambient:"#722605",diffuse:"#923109",speed:.001,gravity:1200,dampening:.95,minLimit:10,maxLimit:null,minDistance:20,maxDistance:400,autopilot:!1,draw:!1,bounds:CAV.Vector3.create(),step:CAV.Vector3.create(Math.randomInRange(.2,1),Math.randomInRange(.2,1),Math.randomInRange(.2,1))},I="canvas",T={renderer:I},S=Date.now(),C=CAV.Vector3.create(),k=CAV.Vector3.create(),_=document.getElementById("container"),P=document.getElementById("anitOut");r()}else alert("发生错误，请重试！")})}yy.Array="function"===typeof Float32Array?Float32Array:Array,yy.Utils={isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},function(){for(var e=0,t=["ms","moz","webkit","o"],a=0;a<t.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[t[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[a]+"CancelAnimationFrame"]||window[t[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var a=(new Date).getTime(),i=Math.max(0,16-(a-e)),n=window.setTimeout(function(){t(a+i)},i);return e=a+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),Math.PIM2=2*Math.PI,Math.PID2=Math.PI/2,Math.randomInRange=function(e,t){return e+(t-e)*Math.random()},Math.clamp=function(e,t,a){return e=Math.max(e,t),Math.min(e,a)},yy.Vector3={create:function(e,t,a){var i=new yy.Array(3);return this.set(i,e,t,a),i},clone:function(e){var t=this.create();return this.copy(t,e),t},set:function(e,t,a,i){return e[0]=t||0,e[1]=a||0,e[2]=i||0,this},setX:function(e,t){return e[0]=t||0,this},setY:function(e,t){return e[1]=t||0,this},setZ:function(e,t){return e[2]=t||0,this},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],this},add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],this},addVectors:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],this},addScalar:function(e,t){return e[0]+=t,e[1]+=t,e[2]+=t,this},subtract:function(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],this},subtractVectors:function(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],this},subtractScalar:function(e,t){return e[0]-=t,e[1]-=t,e[2]-=t,this},multiply:function(e,t){return e[0]*=t[0],e[1]*=t[1],e[2]*=t[2],this},multiplyVectors:function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],this},multiplyScalar:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,this},divide:function(e,t){return e[0]/=t[0],e[1]/=t[1],e[2]/=t[2],this},divideVectors:function(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],this},divideScalar:function(e,t){return 0!==t?(e[0]/=t,e[1]/=t,e[2]/=t):(e[0]=0,e[1]=0,e[2]=0),this},cross:function(e,t){var a=e[0],i=e[1],n=e[2];return e[0]=i*t[2]-n*t[1],e[1]=n*t[0]-a*t[2],e[2]=a*t[1]-i*t[0],this},crossVectors:function(e,t,a){return e[0]=t[1]*a[2]-t[2]*a[1],e[1]=t[2]*a[0]-t[0]*a[2],e[2]=t[0]*a[1]-t[1]*a[0],this},min:function(e,t){return e[0]<t&&(e[0]=t),e[1]<t&&(e[1]=t),e[2]<t&&(e[2]=t),this},max:function(e,t){return e[0]>t&&(e[0]=t),e[1]>t&&(e[1]=t),e[2]>t&&(e[2]=t),this},clamp:function(e,t,a){return this.min(e,t),this.max(e,a),this},limit:function(e,t,a){var i=this.length(e);return null!==t&&i<t?this.setLength(e,t):null!==a&&i>a&&this.setLength(e,a),this},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},normalise:function(e){return this.divideScalar(e,this.length(e))},negate:function(e){return this.multiplyScalar(e,-1)},distanceSquared:function(e,t){var a=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return a*a+i*i+n*n},distance:function(e,t){return Math.sqrt(this.distanceSquared(e,t))},lengthSquared:function(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},length:function(e){return Math.sqrt(this.lengthSquared(e))},setLength:function(e,t){var a=this.length(e);return 0!==a&&t!==a&&this.multiplyScalar(e,t/a),this}},yy.Vector4={create:function(e,t,a){var i=new yy.Array(4);return this.set(i,e,t,a),i},set:function(e,t,a,i,n){return e[0]=t||0,e[1]=a||0,e[2]=i||0,e[3]=n||0,this},setX:function(e,t){return e[0]=t||0,this},setY:function(e,t){return e[1]=t||0,this},setZ:function(e,t){return e[2]=t||0,this},setW:function(e,t){return e[3]=t||0,this},add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],this},multiplyVectors:function(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e[3]=t[3]*a[3],this},multiplyScalar:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,this},min:function(e,t){return e[0]<t&&(e[0]=t),e[1]<t&&(e[1]=t),e[2]<t&&(e[2]=t),e[3]<t&&(e[3]=t),this},max:function(e,t){return e[0]>t&&(e[0]=t),e[1]>t&&(e[1]=t),e[2]>t&&(e[2]=t),e[3]>t&&(e[3]=t),this},clamp:function(e,t,a){return this.min(e,t),this.max(e,a),this}},yy.Color=function(e,t){this.rgba=yy.Vector4.create(),this.hex=e||"#000000",this.opacity=yy.Utils.isNumber(t)?t:1,this.set(this.hex,this.opacity)},yy.Color.prototype={set:function(e,t){e=e.replace("#","");var a=e.length/3;return this.rgba[0]=parseInt(e.substring(0*a,1*a),16)/255,this.rgba[1]=parseInt(e.substring(1*a,2*a),16)/255,this.rgba[2]=parseInt(e.substring(2*a,3*a),16)/255,this.rgba[3]=yy.Utils.isNumber(t)?t:this.rgba[3],this},hexify:function(e){return e=Math.ceil(255*e).toString(16),1===e.length&&(e="0"+e),e},format:function(){var e=this.hexify(this.rgba[0]),t=this.hexify(this.rgba[1]),a=this.hexify(this.rgba[2]);return this.hex="#"+e+t+a}},yy.Object=function(){this.position=yy.Vector3.create()},yy.Object.prototype={setPosition:function(e,t,a){return yy.Vector3.set(this.position,e,t,a),this}},yy.Light=function(e,t){yy.Object.call(this),this.ambient=new yy.Color(e||"#FFFFFF"),this.diffuse=new yy.Color(t||"#FFFFFF"),this.ray=yy.Vector3.create()},yy.Light.prototype=Object.create(yy.Object.prototype),yy.Vertex=function(e,t,a){this.position=yy.Vector3.create(e,t,a)},yy.Vertex.prototype={setPosition:function(e,t,a){return yy.Vector3.set(this.position,e,t,a),this}},yy.Triangle=function(e,t,a){this.a=e||new yy.Vertex,this.b=t||new yy.Vertex,this.c=a||new yy.Vertex,this.vertices=[this.a,this.b,this.c],this.u=yy.Vector3.create(),this.v=yy.Vector3.create(),this.centroid=yy.Vector3.create(),this.normal=yy.Vector3.create(),this.color=new yy.Color,this.polygon=document.createElementNS(yy.SVGNS,"polygon"),this.polygon.setAttributeNS(null,"stroke-linejoin","round"),this.polygon.setAttributeNS(null,"stroke-miterlimit","1"),this.polygon.setAttributeNS(null,"stroke-width","1"),this.computeCentroid(),this.computeNormal()},yy.Triangle.prototype={computeCentroid:function(){return this.centroid[0]=this.a.position[0]+this.b.position[0]+this.c.position[0],this.centroid[1]=this.a.position[1]+this.b.position[1]+this.c.position[1],this.centroid[2]=this.a.position[2]+this.b.position[2]+this.c.position[2],yy.Vector3.divideScalar(this.centroid,3),this},computeNormal:function(){return yy.Vector3.subtractVectors(this.u,this.b.position,this.a.position),yy.Vector3.subtractVectors(this.v,this.c.position,this.a.position),yy.Vector3.crossVectors(this.normal,this.u,this.v),yy.Vector3.normalise(this.normal),this}},yy.Geometry=function(){this.vertices=[],this.triangles=[],this.dirty=!1},yy.Geometry.prototype={update:function(){if(this.dirty){var e,t;for(e=this.triangles.length-1;e>=0;e--)t=this.triangles[e],t.computeCentroid(),t.computeNormal();this.dirty=!1}return this}},yy.Plane=function(e,t,a,i){yy.Geometry.call(this),this.width=e||100,this.height=t||100,this.segments=a||4,this.slices=i||4,this.segmentWidth=this.width/this.segments,this.sliceHeight=this.height/this.slices;var n,o,l;a=[];for(n=-.5*this.width,o=.5*this.height,e=0;e<=this.segments;e++)for(a.push([]),t=0;t<=this.slices;t++)i=new yy.Vertex(n+e*this.segmentWidth,o-t*this.sliceHeight),a[e].push(i),this.vertices.push(i);for(e=0;e<this.segments;e++)for(t=0;t<this.slices;t++)i=a[e+0][t+0],n=a[e+0][t+1],o=a[e+1][t+0],l=a[e+1][t+1],window.t0=new yy.Triangle(i,n,o),window.t1=new yy.Triangle(o,n,l),this.triangles.push(window.t0,window.t1)},yy.Plane.prototype=Object.create(yy.Geometry.prototype),yy.Material=function(e,t){this.ambient=new yy.Color(e||"#444444"),this.diffuse=new yy.Color(t||"#FFFFFF"),this.slave=new yy.Color},yy.Mesh=function(e,t){yy.Object.call(this),this.geometry=e||new yy.Geometry,this.material=t||new yy.Material,this.side=yy.FRONT,this.visible=!0},yy.Mesh.prototype=Object.create(yy.Object.prototype),yy.Mesh.prototype.update=function(e,t){var a,i,n,o,l;if(this.geometry.update(),t)for(a=this.geometry.triangles.length-1;a>=0;a--){for(i=this.geometry.triangles[a],yy.Vector4.set(i.color.rgba),n=e.length-1;n>=0;n--)o=e[n],yy.Vector3.subtractVectors(o.ray,o.position,i.centroid),yy.Vector3.normalise(o.ray),l=yy.Vector3.dot(i.normal,o.ray),this.side===yy.FRONT?l=Math.max(l,0):this.side===yy.BACK?l=Math.abs(Math.min(l,0)):this.side===yy.DOUBLE&&(l=Math.max(Math.abs(l),0)),yy.Vector4.multiplyVectors(this.material.slave.rgba,this.material.ambient.rgba,o.ambient.rgba),yy.Vector4.add(i.color.rgba,this.material.slave.rgba),yy.Vector4.multiplyVectors(this.material.slave.rgba,this.material.diffuse.rgba,o.diffuse.rgba),yy.Vector4.multiplyScalar(this.material.slave.rgba,l),yy.Vector4.add(i.color.rgba,this.material.slave.rgba);yy.Vector4.clamp(i.color.rgba,0,1)}return this},yy.Scene=function(){this.meshes=[],this.lights=[]},yy.Scene.prototype={add:function(e){return e instanceof yy.Mesh&&!~this.meshes.indexOf(e)?this.meshes.push(e):e instanceof yy.Light&&!~this.lights.indexOf(e)&&this.lights.push(e),this},remove:function(e){return e instanceof yy.Mesh&&~this.meshes.indexOf(e)?this.meshes.splice(this.meshes.indexOf(e),1):e instanceof yy.Light&&~this.lights.indexOf(e)&&this.lights.splice(this.lights.indexOf(e),1),this}},yy.Renderer=function(){this.halfHeight=this.halfWidth=this.height=this.width=0},yy.Renderer.prototype={setSize:function(e,t){if(this.width!==e||this.height!==t)return this.width=e,this.height=t,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this},clear:function(){return this},render:function(){return this}},yy.CanvasRenderer=function(){yy.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.context=this.element.getContext("2d"),this.setSize(this.element.width,this.element.height)},yy.CanvasRenderer.prototype=Object.create(yy.Renderer.prototype),yy.CanvasRenderer.prototype.setSize=function(e,t){return yy.Renderer.prototype.setSize.call(this,e,t),this.element.width=e,this.element.height=t,this.context.setTransform(1,0,0,-1,this.halfWidth,this.halfHeight),this},yy.CanvasRenderer.prototype.clear=function(){return yy.Renderer.prototype.clear.call(this),this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height),this},yy.CanvasRenderer.prototype.render=function(e){var t,a,i,n,o;for(yy.Renderer.prototype.render.call(this,e),this.clear(),this.context.lineJoin="round",this.context.lineWidth=1,t=e.meshes.length-1;t>=0;t--)if(a=e.meshes[t],a.visible)for(a.update(e.lights,!0),i=a.geometry.triangles.length-1;i>=0;i--)n=a.geometry.triangles[i],o=n.color.format(),this.context.beginPath(),this.context.moveTo(n.a.position[0],n.a.position[1]),this.context.lineTo(n.b.position[0],n.b.position[1]),this.context.lineTo(n.c.position[0],n.c.position[1]),this.context.closePath(),this.context.strokeStyle=o,this.context.fillStyle=o,this.context.stroke(),this.context.fill();return this};var Iy=ne.a.map({username:ne.a.required.$msg("请输入登录名").string.other("form",{placeholder:"登录名"}),password:ne.a.required.$msg("请输入密码").string.other("form",{placeholder:"密码",type:"password"})}).other("form",{cols:{label:0,wrapper:24}}),Ty={data:function(){return{user:{username:"yuanjunnan",password:"yuanjunnan@yjn@",valicode:""},codeUrl:"captcha.jpg",isNormalActive:!0,isDomainActive:!1}},components:{},computed:{formSchema:function(){return this.schema||Iy}},props:["schema"],methods:{changAccoutType:function(e){"normal"===e?(this.isNormalActive=!0,this.isDomainActive=!1):(this.isNormalActive=!1,this.isDomainActive=!0)},createCav:function(){!window.ActiveXObject&&document.createElement("canvas").getContext},handleLogin:function(e){var t=this;0===e.length&&(this.isDomainActive?(this.user.ldapName=this.user.username,delete this.user.username):delete this.user.ldapName,window.localStorage&&window.localStorage.setItem("loginType",this.isDomainActive?"normal":"domain"),this.$login(this.user).then(function(e){t.$router.push({path:t.$route.query.redirect||"/"})},function(){t.isDomainActive&&(t.user.username=t.user.ldapName)}))},updateValicode:function(){this.codeUrl+="?_="+(new Date).getTime()}},created:function(){wy()}},Sy=Ty,Cy=(a("5dc1"),Object(K["a"])(Sy,fy,by,!1,null,"633998b4",null)),ky=Cy.exports,_y=[{name:"login",path:"/login",component:ky,meta:{title:"登录"}}],Py=_y;function xy(e,t,a){var i=this.app;i.$isLoggedIn().then(function(){a("login"!==e.name?0===e.matched.length&&i.$router.getMatchedComponents(e.fullPath).length>0?{path:e.fullPath}:void 0:{name:"/"})}).catch(function(){a("login"===e.name?void 0:{name:"login",query:{redirect:e.fullPath}})})}function Dy(e){var t=this.app,a=e.matched.slice(1).map(function(e){var t=e.name,a=e.meta;return{name:a.title,to:t?{name:t}:void 0}});t.$nextTick(function(){t.$bus.$emit("breadcrumb-change",a)})}F["default"].use(my["a"]);var Fy=new my["a"]({routes:Py});Fy.beforeEach(xy.bind(Fy)),Fy.afterEach(Dy.bind(Fy));var $y=Fy,Ry=a("cebc"),Ly=a("4328"),Ny=a.n(Ly),Oy=a("bc3a"),Ay=a.n(Oy),Ey=a("323e"),Vy=a.n(Ey);a("a5d8");function My(e){var t=e.method,a=void 0===t?"get":t,i=e.url,n=e.data,o=e.params,l=e.isJSON,r=void 0!==l&&l;Vy.a.start();var s={method:a,url:i,data:r?n:"string"===typeof n?n:Ny.a.stringify(n),params:o};return Ay()(s).then(function(e){var t=e.data;if(Vy.a.done(),"undefined"!==typeof t.success&&"undefined"!==typeof t.msg){if(t.success)return"undefined"!==typeof t.data?"undefined"!==typeof t.total?{rows:t.data,total:t.total}:t.data:"undefined"!==typeof t.rows?"undefined"!==typeof t.total?{rows:t.rows,total:t.total}:t.rows:t;throw new Error(t.msg)}if("undefined"!==typeof t.rows&&"undefined"!==typeof t.total)return{rows:t.rows,total:t.total};if("undefined"!==typeof t.code&&"0"!==t.code)throw new Error(t.msg);return t}).catch(function(e){throw Vy.a.done(),e})}function By(e){var t=this;return this.fetch({method:"post",url:"api/userlogin.html",data:e}).then(function(e){return t.state=e,e})}function Uy(e){return this.fetch({method:"post",url:"api/getMenus.html",data:e}).then(function(e){return e})}function jy(e){return this.fetch({method:"get",url:"api/v1/"+e+"/getMenuInfo.html",params:""})}function Hy(e){var t=e.file,a=e.onUploadProgress,i=new FormData;return i.append("file",t),Ay()({method:"post",url:"api/upload/image.html",data:i,onUploadProgress:a}).then(function(e){var t=e.data;return t})}function qy(e){var t=e.file,a=e.onUploadProgress,i=new FormData;return i.append("file",t),Ay()({method:"post",url:"api/layoutInfo/getLayoutFile.html",data:i,onUploadProgress:a}).then(function(e){var t=e.data;return t})}function Wy(e){var t=e.file,a=e.onUploadProgress,i=new FormData;return i.append("file",t),Ay()({method:"post",url:"api/upload/apk.html",data:i,onUploadProgress:a}).then(function(e){var t=e.data;return t})}function Gy(e){var t=e.file,a=e.type,i=e.onUploadProgress,n=new FormData;return n.append("file",t),Ay()({method:"post",url:"api/upload/zip.html?type="+a,data:n,onUploadProgress:i}).then(function(e){var t=e.data;return t})}function zy(e){return this.fetch({method:"get",url:"api/v1/sysDept/listAllDept.html",params:e})}function Jy(e){return this.fetch({method:"post",url:"api/sysUser/getMenuInfo.html",data:e})}function Ky(e){return this.fetch({method:"post",url:"api/v1/sysUser/pageList.html",data:e})}function Xy(e){return this.fetch({method:"post",url:"api/sysUser/getNotRolesByUserId.html",data:e})}function Yy(e){return this.fetch({method:"post",url:"api/sysUser/getRolesByUserId.html",data:e})}function Zy(e){return e=e.reduce(function(e,t){return e+="&"+t[0]+"="+t[1],e},"").slice(1),this.fetch({method:"post",url:"api/sysUser/saveUserRoles.html",data:e})}function Qy(e){return this.fetch({method:"get",url:"api/globalDictInfo/getTypes/businessType.html",params:e})}function ew(e){return this.fetch({method:"get",url:"api/v1/sysUser/getDetailInfo.html",params:e})}function tw(e){return this.fetch({method:"get",url:"api/sysUser/getDictCheckedByUserId.html",params:e})}function aw(e){return this.fetch({method:"post",url:"api/sysUser/save.html",data:e})}function iw(e){return this.fetch({method:"post",url:"api/sysUser/saveProfession.html",data:e})}function nw(e){return this.fetch({method:"get",url:"api/sysUser/remove.html",params:e})}function ow(e){return this.fetch({method:"post",url:"api/dict/pageList.html",data:e})}function lw(e){return this.fetch({method:"post",url:"api/dict/save.html",data:e,isJSON:!0})}function rw(e){return this.fetch({method:"post",url:"api/dict/remove.html",data:e})}function sw(){return this.fetch({method:"post",url:"api/dictCategory/list.html"})}function cw(e){return this.fetch({method:"post",url:"api/dictCategory/save.html",data:e,isJSON:!0})}function uw(e){return this.fetch({method:"post",url:"api/sysLogLogin/pageList.html",data:e})}function dw(e){return this.fetch({method:"get",url:"api/v1/sysMenu/pageList.html",params:e})}function pw(e){return this.fetch({method:"post",url:"api/v1/sysMenu/save.html",data:e})}function hw(e){return this.fetch({method:"get",url:"api/sysMenu/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/para = (\{.+\})/)[1])})}function mw(e){return this.fetch({method:"post",url:"api/sysMenu/getNotMenuByRunId.html",data:e})}function fw(e){return this.fetch({method:"post",url:"api/sysMenu/getMenuByRunId.html",data:e})}function bw(e){return e=e.reduce(function(e,t){return e+="&"+t[0]+"="+t[1],e},"").slice(1),this.fetch({method:"post",url:"api/v1/sysMenu/saveMenuRun.html",data:e})}function gw(){return this.fetch({method:"post",url:"api/sysMenu/getMenuInfo.html"})}function vw(e){return this.fetch({method:"get",url:"api/v1/sysMenu/remove.html",params:e})}function yw(e){return this.fetch({method:"get",url:"api/v1/updatePassword.html",params:e})}function ww(e){return this.fetch({method:"post",url:"api/sysRole/pageList.html",data:e})}function Iw(e){return this.fetch({method:"post",url:"api/sysRole/userList.html",params:e})}function Tw(e){return this.fetch({method:"post",url:"api/sysRole/save.html",data:e})}function Sw(e){return this.fetch({method:"get",url:"api/sysRole/remove.html",params:e})}function Cw(e){return this.fetch({method:"get",url:"api/tag/list.html?type=crowdPolicy",params:e})}function kw(e){return this.fetch({method:"get",url:"api/tag/list.html?type=crowd",params:e})}function _w(e){return this.fetch({method:"post",url:"api/tag/save.html",data:e,isJSON:!0})}function Pw(e){return this.fetch({method:"get",url:"api/sysRole/modifyRoleAuthView.html",params:e})}function xw(e){return this.fetch({method:"post",url:"api/sysRole/modifyRoleAuthSave.html",data:e})}function Dw(e){return this.fetch({method:"get",url:"api/v1/sysRole/updateSeq.html",params:e})}function Fw(e){return this.fetch({method:"get",url:"api/v1/sysRole/getDetailInfo.html",params:e})}function $w(e){return this.fetch({method:"post",url:"api/v1/sysDept/pageList.html",data:e})}function Rw(e){return this.fetch({method:"get",url:"api/v1/sysDept/remove.html",params:e})}function Lw(e){return this.fetch({method:"post",url:"api/v1/sysDept/save.html",data:{jsonStr:JSON.stringify(e)}})}function Nw(e){return this.fetch({method:"get",url:"api/v1/sysDept/getDetailInfo.html",params:e})}function Ow(e){return this.fetch({method:"get",url:"api/v1/sysDept/updateSeq.html",params:e})}function Aw(e){return this.fetch({method:"post",url:"api/v1/sysLogOp/pageList.html",data:e})}function Ew(e){return this.fetch({method:"post",url:"api/blockInfo/pageList.html",data:e})}function Vw(e){return this.fetch({method:"get",url:"api/blockInfo/remove.html",params:e})}function Mw(e){return this.fetch({method:"get",url:"api/v1/cornerIconType/getCornerTypes.html",params:e})}function Bw(e){return this.fetch({method:"get",url:"api/dict/poster/materialType.html",params:e})}function Uw(e){return this.fetch({method:"post",url:"api/blockInfo/save.html",data:e,isJSON:!0})}function jw(e){return this.fetch({method:"post",url:"api/sysPlugin/pageList.html?pluginParentType=builtIn",data:e})}function Hw(e){return this.fetch({method:"get",url:"api/sysPlugin/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/initPlugin = (\{.+\})/)[1])})}function qw(e){return this.fetch({method:"post",url:"api/dict/sysPlugin/pluginParentType.html",data:e})}function Ww(e){return this.fetch({method:"post",url:"api/dict/sysPlugin/pluginType.html",data:e})}function Gw(e){return this.fetch({method:"get",url:"api/tvos/getMediaVideoInfos.html",params:e})}function zw(e){return this.fetch({method:"get",url:"api/tvos/getPartnerSource.html",params:e})}function Jw(e){return this.fetch({method:"get",url:"api/tvos/getCondition.html",params:e})}function Kw(e){return this.fetch({method:"get",url:"api/tvos/queryLiveVideoResult.html",params:e})}function Xw(e){return this.fetch({method:"post",url:"api/dict/sysPlugin/"+e+".html"})}function Yw(e){return this.fetch({method:"post",url:"api/globalPicture/dataList.html",data:e})}function Zw(e){return this.fetch({method:"post",url:"api/globalCornerIcon/pageList.html",data:e})}function Qw(e){return e={jsonStr:JSON.stringify(e)},this.fetch({method:"post",url:"api/sysPlugin/save.html",data:e})}function eI(e){return this.fetch({method:"post",url:"api/sysPlugin/pageList.html?builtInNotShow=1",data:e})}function tI(e){return this.fetch({method:"get",url:"api/sysPlugin/getDetailInfo.html",params:e})}function aI(e){return this.fetch({method:"get",url:"api/sysPlugin/remove.html",params:e})}function iI(e){return this.fetch({method:"post",url:"api/commonOnclickInfo/pageList.html",data:e})}function nI(e){return this.fetch({method:"get",url:"api/v1/hvi/historyList.html",params:e})}function oI(e){return this.fetch({method:"POST",url:"api/blockInfo/getDetailInfo.html",data:e})}function lI(e){return this.fetch({method:"post",url:"api/adminMasterControl/getDetailInfo.html",data:e})}function rI(e){return this.fetch({method:"post",url:"api/adminMasterControl/save.html",data:e})}function sI(e){return this.fetch({method:"post",url:"api/dict/materialType.html",data:e})}function cI(e){return this.fetch({method:"post",url:"api/v1/poster/pageList.html",data:e})}function uI(e){return this.fetch({method:"get",url:"api/v1/poster/batchAudit.html",params:e})}function dI(e){return this.fetch({method:"get",url:"api/v1/poster/remove.html",params:e})}function pI(){return this.fetch({method:"post",url:"api/v1/onclickInfo/getMenuInfo.html"})}function hI(e){return this.fetch({method:"post",url:"api/v1/onclickInfo/pageList.html",data:e})}function mI(e){return this.fetch({method:"post",url:"api/v1/onclickInfo/save.html",data:e})}function fI(e){return this.fetch({method:"get",url:"api/v1/onclickInfo/remove.html",params:e})}function bI(e){return this.fetch({method:"get",url:"api/v1/onclickInfo/getDetailInfo.html",params:e}).then(function(e){return e})}function gI(e){return this.fetch({url:"api/tabInfo/pageList.html",params:e})}function vI(e){return this.fetch({method:"post",url:"api/globalDictInfo/getTypes/appIdType.html",data:e})}function yI(e){return this.fetch({method:"post",url:"api/globalDictInfo/getTypes/businessType.html",data:e})}function wI(e){return this.fetch({method:"post",url:"api/dict/tab/tabType.html?tabParentType=biz",data:e})}function II(e){return this.fetch({method:"get",url:"api/v1/getMediaResourceInfoToPanel.html",params:e,isJSON:!0})}function TI(e){return this.fetch({method:"post",url:"api/filmDetailPage/pageList.html",data:e})}function SI(e){return this.fetch({method:"post",url:"api/filmDetailPage/save.html",data:e})}function CI(e){return this.fetch({method:"get",url:"api/filmDetailPage/remove.html",params:e})}function kI(){return this.fetch({method:"get",url:"api/tabInfo/getIconList.html"})}function _I(e){return this.fetch({method:"post",url:"api/tab/getDetailInfo.html",params:e})}function PI(e){return this.fetch({method:"post",url:"api/tab/save.html",data:{jsonStr:JSON.stringify(e)}})}function xI(e){return this.fetch({method:"get",url:"api/filmDetailPage/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/param = (\{.+\})/)[1])})}function DI(e){return this.fetch({method:"get",url:"api/filmDetailPage/preview.html",params:e}).then(function(e){return JSON.parse(e.match(/param = (\{.+\})/)[1])})}function FI(e){return this.fetch({method:"post",url:"api/v1/panel/pageList.html",data:e})}function $I(e){return this.fetch({method:"post",url:"api/v1/panel/dataList.html",data:e})}function RI(e){return this.fetch({url:"api/panel/getDetailInfo.html",params:e})}function LI(){return this.fetch({method:"post",url:"api/homepageInfo/getMenuInfo.html"})}function NI(e){return this.fetch({method:"post",url:"api/v1/homepage/pageList.html",data:e})}function OI(e){return this.fetch({method:"post",url:"api/homepageInfo/save.html",data:{data:JSON.stringify(e)}})}function AI(e){return this.fetch({url:"api/v1/homepage/remove.html",params:e})}function EI(e){return this.fetch({method:"get",url:"api/homepageInfo/getDetailInfo.html",params:e})}function VI(e){return this.fetch({methods:"get",url:"api/tvos/getMediaVideoInfos.html",params:e}).then(function(e){return"string"===typeof e?JSON.parse(e.replace("result(","").replace(/\)*$/,"")):e})}function MI(e){return this.fetch({methods:"get",url:"api/tvos/getPartnerSource.html",params:e})}function BI(){return this.fetch({methods:"get",url:"api/tvos/getCondition.html"}).then(function(e){return"string"===typeof e?JSON.parse(e.replace("result(","").replace(/\)*$/,"")):e})}function UI(e){return this.fetch({methods:"get",url:"api/tvos/getSegmentList.html",params:e}).then(function(e){return"string"===typeof e?JSON.parse(e.replace("result(","").replace(/\)*$/,"")):e})}function jI(e){return this.fetch({methods:"get",url:"api/appManagement/pageList.html",params:e})}function HI(e){return this.fetch({method:"post",url:"api/panel/pageList.html",data:e})}function qI(e){return this.fetch({method:"get",url:"api/markPanel/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/pannelInit = (\{.+\})/)[1])})}function WI(e){return this.fetch({method:"post",url:"api/panel/save.html",data:e})}function GI(e){return this.fetch({method:"get",url:"api/panel/remove.html",params:e})}function zI(e){return this.fetch({method:"get",url:"api/panel/getDetailInfo.html",params:e})}function JI(e){return this.fetch({method:"post",url:"api/v1/timedTask/getTimedInfo.html",data:e})}function KI(e){return this.fetch({method:"get",url:"api/v1/audit/historyList.html",params:e})}function XI(e){return this.fetch({method:"post",url:"api/v1/cornerIconType/pageList.html",data:e})}function YI(e){return this.fetch({method:"post",url:"api/v1/cornerIconType/remove.html",data:e})}function ZI(e){return this.fetch({method:"post",url:"api/v1/cornerIconType/save.html",data:e})}function QI(e){return this.fetch({method:"get",url:"api/v1/cornerIconType/getDetailInfo.html",params:e})}function eT(e){return this.fetch({method:"post",url:"api/v1/layout/pageList.html",data:e})}function tT(e){return this.fetch({method:"post",url:"api/v1/layout/remove.html",data:e})}function aT(e){return this.fetch({method:"post",url:"api/v1/layout/save.html",data:e})}function iT(e){return this.fetch({method:"get",url:"api/v1/layout/getDetailInfo.html",params:e})}function nT(e){return this.fetch({method:"post",url:"api/buttonManage/getAuditDetailButton.html",data:e})}function oT(e){return this.fetch({method:"post",url:"api/v1/audit/auditTask.html",data:e})}function lT(e){return this.fetch({method:"post",url:"api/v1/audit/revokedAudit.html",data:e})}function rT(e){return this.fetch({method:"post",url:"api/v1/audit/putShelves.html",data:e})}function sT(e){return this.fetch({method:"post",url:"api/v1/theme/pageList.html",data:e})}function cT(e){return this.fetch({method:"get",url:"api/v1/theme/remove.html",params:e})}function uT(e){return this.fetch({method:"get",url:"api/v1/theme/getDetailInfo.html",params:e})}function dT(e){return this.fetch({method:"post",url:"api/v1/theme/save.html",data:e})}function pT(e){return this.fetch({method:"post",url:"api/v1/theme/checkThemeMd5.html",data:e})}function hT(e){return this.fetch({url:"api/v1/poster/save.html",method:"post",data:e})}function mT(e){return this.fetch({url:"api/globalPicture/edit.html?id="+e.id}).then(function(e){return JSON.parse(e.match(/initData = (\{.+\})/)[1])})}function fT(e){return this.fetch({url:"api/globalPicture/dataList.html",params:e})}function bT(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/pageList.html",params:e})}function gT(e){return this.fetch({method:"get",url:"api/v1/cornerIconType/getCornerTypes.html",params:e})}function vT(e){return this.fetch({method:"post",url:"api/v1/cornerIcon/getIconAttributes.html",params:e})}function yT(e){return this.fetch({method:"get",url:"api/globalCornerIcon/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/para = (\{.+\})/)[1])})}function wT(e){return this.fetch({method:"post",url:"api/v1/cornerIcon/save.html",data:e})}function IT(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/remove.html",params:e})}function TT(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/batchAudit.html",params:e})}function ST(e){return this.fetch({method:"post",url:"api/v1/audit/revokedAudit.html",data:e})}function CT(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/getDetailInfo.html",params:e})}function kT(e){return this.fetch({method:"get",url:"api/v1/cornerIcon/changePriority.html",params:e})}function _T(){return this.fetch({url:"api/adBit/pageList.html?rows=10000"})}function PT(e){return this.fetch({method:"post",url:"api/adBit/switchStatus.html",data:e})}function xT(e){return this.fetch({method:"post",url:"api/privatePannelInfo/pageList.html",data:e})}function DT(e){return this.fetch({method:"post",url:"api/dict/businessType.html",data:e})}function FT(e){return this.fetch({method:"get",url:"api/v1/hvi/historyList.html",params:e})}function $T(e){return this.fetch({method:"get",url:"api/privatePannelInfo/edit.html",params:e}).then(function(e){return JSON.parse(e.match(/initData = (\{.+\})/)[1])})}function RT(e){return this.fetch({method:"post",url:"api/privatePannelInfo/save.html",data:e})}function LT(e){return this.fetch({method:"get",url:"api/panel/remove.html",params:e})}function NT(e){return this.fetch({method:"get",url:"api/privatePannelInfo/preview.html",params:e}).then(function(e){return JSON.parse(e.match(/initData = (\{.+\})/)[1])})}function OT(e){return this.fetch({method:"get",url:"api/panel/delHistory.html",params:e})}function AT(e){return this.fetch({method:"post",url:"api/myDrafts/pageList.html",data:e})}function ET(e){return this.fetch({method:"post",url:"api/mySubmitTasks/pageList.html",data:e})}function VT(e){return this.fetch({method:"post",url:"api/myReviewTasks/pageList.html",data:e})}var MT={fetchPolicyPromise:void 0,fetchCrowdPromise:{}};function BT(e){return this.fetch({method:"post",url:"api/v1/policyConf/pageList.html",data:e})}function UT(e){return this.fetch({method:"post",url:"api/v1/testPolicyConf/pageList.html",data:e})}function jT(e){return this.fetch({method:"post",url:"api/globalDeviceInfo/dataList.html",data:e})}function HT(e){return this.fetch({method:"post",url:"api/globalDeviceInfo/save.html",data:e})}function qT(e){return this.fetch({method:"post",url:"api/homepageInfo/dataList.html",data:e})}function WT(e){return this.fetch({method:"post",url:"api/v1/policyConf/save.html",data:e})}function GT(e){return this.fetch({method:"post",url:"api/v1/testPolicyConf/save.html",data:e})}function zT(e){return this.fetch({method:"post",url:"api/v1/policyConf/remove.html",data:e})}function JT(e){return this.fetch({method:"post",url:"api/v1/testPolicyConf/remove.html",data:e})}function KT(e){return this.fetch({method:"get",url:"api/v1/dmpMgr/getDetailInfo.html",params:e})}function XT(e){return MT.fetchCrowdPromise[e]||(MT.fetchCrowdPromise[e]=this.getCrowdOfPolicy(e)),MT.fetchCrowdPromise[e]}function YT(e){return this.fetch({method:"get",url:"api/tag/list.html?type=crowd&id="+e})}function ZT(e){return this.fetch({method:"get",url:"api/tag/list.html?type=crowdPolicy",params:e})}function QT(e){return this.fetch({method:"get",url:"api/v1/policyConf/getDetailInfo.html",params:e})}function eS(e){return this.fetch({method:"get",url:"api/v1/testPolicyConf/getDetailInfo.html",params:e})}function tS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetch({url:"api/sysPlugin/pageList.html",params:Object.assign({pluginStatus:4,pluginType:"REFERENCE_ACTIVITY"},e)})}function aS(e){return this.fetch({method:"get",url:"api/v1/hvi/historyList.html",params:e}).then(function(e){var t=e.rows||[];return t.map(function(e){var t=e.version,a=e.lastUpdateDate,i=e.modifierName,n=e.status;return{row:e,value:e.version,label:"".concat(t,"/").concat(a,"/").concat(i,"/").concat(ry.statusText[n])}})})}function iS(e){return this.fetch({method:"post",url:"api/globalDictInfo/getTypes/appIdType.html",data:e})}function nS(e){return this.fetch({method:"post",url:"api/globalDictInfo/getTypes/businessType.html",data:e})}function oS(e){return this.fetch({method:"post",url:"api/v1/audit/revokedAudit.html",data:e})}function lS(){return this.fetch({url:"api/v1/timedTask/taskLimit.html"})}function rS(e){return this.fetch({method:"post",url:"api/v1/audit/putShelves.html",data:e})}var sS={homepage:"api/homepageInfo/delHistory.html"};function cS(e){return this.fetch({url:sS[e.type],params:{id:e.id,version:e.version}})}function uS(e){return this.fetch({url:"api/v1/audit/historyList.html",params:e})}function dS(e){return this.fetch({method:"post",url:"api/collect/pannel/pageList.html",data:e})}function pS(e){return this.fetch({method:"post",url:"api/tab/save.html",data:e})}function hS(e){return this.fetch({method:"get",url:"api/tab/getDetailInfo.html",params:e})}function mS(e){return this.fetch({method:"post",url:"api/commonResourceUser/tab/collectResource.html",data:e})}function fS(e){return this.fetch({method:"post",url:"api/commonResourceUser/tab/cancelCollectResource.html",data:e})}var bS=Object(Ry["a"])({state:{},fetch:My,login:By},i,T,n,o,l,r,s,c,d,p,h,m,f,b,g,v,y,w,I,u,S,C,k,_,P,x,D);F["default"].prototype.$service=W["utils"].wrapService(bS);a("86d7");F["default"].config.productionTip=!1,new F["default"]({router:$y,render:function(e){return e(hy)}}).$mount("#app")},"580c":function(e,t,a){e.exports=a.p+"img/detail-ad-3.8a40a230.png"},"58c5":function(e,t,a){e.exports=a.p+"img/detail-ad-1-2.151fc6ac.png"},"58ff":function(e,t,a){},"5dc1":function(e,t,a){"use strict";var i=a("aa94"),n=a.n(i);n.a},"5edd":function(e,t,a){},"5f33":function(e,t,a){},6182:function(e,t,a){"use strict";var i=a("7345"),n=a.n(i);n.a},"61ee":function(e,t,a){},"62ea":function(e,t,a){},"63b1":function(e,t,a){"use strict";var i=a("c255"),n=a.n(i);n.a},6463:function(e,t,a){"use strict";var i=a("5f33"),n=a.n(i);n.a},6646:function(e,t,a){"use strict";var i=a("21f7"),n=a.n(i);n.a},"679e":function(e,t,a){"use strict";var i=a("4ef8"),n=a.n(i);n.a},"680f":function(e,t,a){},6842:function(e,t,a){"use strict";var i=a("b0b5"),n=a.n(i);n.a},"6a50":function(e,t,a){},"6b22":function(e,t,a){"use strict";var i=a("aaed"),n=a.n(i);n.a},"70e6":function(e,t,a){},7106:function(e,t,a){},7345:function(e,t,a){},"75e6":function(e,t,a){},"760a":function(e,t,a){"use strict";var i=a("566e"),n=a.n(i);n.a},"76d7":function(e,t,a){},7725:function(e,t,a){},7756:function(e,t,a){},"77d9":function(e,t,a){},"782b":function(e,t,a){},7854:function(e,t,a){},"79bc":function(e,t,a){},"7a67":function(e,t,a){},"7a89":function(e,t,a){"use strict";var i=a("909a"),n=a.n(i);n.a},"7b00":function(e,t,a){"use strict";var i=a("62ea"),n=a.n(i);n.a},"7b8c":function(e,t,a){},"7d09":function(e,t,a){},"7d68":function(e,t,a){"use strict";var i=a("cab0"),n=a.n(i);n.a},"7d93":function(e,t,a){"use strict";var i=a("680f"),n=a.n(i);n.a},"7da3":function(e,t,a){},"7fe0":function(e,t,a){},8204:function(e,t,a){},"86d7":function(e,t,a){},8814:function(e,t,a){},"886e":function(e,t,a){"use strict";var i=a("61ee"),n=a.n(i);n.a},"888d":function(e,t,a){},"89ed":function(e,t,a){},"8b44":function(e,t,a){"use strict";var i=a("faa6"),n=a.n(i);n.a},"8b7e":function(e,t,a){},"8e78":function(e,t,a){"use strict";var i=a("d627"),n=a.n(i);n.a},"8f01":function(e,t,a){"use strict";var i=a("95a2"),n=a.n(i);n.a},"8f0a":function(e,t,a){"use strict";var i=a("0818"),n=a.n(i);n.a},9045:function(e,t,a){},"909a":function(e,t,a){},"91b4":function(e,t,a){},"95a2":function(e,t,a){},"976e":function(e,t,a){},"983d":function(e,t,a){"use strict";var i=a("36b8"),n=a.n(i);n.a},"9c56":function(e,t,a){"use strict";var i=a("1177"),n=a.n(i);n.a},"9e3e":function(e,t,a){"use strict";var i=a("0543"),n=a.n(i);n.a},"9f25":function(e,t,a){},a193:function(e,t,a){"use strict";var i=a("7b8c"),n=a.n(i);n.a},a272:function(e,t,a){"use strict";var i=a("0bf0"),n=a.n(i);n.a},a60f:function(e,t,a){},a644:function(e,t,a){"use strict";var i=a("7da3"),n=a.n(i);n.a},a6ff:function(e,t,a){},a76b3:function(e,t,a){"use strict";var i=a("1229"),n=a.n(i);n.a},a7da:function(e,t,a){"use strict";var i=a("70e6"),n=a.n(i);n.a},aa49:function(e,t,a){"use strict";var i=a("e65f"),n=a.n(i);n.a},aa94:function(e,t,a){},aaed:function(e,t,a){},aba8:function(e,t,a){"use strict";var i=a("28af"),n=a.n(i);n.a},ad3f:function(e,t,a){},af0a:function(e,t,a){"use strict";var i=a("dde3"),n=a.n(i);n.a},b07c:function(e,t,a){"use strict";var i=a("0547"),n=a.n(i);n.a},b0b5:function(e,t,a){},b17c:function(e,t,a){},b301:function(e,t,a){"use strict";var i=a("ca9d"),n=a.n(i);n.a},b5f8:function(e,t,a){"use strict";var i=a("7725"),n=a.n(i);n.a},b723:function(e,t,a){"use strict";var i=a("58ff"),n=a.n(i);n.a},c1bb:function(e,t,a){"use strict";var i=a("75e6"),n=a.n(i);n.a},c217:function(e,t,a){},c255:function(e,t,a){},c31d:function(e,t,a){},c3f6:function(e,t,a){"use strict";var i=a("0d4b"),n=a.n(i);n.a},c896:function(e,t,a){"use strict";var i=a("b17c"),n=a.n(i);n.a},c940:function(e,t,a){"use strict";var i=a("dc83"),n=a.n(i);n.a},ca9d:function(e,t,a){},cab0:function(e,t,a){},cb18:function(e,t,a){},cc20:function(e,t,a){"use strict";var i=a("01b4"),n=a.n(i);n.a},cd4d:function(e,t,a){},ce35:function(e,t,a){"use strict";var i=a("23d8"),n=a.n(i);n.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.7c8ffc5c.png"},d0fb:function(e,t,a){"use strict";var i=a("fa3a"),n=a.n(i);n.a},d158:function(e,t,a){"use strict";var i=a("6a50"),n=a.n(i);n.a},d5e1:function(e,t,a){"use strict";var i=a("976e"),n=a.n(i);n.a},d5e5:function(e,t,a){},d627:function(e,t,a){},dc83:function(e,t,a){},dd7d:function(e,t,a){"use strict";var i=a("76d7"),n=a.n(i);n.a},dde3:function(e,t,a){},de53:function(e,t,a){},ded3:function(e,t,a){"use strict";var i=a("5edd"),n=a.n(i);n.a},e15f:function(e,t,a){},e222:function(e,t,a){"use strict";var i=a("9f25"),n=a.n(i);n.a},e2bc:function(e,t,a){},e593:function(e,t,a){"use strict";var i=a("4869"),n=a.n(i);n.a},e5f0:function(e,t,a){"use strict";var i=a("472b"),n=a.n(i);n.a},e65f:function(e,t,a){},e70b:function(e,t,a){"use strict";var i=a("48e3"),n=a.n(i);n.a},e82f:function(e,t,a){"use strict";var i=a("4927"),n=a.n(i);n.a},e852:function(e,t,a){"use strict";var i=a("424e"),n=a.n(i);n.a},e86b:function(e,t,a){"use strict";var i=a("262f"),n=a.n(i);n.a},e945:function(e,t,a){"use strict";var i=a("7106"),n=a.n(i);n.a},e96a:function(e,t,a){"use strict";var i=a("782b"),n=a.n(i);n.a},ea41:function(e,t,a){"use strict";var i=a("37d5"),n=a.n(i);n.a},eb95:function(e,t,a){"use strict";var i=a("3a19"),n=a.n(i);n.a},ec3a:function(e,t,a){"use strict";var i=a("039e"),n=a.n(i);n.a},ed2c:function(e,t,a){},efa1:function(e,t,a){},f333:function(e,t,a){"use strict";var i=a("101e"),n=a.n(i);n.a},f34c:function(e,t,a){"use strict";var i=a("d5e5"),n=a.n(i);n.a},f387:function(e,t,a){"use strict";var i=a("3734"),n=a.n(i);n.a},f3d2:function(e,t,a){"use strict";var i=a("7854"),n=a.n(i);n.a},f4b2:function(e,t,a){"use strict";var i=a("f62d"),n=a.n(i);n.a},f53a:function(e,t,a){"use strict";var i=a("166b"),n=a.n(i);n.a},f62d:function(e,t,a){},f746:function(e,t,a){"use strict";var i=a("ad3f"),n=a.n(i);n.a},f879:function(e,t,a){"use strict";var i=a("0554"),n=a.n(i);n.a},f8e3:function(e,t,a){"use strict";var i=a("0247"),n=a.n(i);n.a},fa3a:function(e,t,a){},faa6:function(e,t,a){},fd49:function(e,t,a){"use strict";var i=a("300e"),n=a.n(i);n.a}});
//# sourceMappingURL=app.fbbd1dc0.js.map