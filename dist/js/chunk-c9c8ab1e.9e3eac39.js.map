{"version":3,"sources":["webpack:///./src/views/homePageManage/child-policy/ChildPolicyInfo.vue?d08c","webpack:///src/views/homePageManage/child-policy/ChildPolicyInfo.vue","webpack:///./src/views/homePageManage/child-policy/ChildPolicyInfo.vue?dfff","webpack:///./src/views/homePageManage/child-policy/ChildPolicyInfo.vue","webpack:///./src/views/policy/HomeageMatchingList.vue?c578","webpack:///src/views/policy/HomeageMatchingList.vue","webpack:///./src/views/policy/HomeageMatchingList.vue?bdd6","webpack:///./src/views/policy/HomeageMatchingList.vue","webpack:///./src/views/policy/HomeageMatchingList.vue?9860","webpack:///./src/views/homePageManage/child-policy/ChildPolicyInfo.vue?d233"],"names":["ChildPolicyInfovue_type_template_id_dcdcd190_scoped_true_render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","activePage","expression","attrs","title","on","go-back","$event","$emit","mode","resource-info","resourceInfo","replicate","edit","unaudit","shelves","fetchData","submit-audit","submitBtn","save-draft","audit","select-version","delete","_v","ref","model","form","label-width","label","_s","policyName","selection-type","header","homepageTableHeader","data","childHpList","id","homePageId","init-mode","version","homePageVersion","title-prefix","upsert-end","_e","staticRenderFns","ChildPolicyInfovue_type_script_lang_js_","mixins","components","Table","admin_toolkit_common","CommonContent","HomePageInfo","PageWrapper","PageContentWrapper","props","isTestPolicy","undefined","policyId","macStart","macEnd","homePageVerEnd","homePageVerStart","priority","policyStatus","deviceInfos","normalHpList","regionCityPairs","specialNormalHp","specialChildHp","formRules","ageOptions","ageEnums","computed","menuElId","type","currentVersion","status","resourceName","resourceNameMap","normal","test","child","policyType","_this","prop","width","render","h","_ref","row","age","_ref2","homepageId","click","handlePreviewHomepage","homepageName","push","_ref3","$index","HomepageSelector","selectionType","homepageModel","select-end","result","handleSelectHomepageEnd","methods","getHomepageInfo","homepage","preset","Object","objectSpread","homepageVersion","index","_ref4","_ref5","slicedToArray","oldHomepage","splice","getFormData","lodash","validateFormData","cb","_this2","$refs","validate","valid","unset","find","item","$message","error","message","parseDataToApi","map","_this3","options","jsonStr","JSON","stringify","$service","childPolicyConfSave","then","setData","childHpListIndexed","reduce","homepageVerStart","platform","getChildPolicyConfDetail","created","_this4","initMode","getDictType","dictCnName","dictEnName","disabled","child_policy_ChildPolicyInfovue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","slot","gutter","span","filter","rules","nativeOn","reset","preventDefault","handleFilterReset","submit","handleFilter","callback","$$v","$set","_l","key","autocomplete","placeholder","clearable","trim","_n","native-type","matchResultStr","matchResult","handlePreviewPolicy","policy_id","homepage_id","policyPattern","HomeageMatchingListvue_type_script_lang_js_","TabPage","Policy","ChildPolicy","ChildPolicyInfo","fModeOptions","patternOptions","genDefaultFilter","required","chip","screenSize","validator","rule","reg","Error","mac","regExp","tcVersion","pattern","fMode","devId","event","homepageMatchingList","$nextTick","clearValidate","policy_HomeageMatchingListvue_type_script_lang_js_","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_HomeageMatchingList_vue_vue_type_style_index_0_id_6af505cc_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_HomeageMatchingList_vue_vue_type_style_index_0_id_6af505cc_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChildPolicyInfo_vue_vue_type_style_index_0_id_dcdcd190_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ChildPolicyInfo_vue_vue_type_style_index_0_id_dcdcd190_lang_stylus_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/chunk-c9c8ab1e.9e3eac39.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('PageWrapper',{staticClass:\"policy-info-wrapper\"},[_c('PageContentWrapper',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activePage === 'policy_info'),expression:\"activePage === 'policy_info'\"}]},[_c('ContentCard',{attrs:{\"title\":_vm.title},on:{\"go-back\":function($event){return _vm.$emit('go-back')}}},[_c('CommonContent',{attrs:{\"mode\":_vm.mode,\"resource-info\":_vm.resourceInfo},on:{\"replicate\":function($event){_vm.mode = 'replicate'},\"edit\":function($event){_vm.mode = 'edit'},\"unaudit\":function($event){return _vm.$emit('upsert-end')},\"shelves\":_vm.fetchData,\"submit-audit\":function($event){return _vm.submitBtn(3)},\"save-draft\":function($event){return _vm.submitBtn(2)},\"audit\":function($event){return _vm.$emit('upsert-end')},\"select-version\":_vm.fetchData,\"delete\":function($event){return _vm.$emit('upsert-end', $event)}}},[_c('div',{staticClass:\"form-legend-header\"},[_c('i',{staticClass:\"el-icon-edit\"},[_vm._v(\"基本信息\")])]),_c('DataForm',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"120px\"}},[_c('el-form-item',{attrs:{\"label\":\"策略名称\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.form.policyName)+\"\\n          \")]),_c('el-form-item',{attrs:{\"label\":\"首页方案\"}},[_c('Table',{attrs:{\"selection-type\":\"none\",\"header\":_vm.homepageTableHeader,\"data\":_vm.form.childHpList}})],1)],1)],1)],1)],1),(_vm.activePage === 'showHomePageDetail')?_c('PageContentWrapper',[_c('HomePageInfo',{attrs:{\"id\":_vm.homePageId,\"init-mode\":\"read\",\"version\":_vm.homePageVersion,\"title-prefix\":_vm.title},on:{\"upsert-end\":function($event){_vm.activePage = 'policy_info'},\"go-back\":function($event){_vm.activePage = 'policy_info'}}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<PageWrapper class=\"policy-info-wrapper\">\n  <PageContentWrapper v-show=\"activePage === 'policy_info'\">\n    <ContentCard :title=\"title\" @go-back=\"$emit('go-back')\">\n      <!--新增编辑界面-->\n      <CommonContent\n        :mode=\"mode\"\n        :resource-info=\"resourceInfo\"\n        @replicate=\"mode = 'replicate'\"\n        @edit=\"mode = 'edit'\"\n        @unaudit=\"$emit('upsert-end')\"\n        @shelves=\"fetchData\"\n        @submit-audit=\"submitBtn(3)\"\n        @save-draft=\"submitBtn(2)\"\n        @audit=\"$emit('upsert-end')\"\n        @select-version=\"fetchData\"\n        @delete=\"$emit('upsert-end', $event)\">\n        <div class=\"form-legend-header\">\n          <i class=\"el-icon-edit\">基本信息</i>\n        </div>\n        <DataForm ref=\"form\" :model=\"form\" label-width=\"120px\">\n          <el-form-item label=\"策略名称\">\n            {{ form.policyName }}\n          </el-form-item>\n          <el-form-item label=\"首页方案\">\n            <Table\n            selection-type=\"none\"\n            :header=\"homepageTableHeader\"\n            :data=\"form.childHpList\"/>\n          </el-form-item>\n        </DataForm>\n      </CommonContent>\n    </ContentCard>\n  </PageContentWrapper>\n  <PageContentWrapper v-if=\"activePage === 'showHomePageDetail'\">\n    <HomePageInfo\n      :id=\"homePageId\"\n      init-mode=\"read\"\n      :version=\"homePageVersion\"\n      :title-prefix=\"title\"\n      @upsert-end=\"activePage = 'policy_info'\"\n      @go-back=\"activePage = 'policy_info'\"\n    />\n  </PageContentWrapper>\n</PageWrapper>\n</template>\n<script>\nimport PageWrapper from '@/components/PageWrapper'\nimport PageContentWrapper from '@/components/PageContentWrapper'\nimport CommonContent from '@/components/CommonContent.vue'\nimport HomePageInfo from '../HomePageInfo'\nimport HomepageSelector from '@/components/selectors/HomepageSelector'\nimport titleMixin from '@/mixins/title'\nimport { cloneDeep } from 'lodash'\nimport { Table } from 'admin-toolkit'\nexport default {\n  mixins: [titleMixin],\n  components: {\n    Table,\n    CommonContent,\n    HomePageInfo,\n    PageWrapper,\n    PageContentWrapper\n  },\n  props: ['id', 'initMode', 'version', 'policyType'],\n  data () {\n    const isTestPolicy = this.isTestPolicy\n    return {\n      activePage: 'policy_info',\n      mode: undefined,\n      form: {\n        policyId: null,\n        policyName: null,\n        macStart: isTestPolicy ? '' : '000000000000',\n        macEnd: 'ffffffffffff',\n        homePageVerEnd: '9999999',\n        homePageVerStart: '',\n        priority: null,\n        policyStatus: 3,\n        deviceInfos: [], // 机型机芯{chip:'',model:''}\n        normalHpList: [],\n        childHpList: [],\n        regionCityPairs: [],\n        specialNormalHp: [],\n        specialChildHp: []\n      },\n      formRules: {\n      },\n      ageOptions: [],\n      ageEnums: {}\n    }\n  },\n  computed: {\n    // eslint-disable-next-line\n    resourceInfo() {\n      const form = this.form\n      const menuElId = 'childPolicy'\n      if (form.policyId) {\n        return {\n          id: form.policyId,\n          type: 'policy',\n          menuElId,\n          version: form.currentVersion,\n          status: form.policyStatus\n        }\n      }\n    },\n    resourceName () {\n      const resourceNameMap = {\n        normal: '策略',\n        test: '测试策略',\n        child: '儿童策略'\n      }\n      return resourceNameMap[this.policyType]\n    },\n    homepageTableHeader () {\n      const header = [\n        {\n          label: '年龄',\n          prop: 'age',\n          width: '100px',\n          render: (h, { row }) => {\n            const age = row.age\n            if (age === 0) {\n              return '不限'\n            }\n            return age + '岁'\n          }\n        },\n        {\n          label: '首页方案ID',\n          prop: 'homepageId',\n          width: '150px'\n        },\n        {\n          label: '首页方案名称',\n          prop: 'homepageName',\n          render: (h, { row }) => {\n            if (row.homepageId) {\n              return h('el-button', {\n                props: {\n                  type: 'text'\n                },\n                on: {\n                  click: () => {\n                    this.handlePreviewHomepage(row)\n                  }\n                }\n              }, row.homepageName)\n            }\n          }\n        }\n      ]\n      if (this.mode !== 'read') {\n        header.push({\n          label: '操作',\n          width: '200px',\n          render: (h, { row, $index }) => {\n            return h(HomepageSelector, {\n              props: {\n                title: '选择方案',\n                selectionType: 'single',\n                homepageModel: 'child'\n              },\n              on: {\n                'select-end': (result) => {\n                  this.handleSelectHomepageEnd($index, result)\n                }\n              }\n            })\n          }\n        })\n      }\n      return header\n    }\n  },\n  methods: {\n    getHomepageInfo (homepage, preset) {\n      return {\n        homepageId: homepage.homepageId,\n        homepageModel: homepage.homepageModel,\n        homepageName: homepage.homepageName,\n        homepageVersion: homepage.homepageVersion,\n        ...preset\n      }\n    },\n    handlePreviewHomepage (homepage) {\n      this.homePageId = homepage.homepageId\n      this.homePageVersion = homepage.currentVersion\n      this.activePage = 'showHomePageDetail'\n    },\n    handleSelectHomepageEnd (index, [homepage]) {\n      const childHpList = this.form.childHpList\n      const oldHomepage = childHpList[index]\n      childHpList.splice(index, 1, this.getHomepageInfo(homepage, { age: oldHomepage.age }))\n    },\n    getFormData () {\n      const data = cloneDeep(this.form)\n      return data\n    },\n    validateFormData (data, cb) {\n      this.$refs.form.$refs.form.validate(valid => {\n        if (valid) {\n          const { childHpList } = data\n          const unset = childHpList.find(item => !item.homepageId)\n          if (unset) {\n            return this.$message.error(`每一个年龄都需要设置首页方案`)\n          }\n          cb()\n        } else {\n          this.$message({\n            type: 'error',\n            message: '请把表单填写完整'\n          })\n        }\n      })\n    },\n    parseDataToApi (data) {\n      data.childHpList = data.childHpList.map((item) => {\n        return {\n          homepageId: item.homepageId,\n          age: item.age\n        }\n      })\n      data.normalHpList = data.normalHpList.map((item) => {\n        return {\n          homepageId: item.homepageId\n        }\n      })\n\n      if (this.mode === 'replicate') {\n        data.currentVersion = ''\n      }\n      return data\n    },\n    submitBtn (status) {\n      const data = this.getFormData()\n      data.policyStatus = status\n      this.validateFormData(data, () => {\n        const options = {\n          jsonStr: JSON.stringify(this.parseDataToApi(data))\n        }\n        this.$service.childPolicyConfSave(options, '保存成功').then(data => {\n          this.$emit('upsert-end')\n        })\n      })\n    },\n    setData (data) {\n      data = cloneDeep(data)\n      const childHpListIndexed = data.childHpList.reduce((result, item) => {\n        result[item.age + ''] = item\n        return result\n      }, {})\n      const childHpList = this.ageOptions.map(item => {\n        return {\n          age: item.value,\n          ...childHpListIndexed[item.value + '']\n        }\n      })\n      this.form = {\n        currentVersion: data.currentVersion,\n        policyId: data.policyId,\n        policyName: data.policyName,\n        macStart: data.macStart,\n        macEnd: data.macEnd,\n        homePageVerEnd: data.homePageVerEnd,\n        homePageVerStart: data.homepageVerStart,\n        priority: data.priority,\n        policyStatus: data.policyStatus,\n        deviceInfos: [],\n        normalHpList: data.normalHpList,\n        childHpList: childHpList,\n        platform: data.platform,\n        regionCityPairs: [],\n        specialNormalHp: [],\n        specialChildHp: []\n      }\n    },\n    fetchData (version) {\n      const options = { id: this.id, version }\n      this.$service.getChildPolicyConfDetail(options).then(this.setData)\n    }\n  },\n  created () {\n    this.mode = this.initMode || 'create'\n    this.$service.getDictType({ type: 'childAge' }).then(data => {\n      this.ageOptions = data.map(item => {\n        return {\n          label: item.dictCnName,\n          value: +item.dictEnName,\n          disabled: item.disabled\n        }\n      })\n      this.ageEnums = data.reduce((result, item) => {\n        result[item.dictEnName] = item.dictCnName\n        return result\n      }, {})\n      if (this.id) {\n        this.fetchData(this.version)\n      }\n    })\n  }\n}\n</script>\n<style lang=\"stylus\" scoped>\n.tip\n  font-size: 12px\n  margin-left: 10px\n.el-tag\n  cursor: pointer;\n.child-homepage-item\n  position relative\n  width 380px\n  border 1px solid #ccc\n  display inline-block\n  margin 10px 10px 0 0\n  padding 10px\n  .el-icon-close\n    position absolute\n    top 10px\n    right 10px\n    cursor pointer\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChildPolicyInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChildPolicyInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChildPolicyInfo.vue?vue&type=template&id=dcdcd190&scoped=true&\"\nimport script from \"./ChildPolicyInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./ChildPolicyInfo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ChildPolicyInfo.vue?vue&type=style&index=0&id=dcdcd190&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dcdcd190\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('TabPage',[_c('PageWrapper',[_c('PageContentWrapper',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activePage == 'matching'),expression:\"activePage == 'matching'\"}]},[_c('ContentCard',{attrs:{\"title\":\"主页匹配\"}},[_c('div',{attrs:{\"slot\":\"actions\"},slot:\"actions\"}),_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-form',{directives:[{name:\"form-autocomplete\",rawName:\"v-form-autocomplete\"}],ref:\"form\",attrs:{\"model\":_vm.filter,\"rules\":_vm.rules,\"label-width\":\"80px\"},nativeOn:{\"reset\":function($event){$event.preventDefault();return _vm.handleFilterReset($event)},\"submit\":function($event){return _vm.handleFilter($event)}}},[_c('el-form-item',{attrs:{\"label\":\"模式\"}},[_c('el-radio-group',{model:{value:(_vm.filter.pattern),callback:function ($$v) {_vm.$set(_vm.filter, \"pattern\", $$v)},expression:\"filter.pattern\"}},_vm._l((_vm.patternOptions),function(item){return _c('el-radio',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(\"\\n                  \"+_vm._s(item.label)+\"\\n                \")])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"fMode\"}},[_c('el-radio-group',{model:{value:(_vm.filter.fMode),callback:function ($$v) {_vm.$set(_vm.filter, \"fMode\", $$v)},expression:\"filter.fMode\"}},_vm._l((_vm.fModeOptions),function(item){return _c('el-radio',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(\"\\n                  \"+_vm._s(item.label)+\"\\n                \")])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"机型\",\"prop\":\"model\"}},[_c('el-input',{attrs:{\"autocomplete\":\"on\",\"name\":\"model\",\"placeholder\":\"机型\",\"clearable\":\"\"},model:{value:(_vm.filter.model),callback:function ($$v) {_vm.$set(_vm.filter, \"model\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"filter.model\"}})],1),_c('el-form-item',{attrs:{\"label\":\"机芯\",\"prop\":\"chip\"}},[_c('el-input',{attrs:{\"autocomplete\":\"on\",\"name\":\"chip\",\"placeholder\":\"机芯\",\"clearable\":\"\"},model:{value:(_vm.filter.chip),callback:function ($$v) {_vm.$set(_vm.filter, \"chip\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"filter.chip\"}})],1),_c('el-form-item',{attrs:{\"label\":\"Mac\",\"prop\":\"mac\"}},[_c('el-input',{attrs:{\"autocomplete\":\"on\",\"name\":\"mac\",\"placeholder\":\"mac地址, 12 位[0-9a-fA-F]字符\",\"clearable\":\"\"},model:{value:(_vm.filter.mac),callback:function ($$v) {_vm.$set(_vm.filter, \"mac\", $$v)},expression:\"filter.mac\"}})],1),_c('el-form-item',{attrs:{\"label\":\"屏幕尺寸\",\"prop\":\"screenSize\"}},[_c('el-input',{attrs:{\"autocomplete\":\"on\",\"name\":\"screenSize\",\"placeholder\":\"屏幕尺寸, 正整数，例如 60\",\"clearable\":\"\"},model:{value:(_vm.filter.screenSize),callback:function ($$v) {_vm.$set(_vm.filter, \"screenSize\", _vm._n($$v))},expression:\"filter.screenSize\"}})],1),_c('el-form-item',{attrs:{\"label\":\"主页版本\",\"prop\":\"homepageVersion\"}},[_c('el-input',{attrs:{\"autocomplete\":\"on\",\"name\":\"homepageVersion\",\"placeholder\":\"主页版本\",\"clearable\":\"\"},model:{value:(_vm.filter.homepageVersion),callback:function ($$v) {_vm.$set(_vm.filter, \"homepageVersion\", $$v)},expression:\"filter.homepageVersion\"}})],1),_c('el-form-item',{attrs:{\"label\":\"整机版本\",\"prop\":\"tcVersion\"}},[_c('el-input',{attrs:{\"autocomplete\":\"on\",\"name\":\"tcVersion\",\"placeholder\":\"整机版本\",\"clearable\":\"\"},model:{value:(_vm.filter.tcVersion),callback:function ($$v) {_vm.$set(_vm.filter, \"tcVersion\", $$v)},expression:\"filter.tcVersion\"}})],1),_c('el-form-item',{attrs:{\"label\":\"设备ID\",\"prop\":\"devId\"}},[_c('el-input',{attrs:{\"autocomplete\":\"on\",\"name\":\"devId\",\"placeholder\":\"设备ID\",\"clearable\":\"\"},model:{value:(_vm.filter.devId),callback:function ($$v) {_vm.$set(_vm.filter, \"devId\", $$v)},expression:\"filter.devId\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"native-type\":\"submit\",\"type\":\"primary\"}},[_vm._v(\"查询\")]),_c('el-button',{attrs:{\"native-type\":\"reset\"}},[_vm._v(\"重置\")])],1)],1)],1),_c('el-col',{attrs:{\"span\":16}},[_c('pre',{staticClass:\"result-viwer\"},[_vm._v(_vm._s(_vm.matchResultStr))]),_c('div',[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.matchResult.policy_id),expression:\"matchResult.policy_id\"}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePreviewPolicy(_vm.matchResult.policy_id)}}},[_vm._v(\"预览策略（\"+_vm._s(_vm.matchResult.policy_id)+\"）\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.matchResult.homepage_id),expression:\"matchResult.homepage_id\"}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handlePreviewHomepage(_vm.matchResult.homepage_id)}}},[_vm._v(\"预览首页方案（\"+_vm._s(_vm.matchResult.homepage_id)+\"）\")])],1)])],1)],1)],1),(_vm.activePage == 'policy')?_c('PageContentWrapper',[(_vm.policyPattern === 'child')?_c('ChildPolicy',{attrs:{\"id\":_vm.policyId,\"init-mode\":\"read\"},on:{\"upsert-end\":function($event){_vm.activePage = 'matching'},\"go-back\":function($event){_vm.activePage = 'matching'}}}):_c('Policy',{attrs:{\"id\":_vm.policyId,\"init-mode\":\"read\"},on:{\"upsert-end\":function($event){_vm.activePage = 'matching'},\"go-back\":function($event){_vm.activePage = 'matching'}}})],1):_vm._e(),(_vm.activePage == 'homepage')?_c('PageContentWrapper',[_c('HomePageInfo',{attrs:{\"id\":_vm.homepageId,\"init-mode\":\"read\"},on:{\"upsert-end\":function($event){_vm.activePage = 'matching'},\"go-back\":function($event){_vm.activePage = 'matching'}}})],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <TabPage>\n  <PageWrapper>\n    <PageContentWrapper v-show=\"activePage == 'matching'\">\n      <ContentCard title=\"主页匹配\">\n        <div slot=\"actions\"></div>\n        <el-row :gutter=\"20\">\n          <el-col :span=\"8\">\n            <el-form\n              v-form-autocomplete\n              @reset.native.prevent=\"handleFilterReset\"\n              @submit.native=\"handleFilter\"\n              :model=\"filter\"\n              :rules=\"rules\"\n              ref=\"form\"\n              label-width=\"80px\">\n              <el-form-item label=\"模式\">\n                <el-radio-group v-model=\"filter.pattern\">\n                  <el-radio v-for=\"item in patternOptions\" :key=\"item.value\" :label=\"item.value\">\n                    {{ item.label }}\n                  </el-radio>\n                </el-radio-group>\n              </el-form-item>\n              <el-form-item label=\"fMode\">\n                <el-radio-group v-model=\"filter.fMode\">\n                  <el-radio v-for=\"item in fModeOptions\" :key=\"item.value\" :label=\"item.value\">\n                    {{ item.label }}\n                  </el-radio>\n                </el-radio-group>\n              </el-form-item>\n              <el-form-item label=\"机型\" prop=\"model\">\n                <el-input autocomplete=\"on\" name=\"model\" v-model.trim=\"filter.model\" placeholder=\"机型\" clearable></el-input>\n              </el-form-item>\n              <el-form-item label=\"机芯\" prop=\"chip\">\n                <el-input autocomplete=\"on\" name=\"chip\" v-model.trim=\"filter.chip\" placeholder=\"机芯\" clearable></el-input>\n              </el-form-item>\n              <el-form-item label=\"Mac\" prop=\"mac\">\n                <el-input autocomplete=\"on\" name=\"mac\" v-model=\"filter.mac\" placeholder=\"mac地址, 12 位[0-9a-fA-F]字符\" clearable></el-input>\n              </el-form-item>\n              <el-form-item label=\"屏幕尺寸\" prop=\"screenSize\">\n                <el-input autocomplete=\"on\" name=\"screenSize\" v-model.number=\"filter.screenSize\" placeholder=\"屏幕尺寸, 正整数，例如 60\" clearable></el-input>\n              </el-form-item>\n              <el-form-item label=\"主页版本\" prop=\"homepageVersion\">\n                <el-input autocomplete=\"on\" name=\"homepageVersion\" v-model=\"filter.homepageVersion\" placeholder=\"主页版本\" clearable></el-input>\n              </el-form-item>\n              <el-form-item label=\"整机版本\" prop=\"tcVersion\">\n                <el-input autocomplete=\"on\" name=\"tcVersion\" v-model=\"filter.tcVersion\" placeholder=\"整机版本\" clearable></el-input>\n              </el-form-item>\n              <el-form-item label=\"设备ID\" prop=\"devId\">\n                <el-input autocomplete=\"on\" name=\"devId\" v-model=\"filter.devId\" placeholder=\"设备ID\" clearable></el-input>\n              </el-form-item>\n              <el-form-item>\n                <el-button native-type=\"submit\" type=\"primary\">查询</el-button>\n                <el-button native-type=\"reset\">重置</el-button>\n              </el-form-item>\n            </el-form>\n          </el-col>\n          <el-col :span=\"16\">\n            <pre class=\"result-viwer\">{{ matchResultStr }}</pre>\n            <div >\n              <el-button v-show=\"matchResult.policy_id\" @click=\"handlePreviewPolicy(matchResult.policy_id)\" type=\"primary\">预览策略（{{ matchResult.policy_id }}）</el-button>\n              <el-button v-show=\"matchResult.homepage_id\" @click=\"handlePreviewHomepage(matchResult.homepage_id)\" type=\"primary\">预览首页方案（{{ matchResult.homepage_id }}）</el-button>\n            </div>\n          </el-col>\n        </el-row>\n      </ContentCard>\n    </PageContentWrapper>\n    <PageContentWrapper v-if=\"activePage == 'policy'\">\n      <ChildPolicy v-if=\"policyPattern === 'child'\" :id=\"policyId\" init-mode=\"read\" @upsert-end=\"activePage = 'matching'\" @go-back=\"activePage = 'matching'\"/>\n      <Policy v-else :id=\"policyId\" init-mode=\"read\" @upsert-end=\"activePage = 'matching'\" @go-back=\"activePage = 'matching'\"/>\n    </PageContentWrapper>\n    <PageContentWrapper v-if=\"activePage == 'homepage'\">\n      <HomePageInfo :id=\"homepageId\" init-mode=\"read\" @upsert-end=\"activePage = 'matching'\" @go-back=\"activePage = 'matching'\" />\n    </PageContentWrapper>\n  </PageWrapper>\n  </TabPage>\n</template>\n<script>\nimport TabPage from '@/components/TabPage'\nimport PageWrapper from '@/components/PageWrapper'\nimport PageContentWrapper from '@/components/PageContentWrapper'\nimport HomePageInfo from '../homePageManage/HomePageInfo'\nimport Policy from './Policy'\nimport ChildPolicy from '../homePageManage/child-policy/ChildPolicyInfo'\nexport default {\n  components: {\n    TabPage,\n    Policy,\n    ChildPolicy,\n    HomePageInfo,\n    PageWrapper,\n    PageContentWrapper\n  },\n  data () {\n    return {\n      activePage: 'matching',\n      homepageId: undefined,\n      policyId: undefined,\n      policyPattern: undefined,\n      matchResult: '',\n      fModeOptions: [\n        {\n          label: '无',\n          value: 'Default'\n        },\n        {\n          label: '卖场模式',\n          value: 'Other'\n        }\n      ],\n      patternOptions: [\n        {\n          label: '标准模式',\n          value: 'normal'\n        },\n        {\n          label: '儿童模式',\n          value: 'child'\n        }\n      ],\n      filter: this.genDefaultFilter(),\n      rules: {\n        model: [\n          {\n            required: true,\n            message: '请输入机型'\n          }\n        ],\n        chip: [\n          {\n            required: true,\n            message: '请输入机芯'\n          }\n        ],\n        screenSize: [\n          {\n            validator: (rule, value, cb) => {\n              const reg = /^[1-9]\\d*$/\n              if (value !== '' && !reg.test(value)) {\n                return cb(new Error('屏幕尺寸应该为一个正整数'))\n              }\n              cb()\n            }\n          }\n        ],\n        mac: [\n          {\n            validator: (rule, value, cb) => {\n              const reg = /^[0-9a-fA-F]{12}$/\n              if (value && !reg.test(value)) {\n                return cb(new Error('请输入 12 位[0-9a-fA-F]字符'))\n              }\n              cb()\n            }\n          }\n        ],\n        homepageVersion: [\n          {\n            validator: (rule, value, cb) => {\n              const regExp = /^[0-9]{7}$/\n              if (value && !regExp.test(value)) {\n                return cb(new Error('格式不正确，应该 7 位数字'))\n              }\n              cb()\n            }\n          }\n        ],\n        tcVersion: [\n          {\n            validator: (rule, value, cb) => {\n              const regExp = /^[0-9]{1,9}$/\n              if (value && !regExp.test(value)) {\n                return cb(new Error('格式应为不超过 9 位的数字'))\n              }\n              cb()\n            }\n          }\n        ]\n      }\n    }\n  },\n  computed: {\n    // eslint-disable-next-line\n    matchResultStr () {\n      const matchResult = this.matchResult\n      if (matchResult) {\n        return JSON.stringify(matchResult, undefined, 2)\n      }\n    }\n  },\n  methods: {\n    genDefaultFilter () {\n      return {\n        pattern: 'normal',\n        fMode: 'Default',\n        chip: '',\n        model: '',\n        mac: '',\n        screenSize: '',\n        homepageVersion: '',\n        tcVersion: '',\n        devId: ''\n      }\n    },\n    handleFilter (event) {\n      this.matchResult = ''\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          const filter = this.filter\n          const policyPattern = filter.pattern\n          this.$service.homepageMatchingList(filter).then((result) => {\n            this.policyPattern = policyPattern\n            this.matchResult = result\n          })\n        } else {\n          this.$message.error('请把表单填写完整')\n        }\n      })\n    },\n    handleFilterReset () {\n      this.filter = this.genDefaultFilter()\n      this.$nextTick(() => {\n        this.$refs.form.clearValidate()\n      })\n      this.matchResult = ''\n    },\n    handlePreviewHomepage (id) {\n      this.activePage = 'homepage'\n      this.homepageId = id\n    },\n    handlePreviewPolicy (id) {\n      this.activePage = 'policy'\n      this.policyId = id\n    }\n  }\n}\n</script>\n<style lang=\"stylus\" scoped>\n.result-viwer\n  height 360px\n  padding 5px\n  overflow auto\n  border 1px solid #ccc\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomeageMatchingList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomeageMatchingList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomeageMatchingList.vue?vue&type=template&id=6af505cc&scoped=true&\"\nimport script from \"./HomeageMatchingList.vue?vue&type=script&lang=js&\"\nexport * from \"./HomeageMatchingList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HomeageMatchingList.vue?vue&type=style&index=0&id=6af505cc&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6af505cc\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomeageMatchingList.vue?vue&type=style&index=0&id=6af505cc&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomeageMatchingList.vue?vue&type=style&index=0&id=6af505cc&lang=stylus&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChildPolicyInfo.vue?vue&type=style&index=0&id=dcdcd190&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChildPolicyInfo.vue?vue&type=style&index=0&id=dcdcd190&lang=stylus&scoped=true&\""],"sourceRoot":""}