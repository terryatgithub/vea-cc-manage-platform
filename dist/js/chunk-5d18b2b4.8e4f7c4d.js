(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d18b2b4"],{1888:function(e,t,o){},6448:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("TabPage",[o("PolicyList",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],ref:"list",attrs:{"list-props":e.listProps,policyGroupCategory:2},on:{create:e.handleCreate,read:e.handleRead,edit:e.handleEdit,copy:e.handleCopy,delete:e.handleDelete}}),e.isShowList?e._e():o("Policy",{attrs:{"content-props":e.contentProps,id:e.id,"init-mode":e.mode,"init-policy-group-category":2,version:e.version},on:{"upsert-end":e.handleUpsertEnd,"go-back":e.goBack}})],1)},n=[],a=o("bbf7"),r=o("c019"),l=o("99cd"),c="id",s={components:{TabPage:a["a"],PolicyList:r["a"],Policy:l["a"]},data:function(){return{isShowList:!0,id:null,mode:"create",version:void 0}},props:["listProps","contentProps"],computed:{},methods:{handleCreate:function(){this.id=void 0,this.mode="create",this.isShowList=!1},handleEdit:function(e){this.id=e[c],this.mode="edit",this.isShowList=!1},handleRead:function(e,t){this.id=e[c],this.mode="read",this.version=t,this.isShowList=!1},handleCopy:function(e){this.id=e[c],this.mode="copy",this.isShowList=!1},handleDelete:function(e){var t=this;this.$service.policyGroupRemove({id:e.map(function(e){return e[c]}).join(",")},"删除成功").then(function(){t.$refs.list.fetchData()})},handleUpsertEnd:function(e){this.$refs.list.fetchData(),e||(this.isShowList=!0,this.mode="list",this.version=void 0)},goBack:function(){this.isShowList=!0,this.mode="list"}}},p=s,u=o("2877"),d=Object(u["a"])(p,i,n,!1,null,null,null);t["default"]=d.exports},"9dc4":function(e,t,o){"use strict";var i=o("1888"),n=o.n(i);n.a},c019:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("PageWrapper",[o("PageContentWrapper",{directives:[{name:"show",rawName:"v-show",value:"policy"==e.activePage,expression:"activePage == 'policy'"}]},[o("ContentCard",{ref:"contentCard",staticClass:"content"},[o("ContentWrapper",{attrs:{pagination:e.pagination},on:{"filter-change":e.fetchData}},[o("el-form",{ref:"form",attrs:{inline:""},nativeOn:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.handleFilterChange(t))},submit:function(t){return t.preventDefault(),e.handleFilterChange(t)}},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}},[o("el-form-item",[o("InputPositiveInt",{attrs:{name:"id",autocomplete:"on",placeholder:"策略组ID"},model:{value:e.filter.id,callback:function(t){e.$set(e.filter,"id",t)},expression:"filter.id"}})],1),o("el-form-item",[o("el-input",{attrs:{name:"policyGroupName",autocomplete:"on",placeholder:"策略组名称"},model:{value:e.filter.policyGroupName,callback:function(t){e.$set(e.filter,"policyGroupName",t)},expression:"filter.policyGroupName"}})],1),o("el-form-item",[o("el-input",{attrs:{name:"model",autocomplete:"on",placeholder:"机型"},model:{value:e.filter.model,callback:function(t){e.$set(e.filter,"model",t)},expression:"filter.model"}})],1),o("el-form-item",[o("el-input",{attrs:{name:"chip",autocomplete:"on",placeholder:"机芯"},model:{value:e.filter.chip,callback:function(t){e.$set(e.filter,"chip",t)},expression:"filter.chip"}})],1),o("el-form-item",[o("InputPositiveInt",{attrs:{name:"homepageId",autocomplete:"on",placeholder:"首页方案ID"},model:{value:e.filter.homepageId,callback:function(t){e.$set(e.filter,"homepageId",t)},expression:"filter.homepageId"}})],1),o("el-form-item",[o("el-select",{attrs:{placeholder:"状态"},model:{value:e.filter.status,callback:function(t){e.$set(e.filter,"status",t)},expression:"filter.status"}},e._l(e.$consts.statusOptions,function(e){return o("el-option",{key:e.label,attrs:{label:e.label,value:e.value}})}),1)],1),2===e.policyGroupCategory?o("el-form-item",[o("el-input",{attrs:{name:"mac",autocomplete:"on",placeholder:"MAC"},model:{value:e.filter.mac,callback:function(t){e.$set(e.filter,"mac",t)},expression:"filter.mac"}})],1):e._e(),o("el-form-item",[o("el-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("查询")]),o("el-button",{on:{click:e.handleFilterReset}},[e._v("重置")])],1)],1),o("ButtonGroupForListPage",{attrs:{pageName:"policyGroup"},on:{add:e.handleCreate,edit:e.handleEdit,delete:e.handleDelete}}),o("Table",{attrs:{props:e.table.props,header:e.tableHeader,data:e.table.data,selected:e.table.selected,"selection-type":e.table.selectionType,"select-on-row-click":!0},on:{"row-selection-add":e.handleRowSelectionAdd,"row-selection-remove":e.handleRowSelectionRemove,"all-row-selection-change":e.handleAllRowSelectionChange}})],1)],1)],1),"showHomePageDetail"===e.activePage?o("PageContentWrapper",[o("HomePageInfo",{attrs:{id:e.homePageId,"init-mode":"read",version:e.homePageVersion,"title-prefix":e.title},on:{"upsert-end":function(t){e.activePage="policy"},"go-back":function(t){e.activePage="policy"}}})],1):e._e()],1)},n=[],a=(o("28a5"),o("3912")),r=o("59c7"),l=o("2df9"),c=o("2149"),s=o("ce71"),p=o("4bc7"),u=o("5f87"),d=o("056e"),h={extends:a["a"],components:{ContentWrapper:r["ContentWrapper"],Table:r["Table"],ButtonGroupForListPage:l["a"],InputPositiveInt:c["a"],PageWrapper:p["a"],PageContentWrapper:u["a"],HomePageInfo:s["a"]},data:function(){return{canAdd:!1,activePage:"policy",homePageId:void 0,homePageVersion:void 0,resourceType:"policyGroup",selected:[],filter:this.genDefaultFilter(),efficientFilter:this.genDefaultFilter(),pagination:{currentPage:1},table:{props:{},data:[],header:[],selected:[],selectionType:"multiple"}}},computed:{title:function(){return 2===this.policyGroupCategory?"定向策略":"保底策略"},tableHeader:function(){var e=this,t=this.policyGroupCategory,o=[{label:"策略组ID",prop:"id"},{label:"策略组名称",prop:"policyGroupName","show-overflow-tooltip":!0,render:function(t,o){var i=o.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.handleRead(i)}}},i.policyGroupName)}},{label:"关联首页方案",width:150,render:function(t,o){var i=o.row,n=i.normalHomepage||{};return t("el-button",{attrs:{type:"text"},on:{click:function(){e.showHomePageDetail(i.normalHomepage)}}},"".concat(n.homepageName,"(").concat(n.homepageId,")"))}},{label:"机型/机芯",prop:"chip",width:"140",render:function(t,o){var i=o.row,n=e.getModelChipInfo(t,i),a=(i.rlsModelChipList||[]).map(function(e){return"".concat(e.model,"_").concat(e.chip)}).join("\r\n"),r=t(d["a"],{style:{position:"absolute",top:"2px",right:0},props:{content:a}},[t("el-button",{props:{type:"text",icon:"el-icon-copy-document"}},"")]);return t("div",null,[n,r])}},{label:"屏幕尺寸",prop:"screenSize",width:"70"},{label:"版本/状态",prop:"tabStatus",formatter:function(t){var o=t.status,i=t.currentVersion;return"".concat(i,"/").concat(e.$consts.statusText[o])}},{label:"待审核副本",prop:"duplicateVersion",render:function(t,o){var i=o.row;return t("el-button",{attrs:{type:"text"},on:{click:function(){e.handleRead(i,i.duplicateVersion)}}},i.duplicateVersion)}},{label:"更新时间",prop:"lastUpdateDate",width:140},{label:"更新人",prop:"modifierName",width:100},{label:"操作",width:60,fixed:"right",render:function(t,o){var i=o.row,n=[];return e.canAdd&&n.push(t("el-button",{props:{type:"text"},on:{click:function(t){t.stopPropagation(),e.handleCopy(i)}}},"复制")),t("div",null,n)}}],i={label:"mac",width:"130",render:function(t,o){var i=o.row;return e.getMacInfo(t,i)}};return 2===t&&o.splice(4,0,i),o}},props:["policyGroupCategory"],methods:{showHomePageDetail:function(e){this.homePageId=e.homepageId,this.homePageVersion=e.currentVersion,this.activePage="showHomePageDetail"},genDefaultFilter:function(){return{id:"",policyGroupName:"",model:"",chip:"",homepageId:"",status:"",mac:"",policyGroupCategory:this.policyGroupCategory}},fetchData:function(){var e=this,t=this.parseFilter();this.$service.policyGroupList(t).then(function(t){e.pagination.total=t.total,e.table.data=t.rows})},parseFilter:function(){var e=this.pagination,t=JSON.parse(JSON.stringify(this.efficientFilter));return e&&(t.page=e.currentPage,t.rows=e.pageSize),t},handleFilterChange:function(){this.pagination.currentPage=1,this.efficientFilter=JSON.parse(JSON.stringify(this.filter)),this.fetchData()},handleFilterReset:function(){this.filter=this.genDefaultFilter(),this.efficientFilter=this.genDefaultFilter(),this.pagination.currentPage=1,this.fetchData()},getModelChipInfo:function(e,t){var o,i=t.rlsModelChipList||[],n=i.length;return o=n>3?"".concat(n,"个"):i.map(function(t){return e("div","".concat(t.model,"_").concat(t.chip))}),e("div",null,o)},getMacInfo:function(e,t){var o,i=t.mac.split(","),n=i.length;return o=n>3?"".concat(n,"个"):i.map(function(t){return e("div",t)}),e("div",null,o)}},created:function(){var e=this;this.fetchData(),this.$service.getButtonGroupForPageList("policyGroup").then(function(t){e.canAdd=t.some(function(e){return"add"===e.runComm})})}},f=h,m=(o("9dc4"),o("2877")),g=Object(m["a"])(f,i,n,!1,null,"05b5ea0b",null);t["a"]=g.exports}}]);
//# sourceMappingURL=chunk-5d18b2b4.8e4f7c4d.js.map